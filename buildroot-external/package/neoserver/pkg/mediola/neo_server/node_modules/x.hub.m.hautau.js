var x=x||{};x.hub=x.hub||{},x.hub.m=x.hub.m||{},x.hub.m.hautau=x.hub.m.hautau||{},x.hub.m.hautau.HAUTAU_MODULE=require("xnm.aio.hautau.js"),x.hub.m.hautau.Handler=function(){var e=function e(){};return e.prototype.init=function(e){e&&e();},e.prototype.getSystems=function(){return["hautau"];},e.prototype.executeCommandV6=function(e,o,a,r){var n,t={sys:"hautau",ip:o?o.address:null},s=x.hub.m.hautau.HAUTAU_MODULE.resolveGateway(t);if(!s)return(n=new Error("invalid gateway json")).code="000000",void(r&&r(n));var u={sys:"hautau",address:e?e.address:null},l={value:null,ext:null};switch(a.command){case"open":case"close":case"stop":l.value=a.command;break;case"lock":l.value="lockOn";break;case"unlock":l.value="lockOff";break;case"up":l.value="levelUp";break;case"down":l.value="levelDown";break;case"enableKeys":l.value="keyboardOn";break;case"disableKeys":l.value="keyboardOff";break;case"level":l.value="levelTo",l.ext=a.value;}s.executeCommandCreator(u,l,function(e){e&&(e.code="000000"),r&&r(e);});},e.prototype.getStatesV6=function(e,o,a){var r,n=e?e.address:null,t=e?e.subtype:null;if(!n||!t)return(r=new Error("invalid device json")).code="000000",void(a&&a(r));var s={sys:"hautau",ip:o.address},u=x.hub.m.hautau.HAUTAU_MODULE.resolveGateway(s);if(!u)return(r=new Error("invalid gateway json")).code="000000",void(a&&a(r));u.getDeviceStates(n,t,function(o,r){if(o)a&&a(o);else{var n={};if(r)switch(t){case"ventra":case"ventra2":void 0!==r.Level&&null!=r.Level&&(n.state=r.Level,n.keys=!0,"off"==r.Keyboard&&(n.keys=!1),r.Errors&&"no"!=r.Errors&&(n.error=r.Errors),n.filter=r.FilterPercent,n.change=!1,"yes"==r.FilterChange&&(n.change=!0),n.runtime=r.RuntimeLevel0+","+r.RuntimeLevel1+","+r.RuntimeLevel2+","+r.RuntimeLevel3),105==e.model&&(n.temperature=r.Temperature,n.humidity=r.Humidity);break;case"hscd":void 0!==r.WindowClosed&&null!=r.WindowClosed&&(n.state="open","yes"!=r.WindowClosed&&1!=r.WindowClosed&&"true"!=r.WindowClosed||(n.state="closed"),n.down=!1,"yes"!=r.WindowDown&&1!=r.WindowDown&&"true"!=r.WindowDown||(n.down=!0),r.Errors&&"no"!=r.Errors&&(n.error=r.Errors));break;case"hscdi":void 0!==r.WindowClosed&&null!=r.WindowClosed&&(n.state="open","yes"!=r.WindowClosed&&1!=r.WindowClosed&&"true"!=r.WindowClosed||(n.state="closed"),n.down=!1,"yes"!=r.WindowDown&&1!=r.WindowDown&&"true"!=r.WindowDown||(n.down=!0),n.locked=!1,"on"==r.Lock&&(n.locked=!0),r.Errors&&"no"!=r.Errors&&(n.error=r.Errors),void 0!==r.Position&&null!=r.Position&&(n.position=r.Position),void 0!==r.Cycles&&null!=r.Cycles&&(n.cycles=r.Cycles));break;case"multisensor":void 0!==r.Temperature&&null!=r.Temperature&&(n.state=parseFloat(r.Temperature),n.humidity=r.Humidity,n.co2=r.CO2);break;default:n.state="partly_open",r.Opened&&(n.state="open"),r.Closed&&(n.state="closed");}a&&a(null,n);}});},e;}(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.hautau.Handler());