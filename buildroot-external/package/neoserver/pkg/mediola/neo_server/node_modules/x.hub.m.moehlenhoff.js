var x=x||{};x.hub=x.hub||{};x.hub.m=x.hub.m||{};x.hub.m.moehlenhoff=x.hub.m.moehlenhoff||{};x.hub.m.moehlenhoff.APLHA_MODULE=require("xnm.aio.moehlenhoff.js");
x.hub.m.moehlenhoff.Handler=function(){var l=function(){};l.prototype.init=function(b){b&&b()};l.prototype.getSystems=function(){return["moehlenhoff"]};l.prototype.executeCommandV6=function(b,g,a,f){if(b=b?b.address:null)if(g=x.hub.m.moehlenhoff.APLHA_MODULE.resolveGateway({sys:"alpha2",ip:g?g.address:null})){b=b.split(":");b={sys:"alpha2",address:b[0],dpt:"HEATAREA",number:b[1]};var e={value:null,ext:null};switch(a.command){case "temperature":e.value="target_temp";e.ext=a.value;break;case "mode":e.value=
a.value;break;case "weekday":e.value="w_p"+a.value;break;case "weekend":e.value="we_p"+a.value;break;case "disableVacation":e.value="vac_off";b.dpt="DEVICE";break;case "vacation":if(!a.value||!a.value.start||!a.value.end){a=Error("invalid parameter");a.code="000000";f&&f(a);return}e.value="vac_on";e.ext=[{value:"start",ext:a.value.start},{value:"end",ext:a.value.end}];b.dpt="DEVICE"}g.executeCommandCreator(b,e,function(h){h&&(h.code="000000");f&&f(h)})}else a=Error("invalid gateway json"),a.code=
"000000",f&&f(a);else a=Error("invalid device json"),a.code="000000",f&&f(a)};l.prototype.getStatesV6=function(b,g,a){var f=b?b.address:null;f?(b=x.hub.m.moehlenhoff.APLHA_MODULE.resolveGateway({sys:"alpha2",ip:g?g.address:null}))?b._getStates(function(e,h){if(e)a&&a(e);else{e=f.split(":");var c={};if(h)for(var m=0;m<h.length;m++){var k=h[m];if(k&&k.id==e[0]&&(c.vacation="on"==k.vacation?1:0,k.heatAreas))for(var n=0;n<k.heatAreas.length;n++){var d=k.heatAreas[n];d&&d.number==e[1]&&(c.state=d.target_temp/
5,c.temperature=d.actual_temp,c.mode=d.mode,c.battery=d.battery,c.signal=d.signal,c.party=d.party,"active"==d.prog_week_0?c.weekday=0:"active"==d.prog_week_1?c.weekday=1:"active"==d.prog_week_2?c.weekday=2:"active"==d.prog_week_3&&(c.weekday=3),"active"==d.prog_weekend_0?c.weekend=0:"active"==d.prog_weekend_1?c.weekend=1:"active"==d.prog_weekend_2?c.weekend=2:"active"==d.prog_weekend_3&&(c.weekend=3))}}a&&a(null,c)}}):(b=Error("invalid gateway json"),b.code="000000",a&&a(b)):(b=Error("invalid device json"),
b.code="000000",a&&a(b))};return l}();"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.moehlenhoff.Handler);
