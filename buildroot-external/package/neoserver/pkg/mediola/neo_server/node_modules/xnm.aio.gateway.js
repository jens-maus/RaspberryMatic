function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}var xnm=xnm||{};xnm.aio=xnm.aio||{},xnm.aio.gateway=xnm.aio.gateway||{},xnm.aio.gateway.systems=xnm.aio.gateway.systems||{},xnm.aio.gateway.SYSID={KOPP:1,FS20:2,HE:3,IT:4,ELRO:5,EF:6,KL:10,RC:11,IA:13,EO:17,LS:18,L2:19,BC:20,WA:21,HM:22,DY:23,ML:27,IN:28,HO:31,AN:33,MC:34,PE:35,ER:36,SL:37,UR:38,CR:39,DB:40,R2:47,RT:52,CF4:53,CF3:54,KN:58,L3:59,NTH:61},xnm.aio.gateway.VID={MEDIOLA:1,NUEVA:2,SIRAL:4,BRELAG:9,WIR:10,ELTAKO:12},xnm.aio.gateway.REV_SYS_MAP=[["-","F8","F1","F3","F3F0","F2","F4","F3F3","F3F6","F6","F3F8","F9","FA","F3F5","FB","F3F2","FC","FD","E1","E2","C1","C2","C3","C4","CA","EA","E7"],["CODE",0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,-1,1,1,1,1,1,1,0],["KOPP",0,-1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,1,0],["FS20",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,0,1,1,1,1,1,1,1,1,0],["HE",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0,1,0,1,0,1,1,0],["IT",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0,1,0,1,0,1,1,0],["ELRO",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0,1,0,1,0,1,1,0],["EF",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,-1,0,0,0,0,0,0,0,0],["FHT80B",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,0,1,-1,1,1,1,1,1,1,0],["KL",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,-1,0,0,0,0,0,0,0,0],["RC",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,1,-1,0,0,0,0,0,0,0,0],["IA",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0,1,0,1,0,1,1,0],["EO",0,0,0,0,0,0,1,0,0,1,1,1,-1,-1,-1,-1,0,1,1,0,0,1,1,0,1,0],["LS",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0],["L2",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,1,0,1,0,1,0,1,1,0],["BC",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["WA",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,1,1,-1,1,0,1,0,1,0,1,1,0],["HM",0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],["DY",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,1,1,-1,1,0,1,0,1,1,0],["ML",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,1,0],["IN",0,0,0,0,0,0,-1,0,0,-1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,0],["HO",0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0],["AN",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,0,1,0,1,0,0],["MC",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,-1,1,0,1,0,1,1,0],["PE",0,-1,1,1,-1,-1,1,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],["ER",0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,0,1,-1,1,1,1,1,1,1,0],["SL",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,1,0,1,0,1,0,1,1,0],["UR",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,0],["CR",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,1,1,0,1,0,1,0,1,1,0],["DB",0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0],["R2",0,0,0,0,0,0,-1,0,0,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,0],["RT",0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,0],["CF4",0,0,0,0,0,0,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,1,0],["CF3",0,0,0,0,0,0,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,1,0],["KN",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,1,0],["L3",0,1,1,1,1,1,1,0,0,1,1,1,-1,-1,-1,-1,0,1,-1,1,0,1,0,1,1,0],["NTH",0,-1,-1,1,-1,-1,-1,0,0,-1,1,1,-1,-1,-1,-1,1,-1,0,0,0,0,0,0,0,0],["RV",0,-1,1,1,1,1,1,0,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0],["WS300",0,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0],["SIAU",0,0,0,0,1,0,-1,0,0,-1,-1,-1,-1,-1,1,1,0,0,0,0,0,0,0,0,0,0],["IW",0,0,0,0,0,0,-1,0,0,-1,-1,-1,1,1,-1,-1,0,-1,-1,1,1,1,1,1,1,0],["PV",0,1,1,1,-1,-1,1,0,0,1,1,1,-1,-1,-1,-1,-1,1,-1,0,0,0,0,0,1,0],["GQ",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,0,1,0,1,0,1,1,0],["QA",0,0,0,0,0,0,0,0,0,1,1,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0],["FX3",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,0,1,0,1,0,1,1,0],["BK",0,-1,-1,-1,-1,-1,-1,0,0,1,1,1,-1,-1,-1,-1,0,1,0,1,1,1,1,1,1,0],["WR",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,0],["DY2",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,1,0],["BG",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,0],["B4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,1,0],["MX",0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,0,1,0,0,0,0,0,0,1,0],["GV",0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,0,1,0,0,0,0,0,0,1,0],["HU",0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,0,1,0,1,0,1,0,1,0,0],["CL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,1,0],["NY",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["F3",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0],["CM",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],["IV",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],["ENOCEAN",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0],["ZWAVE2",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],["ZIGBEE",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],["KNX",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],["SONOS",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["FRITZ",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["ALPHA",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["NANOLEAF",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["HAUTAU",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["GEALAN",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["SIEGENIA",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["ELTAKO",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["MIP",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["GROUP",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],["ACTION",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0]],xnm.aio.gateway.Gateway=function(e,t){if("undefined"==typeof require||null==require?this._logger={log:function log(){}}:this._logger=require("x.logger.js").getLogger("xnm.aio.gateway.Gateway"),this.isInRemoteMode=!1,this._ip=e,this._port=80,t&&(this._port=t),this.user="user",this.password=null,this.timeout=8e3,this._pwdHash=null,this.isV5=!1,this._INStatesToGet=[],this._HMStatesToGet=[],this._R2StatesToGet=[],this.CommandHandler=null,e){var a=e.split(":");a.length>=2&&(this._ip=a[0],this._port=a[1]),3==a.length&&(this.password=a[2]);}},xnm.aio.gateway.Gateway.isGettingINStates=!1,xnm.aio.gateway.Gateway.isGettingDY2States=!1,xnm.aio.gateway.Gateway.prototype.setRemoteUrl=function(e){this.remoteUrl=e;},xnm.aio.gateway.Gateway.prototype.setCloudAccess=function(e){this.isInRemoteMode=e;},xnm.aio.gateway.Gateway.prototype.setRemoteAccessMode=function(e){var t;this.isInRemoteMode=!0,this._sid=e;try{t=$.parseJSON(XC.localStorage.getItem("RA_KEYS"));}catch(e){}t&&t[e]?this._rakey=t[e]:this._rakey="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF";},xnm.aio.gateway.Gateway.prototype.executeRequest=function(e,t,a){var n=this;if(this.isInRemoteMode)this.executeRemoteCommand(e,t,a);else{var r="http://"+this._ip+":"+this._port+"/command?XC_FNC="+e;if(this.user&&this.password&&(r+="&XC_USER="+this.user+"&XC_PASS="+this.password),t)for(var o in t){r+="&"+o+"="+t[o];}$.ajax({url:r,timeout:this.timeout,cache:!1,success:function success(e){var t=null;if(e&&e.length>=8&&"{XC_SUC}"==e.substr(0,8)){if(e.length>8)try{t={data:$.parseJSON(e.substr(8))};}catch(e){return XC.debugf("request failed: "+e),void(a&&a(null,n._ip));}else t={data:{}};}else e&&e.length>=8&&"{XC_ERR}"==e.substr(0,8)?(t={error:""},e.length>8&&(t={error:e.substr(8)})):e&&e.length>=8&&"{XC_AUT}"==e.substr(0,8)&&(t={error:"AUTH"});a&&a(t,n._ip);},error:function error(){XC.debugf("request failed: "+r),a&&a(null,n._ip);}});}},xnm.aio.gateway.Gateway.prototype.executeRequestV5=function(e,t,a){var n=this;if(this.isInRemoteMode)this.executeRemoteCommandV5(e,t,a);else{var r=!1;-1!=e.indexOf("/")&&(r=!0);var o,s="http://"+this._ip+":"+this._port+"/cmd?XC_FNC="+e;if(r&&(s="http://"+this._ip+":"+this._port+e),!t&&this.password?(t={}).auth=this.password:t&&this.password&&(t.auth=this.password),r){if(t){var i=!0;for(o in t){i?(s+="?"+o+"="+t[o],i=!1):s+="&"+o+"="+t[o];}}}else if(t)for(o in t){s+="&"+o+"="+t[o];}$.ajax({url:s,timeout:this.timeout,cache:!1,complete:function complete(e){var t=null;if(e&&e.responseText?e=e.responseText:e&&e.statusText&&(e=e.statusText),e)if("timeout"!=e){var r=null;try{r=$.parseJSON(e);}catch(r){if("string"!=typeof e||-1==e.indexOf("XC_SUC"))return XC.debugf("request failed: "+r),void(a&&a(null,n._ip));t={data:{}};}r&&r.XC_SUC?t={data:r.XC_SUC}:r&&r.XC_ERR&&(t={error:r.XC_ERR});}else if(a)return void a(null);a&&a(t,n._ip);}});}},xnm.aio.gateway.Gateway.prototype.executeRequestV5Raw=function(e,t,a,n){var r="http://"+this._ip+e,o=0;if(t)for(var s in t){r+=0===o?"?"+s+"="+t[s]:"&"+s+"="+t[s],o++;}var i=a,u=require("url").parse(r);u.port||(u.port=-1!=r.indexOf("https")?443:80);var l={host:u.hostname,port:u.port,path:u.path,method:"POST",headers:{Connection:"close","Content-Type":"text/plain","Content-Length":i.length}},m=n,d=(-1!=r.indexOf("https")?require("https"):require("http")).request(l,function(e){if(200==e.statusCode){e.setEncoding("binary");var t="";e.on("data",function(e){t+=e;}),e.on("end",function(){if(t)if("timeout"!=t&&"error"!=t){var a=null;try{"string"==typeof t?a=$.parseJSON(t):"object"==_typeof(t)&&(a=t);}catch(a){if("string"!=typeof t||-1==t.indexOf("XC_SUC"))return XC.debugf("request failed: "+a),void(m&&m(null));e={data:{}};}a&&a.XC_SUC?e={data:a.XC_SUC}:a&&a.XC_ERR&&(e={error:a.XC_ERR});}else if(m)return void m(null);m&&m(e);});}else m&&(m(null),m=null);});d.on&&"function"==typeof d.on&&d.on("error",function(e){m&&(m(e),m=null);}),d.write(i),d.end();},xnm.aio.gateway.Gateway.prototype.executeRequestV5Plus=function(e,t){var a=this;if(this.isInRemoteMode)this.executeRemoteRequestV5Plus(e,t);else{var n="http://"+this._ip+":"+this._port+"/cmd";e.timeout&&(this.timeout=e.timeout),$.ajax({url:n,type:"POST",data:JSON.stringify(e),contentType:"application/json",timeout:this.timeout,cache:!1,complete:function complete(e){var n=null;if(e&&e.responseText?e=e.responseText:e&&e.statusText&&(e=e.statusText),e)if("timeout"!=e&&"error"!=e){var r=null;try{r=$.parseJSON(e);}catch(r){if("string"!=typeof e||-1==e.indexOf("XC_SUC"))return XC.debugf("request failed: "+r),void(t&&t(null,a._ip));n={data:{}};}r&&r.XC_SUC?n={data:r.XC_SUC}:r&&r.XC_ERR?n={error:r.XC_ERR}:r&&(n={data:{}});}else if(t)return void t(null);t&&t(n,a._ip);}});}},xnm.aio.gateway.Gateway.prototype.executeRemoteCommandV5=function(e,t,a){XC.debugf("REMOTECALL: "+e);var n=this.remoteUrl+this._sid,r="";this._at&&(r=xnm.aio.gateway.Admin.V5._userName+":"+this._at,r=new Buffer(r).toString("base64")),XC.debugf(r+"  "+xnm.aio.gateway.Admin.V5._userName+":"+this._at),t&&t.at&&delete t.at;var o=!1;-1!=e.indexOf("/")&&(o=!0);var s=n+"/cmd?XC_FNC="+e;if(o&&(s=n+e),o){if(t){var i=!0;for(var u in t){i?(s+="?"+u+"="+t[u],i=!1):s+="&"+u+"="+t[u];}}}else if(t)for(var u in t){s+="&"+u+"="+t[u];}$.ajax({headers:{Authorization:"Basic "+r},method:"GET",url:s,dataType:"json",complete:function complete(e){var t=null;if(XC.debugf(e),e.responseText&&(e=e.responseText),e){var n=null;try{n=$.parseJSON(e);}catch(n){if(!e||-1==e.indexOf("XC_SUC"))return XC.debugf("request failed: "+n),void(a&&a(null,self._ip));t={data:{}};}n&&n.XC_SUC?t={data:n.XC_SUC}:n&&n.XC_ERR&&(t={error:n.XC_ERR});}a&&a(t);}});},xnm.aio.gateway.Gateway.prototype.executeRemoteRequestV5Plus=function(e,t){var a=this;XC.debugf("REMOTECALL: V5+"),remoteUrl=this.remoteUrl+this._sid+"/cmd";var n="";this._at&&(n=xnm.aio.gateway.Admin.V5._userName+":"+this._at,n=new Buffer(n).toString("base64")),e.timeout&&(this.timeout=e.timeout),$.ajax({headers:{Authorization:"Basic "+n},url:remoteUrl,type:"POST",data:JSON.stringify(e),contentType:"application/json",timeout:this.timeout,cache:!1,complete:function complete(e){var n=null;if(e.responseText?e=e.responseText:e.statusText&&(e=e.statusText),e)if("timeout"!=e&&"error"!=e){var r=null;try{r=$.parseJSON(e);}catch(r){if("string"!=typeof e||-1==e.indexOf("XC_SUC"))return XC.debugf("request failed: "+r),void(t&&t(null,a._ip));n={data:{}};}r&&r.XC_SUC?n={data:r.XC_SUC}:r&&r.XC_ERR?n={error:r.XC_ERR}:r&&(n={data:{}});}else if(t)return void t(null);t&&t(n,a._ip);}});},xnm.aio.gateway.Gateway.prototype.setCHState=function(e,t){this.CommandHandler&&this.CommandHandler.setState(e,t);},xnm.aio.gateway.Gateway.prototype.getStates=function(e,t,a,n){var r=this,o=[],s=[];this.CommandHandler=e,this._executeRequest("GetStates",null,null,function(i,u){if(u?(r._receivedStates(u,e.getStatesCallback),a&&a(u,r._ip)):(r._receivedStates(null,e.getStatesCallback),a&&a(null,r._ip)),!n){var generateStateDevice=function generateStateDevice(e,t){if(xnm.aio.gateway.systems[e.type]&&xnm.aio.gateway.systems[e.type].DM.MAP[e.data]&&xnm.aio.gateway.systems[e.type].DM.MAP[e.data].status)for(var a=xnm.aio.gateway.systems[e.type].DM.MAP[e.data].status,n=0;n<a.length;n++){var r=a[n];r.ref&&r.ref.value&&t.push({id:e.id+":"+r.ref.value,device:e,status:{value:r.ref.value}});}};if(t){for(var l=0;l<t.length;l++){var m=t[l];if(m&&m.type)switch(m.type){case"IN":generateStateDevice(m,o);break;case"DY2":generateStateDevice(m,s);}}!xnm.aio.gateway.Gateway.isGettingINStates&&o.length>0&&(xnm.aio.gateway.Gateway.isGettingINStates=!0,xnm.aio.gateway.systems.IN.getCurrentStateCreator(r,o,function(t,a){if(!t&&a)for(var n=0;n<a.length;n++){var r=a[n];e.setState(r.id,r.status);}setTimeout(function(){xnm.aio.gateway.Gateway.isGettingINStates=!1;},2e3);})),!xnm.aio.gateway.Gateway.isGettingDY2States&&s.length>0&&(xnm.aio.gateway.Gateway.isGettingDY2States=!0,xnm.aio.gateway.systems.DY2.getCurrentStateCreator(r,s,function(t,a){if(!t&&a)for(var n=0;n<a.length;n++){var r=a[n];e.setState(r.id,r.status);}setTimeout(function(){xnm.aio.gateway.Gateway.isGettingDY2States=!1;},2e3);}));}}});},xnm.aio.gateway.Gateway.prototype.getCommandURL=function(e,t,a){var n=null,r=require("xnm.aio.gateway.js").getGatewayFunctionForType(t.type),o=require("xnm.aio.gateway.js").getGatewayParams(t,e);if(r&&(n="http://"+this._ip+":"+this._port+"/command?XC_FNC="+r,this.user&&this.password&&(n+="&XC_USER="+this.user+"&XC_PASS="+this.password),o))for(var s in o){n+="&"+s+"="+o[s];}return n;},xnm.aio.gateway.Gateway.prototype.wasConnectedToServer=function(e){this._sid?$.ajax({type:"GET",url:"http://mediola-ws.elasticbeanstalk.com/ra/q?sid="+this._sid,contentType:"text/plain",timeout:4e3,cache:!1,complete:function complete(t){var a=-1;if(t&&200!=t.status&&(a=-2),t.responseText&&(t=t.responseText),t&&t.length>2)try{var n=$.parseJSON(t);n.time&&n.log&&n.log.gatewayLastAccess&&(a=(new Date(n.time).getTime()-new Date(n.log.gatewayLastAccess).getTime())/1e3);}catch(e){}e&&e(a);}}):e&&e(-1);},xnm.aio.gateway.Gateway.prototype.executeRemoteCommand=function(e,t,a){XC.debugf("REMOTECALL: "+e);var n=XC.getHexVal(Math.floor(254*Math.random()+1),2)+"AA";n+=XC.getHexVal(Math.round(new Date().getTime()/1e3),8),n+="01";var r="c",o="POST",s=null,i=null,u=null;if("SendSC"==e){i=t.data;var l=xnm.aio.gateway.SYSID[t.type];l&&(s=XC.getHexVal(l,2));}else"Send2"==e?(s="2b",i=t.code,u="",t.ir?u+=t.ir:u+="00",t.rf?u+=t.rf:u+="00"):"SendFHT80b"==e?(s="07",i=t.tsoll?t.hc1+t.hc2+"ff"+XC.getHexVal(parseInt(t.tsoll),2):t.hc1+t.hc2+XC.getHexVal(t.modus,2)+"ff"):"saveGroup"==e?(s="2c",i=t.id+XC.getHexVal(t.active,2)):"GetStates"==e&&(s="getstates",o="GET",r="d");if(s){var m=null;if(i){var d=i.length;u&&(d+=u.length),n+=XC.getHexVal(Math.ceil(d/2)+2,2),n+=s,n+=XC.getHexVal(Math.ceil(d/2),2),n+=i,u&&(n+=u),!n.length%2&&(n+="0");for(var p=0;p<n.length%32;p++){n+="0";}var f=require("x.crypt.js");f.AES.setSize(128);var c=f.AES.h2a(this._rakey),v=f.AES.h2a("764c4518E9055b5239f5a3ff62937234"),y=f.AES.encrypt(f.AES.h2a(n),c,v);m=f.AES.a2h(y);}var h="http://webservice.aio-control.com/ra/";XC.debugf("URL: "+h+r+"?sid="+this._sid),$.ajax({type:o,url:h+r+"?sid="+this._sid,data:m,contentType:"text/plain",timeout:5e3,cache:!1,complete:function complete(e){var t=null;e.responseText&&(e=e.responseText),e&&e.length>=8&&"{XC_SUC}"==e.substr(0,8)&&(t=e.length>8?{data:$.parseJSON(e.substr(8))}:{data:{}}),a&&a(t);}});}else a&&a.call();},xnm.aio.gateway.Gateway.prototype.executeCommand=function(e,t,a){var n=xnm.aio.gateway.DM.getSystem(t);n?n.executeCommandCreator(this,t,{value:e},a):this._exeCMD_old(e,t,a);},xnm.aio.gateway.Gateway.prototype._exeCMD_old=function(e,t,a){var n=require("xnm.aio.gateway.js").getGatewayFunctionForType(t.type),r=require("xnm.aio.gateway.js").getGatewayParams(t,e);if(n&&r){var o=this;this.executeRequest(n,r,function(e){a&&a.call();});}else if("HM"==t.type&&t.channel&&"lamella"==t.channel){o=this;t.channel=null,o.executeCommand("downFor10",t,function(){setTimeout(function(){e>1&&o.executeCommand("upFor"+(parseInt(e)+2),t,function(){a&&a.call();},!1);},500);},!1);}else"RC"==t.type&&"resetAll"==e?this.executeRequest("resetROIS",null,function(e){a&&a.call();}):a&&a.call();},xnm.aio.gateway.Gateway.prototype.executeGatewayCommand=function(e,t){var a={type:"RGB",data:"0000"};"rgbOff"==e?a.data="0000":"rgbWhite"==e?a.data="0005":"rgbRed"==e?a.data="0001":"rgbGreen"==e?a.data="0003":"rgbBlue"==e?a.data="0002":"rgbYellow"==e?a.data="0004":"rgbCyan"==e?a.data="0007":"rgbPurple"==e&&(a.data="0006");this.executeRequest("SendSC",a,function(e){t&&t.call();});},xnm.aio.gateway.Gateway.prototype._receivedStates=function(e,t){var a=this;if(e)for(var n=e.length,r=0;r<n;r++){var o=e[r];o.adr;"HMFHT"===(l=o.type)&&(l="HM");var s=a.CommandHandler.SystemData.getDevices(function(e){return e.info.type==l;});if(s&&s.length>0)for(var i=0;i<s.length;i++){var u=s[i],l=u.info.type;this._isV5P()?"HM"==u.info.type&&(l="HM_X"):this._isV6()&&"HM"==u.info.type&&0==u.info.data.indexOf("ip_")&&(l="HM_X");var m=require("xnm.aio.gateway.js").Systems;if(m[l]&&m[l]._handleState){var d=m[l]._handleState(u.info,o);for(var p in d){d.hasOwnProperty(p)&&a.CommandHandler.setState(u.index+":"+p,d[p]);}}}}t&&t(a.CommandHandler._states);},xnm.aio.gateway.Gateway.prototype._getNextINState=function(){var e=this;if(this._INStatesToGet.length>0){var t=this._INStatesToGet.pop();this.executeRequest("ingetstate",{adr:t.address},function(a){if(a&&a.data&&a.data.state){var n,r=a.data.state;n=t.data?t.data:t.subtype,e.evaluateINState(t.id,n,r);}setTimeout(function(){e._getNextINState();},250);});}else e._getNextR2State();},xnm.aio.gateway.Gateway.prototype._getNextR2State=function(){var e=this;if(this._R2StatesToGet.length>0){var t=this._R2StatesToGet.pop();this.executeRequest("refreshSC",{type:"R2",adr:t.address.substr(0,4)},function(a){if(a&&a.data&&a.data.state){var n=parseInt(a.data.state,16);e.setCHState(t.id,n);}e._getNextR2State();});}else e._getNextHMState();},xnm.aio.gateway.Gateway.prototype._getNextHMState=function(e){var t=this;if(this._HMStatesToGet.length>0){var a=this._HMStatesToGet.pop();this.executeRequest("refreshhm",{adr:a.address},function(n){if(n&&n.data&&n.data.state){var r=n.data.state;t.evaluateHMState(a.id,a.data,parseInt(r,16),0);}t._getNextHMState(e);});}else e&&e();},xnm.aio.gateway.Gateway.prototype.evaluateINState=function(e,t,a){if(XC.debugf("IN: "+a+" - "+e+" - "+t),8!=a.length&&20!=a.length||(a=a.substr(2)),"fan"==t||"fanV2"==t){n="03"==(n=a.substr(0,2))||"0C"==n||"0D"==n?"standby":"04"==n?"level1":"05"==n?"level2":"06"==n?"level3":"07"==n||"0F"==n?"turbo":"08"==n||"09"==n||"0A"==n||"0B"==n?"auto":"11"==n||"12"==n||"13"==n||"14"==n?"night":"0E"==n?"error":"?",this.setCHState(e,n);}else{var n=a.substr(0,2),r=a.substr(4,2),o=a.substr(2,2);32==a.length&&(n=a.substr(2,2),r=a.substr(26,2),o=a.substr(18,2));var s="undefined",i=parseInt(n,16);128&i?o=r="?":(2&i?s="low1":64&i?s="low2":16&i?s="temp":8&i&&(s="temp2"),(i=100-parseInt(r,16))>100&&(i=100),i<0&&(i=0),r=""+i,i=parseInt(o,16),(i=Math.floor((i+1)/4))>15&&(i=15),o=""+(i+1)),this.setCHState(e+":error",s),this.setCHState(e,r),this.setCHState(e+":lamella",o);}},xnm.aio.gateway.Gateway.prototype.evaluateIWState=function(e,t){var a=parseInt(t,16),n="?";16&a&&(1&a?(n="tilted",this.setCHState(e+":text",window.XC_Text[n])):2&a?(n="closed",this.setCHState(e+":text",window.XC_Text[n])):(n="open",this.setCHState(e+":text",window.XC_Text.opened)),4&a?this.setCHState(e+":error","low"):8&a?this.setCHState(e+":error","timeout"):this.setCHState(e+":error",null)),this.setCHState(e,n);},xnm.aio.gateway.Gateway.prototype.evaluateHMState=function(e,t,a,n){var r=null;if("dimmer"==t||"blind"==t||"shutter"==t||"awning"==t||"venetian"==t||"raffstore"==t||"hum"==t||"esco-window"==t?255!=a&&(r=a/2,"blind"==t||"shutter"==t||"awning"==t||"venetian"==t||"raffstore"==t||"esco-window"==t?r=100-r:"dimmer"==t&&(r=5*Math.floor(r/5))):"0042"==t||"0045"==t||"004A"==t||"00C1"==t||"00B2"==t||"00C0"==t?(r="OK",254==n?r="battery":("004A"!=t&&"00C1"!=t&&"00C0"!=t||200!=a||(r="motion"),"0042"==t&&200==a?r="smoke":"0045"!=t&&"00B2"!=t||100!=a?"0045"!=t&&"00B2"!=t||200!=a||(r="water"):r="moist"),XC.debugf("hmstate: "+t+" "+r+" - "+a+" - "+n),this.setCHState(e+":text",window.XC_Text[r])):"window"==t||"door"==t||"sensor"==t?100==a?(r="tilted",this.setCHState(e+":text",window.XC_Text.tilted)):200==a?(r="open",this.setCHState(e+":text",window.XC_Text.opened)):0==a?(r="closed",this.setCHState(e+":text",window.XC_Text.closed)):254==a&&(r="battery"):(200==a?r="on":0==a&&(r="off"),255!=a&&"rooflight"==t&&200!=a&&(r="off")),null!=r)return this.setCHState(e,r),r;},xnm.aio.gateway.Gateway.prototype.getHEState=function(e){if("FF"==e)return"?";var t,a=parseInt(e,16);return 0==(24&a)?4&a?t="on":2&a&&(t="off"):2&a?t="on":1&a&&(t="off"),t;},xnm.aio.gateway.Gateway.prototype.getRCState=function(e,t){if("FF"==t)return"?";var a,n=parseInt(t,16);return"window"!=e&&"door"!=e||(0==n?a="closed":1==n&&(a="opened")),a;},xnm.aio.gateway.Gateway.prototype.getKOPPState=function(e,t){var a="?";return"window"!=e&&"door"!=e||("10"==t?a="closed":"20"==t&&(a="opened")),a;},xnm.aio.gateway.Gateway.prototype.getITState=function(e){var t;return"0E"==e?t="on":"06"==e&&(t="off"),t;},xnm.aio.gateway.Gateway.prototype.getSIAUState=function(e,t){var a=null;if("SIAU"==e||"SIAUD"==e)2==t.length&&(a="0"==(n=t.charAt(0))?"open":"1"==n?"tilted":"2"==n?"closed":"?","1"==(n=t.charAt(1))?a+="_low":"2"==n&&(a+="_err"));else if("SIAUR"==e||"SIAUG"==e){var n;if(2==t.length)"?"!=(a="0"==(n=t.charAt(1))?"ok":"1"==n?"battery":"2"==n?"timeout":"?")&&"1"==t.charAt(0)&&(a+="_alarm");}return a;},xnm.aio.gateway.Flasher=function(e,t,a){this._ip=e,this._mac=t.mac,this._updateinfo=t,this._callback=a,this._fwstart=0,this._fwlength=0,this._fwfile=null,this._blockSize=262,this._currentBlock=0,this._flashTimeout=null,this._flashRetrys=0,this._isFlashingRF=!1,this._rffwstart=0,this._rffwstart=0,this._rffwlength=0;var n=require("dgram");this._socket=n.createSocket("udp4");var r=this;this._socket.on("error",function(e){r._end(-1);}),this._socket.on("message",function(e,t){r._evalMessage(e);});},xnm.aio.gateway.Flasher.prototype._end=function(e){this._socket.close(),this._callback(e);},xnm.aio.gateway.Flasher.prototype._evalMessage=function(e){if(6==(e=e.toString("hex")).length&&"0"==e.charAt(0)&&"1"==e.charAt(1)){var t=(parseInt(e.substr(4,2),16)<<8)+parseInt(e.substr(2,2),16);if(t==this._currentBlock){clearTimeout(this._flashTimeout),this._flashRetrys=0,this._currentBlock++,this._flashNextBlock();var a,n=this._fwlength/this._blockSize+this._rffwlength/this._blockSize;a=this._isFlashingRF?(this._fwlength/this._blockSize+t)/n:t/n,a=Math.floor(100*a),this._callback(a);}else 65535==t&&0!=this._currentBlock&&(clearTimeout(this._flashTimeout),this._flashRetrys=0,this._currentBlock=0,this._isFlashingRF&&(this._rffwlength=0),0!=this._rffwlength?(this._isFlashingRF=!0,this._flashNextBlock()):this._end(100));}},xnm.aio.gateway.Flasher.prototype._flashNextBlock=function(){var e=require("fs"),t=this,a=this._fwlength,n=this._fwstart,r="FWU:",o=400;if(this._isFlashingRF&&(a=this._rffwlength,n=this._rffwstart,r="RFU:",o=600),a/this._blockSize>this._currentBlock)e.readFileBinary(this._fwfile,n+this._currentBlock*this._blockSize,this._blockSize,function(e,a){if(!e&&a){var n=new Buffer(XC.getBytes(r).concat(XC.getBytes(t._mac.replace(/-/g,""),!0)).concat(XC.getBytes(a,!0)));t._socket.send(n,0,n.length,1901,t._ip);}});else{var s=new Buffer(XC.getBytes("RST:").concat(XC.getBytes(this._mac.replace(/-/g,""),!0)));this._socket.send(s,0,s.length,1901,this._ip);}this._flashTimeout=setTimeout(function(){t._flashRetrys++,t._flashRetrys<=10?t._flashNextBlock():t._end(-1);},o);},xnm.aio.gateway.Flasher.prototype._flashGateway=function(e,t){if(this._fwstart=0,this._fwlength=0,this._currentBlock=0,this._rffwstart=0,this._rffwlength=0,null!=e&&e.length>0){var a=e.split("@");if(a.length>0){var n=a[0].split("_");if(5==n.length&&(this._fwstart=parseInt(t)+parseInt(n[3]),this._fwlength=parseInt(n[4])),this._updateinfo.rfv)for(var r=1;r<a.length;r++){if(5==(n=a[r].split("_")).length&&n[1]==this._updateinfo.rfv){this._rffwstart=parseInt(t)+parseInt(n[3]),this._rffwlength=parseInt(n[4]);break;}}}}else this._fwlength=t;var o=this._fwlength/this._blockSize;this._rffwlength,this._blockSize;if(o>0){var s=this;xnm.aio.gateway.Admin.resetGateway(this._ip,this._mac,!1,function(){s._flashNextBlock();});}else this._end(-1);},xnm.aio.gateway.Flasher.prototype.start=function(){var e=require("http"),t=require("fs"),a=this;e.getFile(this._updateinfo.path,null,function(e){e?t.existsSync(e)&&(a._fwfile=e,t.stat(e,function(n,r){n||t.readFileLine(e,1,function(e,t){var n=null;if(!e&&t){var r=t.indexOf("HEADER@");0==r&&(r=(n=t.substr(7)).indexOf("@HEADER"))>0&&(n=n.substr(0,r));}n?a._flashGateway(n,t.length+1):a._flashGateway(null,a._updateinfo.size);});})):(XC.debugf("failed to load "+a._updateinfo.path),a._end(-1));});},xnm.aio.gateway.SecureConnection=function(e,t,a){this._ip=e,this._port=t||80,this._passwordHash=null,this._clientToken=null,this._privateClientKey="",this._publicClientKey="",this._publicGatewayKey=null,this._sharedSecret=null,this._requestPending=!1,this._queue=[],this.sapi_timeout=8e3,"string"==typeof a&&this.setGatewayPassword(a),this._generateKeys();},xnm.aio.gateway.SecureConnection.prototype={_decrypt:function _decrypt(e,t){t=t||this._sharedSecret;var a=require("x.crypt.js");a.AES.setSize(128);var n=a.AES.h2a(t.substr(0,32)),r=a.AES.h2a(t.substr(32)),o=a.AES.decrypt(a.AES.h2a(e),n,r,!1);return a.AES.a2s(o);},_decryptToken:function _decryptToken(e,t){var a=require("x.crypt.js");a.AES.setSize(128);for(var n=a.Curve25519.curve25519(this._privateClientKey,e),r="",o=0;o<n.length;o++){r+=XC.getHexVal(n[o],2);}var s=a.AES.h2a(r.substr(0,32)),i=a.AES.h2a(r.substr(32)),u=a.AES.decrypt(a.AES.h2a(t),s,i);return{sharedSecret:r,token:a.AES.a2h(u)};},_doRequestEncrypted:function _doRequestEncrypted(e,t){var a=this,n=this._encryptRequest(e),r=this.getURL()+"/sapi",o=require("url").parse(r),s=null;0===r.indexOf("https:")?(s=require("https"),o.port=443):s=require("http");var i={host:o.hostname,port:o.port,path:o.path,method:"POST",headers:{Connection:"close","Content-Type":"text/plain","Content-Length":n.length}},u=s.request(i,function(n){if(200!==n.statusCode){var r=new Error("Response status code: "+n.statusCode);return XC.debugf("[SecureConnection._doRequestEncrypted] "+r.message,"error"),void t(r,null);}n.setEncoding("binary");var o="";n.on("data",function(e){o+=e;}),n.on("end",function(){var n=null;if(o){if("timeout"===o||"error"===o)n=new Error("Response was: "+o);else if(o.indexOf('"XC_SUC"')<0&&o.indexOf('"XC_ERR"')<0){var r=a._decrypt(o);(o=a._treatAsDataType(e.dataType,r))instanceof Error?(n=o,o=r):r.indexOf('"XC_ERR"')>=0&&(n=new Error(r));}else n=o.indexOf('"XC_ERR"')>=0?new Error(o):new Error("Result received as unencrypted plain text:"+o);}else n=new Error("No data received.");n&&XC.debugf("[SecureConnection._doRequestEncrypted] "+n.message,"error"),t(n,o);});});"function"==typeof u.on&&u.on("error",function(e){t(e,null);}),u.setTimeout(e.sapi_timeout||this.sapi_timeout),u.write(n),u.end();},_encryptRequest:function _encryptRequest(e){var t=e.path;if((!e.method||"GET"===e.method)&&e.data)for(var a in e.data){if("at"!==a){var n=e.data[a];t+=t.indexOf("?")>=0?"&":"?",t+=a+"="+encodeURIComponent(n);}}var r=this._clientToken+t;this._passwordHash&&(r+=t.indexOf("?")>=0?"&":"?",r+="at="+this._passwordHash);var o=require("x.crypt.js");o.AES.setSize(128);var s=o.AES.h2a(this._sharedSecret.substr(0,32)),i=o.AES.h2a(this._sharedSecret.substr(32)),u=o.AES.encrypt(o.AES.s2a(r),s,i);return o.AES.a2h(u);},_generateKeys:function _generateKeys(){var e=require("x.crypt.js");e.AES.setSize(128),this._privateClientKey="",this._publicClientKey="";for(var t=0;t<32;t++){var a=Math.floor(255*Math.random());this._privateClientKey+=XC.getHexVal(a,2);}for(var n=e.Curve25519.curve25519(this._privateClientKey),r=0;r<n.length;r++){this._publicClientKey+=XC.getHexVal(n[r],2);}},_handleTokenResponse:function _handleTokenResponse(e){var t=null;if(e&&"object"==_typeof(e)){if(e.XC_SUC){if(e.XC_SUC.key&&e.XC_SUC.token){this._publicGatewayKey=e.XC_SUC.key;var a=e.XC_SUC.token,n=this._decryptToken(this._publicGatewayKey,a);this._clientToken=n.token,this._sharedSecret=n.sharedSecret;}else t=new Error("XC_SUC, but missing key and/or token: "+JSON.stringify(e));}else t=e.XC_ERR?new Error(JSON.stringify(e)):new Error("Unexpected result. Contains neither XC_SUC nor XC_ERR: "+JSON.stringify(e));}else t=new Error("Not an object or is null: "+_typeof(e));return t;},_treatAsDataType:function _treatAsDataType(e,t){if(!e||String(e).indexOf("json")>=0)try{t=JSON.parse(t);}catch(e){return XC.debugf("[SecureConnection._treatAsDataType] JSON parse error: "+e.message,"error"),e;}return t;},_updateAccessToken:function _updateAccessToken(e){this._clientToken=null,this._publicGatewayKey=null,this._sharedSecret=null;var t=this,a=this.getURL()+"/getKey";a+="?k="+encodeURIComponent(this._publicClientKey),this._passwordHash&&(a+="&at="+this._passwordHash);var n=require("url").parse(a),r=null;0===a.indexOf("https:")?(r=require("https"),n.port=443):r=require("http");var o={host:n.hostname,port:n.port,path:n.path,method:"GET",headers:{Connection:"close"}},s=r.request(o,function(a){if(200!==a.statusCode){var n=new Error("Response status code: "+a.statusCode);return XC.debugf("[SecureConnection._updateAccessToken] "+n.message,"error"),void e(n,null);}a.setEncoding("binary");var r="";a.on("data",function(e){r+=e;}),a.on("end",function(){var a=null;if(r){if("timeout"===r||"error"===r)a=new Error("Response was: "+r);else{var n=t._treatAsDataType("json",r);n instanceof Error?a=n:(r=n,a=t._handleTokenResponse(r)||a);}}else a=new Error("No data received.");a&&XC.debugf("[SecureConnection._updateAccessToken] "+a.message,"error"),e(a,r);});});"function"==typeof s.on&&s.on("error",function(t){e(t,null);}),s.setTimeout(this.sapi_timeout),s.end();},_workOnQueue:function _workOnQueue(){var e=this._queue.shift();if(e){var t=this;this._requestPending=!0,this._updateAccessToken(function(a,n){a?(e.cb(a,n),t._workOnQueue()):t._doRequestEncrypted(e.request,function(a,n){e.cb(a,n),t._workOnQueue();});});}else this._requestPending=!1;},doRequest:function doRequest(e,t){if(this._queue.push({request:e,cb:t}),!this._requestPending){var a=this;setTimeout(function(){a._workOnQueue();},1);}},getURL:function getURL(){var e="http://"+this._ip;return this._port&&(e+=":"+this._port),e;},setGatewayPassword:function setGatewayPassword(e){this._passwordHash=xnm.aio.gateway.Admin.V5.hash(e);},setGatewayPasswordHash:function setGatewayPasswordHash(e){this._passwordHash=e;}},xnm.aio.gateway.Admin=new function(){this._detectionSockets={},this.detectedGateways={},this._detectionCallback=null,this._DHCPCallback=null,this._evalMessage=function(e,t){var a={};if(11==e.length&&(e instanceof Array||e instanceof Buffer)&&73==e[0]&&68==e[1]&&58==e[2]){for(var n="IP:"+t+"\nMAC:",r=3;r<8;r++){n+=XC.getHexVal(e[r],2).toLowerCase()+"-";}n+=XC.getHexVal(e[8],2).toLowerCase()+"\n",e=n+="HWV:"+XC.getHexVal(e[9],2)+"\n";}else e=e.toString();var o=e.split("\n"),s=o.length;for(r=0;r<s-1;r++){var i=o[r].split(":");a[i[0]]=i[1];}a.MAC?void 0===this.detectedGateways[a.MAC]&&(this.detectedGateways[a.MAC]=a,this._detectionCallback&&this._detectionCallback(a)):a.D_IP&&(this._DHCPCallback&&this._DHCPCallback(a),this._DHCPCallback=null);},this._createDetectionSocket=function(e){var t=this,a=require("dgram").createSocket("udp4");"local"!=e&&(a.on("listening",function(){a.setBroadcast(!0);}),a.bind(null,e)),a.on("error",function(e){XC.debugf("[xnm.aio.gateway._createDetectionSocket] On socket error: "+e.message,"error"),this.close();}),a.on("message",function(e,a){t._evalMessage(e,a.address,a);}),this._detectionSockets[e]=a;},this._createDetectionSockets=function(){var e=require("os");require("dgram");if(e&&e.networkInterfaces){var t=e.networkInterfaces();for(var a in t){for(var n=t[a],r=0;r<n.length;r++){var o=n[r];"IPv4"==o.family&&0==o.internal&&(this._detectionSockets[o.address]||this._createDetectionSocket(o.address));}}}else this._detectionSockets.local||this._createDetectionSocket("local");},this.detectGateways=function(e){this._detectionCallback=e,this._createDetectionSockets();var t=new Buffer("GET\n");for(var a in this._detectionSockets){var n=this._detectionSockets[a];try{n.send(t,0,4,1901,"255.255.255.255"),n.send(t,0,4,1901,"239.255.255.250");}catch(e){XC.debugf("[xnm.aio.gateway.Admin.detectGateways] Socket: "+e.message,"error"),"not running"===String(e.message).toLowerCase()&&delete this._detectionSockets[a];}}this._detectGatewaysMDNS();},this._detectGatewaysMDNS=function(){var e=this,t=require("x.mdns.js");t.clearRecordBuffer(),t.discoverServiceWithTimeout("_mtt-device._tcp.local",2e3,function(t,a){if(!t)for(var n=0;n<a.length;n++){var r=a[n];if(r&&r.info&&r.info.MAC){var o=void 0===e.detectedGateways[r.info.MAC],s={HWV:r.info.HWV,IP:r.ip[0],MAC:r.info.MAC,NAME:r.info.NAME,VER:r.info.VER,VID:r.info.VID,MODE:r.info.MODE};o&&(e.detectedGateways[r.info.MAC]=s,e._detectionCallback&&e._detectionCallback(s));}}});},this.resetGateway=function(e,t,a,n){if(a){this._createDetectionSockets();var r=new Buffer(XC.getBytes("RST:").concat(XC.getBytes(t.replace(/-/g,""),!0)));for(var o in this._detectionSockets){var s=this._detectionSockets[o];s.send(r,0,r.length,1901,"255.255.255.255"),s.send(r,0,r.length,1901,"239.255.255.250");}}else{var i=new xnm.aio.gateway.Gateway(e);null!=i&&i.executeRequest("reset",null);}n&&setTimeout(function(){n();},300);},this.checkForUpdate=function(e,t,a){var n="http://www.mediola.eu/download/fw/getversion_v5.php",r=this;require("http").get(n,function(o){if(200==o.statusCode){o.setEncoding("utf8");var s="";o.on("data",function(e){s+=e;}),o.on("end",function(){var n=$($.parseXML(s));if(0!=n.find("Version").length)for(var o in r.detectedGateways){if(r.detectedGateways[o].IP==e){var i;"F3"==r.detectedGateways[o].HWV?"F0"==r.detectedGateways[o].SWV?i="f3f0":(i="f3",r.detectedGateways[o].SWV?i+=r.detectedGateways[o].SWV.toLowerCase()+"M":i=null!=t?t:"f3f3M"):"F1"!=r.detectedGateways[o].HWV&&"F4"!=r.detectedGateways[o].HWV&&"F9"!=r.detectedGateways[o].HWV&&"FA"!=r.detectedGateways[o].HWV&&"FB"!=r.detectedGateways[o].HWV&&"FC"!=r.detectedGateways[o].HWV&&"FD"!=r.detectedGateways[o].HWV||(i=r.detectedGateways[o].HWV.toLowerCase()),null==i&&null!=t&&(i=t),n.find("Version[ver='"+i+"']").each(function(){var e=$(this),t={};e.children().each(function(){var e=$(this);t[e.prop("tagName")]=e.text();});var n={};n.ip=r.detectedGateways[o].IP,n.mac=r.detectedGateways[o].MAC,r.detectedGateways[o].VER&&(n.current=parseInt(r.detectedGateways[o].VER.replace(/\./g,""))),n.version=parseInt(t.Number,10),n.rfv=r.detectedGateways[o].RFV,r.detectedGateways[o].RFF&&(n.rff=r.detectedGateways[o].RFF),n.hwv=r.detectedGateways[o].HWV,n.path="http://"+t.Server+":"+t.Port+t.Filename,n.size=t.Filesize,n.md5=t.MD5,a&&a(n);});break;}}});}else XC.debugf("Failed to load: "+n);}).on("error",function(e){XC.debugf("Failed to load: "+n);});},this.updateGateway=function(e,t,a){new xnm.aio.gateway.Flasher(e,t,a).start();},this.getDHCPAddress=function(e,t){this._createDetectionSockets();var a=this;this._DHCPCallback=function(n){XC.debugf("DHCP: "+n.D_IP),a.saveIPData(e,n.D_IP,n.D_SN,n.D_GW,n.D_DNS,t);},setTimeout(function(){a._DHCPCallback&&t&&t(!1);},3e3);var n=new Buffer("DHCP:"+e+"\n");for(var r in this._detectionSockets){var o=this._detectionSockets[r];o.send(n,0,n.length,1901,"255.255.255.255"),o.send(n,0,n.length,1901,"239.255.255.250");}},this.saveIPData=function(e,t,a,n,r,o){var s="SET:"+e+"\n";s+="AUTH:YWRtaW4=\n",t&&(s+="IP:"+t+"\n"),a&&(s+="SN:"+a+"\n"),n&&(s+="GW:"+n+"\n"),r&&(s+="DNS:"+r+"\n");var i=new Buffer(s);for(var u in this._detectionSockets){var l=this._detectionSockets[u];l.send(i,0,i.length,1901,"255.255.255.255"),l.send(i,0,i.length,1901,"239.255.255.250");}if(o){var m=this;this.detectedGateways[e]=void 0,this.detectGateways(),setTimeout(function(){var s=m.detectedGateways[e];s&&s.IP==t&&s.SN==a&&s.GW==n&&s.DNS==r?o(!0):o(!1);},1e3);}},this.setAdminPassword=function(e,t,a,n){var r=null;for(var o in this.detectedGateways){this.detectedGateways[o].IP==e&&(r=this.detectedGateways[o].MAC);}if(null!=r){var s="SET:"+r+"\n";s+="AUTH:"+new Buffer(t).toString("base64")+"\n",s+="APWD:"+a+"\n";var i=new Buffer(s);for(var u in this._detectionSockets){var l=this._detectionSockets[u];l.send(i,0,i.length,1901,"255.255.255.255"),l.send(i,0,i.length,1901,"239.255.255.250");}n&&this.checkPassword(r,a,function(e){n(1==e);});}else n&&n(!1);},this.checkPassword=function(e,t,a){this.detectedGateways[e]&&delete this.detectedGateways[e].UPWD;var n="SET:"+e+"\n";n+="AUTH:"+new Buffer(t).toString("base64")+"\n";var r=new Buffer(n);for(var o in this._detectionSockets){var s=this._detectionSockets[o];s.send(r,0,r.length,1901,"255.255.255.255"),s.send(r,0,r.length,1901,"239.255.255.250");}var i=this;setTimeout(function(){var t=i.detectedGateways[e];t&&null!=t.UPWD?a(!0):a(!1);},500);},this.checkPasswordViaHTTP=function(e,t,a){var n=new xnm.aio.gateway.Gateway(e);n.timeout=1500,n.executeRequest("EEPR",{XC_PASS:t},function(e){e&&e.error&&"AUTH"==e.error?a(!1):a(!0);});},this.getRemoteAccessKey=function(e,t,a,n){var r=new xnm.aio.gateway.Gateway(e,n);null!=r?r.executeRequest("GetSI",null,function(e){if(e&&e.data&&e.data.RK&&("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"!=e.data.RK||!t))a(e.data.RK);else if(t){for(var n="",o=0;o<16;o++){n+=XC.getHexVal(Math.floor(255*Math.random()),2);}r.executeRequest("SetRK",{data:n},function(e){e&&!e.error?a(n):a(null);});}else a(null);}):a(null);},this.removeRemoteAccessKey=function(e,t){var a=new xnm.aio.gateway.Gateway(e,t);null!=a&&a.executeRequest("SetRK",{data:"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"});},this.checkAESKey=function(e,t,a){var n=new xnm.aio.gateway.Gateway(e,a);null!=n?n.executeRequest("GetSI",null,function(e){if(e&&e.data&&null!=e.data.IWK){if(""!=e.data.IWK&&"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"!=e.data.IWK)t(e.data.IWK);else{for(var a="",r=0;r<16;r++){a+=XC.getHexVal(Math.floor(255*Math.random()),2);}n.executeRequest("SendSC",{type:"IW",data:"04"+a},function(e){e&&!e.error?t(a):t(null);});}}else t(null);}):t(null);},this.getSID=function(e,t,a,n){var r=new xnm.aio.gateway.Gateway(e,a);n&&(r.password=n),null!=r?r.executeRequest("GetSI",null,function(e){if(e&&e.data){if(e.data.SID&&"FFFFFFFFFFFFFFFF"!=e.data.SID&&"32FFFFFFFFFFFFFF"!=e.data.SID)t(e.data.SID);else{var a=new(require("xnm.aio.cloud.js").Server)();a._url="http://webservice.aio-control.com/config?",a.getNewSID(function(e){var a=null;e&&e.data&&e.data.TOKEN&&(a=e.data.TOKEN,r.executeRequest("SetSV",{id:"SID",data:e.data.TOKEN})),t(a);});}}else t(null);}):t(null);},this.getEID=function(e,t,a,n){var r=this,o=new xnm.aio.gateway.Gateway(e,a);n&&(o.password=n),null!=o?o.executeRequest("GetSI",null,function(a){a&&a.data?a.data.EID&&"FFFFFF"!=a.data.EID&&"FFFFFFFFFFFF"!=a.data.EID?t(a.data.EID):a.data.EID&&"FFFFFF"!=a.data.EID&&"FFFFFFFFFFFF"!=a.data.EID?t(null):r.getSID(e,function(e){if(e){var a=new(require("xnm.aio.cloud.js").Server)();a._url="http://webservice.aio-control.com/config?",a.getEleroKey(e,function(e){var a=null;e&&e.data&&e.data.adr&&(a=e.data.adr,o.executeRequest("rfchipcmd",{type:"setERAdr",adr:a})),t(a);});}else t(null);}):t(null);}):t(null);},this.clearEEPROM=function(e,t,a){var n=new xnm.aio.gateway.Gateway(e,a);null!=n&&n.executeRequest("fEEPReset",{type:"ff"},function(){t&&t();});},this.compareVersions=function(e,t){if(!e&&!t&&"string"!=typeof e&&"string"!=typeof t)return 0;if(!e||"object"==_typeof(e))return 1;if(!t||"object"==_typeof(t))return-1;var a=String(e).split("-"),n=String(t).split("-"),r=!!a[1]&&a[1],o=!!n[1]&&n[1];a=a[0].split("."),n=n[0].split(".");for(var s=Math.max(a.length,n.length),i=0;i<s;i++){var u=a[i]?Number(a[i]):0,l=n[i]?Number(n[i]):0;if(l>u)return 1;if(l<u)return-1;}if(r){if(!(0!==r.indexOf("alpha")||o&&0!==o.indexOf("beta")))return 1;if(0===r.indexOf("beta")&&!o)return 1;if(0===r.indexOf("beta")&&o&&0===o.indexOf("alpha"))return-1;}if(r&&o&&r!=o){var m=0,d=0;if(0===r.indexOf("alpha")&&0===o.indexOf("alpha")?(m=Number(r.substr(5)),d=Number(o.substr(5))):0===r.indexOf("beta")&&0===o.indexOf("beta")&&(m=Number(r.substr(4)),d=Number(o.substr(4))),!isNaN(m)&&!isNaN(d))return m===d?0:m<d?1:-1;}return 0;},this.validatePassword=function(e){if("string"!=typeof e)return!1;for(var t=0;t<e.length;t++){var a=e.charCodeAt(t);if(isNaN(a))return e[t];if(a<32||a>402)return e[t];}return!0;},this.V5=new function(){var e=this;this._cloudServerUrl="https://v5ws.mediola.com",this._cloudServer="v5ws.mediola.com",this._cloudPort="80",this._userName="user",this.timeout=5e3,this.getSID=function(t,a){t._executeRequestV5("/info",null,{timeout:this.timeout},function(n,r){n?a&&a(n,r):r.sid&&"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"!=r.sid?a&&a(null,r.sid):e.requestPublicKey(t,function(n,r){n?a&&a(n,r):r.key?e.registerAtCloudServer(r.key,function(n,r){if(n)a&&a(n);else{var o={cserver:e._cloudServer,cport:e._cloudPort,sid:r.sid,ckey:r.pk};e.setConfig(t,o,a);}}):a&&a(new Error("do not have public key"),r);});});},this.setCloudServer=function(e){this._cloudServer=e;},this.setLatLong=function(e,t,a,n){var r=new xnm.aio.gateway.Gateway(e);null!=r&&(t&&(a.at=t),r.executeRequestV5("setLocation",a,function(e){e&&e.data?n&&n(e):n&&n(null);}));},this.getInfo=function(e,t){e._executeRequestV5("/info",null,{timeout:this.timeout},function(e,a){t&&t(e,a);});},this.activateCloudAccess=function(e,t,a){var n={cloud:t,cserver:this._cloudServer,cport:this._cloudPort};null!=e&&e._executeRequest("/config",n,null,function(e,t,n){t?a&&a(e,t):a&&a(null);});},this.checkForUpdate=function(e,t,a,n,r){var o=encodeURI("http://www.mediola.com/download/fw/v5/checkforupdate.php?hwv="+e+"&swv="+t+"&platform="+a+"&vendor="+n);require("http").get(o,function(e){if(200==e.statusCode){e.setEncoding("utf8");var t="";e.on("data",function(e){t+=e;}),e.on("end",function(){r&&r(JSON.parse(t));});}});},this.compareFwVersions=function(e,t){var a=!1;return currArr=e.split("."),availArr=t.split("."),3==currArr.length&&3==availArr.length&&(parseInt(currArr[0])<parseInt(availArr[0])&&(a=!0),parseInt(currArr[0])==parseInt(availArr[0])&&(parseInt(currArr[1])<parseInt(availArr[1])||parseInt(currArr[1])==parseInt(availArr[1])&&parseInt(currArr[2])<parseInt(availArr[2]))&&(a=!0)),a;},this.updateFirmwareCC=function(e){var t=require("fs"),a=require("http"),_update=function _update(e,a){if(e&&t.existsSync(e)){var n=new(require("xnm.aio.m10T.js").CC1310Updater)(e,null,null);a.data.at&&(n.auth=a.data.at),n.startNetUpdate(a.data.ip,8081,function(e){e.error?a.error&&a.error({code:"01",text:e.error}):(a.onUpdate&&a.onUpdate(e.state),100==e.state&&a.success&&a.success(e));},!1);}else a.error&&a.error({code:"02",text:""});};-1==e.data.link.indexOf("http")?_update(e.data.link,e):e.data.link&&a.getFile(e.data.link,null,function(t){_update(t,e);});},this.updateFirmware=function(t){var a=require("http"),n=require("fs"),_update=function _update(t,a){t?n.existsSync(t)&&n.stat(t,function(n,r){if(!n){var o=new(require("xnm.aio.m10T.js").V5Updater)();a.data.at&&(o.at=a.data.at),o.updateFirmware(a.data.ip,t,function(n){if(n.error)a.error&&a.error({code:"01",text:""});else if(a.onUpdate&&a.onUpdate(n.state),100==n.state){var r=new Date().getTime()/1e3,waitFnc=function waitFnc(n){n&&n.data?e._checkFileCRC(a.data,t,function(e){e?a.error&&a.error({code:e.message,text:""}):a.success&&a.success(n);}):new Date().getTime()/1e3>r+40?a.error&&a.error({code:"03",text:""}):setTimeout(function(){e.getGatewayInfos(a.data.ip,a.data.at,waitFnc);},500);};setTimeout(function(){waitFnc();},2e3);}},a.data.retries);}}):a.error&&a.error({code:"02",text:""});};-1==t.data.link.indexOf("http")?_update(t.data.link,t):t.data.link&&a.getFile(t.data.link,null,function(e){_update(e,t);});},this._checkFileCRC=function(e,t,a){var n=e.ip,r=e.at;require("fs").readFileLine(t,1,function(e,t){if(e||!t)return XC.debugf("[_checkFileCRC] No data in firmware file.","error"),e=e||new Error("07"),void(a&&a(e));var o=new(require("xnm.aio.m10T.js").V5Updater)();o.useMD5=!0;var s=o.parseHeader(t);if(!s)return XC.debugf("[_checkFileCRC] Failed to parse header.","error"),void(a&&a(new Error("04")));var i=s.st[2],u=s.st[5];if(-1===xnm.aio.gateway.Admin.compareVersions("0.0.54",i))return XC.debugf("[_checkFileCRC] Gw version too old, skip test: "+i,"warn"),void(a&&a(null));if(!u)return XC.debugf("[_checkFileCRC] Firmware header has no CRC info.","warn"),void(a&&a(null));for(var l=Number(s.st[4]).toString(16),m=8-l.length;m>0;){l="0"+l,m--;}var d={size:l};r&&(d.at=r),XC.debugf("[_checkFileCRC] CRC: "+u+" | Size: "+s.st[4]+" | Size (hex): "+l),new xnm.aio.gateway.Gateway(n).executeRequest("GetCRC",d,function(e){var t=null;e&&!e.error&&e.data&&e.data["flash-crc"]?e.data["flash-crc"]===u?(XC.debugf("[_checkFileCRC] CRC matches."),t=null):(XC.debugf("[_checkFileCRC] CRC mismatch. Gateway reports: "+e.data["flash-crc"],"error"),t=new Error("06")):(XC.debugf("[_checkFileCRC] No CRC result from gateway.","error"),t=new Error("05")),a&&a(t);});});},this.getGatewayInfos=function(e,t,a){var n=null;t&&((n={}).at=t);var r=new xnm.aio.gateway.Gateway(e);null!=r&&r.executeRequestV5("/info",n,function(e,t){e&&(e.data||e.error)?r.executeRequestV5("GetSI",n,function(t,n){t&&t.data?($.extend(e.data,t.data),a&&a(e)):t&&t.error&&a&&a(t);}):a&&a(null);});},this.scanWifis=function(e,t){var a=new xnm.aio.gateway.Gateway(e);null!=a&&a.executeRequestV5("/scan",null,function(e){e&&(e.data||e.error)?t&&t(e):t&&t(null);});},this.connectToWifi=function(e,t,a,n,r){var o={ssid:t,pwd:a};n&&(o.at=n);var s=new xnm.aio.gateway.Gateway(e);null!=s&&s.executeRequestV5("/connect",o,function(e){e&&(e.data||e.error)?r&&r(e):r&&r(null);});},this.hash=function(e){return e=String(e),require("x.crypt.js").MD5(unescape(encodeURI(e+"_SALT!")));},this.setConfig2=function(e,t,a){var n=new xnm.aio.gateway.Gateway(e);null!=n&&n.executeRequestV5("/config",t,function(e){e?a&&a(e):a&&a(null);});},this.setConfig=function(e,t,a){var n=null;this.timeout&&this.timeout>0&&(n={timeout:this.timeout}),e._executeRequestV5("/config",t,n,function(e,n){a&&a(e,n,t);});},this.requestPublicKey=function(e,t){e._executeRequestV5("/getKey",null,null,t);},this.registerAtCloudServer=function(e,t){var a=this._cloudServerUrl+"/registerDevice",n={pk:e},r=t;$.ajax({data:n,url:a,method:"GET",timeout:this.timeout,dataType:"json",success:function success(e){var t,a;e&&!e.XC_ERR&&e.XC_SUC?a=e.XC_SUC:(t=new Error("reponse error"),a=e.XC_ERR?e.XC_ERR:null),r&&r(t,a),r=null;},error:function error(e,t){var a="http request error:"+(e?e.status:"0")+"-"+t;r&&(r(new Error(a)),r=null);}});},this.reconnectToCloudServer=function(e,t,a,n){var r=xnm.aio.gateway.Admin.V5._userName+":"+e._at;r=new Buffer(r).toString("base64");var o="https://"+this._cloudServer+"/reconnectDevice",s={pk:t,sid:a,at:e._at};$.ajax({data:s,url:o,method:"GET",timeout:this.timeout,dataType:"json",headers:{Authorization:"Basic "+r},success:function success(e){n&&n(e);},error:function error(){n&&n(null);}});},this.restoreAdr=function(e,t,a,n){var r={};r.sys=t,r.type="ADR",r.config=a,e.executeRequestV5("SetConfig",r,function(e){n&&n(e);});},this.restoreSID=function(e,t,a){var n=this;!function(t,a){n.requestPublicKey(e,function(r,o){o&&o.key?function(t,a,r){n.reconnectToCloudServer(e,t,a,function(t){if(XC.debugf(t),t&&t.XC_SUC){var o=t.XC_SUC.pk,s={cserver:n._cloudServer,cport:n._cloudPort,at:e._at,sid:a,ckey:o};n.setConfig(e,s,function(e,t){!e&&t&&t.XC_SUC?r&&r(t.XC_SUC.pk,o,a):r&&r(null);});}else r&&r(null);});}(o.key,t,a):a&&a(null);});}(t,a);};}(),this.V5Plus=new function(){this.updateFirmware=function(e){require("http").getFile(e.data.link,null,function(t){XC.debugf("return value loading file: "),XC.debugf(t),t?(file=t,XC.debugf("loaded FW file:"+file),function(t){var a=require("http");XC.debugf("ip: "+e.data.ip),a.postFile(t,"http://"+e.data.ip+"/updateV5PFW?at="+e.data.at,null,function(t){t.on("data",function(a){var n=(""+a).replace(".","");n&&"string"==typeof n&&-1!=n.indexOf("XC_SUC")?e.success&&e.success(t):(e.onUpdate(n),XC.debugf("postFile state process:"+n));}),t.on("end",function(){});}).on("error",function(t){XC.debugf("FW on error : "),XC.debugf(t.message),e.data.fwUnder1_1_6||e.error(window.XC_Text.errorFlashingFile);});}(file)):e.error(window.XC_Text.errorLoadingFile);});},this.compareFwVersions=function(e,t){var a=!1;return currArr=e.split("."),availArr=t.split("."),3==currArr.length&&3==availArr.length&&(parseInt(currArr[0])<parseInt(availArr[0])&&(a=!0),parseInt(currArr[0])==parseInt(availArr[0])&&(parseInt(currArr[1])<parseInt(availArr[1])||parseInt(currArr[1])==parseInt(availArr[1])&&parseInt(""+currArr[2].substr(0,2))<parseInt(""+availArr[2].substr(0,2)))&&(a=!0)),a;};}();}(),xnm.aio.gateway.TaskManager=function(){var e=function(){var IQ=function IQ(e){this._systemData=e,this._gatewayTaskData={},this._gatewaysToInit=0,this.isInRemoteMode=!1;};return IQ.prototype.init=function(e){var t=this;this._systemData.$devicesXML.find("gateways gateway[type=aiogateway]").each(function(){var a,n=$(this);(t.isInRemoteMode||n.find("task").attr("active",""),t.isInRemoteMode)?(e&&e.call(),null!=(a=new(require("xnm.aio.gateway.js").Gateway)(n.attr("ip")))&&(a.setRemoteAccessMode(n.attr("sid")),t._gatewaysToInit+=1,a.executeRequest("GetStates",null,function(a){if(a&&a.data)for(var r,o,s=0;s<a.data.length;s++){"EVENT"==a.data[s].type&&(r=a.data[s].address,o=a.data[s].state,r&&o&&(r=r.toUpperCase(),XC.debugf(r),XC.debugf(n.find("task[id='"+r+"']")),n.find("task[id='"+r+"']").attr("active",o)));}t._gatewaysToInit-=1,0==t._gatewaysToInit&&e&&e.call();}))):(t._gatewayTaskData[n.attr("id")]=null,null!=(a=new(require("xnm.aio.gateway.js").Gateway)(n.attr("ip")))&&(t._gatewaysToInit+=1,a.executeRequest("GetAll",null,function(a){a&&a.data&&(t._gatewayTaskData[n.attr("id")]=a.data),t._gatewaysToInit-=1,0==t._gatewaysToInit&&(t._syncTasksToXML(),e&&e.call(),XC.debugf("Taskmanager initialized"));})));});},IQ.prototype._saveTaskToXML=function(e,t){var a=this._systemData.$devicesXML.find("gateways gateway[id='"+e+"']");if(a&&a.length>0){var n=$(a[0]),r=null,o=n.find("tasks");if(o&&(0==o.length?(r=$(this._systemData.$devicesXML.get(0).createElement("tasks"))).appendTo(n):r=o[0]),r){var s=$(this._systemData.$devicesXML.get(0).createElement("task"));return s.attr("id",t.id),s.attr("name",t.name),s.attr("active",t.active),s.appendTo(r),this._systemData.saveData("devices"),s;}}return null;},IQ.prototype._syncTasksToXML=function(){this._systemData.$devicesXML.find("gateways gateway tasks task").empty();var e={},t={};for(var a in this._gatewayTaskData){if(e[a]={},t[a]={},this._gatewayTaskData[a])for(var n=this._gatewayTaskData[a].length,r=0;r<n;r++){"TASK"==this._gatewayTaskData[a][r].sys||"EVENT"==this._gatewayTaskData[a][r].sys||"ASTRO"==this._gatewayTaskData[a][r].sys?e[a][this._gatewayTaskData[a][r].id]=this._gatewayTaskData[a][r]:"ACTION"==this._gatewayTaskData[a][r].sys&&(t[a][this._gatewayTaskData[a][r].id]=this._gatewayTaskData[a][r]);}}for(var a in this._gatewayTaskData){if(this._gatewayTaskData[a])for(n=this._gatewayTaskData[a].length,r=0;r<n;r++){if("GROUP"==this._gatewayTaskData[a][r].sys){var o={};o.id=this._gatewayTaskData[a][r].id;var s=this._systemData.$devicesXML.find("gateways gateway[id='"+a+"'] tasks task[id='"+o.id+"']");s&&1==s.length?o.$data=$(s[0]):(o.name=window.XC_Text.task+" "+o.id,o.$data=this._saveTaskToXML(a,o)),o.$data.attr("active",this._gatewayTaskData[a][r].active);for(var i=this._gatewayTaskData[a][r].triggerids,u=i.length/2,l=0;l<u;l++){var m=i.substr(2*l,2),d=null;if((v=o.$data.find("trigger[id='"+m+"']"))&&0==v.length&&e[a][m]){if((d=$(this._systemData.$devicesXML.get(0).createElement("trigger"))).attr("id",m),e[a][m].time){if(d.attr("time",e[a][m].time),d.attr("days",e[a][m].days),e[a][m].delay){var p=parseInt(e[a][m].delay,16);(32768&p)>0&&(p-=65536),d.attr("delay",p);}}else{d.attr("type",e[a][m].type),d.attr("code",e[a][m].code);var f=this.getDeviceTrigger(e[a][m].type,e[a][m].code);f&&!f.ircode&&d.attr("trigger",f.device+"."+f.trigger);}d.appendTo(o.$data);}}var c=this._gatewayTaskData[a][r].actionids;for(u=c.length/2,l=0;l<u;l++){var v,y=c.substr(2*l,2),h=null;if((v=o.$data.find("action[id='"+y+"']"))&&0==v.length&&t[a][y]){(h=$(this._systemData.$devicesXML.get(0).createElement("action"))).attr("id",y),h.attr("type",t[a][y].type),t[a][y].code&&h.attr("code",t[a][y].code);var w=this.getDeviceCommand(t[a][y].type,t[a][y].code,t[a][y].ir,t[a][y].rf);w&&h.attr("command",w.device+"."+w.command),h.appendTo(o.$data);}}}}}this._systemData.saveData("devices");},IQ.prototype._getNextFreeID=function(e,t,a){a=!!a;var n=[];if(e.find(t).each(function(){n.push($(this).attr("id"));}),a)for(r=128;r<200;r++){o=XC.getHexVal(r,2);if(-1==$.inArray(o,n))return o;}else for(var r=1;r<100;r++){var o=XC.getHexVal(r,2);if(-1==$.inArray(o,n))return o;}return"FF";},IQ.prototype._saveTaskToGateway=function(e){var t="",a="";e.find("trigger").each(function(){t+=$(this).attr("id");}),e.find("action").each(function(){a+=$(this).attr("id");});var n=e.parent().parent(),r=new(require("xnm.aio.gateway.js").Gateway)(n.attr("ip"));if(null!=r){var o={};o.id=e.attr("id"),e.attr("active")?o.active=e.attr("active"):o.active="1",o.triggerIDs=t,o.actionIDs=a,r.executeRequest("AddGroup",o);}},IQ.prototype.deleteTrigger=function(e,t){e.remove(),this._saveTaskToGateway(t),this._systemData.saveData("devices");},IQ.prototype.deleteAction=function(e,t){e.remove(),this._saveTaskToGateway(t),this._systemData.saveData("devices");},IQ.prototype.saveCommandAction=function(e,t,a,n){var r=null;if(e||(r=this._getNextFreeID(t.parent(),"task action"),(e=$(this._systemData.$devicesXML.get(0).createElement("action"))).attr("id",r),e.appendTo(t)),e){a&&n?e.attr("command",a+"."+n):n&&e.attr("code",n);var o=t.parent().parent(),s=new(require("xnm.aio.gateway.js").Gateway)(o.attr("ip"));if(null!=s){var i={};if(i.id=e.attr("id"),a){var u=null,l=this._systemData.getDeviceData(a);if(l&&(u=require("xnm.aio.gateway.js").getGatewayParams(l,n)),u){var m=u.data;if("PE"==u.type&&12==m.length)m=m.substr(0,2)+m.substr(4);else if("CODE"==u.type)m=u.code,u.ir&&(i.ir=u.ir),u.rf&&(i.rf=u.rf);else if("FHT80B"==u.type){var d="FF",p="FF";u.tsoll?p=XC.getHexVal(u.tsoll,2):d="0"+u.modus,m=u.hc1+u.hc2+d+p;}i.type=u.type,i.code=m;}}else n?(i.type="RGB",i.code=n):i.type="AIO";i.type&&e.attr("type",i.type),s.executeRequest("AddAction",i);}this._saveTaskToGateway(t),this._systemData.saveData("devices");}return e;},IQ.prototype.saveTimeTrigger=function(e,t,a,n,r){var o=null;if(e||(o=this._getNextFreeID(t.parent(),"task trigger"),XC.debugf("trigger: "+o),(e=$(this._systemData.$devicesXML.get(0).createElement("trigger"))).attr("id",o),e.appendTo(t)),e){null!=r&&e.attr("delay",r),e.attr("time",a),e.attr("days",n);var s=t.parent().parent(),i=new(require("xnm.aio.gateway.js").Gateway)(s.attr("ip"));if(null!=i){var u={};u.id=e.attr("id"),u.active="1",u.time=a,u.days=n,u.dateStart="2000-00-00",u.dateEnd="2000-00-00";var l="AddTask";null!=r&&(l="AddAstro",r<0&&(r+=65536),u.delay=XC.getHexVal(r,4)),i.executeRequest(l,u);}this._saveTaskToGateway(t),this._systemData.saveData("devices");}},IQ.prototype.saveDeviceTrigger=function(e,t,a,n,r,o){if(!e){var s=this._getNextFreeID(t.parent(),"task trigger");(e=$(this._systemData.$devicesXML.get(0).createElement("trigger"))).attr("id",s),e.appendTo(t);}if(e){e.attr("type",a),e.attr("code",n),r&&e.attr("trigger",r+"."+o);var i=t.parent().parent(),u=new(require("xnm.aio.gateway.js").Gateway)(i.attr("ip"));if(null!=u){var l={};l.id=e.attr("id"),l.active="1",l.type=a,l.code=n,u.executeRequest("AddEvent",l);}this._saveTaskToGateway(t),this._systemData.saveData("devices");}},IQ.prototype.deleteTask=function(e){var t=e.parent().parent(),a=new(require("xnm.aio.gateway.js").Gateway)(t.attr("ip"));if(null!=a){var n={id:e.attr("id")};a.executeRequest("DelGroup",n);}e.remove(),this._systemData.saveData("devices");},IQ.prototype.toggleTask=function(e,t,a){var n=e.parent().parent(),r="1";if("1"==e.attr("active")&&(r="0"),t)return e.attr("active",r),void(a&&a());var o=new(require("xnm.aio.gateway.js").Gateway)(n.attr("ip"));if(null!=o){this.isInRemoteMode&&o.setRemoteAccessMode(n.attr("sid"));var s=this;o.executeRequest("saveGroup",{id:e.attr("id"),active:r},function(t){t&&(e.attr("active",r),s._systemData.saveData("devices")),a&&a();});}else a&&a();},IQ.prototype.addNewTask=function(e){var t=new(require("xnm.aio.gateway.js").Gateway)(e.attr("ip"));if(null!=t){var a={id:"FF",active:"1",triggerIDs:"",actionIDs:""};return a.id=this._getNextFreeID(e,"tasks task"),t.executeRequest("AddGroup",a,function(e){XC.debugf("Gateway: "+e),e&&e.data&&XC.debugf("Gateway: "+e.data);}),this._saveTaskToXML(e.attr("id"),a);}return null;},IQ.prototype.getMessage=function(e,t,a){xnm.aio.gateway.Admin.getSID(e.attr("ip"),function(e){if(e){var n=new(require("xnm.aio.cloud.js").Server)();n._url="http://messages.aio-control.com/ai2/m.php?",n.getMessage(e,t,function(e){var t=null;e&&e.data&&((t={}).mail=e.data.mail,t.message=e.data.message),a(t);});}else a(null);});},IQ.prototype.setMessage=function(e,t,a,n,r){xnm.aio.gateway.Admin.getSID(e.attr("ip"),function(e){if(e){var o=new(require("xnm.aio.cloud.js").Server)();o._url="http://messages.aio-control.com/ai2/m.php?",o.setMessage(e,t,a,n,function(e){e&&!e.error?r(!0):r(!1);});}else r(!1);});},IQ.prototype.getTriggers=function(e,t){var a=[];if("door"==e||"window"==e||"sensor"==e||"DKL"==e||"DKR"==e)"HM"==t||"PV"==t||"SIAU"==t||"KOPP"==t||"IW"==t?(a.push({id:window.XC_Text.opened,cmd:"opened"}),a.push({id:window.XC_Text.closed,cmd:"closed"}),("SIAU"!=t||"window"!=e&&"DKR"!=e&&"DKL"!=e)&&("IW"!=t||"window"!=e&&"DKR"!=e&&"DKL"!=e)||a.push({id:window.XC_Text.tilted,cmd:"tilted"})):"RC"==t?("sensor"==e?a.push({id:window.XC_Text.alarm,cmd:"alarm"}):(a.push({id:window.XC_Text.opened,cmd:"alarm"}),a.push({id:window.XC_Text.closed,cmd:"ok"})),a.push({id:window.XC_Text.battery,cmd:"battery"}),a.push({id:window.XC_Text.timeout,cmd:"timeout"}),a.push({id:window.XC_Text.sabotage,cmd:"sabotage"})):"R2"==t?(a.push({id:window.XC_Text.on,cmd:"opened"}),a.push({id:window.XC_Text.off,cmd:"closed"})):"MX"!=t&&"GV"!=t&&"ELRO"!=t||"sensor"!=e?"IT"!=t&&"FS20"!=t&&"CR"!=t&&"MC"!=t&&"AN"!=t&&"HE"!=t||"sensor"!=e?(a.push({id:window.XC_Text.opened,cmd:"on"}),a.push({id:window.XC_Text.closed,cmd:"off"})):(a.push({id:window.XC_Text.motion,cmd:"on"}),a.push({id:window.XC_Text.off,cmd:"off"})):a.push({id:window.XC_Text.firealarm,cmd:"opened"});else if("PV"!=t&&"SIAU"!=t||"smoke"!=e){if("SIAU"==t&&"glass"==e)a.push({id:window.XC_Text.alarm,cmd:"alarm"});else if("PV"==t&&"motion"==e)a.push({id:window.XC_Text.motion,cmd:"motion"});else if("HM"!=t||"0045"!=e&&"00B2"!=e){if("HM"!=t||"004A"!=e&&"00C1"!=e&&"00C0"!=e){if("HM"==t&&"0042"==e)a.push({id:window.XC_Text.firealarm,cmd:"opened"});else if("IT"!=t&&"FS20"!=t&&"R2"!=t&&"HM"!=t||"button"!=e&&"button1"!=e&&"button2"!=e&&"button3"!=e&&"button4"!=e&&"button6"!=e&&"button12"!=e&&"button19"!=e)"RC"==t&&(a.push({id:window.XC_Text.alarm,cmd:"alarm"}),a.push({id:window.XC_Text.battery,cmd:"battery"}),a.push({id:window.XC_Text.timeout,cmd:"timeout"}),a.push({id:window.XC_Text.sabotage,cmd:"sabotage"}));else if("HM"==t){"button"==e&&(e="button4");for(var n=parseInt(e.match(/[0-9]+/)[0],10),r=1;r<=n;r++){var o,s=40;o=r<=9?"0"+r:r,s+=r,a.push({id:r,cmd:o}),a.push({id:r+"L",cmd:s});}}else"R2"==t?(a.push({id:window.XC_Text.on,cmd:"opened"}),a.push({id:window.XC_Text.off,cmd:"closed"})):(a.push({id:window.XC_Text.on,cmd:"on"}),a.push({id:window.XC_Text.off,cmd:"off"}),"FS20"==t&&a.push({id:window.XC_Text.toggle,cmd:"toggle"}));}else a.push({id:window.XC_Text.motion,cmd:"opened"});}else a.push({id:window.XC_Text.water,cmd:"opened"});}else a.push({id:window.XC_Text.firealarm,cmd:"fire"});return a;},IQ.prototype.getGatewayCommands=function(e,t,a){var n=[];if(XC.debugf("getGatewayCommands: "+e+" - "+t),"L2"==e||"L3"==e)"L2"==e?n.push({id:window.XC_Text.power,cmd:"power"}):(n.push({id:window.XC_Text.on,cmd:"on"}),n.push({id:window.XC_Text.off,cmd:"off"})),a||(n.push({id:window.XC_Text.red,cmd:"red"}),n.push({id:window.XC_Text.purple,cmd:"purple"}),n.push({id:window.XC_Text.blue,cmd:"blue"}),n.push({id:window.XC_Text.cyan,cmd:"cyan"}),n.push({id:window.XC_Text.green,cmd:"green"}),n.push({id:window.XC_Text.yellow,cmd:"yellow"}),n.push({id:window.XC_Text.orange,cmd:"orange"}),n.push({id:window.XC_Text.white,cmd:"white"}));else if("CF3"==e||"CF4"==e)n.push({id:window.XC_Text.on,cmd:"on"}),n.push({id:window.XC_Text.off,cmd:"off"}),a||(n.push({id:window.XC_Text.scene+" 1",cmd:"scene1"}),n.push({id:window.XC_Text.scene+" 2",cmd:"scene2"}),n.push({id:window.XC_Text.scene+" 3",cmd:"scene3"}));else if("IN"!=e||"fan"!=t&&"fanV2"!=t){if("IN"==e&&"blind"==t){if(a||n.push({id:"I-Position",cmd:"P1"}),n.push({id:window.XC_Text.moveup,cmd:"moveUp"}),!a)for(var r=0;r<=100;r+=10){n.push({id:window.XC_Text.moveto+" "+r+"%",cmd:"moveTo"+r+"%"});}if(n.push({id:window.XC_Text.movedown,cmd:"moveDown"}),a&&n.push({id:window.XC_Text.stop,cmd:"stop"}),!a)for(r=1;r<=16;r++){n.push({id:window.XC_Text.lamellapos+" "+r,cmd:"L"+r});}}else if("KOPP"!=e&&"FS20"!=e&&"IT"!=e&&"HE"!=e&&"ELRO"!=e&&"SL"!=e&&"CR"!=e&&"MC"!=e&&"AN"!=e||"shutter"!=t&&"blind"!=t&&"awning"!=t){if("DB2"==e)n.push({id:window.XC_Text.moveup,cmd:"up"}),n.push({id:window.XC_Text.movedown,cmd:"down"});else if("GQ"==e||"R2"==e&&"shutter"==t)n.push({id:window.XC_Text.moveup,cmd:"up"}),n.push({id:window.XC_Text.movedown,cmd:"down"}),n.push({id:window.XC_Text.stop,cmd:"stop"});else if("IA"!=e&&"WA"!=e||"shutter"!=t){if("EO"!=e||"shutter"!=t&&"blind"!=t){if("BS"==e&&"heater"==t)n.push({id:window.XC_Text.day,cmd:"day"}),n.push({id:window.XC_Text.night,cmd:"night"});else if(("HM"!=e&&"FS20"!=e&&"IT"!=e&&"HE"!=e&&"ELRO"!=e&&"CR"!=e&&"MC"!=e&&"IA"!=e&&"EO"!=e&&"SL"!=e&&"AN"!=e&&"R2"!=e||"switch"!=t&&"light"!=t&&"dimmer"!=t&&"0009"!=t&&"meteringSwitch"!=t)&&("KOPP"!=e||"light"!=t&&"switch"!=t&&"dimmer"!=t)&&("RC"!=e&&"HM"!=e||"siren"!=t)&&"PE"!=e&&"BS"!=e&&"fritz"!=e){if("RC"!=e||"window"!=t&&"door"!=t&&"sensor"!=t){if("HM"!=e&&"ER"!=e&&"UR"!=e&&"DY"!=e&&"WA"!=e&&"KN"!=e&&"RT"!=e||"shutter"!=t&&"blind"!=t&&"venetian"!=t&&"raffstore"!=t){if("KN"!=e||"switch"!=t&&"light"!=t){if("HM"==e&&"esco-window"==t){n.push({id:window.XC_Text.up,cmd:"0"}),n.push({id:window.XC_Text.down,cmd:"100"});for(r=90;r>=10;r-=10){n.push({id:window.XC_Text.moveto+" "+r+"%",cmd:r});}n.push({id:window.XC_Text.stop,cmd:"stop"});}else if("HM"==e&&"esco-door"==t)n.push({id:window.XC_Text.open,cmd:"openEscoDoor"});else if("HM"!=e&&"ER"!=e||"awning"!=t){if("HM"==e&&"rooflight"==t)n.push({id:window.XC_Text.open,cmd:"moveDown"}),n.push({id:window.XC_Text.close,cmd:"moveUp"}),n.push({id:window.XC_Text.stop,cmd:"stop"});else if("HM"==e&&"esco-window"==t)n.push({id:window.XC_Text.up,cmd:"0"}),n.push({id:window.XC_Text.down,cmd:"100"}),n.push({id:window.XC_Text.stop,cmd:"stop"});else if("HM"==e&&"0075"==t)a||(n.push({id:window.XC_Text.alarm,cmd:"vChannel02"}),n.push({id:window.XC_Text.door_opening,cmd:"vChannel04"}),n.push({id:window.XC_Text.door_closing,cmd:"vChannel05"}),n.push({id:window.XC_Text.door_stopped,cmd:"vChannel06"}));else if("HM"!=e||"wallthermostat"!=t&&"thermostat"!=t&&"thermocontrol"!=t){if("FHT80B"==e&&"heater"==t){if(!a){n.push({id:window.XC_Text.manu,cmd:"setManu"}),n.push({id:window.XC_Text.auto,cmd:"setAuto"});for(r=6;r<=30;r+=.5){n.push({id:r.toFixed(1)+"C",cmd:Math.floor(2*r)});}}}else"CODE"==e&&this._systemData.$ircodesXML.find("ircodes device[id='"+t+"'] key").each(function(){var e=$(this).attr("id");window.XC_Text[e]?n.push({id:window.XC_Text[e],cmd:e}):n.push({id:e,cmd:e});});}else if(!a){n.push({id:window.XC_Text.manu,cmd:"setManu"}),n.push({id:window.XC_Text.auto,cmd:"setAuto"}),"thermocontrol"!=t&&n.push({id:window.XC_Text.boost,cmd:"setBoost"});for(r=6;r<=30;r+=.5){n.push({id:r.toFixed(1)+"C",cmd:Math.floor(2*r)});}}}else{if(n.push({id:window.XC_Text.movein,cmd:"moveUp"}),!a&&"ER"!=e)for(r=90;r>=10;r-=10){n.push({id:window.XC_Text.moveto+" "+r+"%",cmd:"moveTo"+r+"%"});}n.push({id:window.XC_Text.moveout,cmd:"moveDown"}),a&&n.push({id:window.XC_Text.stop,cmd:"stop"});}}else n.push({id:window.XC_Text.on,cmd:"moveUp"}),n.push({id:window.XC_Text.off,cmd:"moveDown"});}else{if(n.push({id:window.XC_Text.moveup,cmd:"moveUp"}),!a&&"HM"==e)for(var r=90;r>=10;r-=10){n.push({id:window.XC_Text.moveto+" "+r+"%",cmd:"moveTo"+r+"%"});}n.push({id:window.XC_Text.movedown,cmd:"moveDown"}),a||"KN"!=e&&"RT"!=e||n.push({id:window.XC_Text.position,cmd:"pos1"}),a||"ER"!=e||"shutter"!=t&&"blind"!=t||(n.push({id:window.XC_Text.b_shadow,cmd:"shadow"}),n.push({id:window.XC_Text.b_air,cmd:"air"})),a&&(n.push({id:window.XC_Text.stop,cmd:"stop"}),"RT"==e&&n.push({id:window.XC_Text.t_startlearnmode,cmd:"learn"}));}}else n.push({id:window.XC_Text.resetAllRC,cmd:"resetAll"});}else if(n.push({id:window.XC_Text.on,cmd:"on"}),n.push({id:window.XC_Text.off,cmd:"off"}),a&&"KOPP"==e&&"dimmer"==t&&n.push({id:window.XC_Text.toggle,cmd:"toggle"}),!a&&"dimmer"==t&&"KOPP"!=e&&"IA"!=e&&"EO"!=e)for(var r=10;r<=100;r+=10){n.push({id:r+"%",cmd:r+"%"});}}else n.push({id:window.XC_Text.moveup,cmd:"holdOn"}),n.push({id:window.XC_Text.movedown,cmd:"holdOff"}),a&&"shutter"==t&&n.push({id:window.XC_Text.stop,cmd:"stop"});}else a?(n.push({id:window.XC_Text.up,cmd:"up"}),n.push({id:window.XC_Text.down,cmd:"down"})):(n.push({id:window.XC_Text.moveup,cmd:"moveUp"}),n.push({id:window.XC_Text.movedown,cmd:"moveDown"}));}else"awning"==t?"SL"==e?(n.push({id:window.XC_Text.movein,cmd:"up"}),n.push({id:window.XC_Text.moveout,cmd:"down"})):(n.push({id:window.XC_Text.movein,cmd:"on"}),n.push({id:window.XC_Text.moveout,cmd:"off"})):"SL"==e?"blind"==t?(n.push({id:window.XC_Text.moveup,cmd:"moveUp"}),n.push({id:window.XC_Text.movedown,cmd:"moveDown"})):(n.push({id:window.XC_Text.moveup,cmd:"up"}),n.push({id:window.XC_Text.movedown,cmd:"down"})):(n.push({id:window.XC_Text.moveup,cmd:"on"}),n.push({id:window.XC_Text.movedown,cmd:"off"}));}else a?(n.push({id:window.XC_Text.level1,cmd:"level1"}),n.push({id:window.XC_Text.turbo,cmd:"turbo"})):(n.push({id:window.XC_Text.level1,cmd:"level1"}),n.push({id:window.XC_Text.level2,cmd:"level2"}),n.push({id:window.XC_Text.level3,cmd:"level3"}),n.push({id:window.XC_Text.standby,cmd:"standby"}),n.push({id:window.XC_Text.auto,cmd:"auto"}),"fan"==t&&n.push({id:window.XC_Text.turbo,cmd:"turbo"}),"fanV2"==t&&(n.push({id:window.XC_Text.turbo_1,cmd:"turbo"}),n.push({id:window.XC_Text.turbo_2,cmd:"turbo_2"}),n.push({id:window.XC_Text.turbo_3,cmd:"turbo_3"}),n.push({id:window.XC_Text.turbo_4,cmd:"turbo_4"}),n.push({id:window.XC_Text.night_mode_in_1,cmd:"night_mode_in_1"}),n.push({id:window.XC_Text.night_mode_in_2,cmd:"night_mode_in_2"}),n.push({id:window.XC_Text.night_mode_in_3,cmd:"night_mode_in_3"}),n.push({id:window.XC_Text.night_mode_out_1,cmd:"night_mode_out_1"}),n.push({id:window.XC_Text.night_mode_out_2,cmd:"night_mode_out_2"}),n.push({id:window.XC_Text.night_mode_out_3,cmd:"night_mode_out_3"})));return n;},IQ.prototype.getDeviceTrigger=function(e,t){var a=null;if(t=t.toUpperCase(),XC.debugf("DEVICE: "+e+"->"+t),"HM"==e&&10==t.length){var n=null;"C8"==(u=t.substr(8))?n="opened":"00"==u&&(n="closed");var r=t.substr(0,8),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("HM"==e&&8==t.length){n=t.substr(6),r=t.substr(0,6)+"01",o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("CR"==e&&8==t.length){n="on";var s=t.charAt(0);if("1"!=t.charAt(1)&&("7"==s||"A"==s||"1"==s||"4"==s)||"1"==t.charAt(1)&&"7"!=s&&"A"!=s&&"1"!=s&&"4"!=s)s=(parseInt(s,16)-1).toString(16).toUpperCase(),n="off";r=s+t.substr(1),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("MC"==e&&6==t.length){n="off";"5"==t.charAt(5)&&(n="on");r=t.substr(0,5),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("RC"==e&&6==t.length){n=null;"00"==(u=t.substr(4))?n="ok":"01"==u?n="alarm":"02"==u?n="battery":"03"==u?n="sabotage":"05"==u&&(n="timeout");r=t.substr(0,4),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("KOPP"==e&&12==t.length){n=null;"20"==(u=t.substr(4,2))?n="opened":"10"==u&&(n="closed");r=t.substr(0,4)+"00"+t.substr(10,2),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("IT"==e){n=null,r=null;if(3==t.length)"E"==t.charAt(2)?n="on":"6"==t.charAt(2)&&(n="off"),r=t.charAt(0)+"."+t.charAt(1);else if(8==t.length){n=1&(i=parseInt(t.substr(6,1),16))?"on":"off",i&=-2,r=t.substr(0,6)+i+"."+t.substr(7,1);}o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("FS20"==e&&10==t.length){n=null;"10"==(u=t.substr(6,2))?n="on":"00"==u?n="off":"12"==u&&(n="toggle");r=t.substr(0,2)+"."+t.substr(2,2)+"."+t.substr(4,2),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("AN"==e&&10==t.length){n=null;"00"==(u=t.substr(8,2))?n="on":"10"==u&&(n="off");r=t.substr(0,8),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("SIAU"!=e&&"SIAUD"!=e&&"SIAUR"!=e&&"SIAUG"!=e||8!=t.length){if("IW"==e&&12==t.length){n=null;"0100"==(u=t.substr(8))?n="opened":"0102"==u?n="closed":"0101"==u&&(n="tilted");r=t.substr(0,8),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("R2"!=e||10!=t.length&&8!=t.length){if("PV"==e&&10==t.length){n=null;"04"==(u=t.substr(8,2))?n="opened":"05"==u?n="closed":"08"==u?n="fire":"01"==u&&(n="motion");r=t.substr(0,8),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else if("MX"==e||"GV"==e||"ELRO"==e&&8==t.length){(o=this._systemData.getDeviceName(e,t))&&(a={device:o,trigger:"opened"});}else if("HE"==e&&14==t.length){var i;n=null;0==(24&(i=parseInt(t.substr(10,2),16)))?(4&i?n="on":2&i&&(n="off"),i&=-7):(2&i?n="on":1&i&&(n="off"),i&=-4);r=t.substr(0,10)+XC.getHexVal(i,2)+t.substr(12,2),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}else"IRCODE"==e&&(a={ircode:t});}else{var n=null;"0002"==(u=t.substr(6))?n="off":"0001"==u&&(n="on"),"02"==u?n="closed":"01"==u&&(n="opened");var r=t.substr(0,6),o=this._systemData.getDeviceName(e,r);n&&o&&(a={device:o,trigger:n});}}else{var u,n=null;"0F"==(u=t.substr(6,2))?n="opened":"2F"==u?n="closed":"1F"==u&&(n="tilted");var r=t.substr(0,6),o=this._systemData.getDeviceName("SIAU",r);n&&o&&(a={device:o,trigger:n});}return a;},IQ.prototype.getDeviceCommand=function(e,t,a,n){var r=null,o=null;if(t=t.toUpperCase(),XC.debugf("DEVICECOMMAND: "+e+"->"+t),"PE"!=e||10!=t.length&&12!=t.length){if("HM"==e&&t.length>=10){d=null;if(12==t.length?"0"==t.charAt(8)&&"5"==t.charAt(9)?d=parseInt(t.substr(10),16)+"%":"0"==t.charAt(8)&&"A"==t.charAt(9)?d="moveTo"+parseInt(t.substr(10),16)+"%":"1"==t.charAt(8)&&"1"==t.charAt(9)?d=parseInt(t.substr(10),16):"1"==t.charAt(8)&&"C"==t.charAt(9)&&("01"==t.substr(10)?d="setManu":"00"==t.substr(10)?d="setAuto":"03"==t.substr(10)&&(d="setBoost")):10==t.length&&("0"==t.charAt(8)&&"1"==t.charAt(9)?d="on":"0"==t.charAt(8)&&"2"==t.charAt(9)?d="off":"0"==t.charAt(6)&&"2"==t.charAt(7)&&"1"==t.charAt(8)&&"9"==t.charAt(9)?(d="vChannel02",o=6):"0"==t.charAt(6)&&"4"==t.charAt(7)&&"1"==t.charAt(8)&&"9"==t.charAt(9)?(d="vChannel04",o=6):"0"==t.charAt(6)&&"5"==t.charAt(7)&&"1"==t.charAt(8)&&"9"==t.charAt(9)?(d="vChannel05",o=6):"0"==t.charAt(6)&&"6"==t.charAt(7)&&"1"==t.charAt(8)&&"9"==t.charAt(9)?(d="vChannel06",o=6):"2"==t.charAt(8)&&"2"==t.charAt(9)&&(d="openEscoDoor")),o&&6==o)v=t.substr(0,6);else v=t.substr(0,8);y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("IN"==e&&6==t.length){d=null;"000C"==(h=t.substr(2))?d="moveUp":"000D"==h?d="moveDown":"0007"==h?d="stop":"0040"==h?d="level1":"0041"==h?d="level2":"0042"==h?d="level3":"0043"==h?d="standby":"0044"==h?d="auto":"0046"==h?d="turbo":"0051"==h?d="turbo_2":"0052"==h?d="turbo_3":"0053"==h?d="turbo_4":"0054"==h?d="night_mode_in_1":"0055"==h?d="night_mode_in_2":"0056"==h?d="night_mode_in_3":"0057"==h?d="night_mode_out_1":"0058"==h?d="night_mode_out_2":"0059"==h?d="night_mode_out_3":"0148"==h?d="P1":"1"==t.charAt(2)&&"8"==t.charAt(3)?d="moveTo"+(100-parseInt(t.substr(4),16))+"%":"0"==t.charAt(2)&&"0"==t.charAt(3)&&(d="L"+(parseInt(t.substr(4),16)-63));v=t.substr(0,2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("ER"==e&&4==t.length){d=null;"08"==(h=t.substr(2))||"01"==h?d="moveUp":"09"==h||"00"==h?d="moveDown":"0B"==h?d="shadow":"0A"==h&&(d="air");v=t.substr(0,2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("CF4"==e&&8==t.length||"CF3"==e&&4==t.length){d=null;"04"==(h=t.substr(0,2))?d="on":"05"==h?d="off":"06"==h?d="offSave":"07"==h?d="scene1":"08"==h?d="scene2":"09"==h&&(d="scene3");v=t.substr(2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("L2"!=e||8!=t.length&&6!=t.length){if("AN"==e&&t.length>8){d=null;"0"==(h=t.charAt(8))?d="on":"1"==h&&(d="off");v=t.substr(0,8),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("DB"!=e&&"DB2"!=e||2!=t.length){if("EO"==e&&t.length>=12){d=null,h=t.substr(2,2);t.length>12?"10"==h?d="on":"30"==h&&(d="off"):"10"==h?d="holdOn":"30"==h&&(d="holdOff");v=t.substr(4,8),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("INSTA"==e&&16==t.length){d=null;e="IA","0202"==(h=t.substr(12))?d="on":"0102"==h?d="off":"0203"==h?d="moveUp":"0103"==h&&(d="moveDown");v=t.substr(0,12),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("NULL"==e&&10==t.length){XC.debugf("WAREMA == NULL!"),e="WA";d=null;var s=14942207&(p=parseInt(t.substr(0,8),16));"01"==t.substr(8)&&(p-s==1947992064?d="moveUp":p-s==1947729920&&(d="moveDown"));v=XC.getHexVal(s,6),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("SL"!=e||6!=t.length&&8!=t.length){if("UR"==e&&6==t.length){d=null;"1"==(h=t.substr(5))?d="moveUp":"4"==h&&(d="moveDown");v=t.substr(0,5),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("DY"==e&&10==t.length){d=null;"11"==(h=t.substr(8))?d="moveUp":"33"==h&&(d="moveDown");v=t.substr(0,8),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("KN"==e&&16==t.length){d=null;"80"==(h=t.substr(10,2))?d="moveUp":"20"==h?d="moveDown":"4C"==h&&(d="pos1");v=t.substr(0,10),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("RT"==e&&8==t.length){d=null;"20"==(h=t.substr(0,2))?d="moveUp":"40"==h?d="moveDown":"10"==h&&(d="pos1");v=t.substr(2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("R2"==e&&t.length>=10){d=null;"0002"==(h=t.substr(6))?d="off":"0001"==h?d="on":"0101"==h?d="up":"0102"==h?d="down":"0003"==h?d="stop":8==h.length&&(d="0002AAAA"==h?"0":parseInt(h.substr(6),16)+"%");v=t.substr(0,6),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("FS20"==e&&10==t.length){d=null;"10"==(h=t.substr(6,2))?d="on":"00"==h?d="off":"12"==h?d="toggle":"11"==h?d="restore":"02"==h?d="10%":"03"==h?d="20%":"05"==h?d="30%":"06"==h?d="40%":"08"==h?d="50%":"09"==h?d="60%":"0B"==h?d="70%":"0D"==h?d="80%":"0E"==h&&(d="90%");v=t.substr(0,2)+"."+t.substr(2,2)+"."+t.substr(4,2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("ELRO"==e&&6==t.length){d=null;"1"==t.charAt(5)?d="on":"4"==t.charAt(5)&&(d="off");v=t.substr(0,5)+"1",y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("CR"==e&&8==t.length){d="on";var i=t.charAt(0);if("1"!=t.charAt(1)&&("7"==i||"A"==i||"1"==i||"4"==i)||"1"==t.charAt(1)&&"7"!=i&&"A"!=i&&"1"!=i&&"4"!=i)i=(parseInt(i,16)-1).toString(16).toUpperCase(),d="off";v=i+t.substr(1),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("MC"==e&&6==t.length){d="off";"5"==t.charAt(5)&&(d="on");v=t.substr(0,5),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("HE"==e&&14==t.length){d=null;0==(24&(p=parseInt(t.substr(10,2),16)))?(4&p?d="on":2&p&&(d="off"),p&=-7):(2&p?d="on":1&p&&(d="off"),p&=-4);v=t.substr(0,10)+XC.getHexVal(p,2)+t.substr(12,2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("IT"!=e||3!=t.length&&8!=t.length&&10!=t.length){if("KOPP"==e&&12==t.length){d=null;"2"==t.charAt(4)?d="off":"3"==t.charAt(4)?d="on":"B"==t.charAt(4)?d="up":"A"==t.charAt(4)&&(d="down");v=t.substr(0,4)+"1003",y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("RC"==e&&6==t.length){d=null;"2"==t.charAt(4)?d="on":"8"==t.charAt(4)&&(d="off");v=t.substr(0,4),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("FHT80B"==e&&8==t.length){d=null;var u=t.substr(4,2),l=t.substr(6,2);d="FF"!=l?parseInt(l,16):"00"==u?"setManu":"setAuto";v=t.substr(0,2)+"."+t.substr(2,2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}else if("CODE"==e){d=null,y=null;var m=this;this._systemData.$ircodesXML.find("device key[code='"+t+"']").each(function(){var e=$(this),t=e.parent().attr("id");m._systemData.$devicesXML.find("locations location device[type='CODE']").each(function(){var a=$(this);a.attr("data")==t&&(d=e.attr("id"),y=a.parent().attr("id")+"."+a.attr("id"));});}),d&&y&&(r={device:y,command:d});}}else{var d=null;3==t.length&&("E"==t.charAt(2)?d="on":"6"==t.charAt(2)&&(d="off"));v=t.charAt(0)+"."+t.charAt(1);if(t.length>=8){var p=parseInt(t.substr(6,1),16);d=1&p?"on":"off",p&=-2,v=t.substr(0,6)+p+"."+t.substr(7,1);}if(10==t.length){var f=t.charAt(8);"0"==f?d="10%":"1"==f?d="20%":"2"==f?d="30%":"3"==f?d="40%":"5"==f?d="50%":"7"==f?d="60%":"9"==f?d="70%":"B"==f?d="80%":"D"==f?d="90%":"F"==f&&(d="100%");}y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}}else{var d="on",c=parseInt(t.substr(3,2),16)>>2;0==(15&c)||8==(15&c)?(c+=2,d="off"):14==(15&c)&&(c-=3,d="off"),8==t.length&&(d="1"==t.charAt(6)?"off"==d?"moveDown":"moveUp":"off"==d?"down":"up"),c<<=2;var v=t.substr(0,3)+XC.getHexVal(c,2),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}}else{var d=null;"02"==t?d="up":"04"==t&&(d="down");var v="01";(y=this._systemData.getDeviceName("DB",v))||(y=this._systemData.getDeviceName("DB2",v)),d&&y&&(r={device:y,command:d});}}else{var d=null,y=null;if(8==t.length){2==(h=511&parseInt(t.substr(4),16))?d="power":408==h?d="red":40==h?d="purple":80==h?d="blue":152==h?d="cyan":240==h?d="green":336==h?d="yellow":368==h?d="orange":6==h&&(d="white");var v=XC.getHexVal(16777214&parseInt(t.substr(0,6),16),6),y=this._systemData.getDeviceName(e,v);}else{var h;"FFF"==(h=t.substr(3))?d="power":"33F"==h?d="red":"30F"==h?d="purple":"03F"==h?d="blue":"000"==h?d="cyan":"F03"==h?d="green":"C33"==h?d="yellow":"C03"==h?d="orange":"FC3"==h&&(d="white");var v=t.substr(0,3),y=this._systemData.getDeviceName(e,v);}d&&y&&(r={device:y,command:d});}}else{12==t.length&&(t=t.substr(0,2)+t.substr(4));var d=null;d="0"==t.charAt(9)?"off":"on";var v=t.substr(0,8),y=this._systemData.getDeviceName(e,v);d&&y&&(r={device:y,command:d});}return r;},IQ;}(),t=function(){var V4=function V4(){};return V4.prototype._getAll=function(e,t){e._executeRequest("GetAll",null,{timeout:5e3},function(e,a){if(e)t&&t(e);else{var n={actions:[],triggers:[],tasks:[]};if(a&&a.length>0)for(var r=a.length;r--;){if(a[r]&&a[r].sys)switch(a[r].sys.toLowerCase()){case"action":n.actions.push(a[r]);break;case"task":case"event":case"astro":n.triggers.push(a[r]);break;case"group":n.tasks.push(a[r]);}}t&&t(null,n);}});},V4.prototype._addAction=function(e,t,a,n){if(t&&a){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}a.id=t,void 0!==a.active&&null!=a.active||(a.active=1),e._executeRequest("AddAction",a,{timeout:5e3},function(e){n&&n(e);});}else n&&n(new Error("function argument invalid"));},V4.prototype._delAction=function(e,t,a){if(t){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}var n={id:t};e._executeRequest("DelAction",n,{timeout:5e3},function(e){a&&a(e);});}else a&&a(new Error("function argument invalid"));},V4.prototype._addTimeTrigger=function(e,t,a,n){if(t&&a&&a.days&&a.time&&a.dateStart&&a.dateEnd){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}a.id=t,void 0!==a.active&&null!=a.active||(a.active=1),e._executeRequest("AddTask",a,{timeout:5e3},function(e){n&&n(e);});}else n&&n(new Error("function argument invalid"));},V4.prototype._addAstroTrigger=function(e,t,a,n){if(t&&a&&a.days&&a.time&&a.dateStart&&a.dateEnd&&a.delay){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}a.id=t,void 0!==a.active&&null!=a.active||(a.active=1),e._executeRequest("AddAstro",a,{timeout:5e3},function(e){n&&n(e);});}else n&&n(new Error("function argument invalid"));},V4.prototype._addEventTrigger=function(e,t,a,n){if(t&&a&&a.type&&a.code){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}a.id=t,void 0!==a.active&&null!=a.active||(a.active=1),e._executeRequest("AddEvent",a,{timeout:5e3},function(e){n&&n(e);});}else n&&n(new Error("function argument invalid"));},V4.prototype._delTrigger=function(e,t,a){if(t){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}var n={id:t};e._executeRequest("DelTask",n,{timeout:5e3},function(e){a&&a(e);});}else a&&a(new Error("function argument invalid"));},V4.prototype._addTask=function(e,t,a,n){if(t&&a){for(a.triggerids||(a.triggerids=""),a.actionids||(a.actionids=""),"number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}a.id=t,void 0!==a.active&&null!=a.active||(a.active=1),e._executeRequest("AddGroup",a,{timeout:5e3},function(e){n&&n(e);});}else n&&n(new Error("function argument invalid"));},V4.prototype._delTask=function(e,t,a){if(t){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}var n={id:t};e._executeRequest("DelGroup",n,{timeout:5e3},function(e){a&&a(e);});}else a&&a(new Error("function argument invalid"));},V4.prototype._toggleTask=function(e,t,a){if(t){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}var n={id:t};e._executeRequest("toggleEvent",n,{timeout:5e3},function(e){a&&a(e);});}else a&&a(new Error("function argument invalid"));},V4.prototype._activateTask=function(e,t,a,n){if(t){for("number"==typeof t&&(t=xnm.aio.gateway.Util.getHexVal(t,2));t.length<2;){t="0"+t;}var r={id:t,active:a?1:0};e._executeRequest("saveGroup",r,{timeout:5e3},function(e){n&&n(e);});}else n&&n(new Error("function argument invalid"));},V4.prototype._getMessage=function(e,t,a){xnm.aio.gateway.Admin.getGatewaySID(e,function(e,n){if(e)a&&a(e);else if(n){var r=new(require("xnm.aio.cloud.js").Server)();r._url="http://messages.aio-control.com/ai2/m.php?",r.getMessage(n,t,function(e){if(e&&e.data){if(e.data.mail&&e.data.message){var t={};t.reception=e.data.mail,t.message=e.data.message,t.sns=e.data.snsType,a&&a(null,t);}else a&&a(new Error("no such notification"));}else a&&a(new Error("get message from server error"));});}else a&&a(new Error("gateway has no sid"));},null,e.password);},V4.prototype._setMessage=function(e,t,a,n,r,o){xnm.aio.gateway.Admin.getGatewaySID(e,function(e,s){if(e)r&&r(e);else if(s){var i=new(require("xnm.aio.cloud.js").Server)();i._url="http://messages.aio-control.com/ai2/m.php?",i.setMessage(s,t,a,n,function(e){e&&!e.error?r&&r():r&&r(new Error(e.error));},o);}else r&&r(new Error("gateway has no sid"));},null,e.password);},V4.prototype._getFreeTaskID=function(e,t){this._getAll(e,function(e,a){if(e)t&&t(e);else if(a&&a.tasks){for(var n,r=1;r<200;r++){for(var o=!1,s=0;s<a.tasks.length;s++){if(a.tasks[s].id&&r==parseInt(a.tasks[s].id,16)){o=!0;break;}}if(!o){n=r;break;}}t&&t(n?null:new Error("no free id"),{id:n});}else t&&t(null,{id:1});});},V4.prototype._getFreeTriggerID=function(e,t){this._getAll(e,function(e,a){if(e)t&&t(e);else if(a&&a.triggers){for(var n,r=1;r<255;r++){for(var o=!1,s=0;s<a.triggers.length;s++){if(a.triggers[s].id&&r==parseInt(a.triggers[s].id,16)){o=!0;break;}}if(!o){n=r;break;}}t&&t(n?null:new Error("no free id"),{id:n});}else t&&t(null,{id:1});});},V4.prototype._getFreeActionID=function(e,t){this._getAll(e,function(e,a){if(e)t&&t(e);else if(a&&a.actions){for(var n,r=1;r<255;r++){for(var o=!1,s=0;s<a.actions.length;s++){if(a.actions[s].id&&r==parseInt(a.actions[s].id,16)){o=!0;break;}}if(!o){n=r;break;}}t&&t(n?null:new Error("no free id"),{id:n});}else t&&t(null,{id:1});});},V4;}(),a=function(){var V5=function V5(){t.call(this);};return(V5.prototype=new t()).constructor=V5,V5.prototype.getAll=function(e,t){e._executeRequest("GetAll",null,{timeout:5e3},function(e,a){t&&t(e,a);});},V5;}(),n=function(){var V6=function V6(){a.call(this);};return(V6.prototype=new a()).constructor=V6,V6.prototype.createSensorTask=function(e,t,a){e._executeRequest("AddSTASK",t,{method:"POST"},function(e,t){a&&a(e,t);});},V6.prototype.updateSensorTask=function(e,t,a){if(t&&t.id){e._executeRequest("SaveSTASK",t,{method:"POST"},function(e,t){a&&a(e,t);});}else a&&a(new Error("invalid id"));},V6.prototype.deleteSensorTask=function(e,t,a){if(t&&t.id){e._executeRequest("DelSTASK",t,{method:"POST"},function(e,t){a&&a(e,t);});}else a&&a(new Error("invalid id"));},V6.prototype.createTime=function(e,t,a){e._executeRequest("AddTime",t,{method:"POST"},function(e,t){a&&a(e,t);});},V6.prototype.updateTime=function(e,t,a){if(t&&t.id){e._executeRequest("SaveTime",t,{method:"POST"},function(e,t){a&&a(e,t);});}else a&&a(new Error("invalid id"));},V6.prototype.deleteTime=function(e,t,a){if(t&&t.id){e._executeRequest("DelTime",t,{method:"POST"},function(e,t){a&&a(e,t);});}else a&&a(new Error("invalid id"));},V6.prototype.createSensorEvent=function(e,t,a){e._executeRequest("AddSensorEvent",t,{method:"POST"},function(e,t){a&&a(e,t);});},V6.prototype.updateSensorEvent=function(e,t,a){if(t&&t.id){e._executeRequest("AddSensorEvent",t,{method:"POST"},function(e,t){a&&a(e,t);});}else a&&a(new Error("invalid id"));},V6.prototype.deleteSensorEvent=function(e,t,a){e._executeRequest("DelSensorEvent",t,{method:"POST"},function(e,t){a&&a(e,t);});},V6.prototype.createDeviceAction=function(e,t,a){e._executeRequest("AddDeviceAction",t,{method:"POST"},function(e,t){a&&a(e,t);});},V6.prototype.updateDeviceAction=function(e,t,a){if(t&&t.id){e._executeRequest("AddDeviceAction",t,{method:"POST"},function(e,t){a&&a(e,t);});}else a&&a(new Error("invalid id"));},V6.prototype.deleteDeviceAction=function(e,t,a){e._executeRequest("DelDeviceAction",t,{method:"POST"},function(e,t){a&&a(e,t);});},V6;}(),r=e;return r.V4=t,r.V5=a,r.V6=n,r;}(),xnm.aio.gateway.RulesManager=function(e){this._systemData=e,this._webServiceUrl="https://webservice.mediola.com/",this.isInRemoteMode=!1,this.maxAlarmDelay=120;},xnm.aio.gateway.RulesManager.prototype.setRemoteMode=function(e){this.isInRemoteMode=!!e;},xnm.aio.gateway.RulesManager.prototype.setWebservice=function(e){this._webServiceUrl=e;},xnm.aio.gateway.RulesManager.prototype.getTasks=function(e,t,a){var n={XC_FNC:"GetTask"};t&&(n.id=t),this._executeRequest(e,n,a);},xnm.aio.gateway.RulesManager.prototype.toggleTask=function(e,t,a){var n=!1;t.active||(n=!0);var r={XC_FNC:"SetTaskActive",id:t.id,active:n};this._executeRequest(e,r,a);},xnm.aio.gateway.RulesManager.prototype.deleteTask=function(e,t,a){var n={XC_FNC:"DeleteTask",id:t.id};this._executeRequest(e,n,a);},xnm.aio.gateway.RulesManager.prototype.saveTask=function(e,t,a){var n={XC_FNC:"CreateTask"};t&&t.id&&(n.XC_FNC="UpdateTask"),n.data=t,this._executeRequest(e,n,a);},xnm.aio.gateway.RulesManager.prototype._executeRequest=function(e,t,a){e.executeRequestV5Plus(t,function(e){e&&e.data?a&&a(null,e):e&&e.error?a&&a(e.error,null):a&&a({});});},xnm.aio.gateway.Rules=function(){},xnm.aio.gateway.Rules.prototype.getRuleStatebyGw=function(e,t,a){var n="/api/state";e.isInRemoteMode&&(n+="?auth="+e.password),e._executeRequest(n,t,{method:"POST"},function(e,t){e?a(new Error("error_retrieving_rules"),null):a(null,t);});},xnm.aio.gateway.Rules.prototype.executeRuleCommand=function(e,t,a){var n="/api/command";e.isInRemoteMode&&(n+="?auth="+e.password),e._executeRequest(n,t,{method:"POST"},function(e,t){a(e?new Error("error_exec_cmd"):null,t);});},xnm.aio.gateway.Rules.prototype.getRulesbyGw=function(e,t,a){e._executeRequest("/api/rules",null,null,function(e,n){if(e)a(new Error("error_retrieving_rules"),null);else if(t){var r={};for(var o in n){if(n.hasOwnProperty(o)){var s=n[o];t&&s.type&&s.type==t&&(r[o]=s);}}a(null,r);}else a(null,n);});},xnm.aio.gateway.Rules.prototype.getNextId=function(e,t){var a=0;this.getRulesbyGw(e,null,function(e,n){if(e)t(new Error("error_retrieving_rules"),null);else{do{a++;}while(n[a]);t&&t(null,a);}});},xnm.aio.gateway.Rules.prototype.getAll=function(e,t,a){var n={},r={},o=this,s=0,getSchedules=function getSchedules(a){if(s<e.length){var i=e[s];o.getRulesbyGw(i,null,function(e,o){if(e)r[i._mac]=e,n[i._mac]={};else{var u={};if(t){for(var l in o){if(o.hasOwnProperty(l)){var m=o[l];t&&m.type&&m.type==t&&(u[l]=m);}}n[i._mac]=u;}else n[i._mac]=o;}s++,getSchedules(a);});}else a&&a(r,n);};getSchedules(function(e,t){a(e,t);});},xnm.aio.gateway.Rules.prototype.deleteById=function(e,t,a){var n="/data/rle/"+e;t._executeRequest(n,null,{method:"POST"},function(e,t){e?a(new Error("error_deleting_rule"),null):a(null,t);});},xnm.aio.gateway.Rules.prototype.save=function(e,t,a,n){var saveRule=function saveRule(e,t,a,n){var r="/data/rle/"+e;t._executeRequest(r,a,{method:"POST"},function(e,t){e?n(new Error("error_saving_rule"),null):n(null,t);});};e?saveRule(e,t,a,function(e,t){e?n&&n(e,null):n&&n(null,t);}):this.getNextId(t,function(e,r){e?n&&n(e,null):saveRule(r,t,a,function(e,t){e?n&&n(e,null,r):n&&n(null,t,r);});});},xnm.aio.gateway.Handler=function(e){this.CommandHandler=null;var t=30;"object"==_typeof(e)&&null!==e&&("number"!=typeof e.interval||isNaN(e.interval)||(t=Math.max(10,e.interval)));var a=this;this._autoSearchInterval=setInterval(function(){a.discoverWithTimeout(1e3);},1e3*t),this.discoverWithTimeout(1e3);},xnm.aio.gateway.Handler.prototype.Admin=xnm.aio.gateway.Admin,xnm.aio.gateway.Handler.prototype.Gateway=xnm.aio.gateway.Gateway,xnm.aio.gateway.Handler.prototype.SecureConnection=xnm.aio.gateway.SecureConnection,xnm.aio.gateway.Handler.prototype.TaskManager=xnm.aio.gateway.TaskManager,xnm.aio.gateway.Handler.prototype.RulesManager=xnm.aio.gateway.RulesManager,xnm.aio.gateway.Handler.prototype.Rules=xnm.aio.gateway.Rules,xnm.aio.gateway.Handler.prototype.Systems=xnm.aio.gateway.systems,xnm.aio.gateway.Handler.prototype.getGatewayType=function(e){var t="F1";return e&&e.attr("hwv")&&("E2"==e.attr("hwv")||"F9"==e.attr("hwv")||"FA"==e.attr("hwv")||"FB"==e.attr("hwv")||"FC"==e.attr("hwv")||"FD"==e.attr("hwv")?t=e.attr("hwv"):"F3"==e.attr("hwv")&&("F3"==e.attr("swv")?t="F3":"F8"==e.attr("swv")?t="F8":"F5"==e.attr("swv")?t="F5":"F2"==e.attr("swv")&&(t="F2"))),t;},xnm.aio.gateway.Handler.prototype.getGatewayFunctionForType=function(e){return"HM"==e||"IN"==e||"PE"==e||"ELRO"==e||"FS20"==e||"IT"==e||"AN"==e||"R2"==e||"HE"==e||"KOPP"==e||"L2"==e||"ML"==e||"ER"==e||"SL"==e||"UR"==e||"RC"==e||"KN"==e||"DY"==e||"CR"==e||"IA"==e||"WA"==e||"EO"==e||"DB"==e||"DB2"==e||"GQ"==e||"RT"==e||"CF3"==e||"CF4"==e||"L3"==e||"L4"==e||"QA"==e||"MC"==e||"FX3"==e||"BK"==e||"B8"==e||"DY2"==e||"BG"==e?"SendSC":"FHT80B"==e?"SendFHT80b":"CODE"==e?"Send2":null;},xnm.aio.gateway.Handler.prototype._getINLamellaValue=function(e){var t=parseInt(e)+63;return t>79?t=79:t<64&&(t=64),(t=t.toString(16).toUpperCase()).length<2&&(t="0"+t),t;},xnm.aio.gateway.Handler.prototype.getGatewayParams=function(e,t,a){var n=null;if("DY2"==e.type){var r=null;if("moveUp"==t)r="01";else if("moveDown"==t)r="02";else if("stop"==t)r="03";else if("position"==t)r="06";else if("up"==t)r="09";else if("down"==t)r="0A";else if(parseInt(t)>=0&&parseInt(t)<=100&&"lamella"!=e.channel){r="40",r+=parseInt(t).toString(16).toUpperCase();}else if(parseInt(t)>=0&&parseInt(t)<=180&&"lamella"==e.channel){r="20",r+=parseInt(t).toString(16).toUpperCase();}else if("tiltto0"==t||"tiltto45"==t||"tiltto90"==t||"tiltto135"==t||"tiltto180"==t){r="20",r+=parseInt(t.substr(6)).toString(16).toUpperCase();}else if(-1!=t.indexOf("moveTiltTo")){r="60",r+=("00"+(+(I=t.split(":"))[2]).toString(16)).substr(-2).toUpperCase()+("00"+(+I[1]).toString(16)).substr(-2).toUpperCase();}n={type:"DY2",data:"01"+e.address+r};}else if("B8"!=e.type||"window"!=e.data&&"door"!=e.data&&"temp"!=e.data&&"motion"!=e.data&&"brightness"!=e.data&&"smoke"!=e.data&&"water"!=e.data&&"remote"!=e.data&&"button"!=e.data||"reset"==t||"resetAlarm"==t){if("B8"==e.type){r=null;"on"==t?(r="01","siren"==e.data&&(r="07")):"off"==t?(r="02","siren"==e.data&&(r="08")):"toggle"==t?r="03":"up"==t?r="04":"stop"==t?r="05":"down"==t?r="06":"reset"==t?r="09":"resetAlarm"==t&&(r="0A"),n={type:"B8",data:"01"+e.address+r};}else if("PE"==e.type){r="03";"on"==t?r="01":"off"==t&&(r="00"),n={type:"PE",data:e.address.substr(0,2)+"05"+e.address.substr(2)+r};}else if("DB"==e.type||"DB2"==e.type){r="03";if("stop"==t)r="03";else if("up"==t)r="02";else if("down"==t)r="04";else if("lamelle"==e.channel)r="050"+(t-1);else{r="01";var o="00";10==t?o="0A":20==t?o="14":30==t?o="1E":40==t?o="28":50==t?o="32":60==t?o="3C":70==t?o="46":80==t?o="50":90==t?o="5A":100==t&&(o="64"),r+=o;}r&&(n={type:"DB",data:r});}else if("SIAU"==e.type){var s="SIAU";"door"==e.data?s="SIAUD":"smoke"==e.data?s="SIAUR":"glass"==e.data&&(s="SIAUG");r="0F";"closed"==t?r="2F":"tilted"!=t&&"fire"!=t&&"alarm"!=t||(r="1F"),n={type:s,data:e.address+r};}else if("IW"==e.type){r="0100";"closed"==t?r="0102":"tilted"==t&&(r="0101"),n={type:"IW",data:e.address+r};}else if("GQ"==e.type){r="55";"stop"==t?r="55":"up"==t?r="11":"down"==t&&(r="33"),n={type:"GQ",data:e.address+r};}else if("R2"==e.type){r="";var i=null;if("on"==t)r="0001";else if("off"==t)r="0002";else if("up"==t)r="0101";else if("down"==t)r="0102";else if("stop"==t)r="0003";else if("opened"==t)r="01";else if("closed"==t)r="02";else{if(0==t.indexOf("dimTo")&&(t=t.replace(/dimTo/g,"")),"0"==(t=t.replace(/%/g,"")))r="0002AAAA";else(m=parseInt(t))>0&&m<=100&&(r="01AAAA"+XC.getHexVal(m,2));}n={type:"R2",data:e.address+r};}else if("PV"==e.type){r=null;"opened"==t?r="04":"closed"==t?r="05":"fire"==t?r="08":"motion"==t&&(r="01"),r&&(n={type:"PV",data:e.address+r});}else if("EO"==e.type){r="00";var u="";"on"==t||"dimUp"==t||"up"==t||"holdOn"==t?r="10":"off"!=t&&"dimDown"!=t&&"down"!=t&&"holdOff"!=t||(r="30"),"on"==t||"off"==t?u="05":"up"==t||"down"==t?u="0E":"dimUp"!=t&&"dimDown"!=t||(u="28"),n={type:"EO",data:"F6"+r+e.address+u};}else if("ELRO"==e.type){r=null;8==e.address.length?r=e.address:(r="0","on"==t?r="1":"off"==t&&(r="4"),r=e.address.substr(0,5)+r),r&&(n={type:"ELRO",data:r});}else if("CR"==e.type){r=e.address;if("off"==t){var l=parseInt(r.charAt(0),16)+1;r=l.toString(16).toUpperCase()+r.substr(1);}r&&(n={type:"CR",data:r});}else if("MC"==e.type){r=e.address;n={type:"MC",data:r+="on"==t?"5":"4"};}else if("RC"==e.type){r=null;"ok"==t?r=e.address+"00":"alarm"==t?r=e.address+"01":"battery"==t?r=e.address+"02":"sabotage"==t?r=e.address+"03":"timeout"==t?r=e.address+"05":"on"==t?r=e.address+"29":"off"==t&&(r=e.address+"89"),r&&(n={type:"RC",data:r});}else if("MX"==e.type)n={type:"MX",data:e.address};else if("GV"==e.type)n={type:"GV",data:e.address};else if("HE"==e.type&&14==e.address.length){0==(24&(m=parseInt(e.address.substr(10,2),16)))?(m&=-7,"on"==t?m|=4:"off"==t&&(m|=2)):(m&=-4,"on"==t?m|=2:"off"==t&&(m|=1)),(F=m.toString(16).toUpperCase()).length<2&&(F="0"+F),n={type:"HE",data:e.address.substr(0,10)+F+e.address.substr(12,2)};}else if("IT"==e.type){if(2==(L=e.address.split(".")).length){r=null;if(1==L[0].length)"on"==t?r=L[0]+L[1]+"E":"off"==t&&(r=L[0]+L[1]+"6");else if(7==L[0].length){i=null;var m=parseInt(L[0].substr(6,1),16);m&=-2,"on"==t?m|=1:(0==t.indexOf("dimTo")&&(m|=1,t=t.replace(/dimTo/g,"")),"10"==(t=t.replace(/%/g,""))?i="00":"20"==t?i="10":"30"==t?i="20":"40"==t?i="30":"50"==t?i="50":"60"==t?i="70":"70"==t?i="90":"80"==t?i="B0":"90"==t?i="D0":"100"==t&&(i="F0")),m=m.toString(16).toUpperCase(),r=null!=i?L[0].substr(0,6)+m+L[1]+i:L[0].substr(0,6)+m+L[1];}r&&(n={type:"IT",data:r});}}else if("FS20"==e.type){if(3==(L=e.address.split(".")).length){r="00";var d=L[0]+L[1]+L[2];"on"==t?r="10":"off"==t?r="00":"restore"==t?r="11":"toggle"==t?r="12":"up"==t||"dimUp"==t?r="13":"down"==t||"dimDown"==t?r="14":(0==t.indexOf("dimTo")&&(t=t.replace(/dimTo/g,"")),"10"==(t=t.replace(/%/g,""))?r="02":"20"==t?r="03":"30"==t?r="05":"40"==t?r="06":"50"==t?r="08":"60"==t?r="09":"70"==t?r="0B":"80"==t?r="0D":"90"==t?r="0E":"100"==t&&(r="10")),n={type:"FS20",data:d+r+"00"};}}else if("KOPP"==e.type){if(8==(d=e.address).length){r=null;var p=d.substr(0,4),f=d.substr(6);if("on"==t)r="30";else if("off"==t)r="20";else if("toggle"==t)r="00";else if("stopDim"==t||"stop"==t)r="FF";else if("startDim"==t){m=parseInt(r,16);m|=128,r=XC.getHexVal(m,2);}else"up"==t?r="B0":"down"==t?r="A0":"opened"==t?r="20":"closed"==t&&(r="10");r&&(n={type:"KOPP",data:p+r+"CC0F"+f});}}else if("SL"==e.type){if(5==(d=e.address).length){var c=parseInt(d.substr(3,2),16)>>2;"on"==t||"up"==t||"moveUp"==t||"off"!=t&&"down"!=t&&"moveDown"!=t||(11==(15&c)?c+=3:10!=(15&c)&&2!=(15&c)||(c-=2)),c<<=2;r=d.substr(0,3)+XC.getHexVal(c,2)+"0";"moveUp"==t||"moveDown"==t?r+="15":"up"!=t&&"down"!=t||(r+="0A"),n={type:"SL",data:r};}}else if("UR"==e.type){if(5==(d=e.address).length){r=null;"moveUp"==t||"up"==t?r="1":"moveDown"==t||"down"==t?r="4":"stop"==t&&(r="2"),r&&(n={type:"UR",data:d+r});}}else if("AN"==e.type){if(8==(d=e.address).length){r=null;"on"==t?r="00":"off"==t&&(r="10"),r&&(n={type:"AN",data:d+r});}}else if("DY"==e.type){if(8==(d=e.address).length){r=null;"up"==t?r="11":"down"==t?r="33":"moveUp"==t?r="22":"moveDown"==t?r="44":"stop"==t&&(r="55"),r&&(n={type:"DY",data:d+r});}}else if("KN"==e.type){if(10==(d=e.address).length){r=null;"up"==t||"moveUp"==t||"on"==t?r="80":"down"==t||"moveDown"==t||"off"==t?r="20":"stop"==t?r="40":"pos1"==t&&(r="4C"),r&&(n={type:"KN",data:d+r+"AEAE"});}}else if("RT"==e.type){if(6==(d=e.address).length){r=null;"up"==t?r="20":"moveUp"==t?r="2F":"down"==t?r="40":"moveDown"==t?r="4F":"stop"==t||"pos1"==t?r="10":"program"==t?r="80":"learn"==t&&(r="60"),r&&(n={type:"RT",data:r+d});}}else if("ML"==e.type){r=null;"power"==t?r="80":"up"==t?r="4b":"white"==t?r="ffffff":"0"==t?r="0":"10"==t?r="0A":"20"==t?r="14":"30"==t?r="1E":"40"==t?r="28":"50"==t?r="32":"60"==t?r="3C":"70"==t?r="46":"80"==t?r="50":"90"==t?r="5A":"100"==t&&(r="64"),"power"!=t&&"up"!=t&&"down"!=t&&"white"!=t&&"0"!=t&&"10"!=t&&"20"!=t&&"30"!=t&&"40"!=t&&"50"!=t&&"60"!=t&&"70"!=t&&"80"!=t&&"90"!=t&&"100"!=t&&(r=t),r&&(n={type:"ML",data:r,adr:e.address});}else if("CF3"==e.type||"CF4"==e.type){r=null,u="";if("on"==t)r="04";else if("off"==t)r="05";else if("offSave"==t)r="06";else if("scene1"==t)r="07";else if("scene2"==t)r="08";else if("scene3"==t)r="09";else if("up"==t)r="0E";else if("down"==t)r="0F";else if("PrgUp"==t)r="0A";else if("PrgDown"==t)r="0B";else if(6==t.length)r="02",u=t+"00";else if(8==t.length)r="02",u=t;else{(E=Math.round(parseInt(t)/100*255))>255&&(E=255),"color"==e.channel?(r="02",u=XC.getHexVal(E,2)+XC.getHexVal(255-E,2)+"0000"):(r="01",E<4&&(E=4),u=XC.getHexVal(E,2));}r&&(n={type:e.type,data:r+e.address+u});}else if("L2"==e.type){r=null;if(e.address&&3==e.address.length){if("power"==t)r="fff";else if("left"==t)r="ff3";else if("right"==t||"white"==t)r="fc3";else if("up"==t)r="fcc";else if("down"==t)r="ff0";else if("red"==t)r="33f";else if("purple"==t)r="30f";else if("blue"==t)r="03f";else if("cyan"==t)r="000";else if("green"==t)r="f03";else if("yellow"==t)r="c33";else if("orange"==t)r="c03";else if(6==t.length){(A=parseInt(t.substr(0,2),16))>255&&(A=255),(O=parseInt(t.substr(2,2),16))>255&&(O=255),(R=parseInt(t.substr(4,2),16))>255&&(R=255);var v=0,y=A/255,h=O/255,w=R/255;if((M=Math.min(y,Math.min(h,w)))!=(T=Math.max(y,Math.max(h,w))))(v=60*((y==M?3:w==M?1:5)-(f=y==M?h-w:w==M?y-h:w-y)/(T-M))-180)<0&&(v+=360);r=["000","003","00c","00f","030","033","03c","03f","0c0","0c3","0cc","0cf","0f0","0f3","0fc","0ff","300","303","30c","30f","330","333","33c","33f","3c0","3c3","3cc","3cf","3f0","3f3","3fc","3ff","c00","c03","c0c","c0f","c30","c33","c3c","c3f","cc0","cc3","ccc","ccf","cf0","cf3","cfc","cff","f00","f03","f0c","f0f","f30","f33","f3c","f3f","fc0"][Math.floor(v/360*56)];}r&&(r=e.address+r);}else{if("power"==t)r=2;else if("left"==t)r=5;else if("right"==t||"white"==t)r=6;else if("up"==t)r=3;else if("down"==t)r=4;else if("red"==t)r=408;else if("purple"==t)r=40;else if("blue"==t)r=80;else if("cyan"==t)r=152;else if("green"==t)r=240;else if("yellow"==t)r=336;else if("orange"==t)r=368;else if(6==t.length){(A=parseInt(t.substr(0,2),16))>255&&(A=255),(O=parseInt(t.substr(2,2),16))>255&&(O=255),(R=parseInt(t.substr(4,2),16))>255&&(R=255);var g=2128,_=2296,x=R,b=O;R<=A&&R<=O?(x=O,b=A,g=2304,_=2456):O<=A&&O<=R&&(x=A,b=R,g=2456,_=2640);var D=Math.round((_-g)/8+1),S=Math.round(D/2),C=D-S;255==x?F=Math.round(b/255*S):(F=S,F+=Math.round((1-x/255)*C)),(F=g+8*F)>2552&&(F-=512),r=F-2048;}if(r){d=parseInt(e.address.substr(4),16)<<8;r=XC.getHexVal((65534&d)+r,4),r=e.address.substr(0,4)+r;}}r&&(n={type:"L2",data:r});}else if("L3"==e.type){r=null;if("on"==t)r="07";else if("off"==t)r="38";else if("white"==t)r="09";else if("color"==t)r="36";else if("red"==t)r="4f";else if("purple"==t)r="56";else if("blue"==t)r="60";else if("cyan"==t)r="68";else if("green"==t)r="70";else if("yellow"==t)r="41";else if("orange"==t)r="4a";else if(6==t.length){(A=parseInt(t.substr(0,2),16))>255&&(A=255),(O=parseInt(t.substr(2,2),16))>255&&(O=255),(R=parseInt(t.substr(4,2),16))>255&&(R=255);var M,T;v=0,y=A/255,h=O/255,w=R/255;if((M=Math.min(y,Math.min(h,w)))!=(T=Math.max(y,Math.max(h,w))))(v=60*((y==M?3:w==M?1:5)-(f=y==M?h-w:w==M?y-h:w-y)/(T-M))-110)<0&&(v+=360);var E=v/360*50;r=XC.getHexVal(50-Math.floor(E)+64,2);}else{var k=parseInt(t);r=XC.getHexVal(192+Math.floor(k/100*48),2);}r&&(n={type:"L3",data:e.address+r+"0"});}else if("L4"==e.type){r=null;if("power"==t)r="01017f";else if("left"==t)r="01017e";else if("right"==t||"white"==t)r="01017d";else if("up"==t)r="01017c";else if("down"==t)r="01017b";else if("red"==t)r="ff0000";else if("purple"==t)r="ff00ff";else if("blue"==t)r="0000ff";else if("cyan"==t)r="00ffff";else if("green"==t)r="00ff00";else if("yellow"==t)r="ffdd00";else if("orange"==t)r="ff6600";else if(6==t.length){var A,O,R;(A=parseInt(t.substr(0,2),16))>255&&(A=255),1==A&&(A=2),(O=parseInt(t.substr(2,2),16))>255&&(O=255),1==O&&(O=2),(R=parseInt(t.substr(4,2),16))>255&&(R=255),1==R&&(R=2),r=XC.getHexVal(A,2)+XC.getHexVal(O,2)+XC.getHexVal(R,2);}r&&(n={type:"L4",data:e.address+r});}else if("FHT80B"==e.type){r=null;(r="setManu"==t?{p:"modus",v:"0"}:"setAuto"==t?{p:"modus",v:"1"}:{p:"tsoll",v:t})&&((n={type:"FHT80B",hc1:e.address.substr(0,2),hc2:e.address.substr(3,2)})[r.p]=r.v);}else if("FX3"==e.type){var I=e.data.split(":");r=null;"switch"!=e.subtype&&"light"!=e.subtype||("on"==t?r=I[0]:"off"==t&&(r=I[1])),"shutter"==e.subtype?"up"==t?r=I[0]:"down"==t&&(r=I[1]):"dimmer"==e.subtype&&("on"==t?r=I[0]:"off"==t?r=I[1]:0==t?(r="00",r=I[0].substr(0,6)+"00"+r):10==t?(r="0A",r=I[0].substr(0,6)+"00"+r):20==t||30==t||40==t||50==t||60==t||70==t||80==t||90==t?(r=(t=parseInt(t)).toString(16),r=I[0].substr(0,6)+"00"+r):100==t&&(r="64",r=I[0].substr(0,6)+"00"+r)),n={type:"FX3",data:r};}else if("BK"==e.type){r="00";"shutter"!=e.subtype&&"shutter"!=e.data&&"dimmer"!=e.subtype&&"dimmer"!=e.data||("up"==t?r="01":"stop"==t?r="02":"pos1"==t?r="03":"pos2"==t?r="04":"down3s"==t?r="05":"up3s"==t?r="06":"brighter"==t?r="08":"darker"==t&&(r="09")),n={type:"BK",data:"01"+e.address+r};}else if("IA"==e.type){r="0003";"up"==t||"on"==t?r="0202":"down"==t||"off"==t?r="0102":"dimUp"==t?r="0201":"dimDown"==t?r="0101":"moveUp"==t?r="0203":"moveDown"==t?r="0103":"scene"!=t&&"doScene"!=t||(r="0302"),r&&(n={type:"IA",data:e.address+r});}else if("WA"==e.type){m=14942207&parseInt(e.address,16),u="00";"up"==t?m+=1947992064:"down"==t?m+=1947729920:"stop"==t?m+=872677376:"moveUp"==t?(m+=1947992064,u="01"):"moveDown"==t?(m+=1947729920,u="01"):"A"==t?m+=1946419200:"B"==t?m+=1946157056:"C"==t&&(m+=1947467776),n={type:"WA",data:XC.getHexVal(m,8)+u};}else if("ER"==e.type){if(2==(d=e.address).length){r=null;(r="moveUp"==t||"up"==t?"08":"moveDown"==t||"down"==t?"09":"stop"==t?"02":"stepUp"==t?"03":"stepDown"==t?"04":"shadow"==t?"0B":"air"==t?"0A":parseInt(t)>50?"09":"08")&&(n={type:"ER",data:d+r});}}else if("HM"==e.type){r="00";if(e.channel&&"lamella"==e.channel)return null;if("button1"==e.data||"button2"==e.data||"button3"==e.data||"button4"==e.data||"button6"==e.data||"button8"==e.data||"button12"==e.data||"button19"==e.data)return n={type:"HM",data:e.address.substr(0,6)+t};if("wallthermostat"==e.data||"thermostat"==e.data||"thermocontrol"==e.data)r="setBoost"==t?"1C03":"setManu"==t?"1C01":"setAuto"==t?"1C00":"11"+(r="15"==t||"14"==t||"13"==t||"12"==t?"0"+parseInt(t).toString(16):parseInt(t).toString(16)),n={type:"HM",data:e.address+r};else if("esco-door"==e.data)"openEscoDoor"==t&&(r="22"),n={type:"HM",data:e.address+r};else if("systroniq"==e.data){if("openWindow"==t)r="22",n={type:"HM",data:e.address+r};else if("closeWindow"==t){r="22",n={type:"HM",data:e.address.substr(0,6)+"02"+r};}}else if("0056"==e.data)"normal"==t?r="00":"medium"==t?r="64":"high"==t&&(r="C8"),n={type:"HM",data:e.address+r};else if("00A7"==e.data)"off"==t?r="00":"on"==t&&(r="C8"),n={type:"HM",data:e.address+r};else if("0043"==e.data)"off"==t?r="00":"on"==t&&(r="C8"),n={type:"HM",data:e.address+r};else{if("opened"==t)r="C8";else if("closed"==t)r="00";else if("on"==t)r="01";else if("off"==t)r="02";else if("toggle"==t)r="03";else if("up"==t)r="blind"==e.data||"shutter"==e.data||"awning"==e.data||"venetian"==e.data||"raffstore"==e.data||"rooflight"==e.data?"08":"heater"==e.data||"0039"==e.data?"12":"0F";else if("down"==t)r="blind"==e.data||"shutter"==e.data||"awning"==e.data||"venetian"==e.data||"raffstore"==e.data||"rooflight"==e.data?"09":"heater"==e.data||"0039"==e.data?"13":"10";else if("stepUp"==t)r="1414";else if("stepDown"==t)r="1514";else if(t.length>5&&"upFor"==t.substr(0,5)){var F=parseInt(t.substr(5));r="14"+XC.getHexVal(15*F,2);}else if(t.length>7&&"downFor"==t.substr(0,7)){F=parseInt(t.substr(7));r="15"+XC.getHexVal(15*F,2);}else if("moveUp"==t)r="08";else if("moveDown"==t)r="09";else if("stop"==t)r="0B";else if(t.match(/vChannel/)){r=(P=t.replace("vChannel",""))+"19";}else{r="blind"==e.data||"shutter"==e.data||"awning"==e.data||"venetian"==e.data||"raffstore"==e.data?"0A":"05";F=parseInt(t.replace(/%/g,"").replace(/moveTo/g,""));"0A"==r&&(F=100-F),F>100?F=100:F<0&&(F=0),(F=F.toString(16).toUpperCase()).length<2&&(F="0"+F),r+=F;}n={type:"HM",data:e.address+r};}}else if("IN"==e.type){r="00";if(e.channel)"lamella"==e.channel&&(r="00"+this._getINLamellaValue(t),n={type:"IN",data:e.address+r});else if(!e.address&&e["native"])"moveUp"==t?r="7F61":"moveDown"==t||"turbo"==t?r="7F62":"stop"!=t&&"level1"!=t||(r="7F63"),n={type:"IN",data:e["native"]+r};else{if("moveUp"==t)r="000C";else if("moveDown"==t)r="000D";else if("up"==t)r="000C";else if("down"==t)r="000D";else if("stop"==t)r="0007";else if("setP1"==t)r="0140";else if("level1"==t)r="0040";else if("level2"==t)r="0041";else if("level3"==t)r="0042";else if("standby"==t)r="0043";else if("auto"==t)r="0044";else if("manu"==t)r="0045";else if("turbo"==t)r="0046";else if("levelUp"==t)r="011B";else if("levelDown"==t)r="011D";else if("turbo_2"==t)r="0051";else if("turbo_3"==t)r="0052";else if("turbo_4"==t)r="0053";else if("night_mode_in_1"==t)r="0054";else if("night_mode_in_2"==t)r="0055";else if("night_mode_in_3"==t)r="0056";else if("night_mode_out_1"==t)r="0057";else if("night_mode_out_2"==t)r="0058";else if("night_mode_out_3"==t)r="0059";else if(t.length>1&&"L"==t.substr(0,1))r="00"+this._getINLamellaValue(t.substr(1));else if(t.length>1&&"P"==t.substr(0,1)){var P=parseInt(t.substr(1));(P+=71)>79?P=79:P<72&&(P=72),(P=P.toString(16).toUpperCase()).length<2&&(P="0"+P),r="01"+P;}else if(t.length>6&&"moveTo"==t.substr(0,6)){var N=null;(n=t.indexOf("L"))>0&&(N=this._getINLamellaValue(t.substr(n+1)),t=t.substr(0,n)),(F=100-parseInt(t.substr(6).replace(/%/g,"")))>100&&(F=100),(F=F.toString(16).toUpperCase()).length<2&&(F="0"+F),r="18"+F,N&&(r+=N);}else{"string"==typeof t&&(t=t.replace(/%/g,"")),(F=100-parseInt(t))>100?F=100:F<0&&(F=0),(F=F.toString(16).toUpperCase()).length<2&&(F="0"+F),r="18"+F;}n={type:"IN",data:e.address+r};}}else if("QA"==e.type){r=null;"evtOpenA"==t&&(r="01101000"),"evtOpenB"==t?r="01202000":"evtClose"==t?r="01300000":"open"==t?r="0C":"close"==t?r="0D":"stop"==t?r="0B":"permanentOpenOff3"==t?r="0703":"permanentOpenOn3"==t?r="0603":"permanentOpenOff4"==t?r="0704":"permanentOpenOn4"==t?r="0604":"stepUp"==t?r="0903E8":"stepDown"==t?r="0A03E8":"R4Unlock5s"==t?r="10041388":"R4Unlock1s"==t?r="100403E8":"R3Unlock5s"==t?r="10031388":"R3Unlock1s"==t?r="100303E8":"0"==t?r="0E00":"10"==t?r="0E0A":"20"==t?r="0E14":"30"==t?r="0E1E":"40"==t?r="0E28":"50"==t?r="0E32":"60"==t?r="0E3C":"70"==t?r="0E46":"80"==t?r="0E50":"90"==t?r="0E5A":"100"==t&&(r="0E64"),n={type:"QA",data:e.address+r};}else if("CODE"==e.type){e.code||this.CommandHandler.SystemData.$ircodesXML.find("device[id='"+e.data+"'] key[id='"+t+"']").each(function(){e.code=$(this).attr("code");});var U=e.code;if(U){var L,G="IR01";2==(L=U.split(":")).length?(G=L[0].toUpperCase(),n={code:L[1]}):(e.address&&(G=e.address.replace(/:/g,"")),n={code:U}),4==G.length&&(0==G.indexOf("RF")?n.rf=G.substring(2):n.ir=G.substring(2)),n.type="CODE";}}}else n=this.getGatewayThresholdParams(e,a);return n;},xnm.aio.gateway.Handler.prototype.createEventListenerSocket=function(e){this.CommandHandler=e;var t=require("dgram").createSocket("udp4");t.on("error",function(e){XC.debugf("UDP error: "+e),this.close();});var a=this;t.on("message",function(e,t){var n=e.toString(),r=null,o=null;if(n.length>10&&"{XC_EVT}"==n.substr(0,8)?r=n.substr(8):n.length>6&&"EVT:"==n.substr(0,4)?r=n.substr(4):n.length>6&&"STA:"==n.substr(0,4)&&(r=n.substr(4),o="sta"),r)try{var s=JSON.parse(r);if(o&&"sta"==o){if(s&&s._ver&&"v5+"==s._ver&&"HM"==s.type)a._receivedUDPStateV5Plus(s);else if(s&&"ENOCEAN"==s.type)a._receivedUDPStateV5Plus(s);else if(s&&s.type&&s.data)a._receivedUDPState(s.type,s.data);else if(s&&s.adr&&s.state){(i=new xnm.aio.gateway.Gateway()).CommandHandler=a.CommandHandler,i._receivedStates([s]);}}else if(s&&s.type&&s.data)a._receivedUDPState(s.type,s.data);else if(s&&s.adr&&s.state){var i;(i=new xnm.aio.gateway.Gateway()).CommandHandler=a.CommandHandler,i._receivedStates([s]);}}catch(e){XC.debugf(e);}}),t.bind(1901);},xnm.aio.gateway.Handler.prototype._receivedUDPState=function(e,t){},xnm.aio.gateway.Handler.prototype._receivedUDPStateV5Plus=function(e){var t=[];if(XC.debugf(e),e&&e.type){var a="";if(e.type&&(a=e.type),"hm"==a.toLowerCase()||"enocean"==a.toLowerCase()){t=this.CommandHandler.SystemData.getDevices(function(e){return e.info.type==a;});for(var n=0;n<t.length;n++){var r=t[n];if(r.info.address===e.adr){var o=e.state,s=(e.adr,e.data,r.index);for(var i in o){this.CommandHandler.setState(s+":"+i,o[i]);}}}}}},xnm.aio.gateway.Admin.getGatewaySID=function(e,t){if(e){if(e._isV5())this.V5.getSID(e,t);else{this.getSID(e._ip,function(e){var a=null;e||(a=new Error("failed to get SID")),t&&t(a,e);},e._port,e.password);}}else t&&t(new Error("gateway is null"));},xnm.aio.gateway.Admin.getGatewayEID=function(e,t){if(e){var a=this;e._executeRequest("GetSI",null,null,function(n,r){n?t&&t(n):r?r.EID&&"FFFFFF"!=r.EID&&"FFFFFFFFFFFF"!=r.EID?t&&t(null,r.EID):a.getGatewaySID(e,function(a,n){if(a)t&&t(a);else if(n){var r=new(require("xnm.aio.cloud.js").Server)();r._url="http://webservice.aio-control.com/config?",r.getEleroKey(n,function(a){var n=null;a&&a.data&&a.data.adr?(n=a.data.adr,e._executeRequest("rfchipcmd",{type:"setERAdr",adr:n},null,function(e){t&&t(e,n);})):t&&t(new Error("get elero key from server error"));});}else t&&t(new Error("gateway has no sid"));}):t&&t(new Error("get si response format invalid"));});}else t&&t(new Error("gateway is null"));},xnm.aio.gateway.Admin.getBeckerSerial=function(e,t){this.getGatewaySID(e,function(e,a){if(e)t&&t(e);else{var n=new(require("xnm.aio.cloud.js").Server)();n._url="https://webservice.mediola.com",n.assignBeckerSeiral(a,function(e,a){t&&t(e,a);});}});},xnm.aio.gateway.Gateway.prototype.executeCommandCreator=function(e,t,a){if(t&&t.value){if(!e||!e.mod&&e.ip){if("led"==t.value.substr(0,3))this._setLED(t.value,a);else if("lock"===t.value||"unlock"===t.value)this._executeRequest("/"+t.value,{pin:t.pin},null,a);else if("raOn"==t.value||"raOff"==t.value||"raAuto"==t.value){var n=this.hashCode(),r="auto";"raOn"==t.value?r="on":"raOff"==t.value?r="off":"raAuto"==t.value&&(r="auto"),xnm.aio.gateway.RemoteModeSetting.setRemoteModeSetting(n,r),a&&a();}else if("cfOn"==t.value||"cfOff"==t.value||"cfToggle"==t.value){n=this.hashCode();if("cfOn"==t.value)this._cfSetting="on",xnm.aio.gateway.RemoteModeSetting.setRemoteModeSetting(n,"on");else if("cfOff"==t.value)this._cfSetting="off",xnm.aio.gateway.RemoteModeSetting.setRemoteModeSetting(n,"off");else if("cfToggle"==t.value){var o=xnm.aio.gateway.RemoteModeSetting.getRemoteModeSetting(n);this._cfSetting="on"==o?"off":"on",xnm.aio.gateway.RemoteModeSetting.setRemoteModeSetting(n,this._cfSetting);}a&&a();}else 0===t.value.indexOf("alarm")?this._setAlarmState(t,a):a&&a(new Error("no such gateway command"));}else if(e.type){var s=xnm.aio.gateway.DM.getSystem(e,this.toJSON());s&&s.executeCommandCreator?s.executeCommandCreator(this,e,t,a):a&&a(new Error("device type unknow"));}else a&&a(new Error("invalid device format"));}else a&&a(new Error("command json invalid"));},xnm.aio.gateway.Gateway.prototype._setAlarmState=function(e,t){var a=this,n=!1,r=null,o=xnm.aio.gateway.Admin.deviceDB;if(!o||"object"!=_typeof(o))try{var s=require("m.aio.devicemanager").handlers;if(Array.isArray(s))for(var i=0;i<s.length;i++){var u=s[i];if(u&&u.tenant&&"db"===u.tenant.folder){o=u.data;break;}}}catch(e){XC.debugf(e.message,"error");}if(o&&"object"==_typeof(o)){var l=[],m=o.devices||[],d=o.gateways||[];for(i=0;i<m.length;i++){var p=m[i];if(p&&p.info&&p.info.gateway&&"aio"===p.info.sys&&!(["d2-06-10","d2-06-ff","SmartGuard2"].indexOf(p.info.data)<0))for(var f=0;f<d.length;f++){var c=d[f];if(c&&c.index===p.info.gateway&&c.info.ip===a._ip){l.push(p);break;}}}n=l.length>0;}var v=[];"alarmAbsenceModeOn"===e.value?(r=9999,v.push({rule:9999,command:"activate",pin:e.pin}),n&&v.push({rule:9998,command:"activate",pin:e.pin})):"alarmAbsenceModeOff"===e.value?(v.push({rule:9999,command:"deactivate",pin:e.pin}),n&&v.push({rule:9998,command:"deactivate",pin:e.pin})):"alarmPresenceModeOn"===e.value?(r=9997,v.push({rule:9997,command:"activate",pin:e.pin}),n&&v.push({rule:9996,command:"activate",pin:e.pin})):"alarmPresenceModeOff"===e.value&&(v.push({rule:9997,command:"deactivate",pin:e.pin}),n&&v.push({rule:9996,command:"deactivate",pin:e.pin}));var nextAlarm=function nextAlarm(e){if(e>=v.length)t&&t();else{var n=v[e];a._executeRequest("/api/command",n,null,function(t,a){t&&XC.debugf("[Gateway._setAlarmState] Alarm error: "+t.message,"error"),nextAlarm(e+1);});}};if(r){var y=new xnm.aio.gateway.Rules(),h=9999===r?9997:9999;y.getRuleStatebyGw(this,{rule:h},function(e,a){e||!a||!0!==a.active&&"true"!==a.active?nextAlarm(0):t&&t(new Error("e_alarm_already_active_"+h));});}else nextAlarm(0);},xnm.aio.gateway.Gateway.prototype.getStatesCreator=function(e,t,a){for(var n=[],r=[],o=[],s=this,i=0;i<t.length;i++){var u=t[i];if(u){var l=u.device;if(l&&l.ip)o.push(u);else if(l&&l.type)if("IN"===t[i].device.type)r.push(t[i]);else n.push(t[i]);}}var m=[];this._getGatewayStates(o,function(e,t){!e&&t&&(m=m.concat(t)),s._getGeneralStates(n,function(e,t){!e&&t&&(m=m.concat(t)),xnm.aio.gateway.systems.IN.getCurrentStateCreator(s,r,function(e,t){!e&&t&&(m=m.concat(t)),a&&a(null,m);});});});},xnm.aio.gateway.Gateway.prototype._getGeneralStates=function(e,t){if(e&&0!=e.length){var a=this;this._executeRequest("getStates",null,null,function(n,r){if(n)t&&t(n);else{var o=a._handleGeneralStatesRsp(r,e);t&&t(null,o);}});}else t&&t(null,null);},xnm.aio.gateway.Gateway.prototype._handleGeneralStatesRsp=function(e,t){var a=[];if(e)for(var n=0;n<t.length;n++){var r=t[n].id,o=t[n].device,s=t[n].status;if(o.type){var i=xnm.aio.gateway.DM.getSystem(o,this.toJSON());if(i&&i.handleStateCreator)for(var u=0;u<e.length;u++){var l=e[u];if(l.type){var m=i.handleStateCreator(o,s,l);null!=m&&void 0!==m&&("object"==_typeof(m)?(m.id=r,a.push(m)):a.push({id:r,status:m}));}}}}return a;},xnm.aio.gateway.Gateway.prototype._getGatewayStates=function(e,t){if(e&&0!=e.length){for(var a=this._getRemoteModeInfo(),n=this._getCloudForwardInfo(),r=[],o=[],s=0;s<e.length;s++){var i=e[s],u=i.id,l=i.status;if(u){var m="?";l&&"raSetting"==l.value?m=a.raSetting:l&&"raState"==l.value?m=a.raState:l&&"cfSetting"==l.value&&(m=n.cfSetting),!l||"absenceMode"!==l.value&&"presenceMode"!==l.value?r.push({id:u,status:m}):o.push(i);}}o.length>0?this._getGatewayAlarmStates(o,r,t):t&&t(null,r);}else t&&t(null,null);},xnm.aio.gateway.Gateway.prototype._getGatewayAlarmStates=function(e,t,a){for(var n=[],r=0;r<e.length;r++){var o=e[r].status.value;n.indexOf(o)<0&&n.push(o);}var s=new xnm.aio.gateway.Rules(),i={},u=this,getNextRuleState=function getNextRuleState(r){if(r>=n.length){for(var o=0;o<e.length;o++){var l=e[o],m=i[l.status.value];t.push({id:l.id,status:m});}a&&a(null,t);}else{var d=n[r],p=null;if("absenceMode"===d)p=9999;else{if("presenceMode"!==d)return XC.debugf("[Gateway._getGatewayAlarmStates] No rule ID for unknown value: "+d,"warn"),void getNextRuleState(r+1);p=9997;}s.getRuleStatebyGw(u,{rule:p},function(e,t){if(!e&&t&&void 0!==t.active){var a="?";"boolean"==typeof t.active?a=t.active?"on":"off":"string"==typeof t.active&&("true"===t.active?a="on":"false"===t.active&&(a="off")),i[d]=a;}getNextRuleState(r+1);});}};getNextRuleState(0);},xnm.aio.gateway.Gateway.prototype._getRemoteModeInfo=function(){var e=this.hashCode();return{raSetting:xnm.aio.gateway.RemoteModeSetting.getRemoteModeSetting(e),raState:xnm.aio.gateway.RemoteModeSetting.getRemoteModeState(e)};},xnm.aio.gateway.Gateway.prototype._getCloudForwardInfo=function(){return{cfSetting:this._cfSetting?this._cfSetting:"off"};},xnm.aio.gateway.Gateway.prototype.learn=function(e,t){if(e&&e.type){var a,n=e.type;for(var r in"HM"==n&&"EA"==this.toJSON().version&&(n="HM_X"),xnm.aio.gateway.systems){if(xnm.aio.gateway.systems.hasOwnProperty(r)){var o=xnm.aio.gateway.systems[r];if(o&&o.DM&&o.DM.TYPE&&o.DM.TYPE.toUpperCase()==n.toUpperCase()&&o.learn){a=o;break;}}}a?a.learn(this,e,t):t&&t(new Error("type "+e.type+" has no learn function"));}else t&&t(new Error("learn option foramt invalid"));},xnm.aio.gateway.Gateway.prototype.regist=function(e,t){if(e&&e.type){var a;for(var n in xnm.aio.gateway.systems){if(xnm.aio.gateway.systems.hasOwnProperty(n)){var r=xnm.aio.gateway.systems[n];if(r&&r.DM&&r.DM.TYPE&&r.DM.TYPE.toUpperCase()==e.type.toUpperCase()&&r.regist){a=r;break;}}}a?a.regist(this,e,t):t&&t(new Error("type "+e.type+" has no regist function"));}else t&&t(new Error("regist device option foramt invalid"));},xnm.aio.gateway.Gateway.prototype.forcePollDevices=function(e,t){if(e&&e.length){for(var a=[],n=0;n<e.length;n++){var r=e[n];r&&"ZWAVE2"==r.type&&r.address&&a.push(r.address);}xnm.aio.gateway.systems.ZWAVE2.forcePollDevices(this,a,function(e,a){t&&t(e,a);});}else t&&t();},xnm.aio.gateway.Gateway.prototype.toJSON=function(){var e={sys:xnm.aio.gateway.DM.SYS,name:this._name,ip:this._ip,port:this._port,username:this.user,password:this.password,mac:this._mac,sid:this._sid,version:this._getGatewayVersion(),firmware:this._ver?this._ver:"",rfmode:this._rfm?this._rfm:"",gateway_vendor:this.gateway_vendor};return this._vid&&(e.vid=this._vid),e;},xnm.aio.gateway.Gateway.prototype.hashCode=function(){var _stringHash=function _stringHash(e){var t,a,n=0;if(!e)return n;for(t=0,a=e.length;t<a;t++){n=31*n+e.charCodeAt(t),n|=0;}return n;},e=this.toJSON(),t=0;return t=31*(t=31*(t=31*(t=31*(t=31*(t=31*t+_stringHash(e.ip))+parseInt(e.port?e.port:80))+_stringHash(e.username))+_stringHash(e.password))+_stringHash(e.version))+_stringHash(e.sid);},xnm.aio.gateway.Gateway.prototype.equalsTo=function(e){return!!e&&e instanceof xnm.aio.gateway.Gateway&&this.hashCode()==e.hashCode();},xnm.aio.gateway.Gateway.prototype.forwardExecuteCommand=function(e,t,a,n){if(a&&a.value){if(t||e){var r={data:{device:t,gateway:e,command:a}};this._doV5RemoteRequest("POST","/executeCommand",null,JSON.stringify(r),function(e){n&&n(e);});}else n&&n(new Error("both gateway and device json is null"));}else n&&n(new Error("command json invalid"));},xnm.aio.gateway.Gateway.prototype.forwardGetStates=function(e,t,a,n){if(a&&0!=a.length){if(t||e){var r={data:{device:t,gateway:e,deviceList:a}};this._doV5RemoteRequest("POST","/getStates",null,JSON.stringify(r),function(e,t){if(e)n&&n(e);else if(t&&t.data)try{var a=JSON.parse(t.data);n&&n(null,a);}catch(e){n&&n(e);}else n&&n(new Error("response invalid"));});}else n&&n(new Error("both gateway and device json is null"));}else n&&n(new Error("device list is invalid"));},xnm.aio.gateway.Gateway.prototype._isV5=function(){return this._hwv&&("e"==this._hwv.charAt(0).toLowerCase()||"c"==this._hwv.charAt(0).toLowerCase());},xnm.aio.gateway.Gateway.prototype._isV5P=function(){return this._hwv&&"ea"==this._hwv.toLowerCase();},xnm.aio.gateway.Gateway.prototype._isV6=function(){return this._hwv&&-1!=["e1","e7","c1","c2","c3","c4","ca"].indexOf(this._hwv.toLowerCase());},xnm.aio.gateway.Gateway.prototype._isV6P=function(){return this._hwv&&"ca"==this._hwv.toLowerCase();},xnm.aio.gateway.Gateway.prototype._executeRequest=function(e,t,a,n){var _foundLocal=function _foundLocal(e){for(var t in xnm.aio.gateway.Admin.detectedGateways){var a=xnm.aio.gateway.Admin.detectedGateways[t];if(a&&a.IP==e)return!0;}return!1;};if(a||(a={}),void 0!==a.timeout&&null!=a.timeout||(a.timeout=this.timeout),r=this._ip,/\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/.test(r)){var r,o=this;if(this._isV5()&&this._sid){var s=this.hashCode(),i=xnm.aio.gateway.RemoteModeSetting.getRemoteModeSetting(s),u=xnm.aio.gateway.RemoteModeSetting.getRemoteModeState(s);switch(i){case"on":xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(s,"remote"),this._executeRequestRemote(e,t,a,n);break;case"off":xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(s,"local"),this._executeRequestLocal(e,t,a,n);break;case"auto":"remote"==u?_foundLocal(this._ip)?(xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(s,"local"),this._executeRequestLocal(e,t,a,n)):this._executeRequestRemote(e,t,a,n):_foundLocal(this._ip)?this._executeRequestLocal(e,t,a,n):this._executeRequestLocal(e,t,a,function(r,i){if(r)return xnm.aio.gateway.RemoteModeSetting.setRemoteModeState(s,"remote"),void o._executeRequestRemote(e,t,a,n);n&&n(r,i);});}}else this._executeRequestLocal(e,t,a,n);}else this._executeRequestLocal(e,t,a,n);},xnm.aio.gateway.Gateway.prototype._executeRequestLocal=function(e,t,a,n){this._isV5()?this._executeRequestV5(e,t,a,n):this._executeRequestLegacy(e,t,a,n);},xnm.aio.gateway.Gateway.prototype._executeRequestLegacy=function(e,t,a,n){var r="/command?XC_FNC="+e;if(this.user&&this.password&&(r+="&XC_USER="+encodeURIComponent(this.user)+"&XC_PASS="+encodeURIComponent(this.password)),t)for(var o in t){t.hasOwnProperty(o)&&(r+="&"+o+"="+encodeURIComponent(t[o]));}var s=n;a||(a={}),a.host=this._ip,a.port=this._port,a.path=r,a.method="GET";var i="",u=require("http"),l=this,m=u.request(a,function(r){r.setEncoding("utf8"),r.on("data",function(e){i+=e;}),r.on("end",function(){var o,u;if(200!=r.statusCode)o=new Error("request failed with status code:"+r.statusCode);else if(i&&i.length>=8&&"{XC_SUC}"==i.substr(0,8)){if(i.length>8)try{u=JSON.parse(i.substr(8));}catch(e){o=e;}}else if(i&&i.length>=8&&"{XC_ERR}"==i.substr(0,8)){var m;i.length>8&&(m=i.substr(8)),o=new Error("request result error: "+m);}else if(i&&i.length>=8&&"{XC_AUT}"==i.substr(0,8))(o=new Error("request authentication error")).code="AUT";else{try{var d=JSON.parse(i);if(d&&(d.XC_ERR||d.XC_SUC))return l._hwv="e1",void l._executeRequestV5(e,t,a,n);}catch(e){}o=new Error("request result invalid error: "+i);}s&&(s(o,u),s=null);});});a.timeout&&m.setTimeout&&m.setTimeout(a.timeout,function(){m.abort();}),m.on&&"function"==typeof m.on&&m.on("error",function(e){s&&s(e),s=null;}),m.end();},xnm.aio.gateway.Gateway.prototype._executeRequestV5=function(e,t,a,n){var r;if("/"==e.charAt(0))r=e;else{r="/cmd";var o=t;if((t={}).XC_FNC=e,o)for(var s in o){"XC_FNC"!=s&&(t[s]=o[s]);}}var i=null;(this._pwdHash||this.user&&this.password)&&(i=this._pwdHash||xnm.aio.gateway.Admin.V5.hash(this.password));var u=null,l=null,m="GET";if(a&&"POST"==a.method)m="POST",this._hwv&&"C"==this._hwv.toUpperCase().charAt(0)||"E7"==this._hwv||0!=r.indexOf("/rle")?(i&&(r+="?at="+i),l=xnm.aio.gateway.Util.removeSensitiveData(t),t&&(u=JSON.stringify(t))):(t||(t={}),i&&(t.at=i),l=xnm.aio.gateway.Util.removeSensitiveData(t),u=JSON.stringify(t));else if(i&&(t||(t={}),t.at=i),t){"?"!=r.charAt(r.length-1)&&(r+="?");var d="";for(var p in t){t.hasOwnProperty(p)&&(d&&(d+="&"),d+=p+"="+encodeURIComponent(t[p]));}r+=d;}var f=this,c="http://"+this._ip+":"+this._port+r;this._logger.log("trace","send to url:"+xnm.aio.gateway.Util.removeSensitiveUrl(c)),"POST"==m&&this._logger.log("trace","with POST body:"+JSON.stringify(l));var v=n;$.ajax({url:c,type:m,timeout:a?a.timeout:2e4,contentType:"application/json; charset=utf-8",data:u,dataType:"text",cache:!0,success:function success(e){var t,a;f._logger.log("trace","http request success:"+e);try{if((a=JSON.parse(e)).XC_ERR){var n=a.XC_ERR.msg?a.XC_ERR.msg:"gateway request error",r=a.XC_ERR.code?a.XC_ERR.code:"-1";(t=new Error(n)).code=r,a=a.XC_ERR;}else void 0!==a.XC_SUC&&null!=a.XC_SUC?a=a.XC_SUC:t=new Error("gateway reponse format error");}catch(e){t=e;}v&&v(t,a),v=null;},error:function error(r,o){var s="http request error:"+(r?r.status:"0")+"-"+o;f._logger.log("trace",s),r&&404==r.status?(f._hmv="f9",f._executeRequestLegacy(e,t,a,n)):v&&(v(new Error(s)),v=null);}});},xnm.aio.gateway.Gateway.prototype._executeRequestV5_Post=function(e,t,a,n){a||(a={}),a.method="POST",this._executeRequestV5(e,t,a,n);},xnm.aio.gateway.Gateway.prototype._executeRequestRemote=function(e,t,a,n){this._isV5()?this._executeV5Remote(e,t,a,n):n&&n();},xnm.aio.gateway.Gateway.prototype._executeV5Remote=function(e,t,a,n){var r;if("/"==e.charAt(0)?r=e:(r="/cmd",t||(t={}),t.XC_FNC=e),a&&"POST"==a.method){var o=null;return t&&(o=JSON.stringify(t)),void this._doV5RemoteRequest("POST",r,a,o,n);}if(t){"?"!=r.charAt(r.length-1)&&(r+="?");var s="";for(var i in t){t.hasOwnProperty(i)&&(s&&(s+="&"),s+=i+"="+encodeURIComponent(t[i]));}r+=s;}this._doV5RemoteRequest("GET",r,a,null,n);},xnm.aio.gateway.Gateway.prototype._doV5RemoteRequest=function(e,t,a,n,r){if(this._sid){if(this.password){var o;if(this.ccs){var s=this.ccs,i=443,u=this.ccs.indexOf(":");-1!=u&&(s=this.ccs.substr(0,u),(80==(i=parseInt(this.ccs.substr(u+1)))||isNaN(i))&&(i=443)),o="https://"+s+":"+i+"/rapi/live/";}else o=xnm.aio.gateway.Admin.V5._cloudServerUrl+"/rapi/live/";o+=this._sid,this._pwdHash||(this._pwdHash=xnm.aio.gateway.Admin.V5.hash(this.password));var l=xnm.aio.gateway.Admin.V5._userName+":"+this._pwdHash;l=new Buffer(l).toString("base64"),o+=t;var m=this;this._logger.log("trace","send to url:"+xnm.aio.gateway.Util.removeSensitiveUrl(o));var d=r;$.ajax({headers:{Authorization:"Basic "+l},url:o,type:e,data:n,timeout:8e3,dataType:"text",cache:!0,success:function success(e){var t,a;m._logger.log("trace","http request success:"+e);try{(a=JSON.parse(e)).XC_ERR?(t=new Error("gateway request error"),a=a.XC_ERR):a.XC_SUC?a=a.XC_SUC:t=new Error("gateway reponse format error");}catch(e){t=e;}d&&d(t,a),d=null;},error:function error(e,t){var a="http request error:"+(e?e.status:"0")+"-"+t;m._logger.log("trace",a),d&&(d(new Error(a)),d=null);}});}else r&&r(new Error("no password"));}else r&&r(new Error("no sid"));},xnm.aio.gateway.Gateway.prototype._executeLegacyRemote=function(e,t,a,n){var r=XC.getHexVal(Math.floor(254*Math.random()+1),2)+"AA";r+=XC.getHexVal(Math.round(new Date().getTime()/1e3),8),r+="01";var o="c",s="POST",i=null,u=null,l=null;if("SendSC"==e){u=t.data;var m=xnm.aio.gateway.SYSID[t.type];m&&(i=XC.getHexVal(m,2));}else"Send2"==e?(i="2b",u=t.code,l="",t.ir?l+=t.ir:l+="00",t.rf?l+=t.rf:l+="00"):"SendFHT80b"==e?(i="07",u=args.tsoll?args.hc1+args.hc2+"ff"+XC.getHexVal(parseInt(t.tsoll),2):args.hc1+args.hc2+XC.getHexVal(t.modus,2)+"ff"):"saveGroup"==e?(i="2c",u=t.id+XC.getHexVal(t.active,2)):"GetStates"==e&&(i="getstates",s="GET",o="d");if(i){var d=null;if(u){var p=u.length;l&&(p+=l.length),r+=XC.getHexVal(Math.ceil(p/2)+2,2),r+=i,r+=XC.getHexVal(Math.ceil(p/2),2),r+=u,l&&(r+=l),!r.length%2&&(r+="0");for(var f=0;f<r.length%32;f++){r+="0";}var c=require("x.crypt.js");c.AES.setSize(128);var v=c.AES.h2a(this._rakey),y=c.AES.h2a("764c4518E9055b5239f5a3ff62937234"),h=c.AES.encrypt(c.AES.h2a(r),v,y);d=c.AES.a2h(h);}var w="http://webservice.aio-control.com/ra/";XC.debugf("URL: "+w+o+"?sid="+this._sid),$.ajax({type:s,url:w+o+"?sid="+this._sid,data:d,contentType:"text/plain",timeout:5e3,cache:!1,complete:function complete(e){e.responseText&&(e=e.responseText),e&&e.length>=8&&"{XC_SUC}"==e.substr(0,8)&&e.length>8&&$.parseJSON(e.substr(8)),n&&n();}});}else n&&n.call();},xnm.aio.gateway.Gateway.prototype._learnCode=function(e){xnm.aio.gateway.systems.Code.learn(this,null,e);},xnm.aio.gateway.Gateway.prototype._learnIR=function(e){xnm.aio.gateway.systems.Code.learnIR(this,null,e);},xnm.aio.gateway.Gateway.prototype._executeFunc=function(e,t,a,n){var r="http://"+this._ip+":"+this._port+"/command?XC_FNC="+e;if(this.user&&this.password&&(r+="&XC_USER="+this.user+"&XC_PASS="+this.password),t)for(var o in t){t.hasOwnProperty(o)&&(r+="&"+o+"="+t[o]);}var s=a;(!s||s<0)&&(s=this.timeout),(!s||s<0)&&(s=2e3),$.ajax({url:r,timeout:s,cache:!1,success:function success(e){var t,a;if(!e||e.length<8)a=new Error("gateway return:"+e);else if("{XC_ERR}"==e.substr(0,8)){var r="";e.length>8&&(r=e.substr(8)),a=new Error("gateway return XC_ERR:"+r);}else if("{XC_AUT}"==e.substr(0,8))(a=new Error("gateway return XC_AUT")).reason="AUTH";else if("{XC_SUC}"==e.substr(0,8)){if(e.length>8)try{t=JSON.parse(e.substr(8));}catch(t){a=new Error("gateway return not json:"+e);}}else a=new Error("gateway return unknow:"+e);n&&n(a,t);},error:function error(e,t,a){var r;r=a?new Error(a):t?new Error(t):new Error("http request error"),n&&n(r);}});},xnm.aio.gateway.Gateway.prototype._getVID=function(e){this._isV5()?this._getInfo(function(t,a){t?e&&e(t):a&&a.vid?e&&e(null,a.vid):e&&e(new Error("data has no VID"));}):this._getSI(function(t,a){t?e&&e(t):a&&a.VID?e&&e(null,a.VID):e&&e(new Error("data has no VID"));});},xnm.aio.gateway.Gateway.prototype._getSI=function(e){this._executeRequest("getSI",null,null,function(t,a){t?e&&e(t):a?e&&e(null,a):e&&e(new Error("data is empty"));});},xnm.aio.gateway.Gateway.prototype._getInfo=function(e){this._executeRequest("/info",null,null,function(t,a){t?e&&e(t):a?e&&e(null,a):e&&e(new Error("data is empty"));});},xnm.aio.gateway.Gateway.prototype._getGatewayVersion=function(){return(this._hwv?this._hwv:"")+(this._swv?this._swv:"");},xnm.aio.gateway.Gateway.prototype._supportIrCodeTrigger=function(){var e=this._ver;if(e||(e=this._getGatewayVersion()),!e)return!0;if((e=e.toUpperCase()).length<2)return!0;var t,a=e.substr(0,2);return e.length>=4&&(t=e.substr(2,2)),"F1"!=a&&"F2"!=a&&"F4"!=a&&("F3"!=a||"F8"==t);},xnm.aio.gateway.Gateway.prototype._setLED=function(e,t){var a="01";switch(e){case"ledOn":case"ledWhite":a+="05";break;case"ledOff":a+="00";break;case"ledRed":this._isV5()?a+="03":a+="01";break;case"ledGreen":this._isV5()?a+="01":a+="03";break;case"ledBlue":a+="02";break;case"ledYellow":a+="04";break;case"ledCyan":a+="07";break;case"ledPurple":a+="06";break;default:return void(t&&t(new Error("no such led command")));}this._executeRequest("SendSC",{type:"RGB",data:a},null,function(e){t&&t(e);});},xnm.aio.gateway.Gateway.prototype.getVendor=function(e){var t;if(this._vid){var a=parseInt(this._vid,16);if(a==xnm.aio.gateway.VID.NUEVA?t="nueva":a==xnm.aio.gateway.VID.BRELAG?t="brelag":a==xnm.aio.gateway.VID.WIR?t="wir":a==xnm.aio.gateway.VID.ELTAKO&&(t="eltako"),t)return void(e&&e(null,t));}var n=this._getGatewayVersion();"F3F2"==(n=n.toUpperCase())||"FC"==n?e&&e(null,"siegenia"):"F3F5"==n||"FB"==n?e&&e(null,"internorm"):"FD"==n?e&&e(null,"nueva"):"E2"==n?e&&e(null,"kopp"):"E7"==n?e&&e(null,"selve"):this._getVID(function(t,a){if(t)e&&e(t);else{var n="mediola";a&&((a=parseInt(a,16))==xnm.aio.gateway.VID.NUEVA?n="nueva":a==xnm.aio.gateway.VID.BRELAG?n="brelag":a==xnm.aio.gateway.VID.WIR?n="wir":a==xnm.aio.gateway.VID.ELTAKO&&(n="eltako")),e&&e(null,n);}});},xnm.aio.gateway.Gateway._getRFMode=function(e){var t=e.version,a=e.rfmode,n=e.gateway_vendor,r={HMMODE:!1,FS20MODE:!1,KOPPMODE:!1,ABUSMODE:!1,RS2MODE:!1,WIRMODE:!1,F3MODE:!1,CLMODE:!1,BLMODE:!1,SUPPORTS868:!0,SUPPORTS433:!1};if(!t)switch(n){case"siegenia":return r.HMMODE=!0,r.FS20MODE=!0,r;case"internorm":return r.HMMODE=!0,r;default:return{HMMODE:!0,FS20MODE:!0,KOPPMODE:!0,ABUSMODE:!0,RS2MODE:!0,WIRMODE:!1};}if(!t)return r;if(!a){if("E1"==t.toUpperCase()||"E2"==t.toUpperCase()||"EA"==t.toUpperCase())return{HMMODE:!0,FS20MODE:!0,KOPPMODE:!0,ABUSMODE:!0,RS2MODE:!0,WIRMODE:!0,SUPPORTS868:!0};a="";}switch(t.toUpperCase()){case"F1":case"F3F0":case"F3":r.ABUSMODE=!0;case"F2":case"F4":if("03"===a)r.KOPPMODE=!0;else r.FS20MODE=!0;break;case"F3F3":r.ABUSMODE=!0;case"F3F6":case"F3F2":case"F3F5":if(r.HMMODE=!0,"03"===a)r.KOPPMODE=!0;else r.FS20MODE=!0;break;case"F3F8":case"F9":case"FA":switch("FA"==t.toUpperCase()&&(r.HMMODE=!0),a){case"13":r.FS20MODE=!0;break;case"14":r.KOPPMODE=!0;break;case"15":r.ABUSMODE=!0;break;case"16":r.RS2MODE=!0;break;case"80":r.WIRMODE=!0;break;default:r.HMMODE=!0;}break;case"E1":case"E2":case"E7":case"EA":case"C1":case"C2":case"C3":case"C4":case"CA":var o=a.substr(0,2),s=a.substr(2,2);switch(r.HMMODE=!0,r.SUPPORTS868=!0,"C1"!=t.toUpperCase()&&"C3"!=t.toUpperCase()&&"CA"!=t.toUpperCase()||(r.SUPPORTS433=!0),o){case"13":r.FS20MODE=!0;break;case"14":r.KOPPMODE=!0;break;case"15":r.ABUSMODE=!0;break;case"16":r.RS2MODE=!0;break;case"80":r.WIRMODE=!0;break;case"83":r.F3MODE=!0;break;default:r.HMMODE=!0;}switch(s){case"02":r.CLMODE=!0;break;case"05":r.BLMODE=!0;break;default:r.CLMODE=!1;}break;case"FB":case"FC":r.HMMODE=!0;break;case"FD":r.SUPPORTS868=!1;}return r;},xnm.aio.gateway.Gateway._supportRemoteMode=function(e){return!(!e||!e.version)&&("C"==e.version.toUpperCase().charAt(0)||"E"==e.version.toUpperCase().charAt(0))&&!!e.sid;},xnm.aio.gateway.Gateway._supportSystem=function(e,t){var a;if(e.gateway_vendor){if(!(a=e.version))switch(e.gateway_vendor){case"siegenia":a="F3F2";break;case"internorm":a="F3F5";break;case"wir":a="E1";break;case"eltako_minisafe2":a="C2",e.version=a;break;default:a="F9";}}else(a=e.version)||(a="F9");var n=function(e,t){var a=xnm.aio.gateway.REV_SYS_MAP[0].indexOf(e.toUpperCase());if(-1==a)return 1;for(var n=1;n<xnm.aio.gateway.REV_SYS_MAP.length;n++){var r=xnm.aio.gateway.REV_SYS_MAP[n];if(r&&r[0]==t.toUpperCase()&&r.length>a)return r[a];}return 1;}(a,t);return 1==n;},xnm.aio.gateway.GatewayV6=function(){var V6=function V6(e,t,a){xnm.aio.gateway.Gateway.call(this,e,t),this._hwv=a,this._commonDeviceSB={},this._state_expired=3e4,this._ipReqQueue=[];};return(V6.prototype=new xnm.aio.gateway.Gateway()).constructor=V6,V6.prototype.getFiles=function(e){this._executeRequest("/file/",null,null,function(t,a){e&&e(t,a);});},V6.prototype.getFile=function(e,t){var a="http://"+this._ip+":"+this._port+"/file/"+e,n=null;(this._pwdHash||this.user&&this.password)&&(n=this._pwdHash||xnm.aio.gateway.Admin.V5.hash(this.password)),n&&(a+="?at="+encodeURIComponent(n));var r=require("http");"https://"==a.substr(0,8)&&(r=require("https")),r.getFile(a,null,function(a){a?t&&t(null,a):t&&t(new Error("download file failed:"+e));});},V6.prototype.setFile=function(e,t,a){var n=this;!function(e,t){require("fs").stat(e,function(e,a){e?t(e):a?t(null,a.size):t(new Error("invalid read file stat"));});}(t,function(r,o){if(r)a&&a(r);else{var s="http://"+n._ip+":"+n._port+"/file/"+e,i=null;(n._pwdHash||n.user&&n.password)&&(i=n._pwdHash||xnm.aio.gateway.Admin.V5.hash(n.password)),i&&(s+="?at="+encodeURIComponent(i));var u=require("http");"https://"==s.substr(0,8)&&(u=require("https")),u.postFile(t,s,{headers:{"Content-Length":o}},function(e){var t="";e.on("data",function(e){t+=e;}),e.on("end",function(){var e=null;try{if(!(e=JSON.parse(t))||!e.XC_SUC)return a&&a(new Error("http reponse:"+t)),void(a=null);var n=parseInt(e.XC_SUC.bytes);if(!n||isNaN(n))return a&&a(new Error("http reponse:"+t)),void(a=null);if(n!=o)return a&&a(new Error("send file byte count not match:"+n+"!="+o)),void(a=null);a&&a(),a=null;}catch(e){a&&(a(e),a=null);}});}).on("error",function(e){a&&(a(e),a=null);});}});},V6.prototype.deleteFile=function(e,t){this._executeRequest("/file/"+e,null,{method:"POST"},function(e,a){t&&t(e);});},V6.prototype.getActions=function(e){this._executeRequest("/api/actions",null,null,function(t,a){if(t)e&&e(t);else if(a){for(var n in a){var r=a[n];r&&(r.sys="aio",r.common_type="act",r.id=n);}e&&e(null,a);}else e&&e(null,a);});},V6.prototype.getAction=function(e,t){this._executeRequest("/data/act/"+e,null,null,function(a,n){if(a)t&&t(a);else if(n){var r={sys:"aio",common_type:"act"};r.id=e,r.actions=n,t&&t(null,r);}else t&&t(null,n);});},V6.prototype.addAction=function(e,t){var a=this;this.getActions(function(n,r){if(n)t&&t(n);else{var o=0;if(r){for(var s=Object.keys(r),i=1;0!=i&&-1!=s.indexOf(i+"");){i++;}o=i;}else o=1;a.setAction(o,e,function(a){e.id=o,t&&t(a,e,o);});}});},V6.prototype.setAction=function(e,t,a){this._executeRequest("/data/act/"+e,t.actions,{method:"POST"},function(n,r){a&&a(n,t,e);});},V6.prototype.deleteAction=function(e,t){this._executeRequest("/data/act/"+e,null,{method:"POST"},function(e,a){t&&t(e);});},V6.prototype.getGroups=function(e){this._executeRequest("/api/groups",null,null,function(t,a){if(t)e&&e(t);else if(a){for(var n in a){var r=a[n];r&&(r.sys="aio",r.common_type="grp",r.id=n);}e&&e(null,a);}else e&&e(null,a);});},V6.prototype.getGroup=function(e,t){this._executeRequest("/data/grp/"+e,null,null,function(a,n){a?t&&t(a):n?(n.sys="aio",n.common_type="grp",n.id=e,t&&t(null,n)):t&&t(null,n);});},V6.prototype.addGroup=function(e,t){var a=this;this.getGroups(function(n,r){if(n)t&&t(n);else{var o=0;if(r){for(var s=Object.keys(r),i=1;0!=i&&-1!=s.indexOf(i+"");){i++;}o=i;}else o=1;a.setGroup(o,e,function(a){e.id=o,t&&t(a,e,o);});}});},V6.prototype.setGroup=function(e,t,a){var n=JSON.parse(JSON.stringify(t));delete n.sys,delete n.gateway,delete n.common_type,delete n.id,this._executeRequest("/data/grp/"+e,n,{method:"POST"},function(n,r){a&&a(n,t,e);});},V6.prototype.deleteGroup=function(e,t){this._executeRequest("/data/grp/"+e,null,{method:"POST"},function(e,a){t&&t(e);});},V6.prototype.getGateways=function(e){this._executeRequest("/api/gateways",null,null,function(t,a){if(t)e&&e(t);else if(a){for(var n in a){var r=a[n];r&&(r.sys="aio",r.common_type="gtw",r.id=n);}e&&e(null,a);}else e&&e(null,a);});},V6.prototype.getGateway=function(e,t){this._executeRequest("/data/gtw/"+e,null,null,function(a,n){a?t&&t(a):n?(n.sys="aio",n.common_type="gtw",n.id=e,t&&t(null,n)):t&&t(null,n);});},V6.prototype.addGateway=function(e,t){var a=this;this.getGateways(function(n,r){if(n)t&&t(n);else{var o=0;if(r){for(var s=Object.keys(r),i=1;0!=i&&-1!=s.indexOf(i+"");){i++;}o=i;}else o=1;a.setGateway(o,e,function(a){e.id=o,t&&t(a,e,o);});}});},V6.prototype.setGateway=function(e,t,a){var n=JSON.parse(JSON.stringify(t));delete n.sys,delete n.gateway,delete n.common_type,delete n.id,this._executeRequest("/data/gtw/"+e,n,{method:"POST"},function(n,r){a&&a(n,t,e);});},V6.prototype.deleteGateway=function(e,t){this._executeRequest("/data/gtw/"+e,null,{method:"POST"},function(e,a){t&&t(e);});},V6.prototype.getDevices=function(e){this._executeRequest("/api/devices",null,null,function(t,a){if(t)e&&e(t);else if(a){for(var n in a){var r=a[n];r&&(r.common_type||(r.common_type="dev"),r.mod||(r.mod="aio"),"aio"==r.mod&&r.sys&&(r.dsys=r.sys,delete r.sys),r.gateway&&(r.gid=r.gateway,delete r.gateway),r.sys="aio",r.id=n);}e&&e(null,a);}else e&&e(null,a);});},V6.prototype.getDevice=function(e,t){this._executeRequest("/data/dev/"+e,null,null,function(a,n){a?t&&t(a):n?(n.common_type||(n.common_type="dev"),n.mod||(n.mod="aio"),"aio"==n.mod&&n.sys&&(n.dsys=n.sys,delete n.sys),n.gateway&&(n.gid=n.gateway,delete n.gateway),n.sys="aio",n.id=e,t&&t(null,n)):t&&t(null,n);});},V6.prototype.addDevice=function(e,t){var a=this;this.getDevices(function(n,r){if(n)t&&t(n);else{var o=0;if(r){for(var s=Object.keys(r),i=1;0!=i&&-1!=s.indexOf(i+"");){i++;}o=i;}else o=1;a.setDevice(o,e,function(a){e.id=o,t&&t(a,e,o);});}});},V6.prototype.setDevice=function(e,t,a){var n=JSON.parse(JSON.stringify(t));delete n.sys,delete n.common_type,"aio"==n.mod&&n.dsys&&(n.mod=n.dsys,delete n.dsys),delete n.gateway,n.gid&&(n.gateway=n.gid,delete n.gid),delete n.id,this._executeRequest("/data/dev/"+e,n,{method:"POST"},function(n,r){a&&a(n,t,e);});},V6.prototype.deleteDevice=function(e,t){this._executeRequest("/data/dev/"+e,null,{method:"POST"},function(e,a){t&&t(e);});},V6.prototype.apiAction=function(e,t){this._executeRequest("/api/action",e,null,function(e,a){t&&t(e);});},V6.prototype.apiExecuteCommand=function(e,t){var a=this,n={fnc:"/api/command",param:e,options:{method:"POST",timeout:8e3},callback:t,timeout:setTimeout(function(){n.send?a._executeIPDeviceRequestFinish(n,new Error("request timeout")):a._executeIPDeviceRequestFinish(n,new Error("req queue busy"));},8500),send:!1},r=this._ipReqQueue.length;this._ipReqQueue.push(n),0==r&&this._executeNextIPDeviceRequest();},V6.prototype.apiGetStates=function(e,t){var a=this,n={fnc:"/api/state",param:{id:e},options:{timeout:8e3},callback:t,timeout:setTimeout(function(){n.send?a._executeIPDeviceRequestFinish(n,new Error("request timeout")):a._executeIPDeviceRequestFinish(n,new Error("req queue busy"));},8500),send:!1},r=this._ipReqQueue.length;this._ipReqQueue.push(n),0==r&&this._executeNextIPDeviceRequest();},V6.prototype.apiGetStatesBuffered=function(e){var t=this,a={fnc:"/api/states",options:{timeout:8e3},callback:e,timeout:setTimeout(function(){a.send?t._executeIPDeviceRequestFinish(a,new Error("request timeout")):t._executeIPDeviceRequestFinish(a,new Error("req queue busy"));},8500),send:!1},n=this._ipReqQueue.length;this._ipReqQueue.push(a),0==n&&this._executeNextIPDeviceRequest();},V6.prototype._executeNextIPDeviceRequest=function(){if(0!=this._ipReqQueue.length){var e=this._ipReqQueue[0];e.send=!0;var t=this;this._executeRequest(e.fnc,e.param,e.options,function(a,n){t._executeIPDeviceRequestFinish(e,a,n),t._executeNextIPDeviceRequest();});}},V6.prototype._executeIPDeviceRequestFinish=function(e,t,a){var n=this._ipReqQueue.indexOf(e);-1!=n&&this._ipReqQueue.splice(n,1);try{e.callback&&e.callback(t,a);}catch(e){}e.callback=null;},V6.prototype.getStatesForCommonDevices=function(e,t,a){if(t&&0!=t.length)for(var n=this,r={},o=t.length,s=0;s<t.length;s++){var i=t[s];i&&i.id&&this.getStatesForCommonDevice(i,function(t,s,i){if(e)try{e.call(n,t,s,i);}catch(e){}r[i]={error:t,states:s},0==--o&&a&&a(null,r);});}},V6.prototype.getStatesForCommonDevice=function(e,t,a){var n=xnm.aio.gateway.DM.getSystem(e,this.toJSON());if(n){if(n.getStatesCreator){var r=e.id,o=this._commonDeviceSB[r];if(o){if(o.timestamp)if(new Date().getTime()-o.timestamp<this._state_expired&&!a)return void(t&&t(o.error,o.states,r));if(o.updating)return void(t&&t(o.error,o.states,r));}o||(o={},this._commonDeviceSB[r]=o),o.updating=!0,n.getStatesCreator(this,e,function(e,a){o.updating=!1,o.timestamp=new Date().getTime(),e?(o.states=null,o.error=e):(o.states=a,o.error=null),t&&t(e,a,r);});}else t&&t(new Error("common device do not support states"));}else t&&t(new Error("unknown common device"));},V6.prototype.executeCommandForCommonDevice=function(e,t){var a=e.id,n=this._commonDeviceSB[a],r=this;this.apiExecuteCommand(e,function(e){e||n.updating||(n.timestamp=new Date().getTime()-(r._state_expired-1e3)),t&&t(e);});},V6.prototype.getStatesCreator=function(e,t,a){for(var n=[],r={},o=[],s=[],i=0;i<t.length;i++){var u=t[i];if(u){var l=u.device;l&&l.mod&&l.id?(r[l.id]||(r[l.id]=[],o.push(l)),r[l.id].push(u)):(l&&"MBUS"==l.type&&l.address&&-1==s.indexOf(l.address)&&s.push(l.address),n.push(u));}}var m=[],d=3;o.length>0?this.getStatesForCommonDevices(function(t,a,n){if(!t&&n&&a&&r[n])for(var o=0;o<r[n].length;o++){var s=r[n][o];if(s.id){var i="?";s.status&&s.status.value&&(i=a[s.status.value]),void 0!==i&&null!=i||(i="?"),m.push({id:s.id,status:i}),e&&e.setState&&e.setState(s.id,i);}}},o,function(e,t){0==--d&&(1==o.length&&e?a&&a(e):a&&a(null,m));}):0==--d&&a&&a(null,m),n.length>0?xnm.aio.gateway.Gateway.prototype.getStatesCreator.call(this,e,n,function(e,t){!e&&t&&(m=m.concat(t)),0==--d&&a&&a(null,m);}):0==--d&&a&&a(null,m),s.length>0?xnm.aio.gateway.systems.MBUS.updateStates(this,s,function(){0==--d&&a&&a(null,m);}):0==--d&&a&&a(null,m);},V6.prototype.doAction=function(e,t){this.apiAction({id:e},function(e){t&&t(e);});},V6;}(),xnm.aio.gateway.GatewayV5Plus=function(){var Gateway=function Gateway(e,t){xnm.aio.gateway.GatewayV6.call(this,e,t,"EA"),this._hwv="EA";};return(Gateway.prototype=new xnm.aio.gateway.GatewayV6()).constructor=Gateway,Gateway.prototype.learn=function(e,t){e&&e.type?"HM"!=e.type.toUpperCase()?xnm.aio.gateway.Gateway.prototype.learn.call(this,e,t):xnm.aio.gateway.systems.HM_X.learn(this,e,t):t&&t(new Error("learn option foramt invalid"));},Gateway;}(),xnm.aio.gateway.Util={contains:function contains(e,t){if(!e)return null;for(var a=e.length;a--;){if(e[a]===t)return!0;}return!1;},getHexVal:function getHexVal(e,t){for(var a=e<0,n=(e<0?4294967295+e+1:e).toString(16).toUpperCase();n.length<t;){n=(a?"F":"0")+n;}return n;},compareSoftwareVersion:function compareSoftwareVersion(e,t){var a,n,r,o,s,i,u=e.split("."),l=t.split(".");return(a=parseInt(u[0]))!=(n=parseInt(l[0]))?a>n?1:-1:(r=parseInt(u[1]))!=(o=parseInt(l[1]))?r>o?1:-1:(s=parseInt(u[2].replace(/\D/g,"")))!=(i=parseInt(l[2].replace(/\D/g,"")))?s>i?1:-1:0;},removeSensitiveUrl:function removeSensitiveUrl(e){if(!e)return e;var t,a=e,n=a.indexOf("auth=");return-1!=n&&(t=a.indexOf("&",n),a=-1==t?a.substr(0,n+5)+"xxxxxx":a.substr(0,n+5)+"xxxxxx"+a.substr(t)),-1!=(n=a.indexOf("at="))&&(t=a.indexOf("&",n),a=-1==t?a.substr(0,n+3)+"xxxxxx":a.substr(0,n+3)+"xxxxxx"+a.substr(t)),a;},removeSensitiveData:function removeSensitiveData(e){try{var t=JSON.parse(JSON.stringify(e));return t.auth&&(t.auth="xxxxxx"),t.at&&(t.at="xxxxxx"),t;}catch(t){return e;}}},xnm.aio.gateway.systems.NTH={addSensor:function addSensor(e,t,a){e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},regist:function regist(e,t,a){t&&t.address&&("01"==t.address||"02"==t.address||"03"==t.address)?this.addSensor(e,t.address,a):a&&a(new Error("regist device option foramt invalid"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!(t&&t.type&&"nth"==t.type.toLowerCase()&&t.adr&&t.state))return null;if(!e||!e.address||!e.type||"nth"!=e.type.toLowerCase())return null;if(e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=t.state;t.state.indexOf(":")>0&&(a=t.state.split(":")[0]);var n=null;if(a.length>=6){var r=parseInt(a.substr(0,4),16),o=parseInt(a.substr(4,2),16);r>=32768&&(r=0-(r^=65535)),n={temp:r=(r/10).toFixed(1),hum:o};}return n;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<18||!t)return null;var a=e.substr(0,2);if(!t.address||t.address.toUpperCase()!=a.toUpperCase())return null;var n=e.substr(2,8),r=parseInt(n.substr(0,2),16);switch(r){case 1:r=">";break;case 2:r=">=";break;case 3:r="<";break;case 4:r="<=";break;case 5:r="!=";break;default:r="==";}var o=parseInt(n.substr(2,2),16),s=parseInt(n.substr(4,4),16);if(1===o)s>=32768&&(s=0-(s^=65535)),s=(s/10).toFixed(1);return{value:s,comparator:r,dpt:o};},generateTriggerCode:function generateTriggerCode(e,t){if(!e||null==e.value||void 0===e.value||!e.comparator||!e.dpt)return null;if(!t||!t.address)return null;var a=t.address,n=0,r=5;switch(e.comparator){case">":n=1,r=4;break;case">=":n=2,r=3;break;case"<":n=3,r=2;break;case"<=":n=4,r=1;break;case"!=":n=5,r=0;break;default:n=0,r=5;}n=xnm.aio.gateway.Util.getHexVal(n,2),r=xnm.aio.gateway.Util.getHexVal(r,2);var o=xnm.aio.gateway.Util.getHexVal(parseInt(e.dpt),2),s=parseFloat(e.value);return 1==e.dpt&&(s=Math.round(10*s))<0&&(s=0-s^65535),a+(n+o+(s=xnm.aio.gateway.Util.getHexVal(s,4)))+(r+o+s);},DM:{TYPE:"NTH",MAP:{status:[{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"int",name:"humidity",ref:{value:"hum",ext:"%d",extMeta:"0-100"}}],event:[{type:"float",name:"temperature",ref:{dpt:1,value:"%f",comparator:"=="}},{type:"int",name:"humidity",ref:{dpt:2,value:"%d",comparator:"=="}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"NUEVA Temperature Sensor"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;!e.address||"01"!=e.address&&"02"!=e.address&&"03"!=e.address?a(new n(r.INVALID,"parameter address is invalid")):a(null,JSON.parse(JSON.stringify(e)));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;!e.address||"01"!=e.address&&"02"!=e.address&&"03"!=e.address?a(new n(r.INVALID,"parameter address is invalid")):a(null,JSON.parse(JSON.stringify(e)));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.NTH.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){return"v5"==a?null:{type:"temperature",states:{temperature:{type:"FLOAT"},humidity:{type:"INT"}},details:{states:{temperature:{value:"temp"},humidity:{value:"hum"}}}};}}},xnm.aio.gateway.systems.RC={regist:function regist(e,t,a){t&&t.address?"siren"!=t.data?this.addSensor(e,t.address,a):a&&a():a&&a(new Error("regist device option foramt invalid"));},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},addSensor:function addSensor(e,t,a){e._executeRequest("AddSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){if(e){var n,r=[],o=this;if(t&&t.devices)for(n=t.devices.length;n--;){t.devices[n]&&t.devices[n].address&&r.push(t.devices[n].address);}if("siren"===(t?t.type:null))this._learnSiren(e,r,a);else this._learnSensor(e,function(t,n){t?a&&a(t):o.addSensor(e,n.address,function(e){a&&a(e,{address:n.address});});});}else a&&a(new Error("gateway is null"));},_learnSiren:function _learnSiren(e,t,a){var n=this._generateFreeAdr(t),r=n+"29";e._executeRequest("SendSC",{type:this.DM.TYPE,adr:n,data:r},{timeout:2e4},function(e){e?a&&a(e):a&&a(e,{address:n});});},_learnSensor:function _learnSensor(e,t){e._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2e4},function(e,a){e?t&&t(e):!a.CODE||a.CODE.length<=4?t&&t(new Error("response format invalid")):t&&t(null,{address:a.CODE.substr(0,4)});});},_generateFreeAdr:function _generateFreeAdr(e){for(var t,a=!1;!a;){t=this._getHexVal(Math.floor(65535*Math.random()),4),a=!this._contains(e,t);}return t;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r,o;if("resetAll"==a.value)r="resetROIS",o={};else{r="SendSC";var s=this._buildData(e,t,a);if(!s)return void(n&&n(new Error("command format invalid")));o={type:this.DM.TYPE,data:s};}e._executeRequest(r,o,null,function(e){n&&n(e);});},buildQuery:function buildQuery(e,t,a){var n,r;if("resetAll"==a.value)n="resetROIS",r={};else{n="SendSC";var o=this._buildData(e,t,a);if(!o)return null;r={type:this.DM.TYPE,data:o};}return r.XC_FNC=n,r;},_buildData:function _buildData(e,t,a){var n;if(t&&t.address)return"on"==a.value?n="29":"off"==a.value&&(n="89"),n?t.address+n:null;},_parseData:function _parseData(e,t){if(!e||e.length<=2)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;var a=e.substr(0,e.length-2),n=e.substr(e.length-2);if(a.toUpperCase()!=t.address.toUpperCase())return null;var r={};switch(n){case"29":r.value="on";break;case"89":r.value="off";}return r.value?r:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);if(!n)return null;var r={status:n[t.value]};if(t.extra){var o,s=n[t.extra];if(s){switch(s){case"sabotage":o="notification";break;case"battery":o="battery";break;case"timeout":o="clock";}r.info=o;}return r;}return n[t.value];},_handleState:function _handleState(e,t){if(!t.type||"rc"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.address)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a={},n=t.state,r=n.indexOf(":");r>0&&(n=n.substr(0,r));var o=parseInt(n,16),s=o>>6&1;if("contact"===e.data)a.state=s?"open":"closed";else a.alarm=s?"alarm":"ok";var i=o>>2&1,u=o>>1&1,l=1&o;return a.error=u?"sabotage":i?"timeout":l?"battary":"no_error",a;},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<6||!e)return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE||!e.address)return null;var a=t.data.substr(0,4),n=t.data.substr(4,2);if(e.address.toUpperCase()!=a.toUpperCase())return null;var r={};return"00"==n.value?"contact"==e.data?r.state="closed":r.alarm="ok":"01"==n.value?"contact"==e.data?r.state="open":r.alarm="alarm":"02"==n.value?r.error="battery":"03"==n.value?r.error="sabotage":"05"==n.value&&(r.error="timeout"),r;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<6||!t||!t.address)return null;var a=e.substr(0,4);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n=e.substr(4,2),r={};return"00"==n?"contact"==t.data?r.value="closed":r.value="ok":"01"==n?"contact"==t.data?r.value="open":r.value="alarm":"02"==n?r.value="battery":"03"==n?r.value="sabotage":"05"==n&&(r.value="timeout"),r.value?r:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a;switch(e.value){case"ok":case"closed":a="00";break;case"alarm":case"open":a="01";break;case"battery":a="02";break;case"sabotage":a="03";break;case"timeout":a="05";}return a?t.address+a:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,DM:{TYPE:"RC",MAP:{siren:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},contact:{command:[{type:"enum",name:"reset sensor",ref:{value:"resetAll"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["closed","open"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"battery low",ref:{value:"battery"}},{type:"enum",name:"sabotage",ref:{value:"sabotage"}},{type:"enum",name:"timeout",ref:{value:"timeout"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["closed","open"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}]},sensor:{command:[{type:"enum",name:"reset sensor",ref:{value:"resetAll"}}],status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}],event:[{type:"enum",name:"alarm",ref:{value:"alarm"}},{type:"enum",name:"battery low",ref:{value:"battery"}},{type:"enum",name:"sabotage",ref:{value:"sabotage"}},{type:"enum",name:"timeout",ref:{value:"timeout"}}],ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","battery","timeout","sabotage"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return[{type:this.TYPE,name:"Roiscok",subtypes:[{id:"Siren",data:"siren"},{id:"Contact Sensor",data:"contact"},{id:"Motion Sensor",data:"motion"},{id:"Smoke Sensor",data:"smoke"},{id:"General Sensor",data:"sensor"}]},{type:this.TYPE,name:"Nueva",subtypes:[{id:"Contact Sensor",data:"contact"},{id:"Motion Sensor",data:"motion"},{id:"Smoke Sensor",data:"smoke"}]}];},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.data)return null;var t=e.data;"smoke"!=e.data&&"motion"!=e.data||(t="sensor");var a=this.MAP[t];if(!a)return null;if((a=JSON.parse(JSON.stringify(a))).status)for(var n=0;n<a.status.length;n++){"error"!=a.status[n].ref.value&&(a.status[n].ref.extra="error");}if("smoke"==e.data&&a.event){for(var r=-1,o=0;o<a.event.length;o++){if(a.event[o]&&a.event[o].ref&&"sabotage"==a.event[o].ref.value){r=o;break;}}-1!=r&&a.event.splice(r,1);}return a;},getIPevtMap:function getIPevtMap(e){if(!e||!e.data)return null;var t=e.data;"smoke"!=e.data&&"motion"!=e.data||(t="sensor");var a=this.MAP[t];return a?{ipevt:a.ipevt}:null;},getActionMap:function getActionMap(e){if(!e||!e.data)return null;var t=e.data;"smoke"!=e.data&&"motion"!=e.data||(t="sensor");var a=this.MAP[t];if(!a)return null;var n=JSON.parse(JSON.stringify(a)),r={command:[],status:n.status};if(n.command)for(var o=0;o<n.command.length;o++){"resetAll"!=n.command[o].ref.value&&r.command.push(n.command[o]);}return r;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.RC.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return null;switch(e.data){case"smoke":return{type:"smoke",states:{smoke:{values:["on","off"]}},details:{states:{smoke:{value:"alarm",conv_s:{ok:"off",alarm:"on"}}}}};case"motion":return{type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"alarm",conv_s:{ok:"off",alarm:"on"}}}}};case"contact":return{type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"state"}}}};default:return null;}}}},xnm.aio.gateway.systems.RV={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(t,r){if(t)a&&a(t);else if(r.CODE){var o=n._resolveAddress(r.CODE);o?n._addSensor(e,o,function(e){a&&a(e,{address:o});}):a&&a(new Error("gateway result address invalid"));}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e.length>6?e.substr(0,6):null;},_addSensor:function _addSensor(e,t,a){e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state||t.type!=this.DM.TYPE)return null;if(!e.type||e.type!=this.DM.TYPE)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=t.state.split(":");if(a.length<3)return null;var n=(parseInt(a[0],16)/10).toFixed(1),r=(parseInt(a[1],16)/100).toFixed(1),o=a[2].substr(0,2),s=parseInt(o,16),i=100*s;return o=a[2].substring(2),{power:n,consumption:r,current:(i=(i+(s=parseInt(o,16)))/100).toFixed(1)};},_handleUdpState:function _handleUdpState(e,t){if(!(t&&t.data&&e&&e.address))return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;if(t.data.substr(0,6).toUpperCase()!=e.address.toUpperCase())return null;var a=(parseInt(t.data.substr(10,4),16)/10).toFixed(1),n=(parseInt(t.data.substr(16,4),16)/100).toFixed(1),r=t.data.substr(6,2),o=parseInt(r,16),s=100*o;return r=t.data.substr(8,2),{power:a,consumption:n,current:(s=(s+(o=parseInt(r,16)))/100).toFixed(1)};},DM:{TYPE:"RV",MAP:{status:[{type:"float",name:"power",ref:{value:"power"}},{type:"float",name:"consumption",ref:{value:"consumption"}},{type:"float",name:"current",ref:{value:"current"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"revolt"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.RV.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){return"v5"==a?null:{type:"powermeter",states:{power:{type:"FLOAT"},consumption:{type:"FLOAT"},current:{type:"FLOAT"}},details:{states:{power:{value:"power"},consumption:{value:"consumption"},current:{value:"current"}}}};}}},xnm.aio.gateway.systems.PV={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);r?a&&a(null,{address:r}):a&&a(new Error("gateway result address invalid"));}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e.length>8?e.substr(0,8):null;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<10||!t||!t.address)return null;var a=e.substr(0,8);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n=e.substr(8,2),r={};return"04"==n?r.value="open":"05"==n?r.value="closed":"08"==n?r.value="fire":"01"==n&&(r.value="motion"),r.value?r:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a;switch(e.value){case"fire":a="08";break;case"motion":a="01";break;case"open":a="04";break;case"closed":a="05";}return a?t.address+a:null;},DM:{TYPE:"PV",MAP:{contact:{event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}]},smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}]},motion:{event:[{type:"enum",name:"motion",ref:{value:"motion"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e),a=!1;t&&t.ABUSMODE||(a=!0);var n={type:this.TYPE,name:"ABUS Privest",subtypes:[]};return n.subtypes.push({id:"Contact Sensor",data:"contact",rfmismatch:a}),n.subtypes.push({id:"Smoke Detector",data:"smoke",rfmismatch:a}),n.subtypes.push({id:"Motion Detector",data:"motion",rfmismatch:a}),n;},getCommandStatusMap:function getCommandStatusMap(e){return e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));}}},xnm.aio.gateway.systems.WS300={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},regist:function regist(e,t,a){if(t&&t.address&&t.manufacturer){if("ks300"===t.manufacturer){if("71"!=t.address)return void(a&&a(new Error("ks300 device address must be 71")));}else{var n=parseInt(t.address);if(n<11||n>18)return void(a&&a(new Error("device address must be winthin 11-18")));}var r={type:this.DM.TYPE,adr:t.address};e._executeRequest("addSensor",r,null,function(e){a&&a(e);});}else a&&a(new Error("regist device option foramt invalid"));},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<10||!e)return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;var a,n,r=t.data.substr(0,2);if(!e.address||e.address!=r)return null;var o=[t.data.substr(2,4),t.data.substr(6,4)];return"71"==r&&(a=t.data.substr(10,4),n=t.data.substr(14,4),o.push(a),o.push(n)),this._handleState(e,o.join(":"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"ws300"!=t.type.toLowerCase())return null;if(!t.adr)return null;if(!t.state)return null;if(e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=t.state.split(":");if(3==a.length||5==a.length){var n=parseInt(a[0],16);(32768&n)>0&&(n-=65536),n=(n/10).toFixed(1);var r,o,s=(parseInt(a[1],16)/10).toFixed(1);return 5==a.length&&(r=parseInt(a[2],16),o=parseInt(a[3],16)),3==a.length&&parseInt(a[2],16)>5||5==a.length&&parseInt(a[4],16)>5?null:{temp:n,hum:s,wind:r,rain:o};}return null;},DM:{TYPE:"WS300",MAP:{ks300:{status:[{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"float",name:"humidity",ref:{value:"hum",ext:"%f"}},{type:"int",name:"wind",ref:{value:"wind",ext:"%d"}},{type:"int",name:"rain",ref:{value:"rain",ext:"%d"}}]},general:{status:[{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"float",name:"humidity",ref:{value:"hum",ext:"%f"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);return t&&t.FS20MODE?[{type:this.TYPE,name:"ASH 2200"},{type:this.TYPE,name:"S 300 TH"},{type:this.TYPE,name:"KS300"}]:null;},getCommandStatusMap:function getCommandStatusMap(e){return e&&"ks300"==e.manufacturer?this.MAP.ks300:this.MAP.general;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.ER.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){return e?"v5"==a?null:"ks300"===e.manufacturer?{type:"weatherstation",states:{temperature:{type:"FLOAT"},humidity:{type:"INT"},windSpeed:{type:"FLOAT"},rainCount:{type:"FLOAT"}},details:{states:{temperature:{value:"temp"},humidity:{value:"hum"},windSpeed:{value:"wind"},rainCount:{value:"rain"}}}}:{type:"temperature",states:{temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}},details:{states:{temperature:{value:"temp"},humidity:{value:"hum"}}}}:null;}}},xnm.aio.gateway.systems.ER={COMMAND:["down","up","stop","stepUp","stepDown","manu","auto","toggle","3sUp","3sDown","doubleUp","doubleDown","learn","pulseUp","pulseDown","closeAS","moveAS","","setInterPos","delInterPos","setTiltPos","delTiltPos",null,null,null,"silentUp","silentDown"],STATUS:["no information","top position stop","bottom position stop","intermediate position stop","tilt position stop","blocking stop","overheated stop","timeout stop","start to move up","start to move down","moving up","moving down",null,"stopped in undefined position","top tilt position stop","bottom intermediate position stop","switching device switched off","switching device switched on","scene set","scene start","scene stop","scene error"],delERsensor:function delERsensor(e,t,a){this.delSensor(e,t,a);},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},startLearnER:function startLearnER(e,t,a){if(t){var n=this;xnm.aio.gateway.Admin.getGatewayEID(e,function(r,o){r?a&&a(r):o?e._executeRequest("LearnSC",{type:n.DM.TYPE,adr:t},{timeout:2e4},function(e,r){if(e)a&&a(e);else if(r&&0!=r.length){if((r=r[0])&&r.adr&&r.type){var o=n._resolveType(r.type);o.address=t,o.subadr=r.adr,a&&a(null,o);}else a&&a(new Error("learn result format error"));}else a&&a(new Error("do not find elero device"));}):a&&a(new Error("gateway has no eid"));});}else a&&a(new Error("address invalid"));},learnERUp:function learnERUp(e,t,a){t?e._executeRequest("SendSC",{type:this.DM.TYPE,data:t+"01"},{timeout:2e3},function(e,t){var n=!1;t&&t[0]&&t[0].adr&&(n=!0),a&&a(e,n);}):a&&a(new Error("address invalid"));},learnERDown:function learnERDown(e,t,a){t?e._executeRequest("SendSC",{type:this.DM.TYPE,data:t+"00"},{timeout:2e3},function(e,t){var n=!1;t&&t[0]&&t[0].adr&&(n=!0),a&&a(e,n);}):a&&a(new Error("address invalid"));},learnERStop:function learnERStop(e,t,a){t?e._executeRequest("SendSC",{type:this.DM.TYPE,data:t+"02"},{timeout:2e3},function(e,t){var n=!1;t&&t[0]&&t[0].adr&&(n=!0),a&&a(e,n);}):a&&a(new Error("address invalid"));},stopLearnER:function stopLearnER(e,t){e._executeRequest("stopLearn",{type:this.DM.TYPE},null,function(e){t&&t(e);});},getERDevicesAddress:function getERDevicesAddress(e,t){xnm.aio.gateway.Admin.getGatewayEID(e,function(e,a){e?t&&t(e):a?t&&t(null,[]):t&&t(new Error("gateway has no elero id"));});},getERdevicesFromGateway:function getERdevicesFromGateway(e,t){e._executeRequest("getStates",{config:"1"},{timeout:2e3},function(e,a){if(e)t(e);else{for(var n=[],r=0;r<a.length;r++){a[r]&&"ER"==a[r].type&&n.push(a[r]);}t(null,n);}});},_getEleroId:function _getEleroId(e,t){e._executeRequest("GetSI",null,{timeout:2e3},function(e,a){t&&t(e,a?a.EID:null);});},_resolveType:function _resolveType(e){var t=e.split(":"),a={data:null,subtype:null};a.data=[null,"shutter","blind","awning","shade","dimmer",null,"switch"][parseInt(t[1],16)],a.data||(a.data="general");return a.subtype=["RevoLine","CombioRM","CombioJA","CombioLI","VariEco","VariEcoDC","CombioML","VariEcoS","CombioLiMt","CombioLiEt","CombioLiSw","CombioJAPulse",null,null,null,"Revio","UniLogic","RevoLineDC","CombioDCRM","CombioDCJA","CombioDCJAPuls",null,null,null,null,"CombioMvl",null,"RevioSW","CombioMVLed","CombioMLed","CombioJAPulsePLUS","CombioLed","PowerSwitch","CombioJAPulse2"][parseInt(t[0],16)-96],"AD"==t[0]&&(a.subtype="rolMotion"),a;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!(t&&t.address&&a&&a.value))return null;var n;switch(a.value){case"on":n="01";break;case"off":n="00";break;case"silentUp":n="19";break;case"silentDown":n="1A";break;default:for(var r=!1,o=this.COMMAND.length;o--;){if(this.COMMAND[o]==a.value){r=!0;break;}}if(!r)return null;n=xnm.aio.gateway.Util.getHexVal(o,2);}return t.address+n;},_parseData:function _parseData(e,t){if(!e)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;if(e.length<4)return null;var a=e.substr(0,2);if(t.address.toLowerCase()!=a.toLowerCase())return null;var n=e.substr(2,2);n=parseInt(n,16);var r={};if("switch"==t.data||"dimmer"==t.data||"heater"==t.data)r.value=0==n?"off":1==n?"on":this.COMMAND[n];else if(r.value=this.COMMAND[n],!r.value)return null;return r;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state||"ER"!=t.type)return null;if(!e.address||parseInt(e.address,16)!=parseInt(t.adr,16))return null;var a={};if(4==t.state.length){var n=parseInt(t.state.substr(0,2),16),r=parseInt(t.state.substr(2),16);a.state=this.STATUS[r],a.pos=2==r||15==r?100:1==r||14==r?0:50,"switch"==e.data?(17==r&&(a.pos="on"),16==r&&(a.pos="off")):"dimmer"==e.data?13==r?a.pos="off":3!=r&&10!=r&&11!=r||(a.pos="on"):"heater"==e.data&&(1==r?a.pos="off":13==r?a.pos="middle":2==r&&(a.pos="on")),16==n?a.mode="auto":32==n&&(a.mode="manu"),48==n&&(a.mode="mixed");}return a;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"ER",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"stop"}},{type:"enum",name:"mode auto",ref:{value:"auto"}},{type:"enum",name:"mode manu",ref:{value:"manu"}},{type:"enum",name:"mode toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:[]}},{type:"enum",name:"pos",ref:{value:"pos",options:["on","off"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","mixed"]}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"stop"}},{type:"enum",name:"double down",ref:{value:"doubleDown"}},{type:"enum",name:"up step bit",ref:{value:"stepUp"}},{type:"enum",name:"down step bit",ref:{value:"stepDown"}},{type:"enum",name:"mode auto",ref:{value:"auto"}},{type:"enum",name:"mode manu",ref:{value:"manu"}},{type:"enum",name:"mode toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:[]}},{type:"enum",name:"pos",ref:{value:"pos",options:["on","off"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","mixed"]}}]},heater:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"stop"}},{type:"enum",name:"double down",ref:{value:"doubleDown"}},{type:"enum",name:"mode auto",ref:{value:"auto"}},{type:"enum",name:"mode manu",ref:{value:"manu"}},{type:"enum",name:"mode toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:[]}},{type:"enum",name:"pos",ref:{value:"pos",options:["on","off"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","mixed"]}}]},general:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"up step bit",ref:{value:"stepUp"}},{type:"enum",name:"down step bit",ref:{value:"stepDown"}},{type:"enum",name:"mode auto",ref:{value:"auto"}},{type:"enum",name:"mode manu",ref:{value:"manu"}},{type:"enum",name:"mode toggle",ref:{value:"toggle"}},{type:"enum",name:"move up",ref:{value:"3sUp"}},{type:"enum",name:"move down",ref:{value:"3sDown"}},{type:"enum",name:"double up",ref:{value:"doubleUp"}},{type:"enum",name:"double down",ref:{value:"doubleDown"}},{type:"enum",name:"move up pulse",ref:{value:"pulseUp"}},{type:"enum",name:"move down pulse",ref:{value:"pulseDown"}},{type:"enum",name:"closeAS",ref:{value:"closeAS"}},{type:"enum",name:"moveAS",ref:{value:"moveAS"}},{type:"enum",name:"set intermediate position",ref:{value:"setInterPos"}},{type:"enum",name:"delete intermediate position",ref:{value:"delInterPos"}},{type:"enum",name:"set tilt position",ref:{value:"setTiltPos"}},{type:"enum",name:"delete tilt position",ref:{value:"delTiltPos"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:[]}},{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100",step:"50",scale:"50"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","mixed"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);return t&&!t.SUPPORTS868?null:[{type:this.TYPE,name:"elero",subtypes:[{id:"Switch",data:"switch"},{id:"Dimmer",data:"dimmer"},{id:"Heater",data:"heater"},{id:"Shutter",data:"shutter"},{id:"Blind",data:"blind"},{id:"Awning",data:"awning"},{id:"Shade",data:"shade"},{id:"General",data:"general"}]},{type:this.TYPE,name:"MHZ Sonnenschutz",vendor:"mhz",subtypes:[{id:"elero  Shutter",data:"shutter",vendor:"mhz"},{id:"elero  Blind",data:"blind",vendor:"mhz"},{id:"elero  Awning",data:"awning",vendor:"mhz"},{id:"elero  Shade",data:"shade",vendor:"mhz"}]}];},getCommandStatusMap:function getCommandStatusMap(e){if(!e.data)return null;var t=e.data;"switch"!=t&&"dimmer"!=t&&"heater"!=t&&(t="general");var a=this.MAP[t];return a&&(a=JSON.parse(JSON.stringify(a))),"shutter"==e.data&&("rolMotion"!=e.subtype&&"silentShutter"!=e.subtype||(a.command.push({type:"enum",name:"silent up",ref:{value:"silentUp"}}),a.command.push({type:"enum",name:"silent down",ref:{value:"silentDown"}}))),a;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.ER.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":(n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"stop"},toggle:{value:"toggle"}},states:{state:{value:"state",conv_s:{"switching device switched off":"off","switching device switched on":"on"}}}};break;case"dimmer":(n={type:"dimmer",commands:{on:{},off:{}}}).details={commands:{on:{value:"on"},off:{value:"stop"}}};break;default:"rolMotion"==e.subtype||"silentShutter"==e.subtype?(n={type:"blind",commands:{up:{},down:{},stop:{},silentUp:{},silentDown:{}}}).details={commands:{up:{value:"3sUp"},down:{value:"3sDown"},stop:{value:"stop"},silentUp:{value:"silentUp"},silentDown:{value:"silentDown"}}}:(n={type:"blind",commands:{up:{},down:{},stop:{}}}).details={commands:{up:{value:"3sUp"},down:{value:"3sDown"},stop:{value:"stop"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.ER.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"stop"})}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"stop"})}}};break;default:t="rolMotion"==e.subtype||"silentShutter"==e.subtype?{type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"3sUp"})},down:{url:_getUrl(e,{value:"3sDown"})},stop:{url:_getUrl(e,{value:"stop"})},silentUp:{url:_getUrl(e,{value:"silentUp"})},silentDown:{url:_getUrl(e,{value:"silentDown"})}}}:{type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"3sUp"})},down:{url:_getUrl(e,{value:"3sDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};}return t;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o=this.toGeneralDevice(t),s=e._getSupportWidgetTypes(o);"rolMotion"!==t.subtype&&"silentShutter"!==t.subtype||s.push("shutter_silent");var i=e._getCommandMap(o);i=function(e,t){return"rolMotion"!==e.subtype&&"silentShutter"!==e.subtype||(t["%silentDown%"]={value:"silentDown"},t["%silentUp%"]={value:"silentUp"}),t;}(t,i||{});var u=e._getStatusMap(o),l=e._getIconMap(o);return e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}},xnm.aio.gateway.systems.HM={configBlind:function configBlind(e,t,a){var n=xnm.aio.gateway.Util.getHexVal(10*t.down,4);n+=xnm.aio.gateway.Util.getHexVal(10*t.up,4),n+=xnm.aio.gateway.Util.getHexVal(10*t.motorswitch,2),n+=xnm.aio.gateway.Util.getHexVal(t.calibrate,2);e._executeRequest("hmblindcal",{adr:t.address,data:n.toUpperCase()},{timeout:2e4},function(e){a&&a(e);});},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){t||(t={}),this.learnWithSnr(e,t.snr,a);},learnWithSnr:function learnWithSnr(e,t,a){var n=this,r={type:this.DM.TYPE};t&&(r.adr=t),e._executeRequest("LearnSC",r,{timeout:2e4},function(r,o){if(r)a&&a(r);else if(o.adr&&o.type){if(t||(t=o.snr),t){for(var s=n._resolveTypecode(o.type),i=n._resolveChannel(o.type),u=[],l=0;l<i.length;l++){u.push({address:o.adr+i[l],data:s,snr:t,typecode:o.type});}var m=e._getGatewayVersion();m&&"f3"==m.toLowerCase().substr(0,2)?n._registDevices(e,o.type,u,function(e){a&&a(e,u);}):a&&a(r,u);}else a&&a(new Error("no serial number"));}else a&&a(new Error("response format invalid"));});},_resolveTypecode:function _resolveTypecode(e){return"0078"==e||"0050"==e||"004E"==e||"0061"==e||"0004"==e||"0014"==e||"0052"==e||"00CE"==e||"00C8"==e||"00D0"==e||"00A1"==e||"0015"==e||"00CC"==e||"0011"==e||"0002"==e||"005C"==e||"00CF"==e||"0009"==e||"0062"==e||"0069"==e||"0003"==e||"00C9"==e||"0066"==e||"006C"==e||"00CB"==e||"00CD"==e||"002D"==e||"00BE"==e||"0001"==e||"0051"==e||"00CA"==e||"000A"==e||"00AB"==e||"00F0"==e||"00EB"==e||"00D8"==e||"00E6"==e||"00E7"==e||"00E8"==e||"00E9"==e?"switch":"0068"==e||"002E"==e||"00B4"==e||"0070"==e||"0059"==e||"00B6"==e||"0071"==e||"0013"==e||"0073"==e||"00A3"==e||"0067"==e||"0058"==e||"00BB"==e||"00A4"==e||"006E"==e||"00B7"==e||"00B9"==e||"0072"==e||"0057"==e||"0012"==e||"00B8"==e||"0016"==e||"0074"==e||"005A"==e||"00B5"==e||"006F"==e||"00BA"==e||"00B3"==e||"00FC"==e?"dimmer":"00AC"==e||"00F6"==e||"00D7"==e||"00E2"==e||"00E3"==e||"00E4"==e||"00E5"==e||"00EA"==e?"powerswitch":"00D2"==e||"006A"==e||"0053"==e||"00D1"==e||"0005"==e||"0006"==e?"blind":"001A"==e||"00DA"==e||"00BF"==e||"006B"==e||"00C2"==e||"0036"==e||"00E0"==e||"00DC"==e||"001B"==e||"001D"==e||"001C"==e||"001E"==e||"0008"==e||"00A6"==e||"00A5"==e||"00A0"==e||"003B"==e||"0035"==e||"0034"==e||"0060"==e||"00A9"==e||"004C"==e||"0029"==e||"002A"==e||"0038"==e||"0037"==e||"004D"==e?"button":"000B"==e||"000D"==e||"000E"==e||"000F"==e||"001F"==e||"002B"==e||"002C"==e||"0031"==e||"0032"==e||"0033"==e||"003C"==e||"003D"==e||"003E"==e||"003F"==e||"0041"==e||"0048"==e||"0093"==e||"0094"==e||"00BC"==e?"weather":"0040"==e?"weather_station":"0045"==e||"00B2"==e?"water":"0042"==e||"0056"==e||"0084"==e||"0091"==e||"00AA"==e?"smoke":"0030"==e||"0081"==e?"window":"002F"==e||"00B1"==e||"00C7"==e||"005F"==e||"0082"==e||"00B1"==e?"contact":"0043"==e?"tilt":"00A7"==e?"rain":"004A"==e||"004F"==e||"005D"==e||"0090"==e||"00C0"==e||"00C1"==e||"00DB"==e||"00F7"==e?"motion":"0039"==e?"thermostat":"0095"==e?"thermocontrol":"00AD"==e?"wallthermostat":"0046"==e?"switch_interface":"00FD"==e?"lux":"00A8"==e?"temp2":"009F"==e?"capacity":"00FA"===e?"gong":"sensor";},isDimmer:function isDimmer(e){return"dimmer"==this._resolveTypecode(e);},isSwitch:function isSwitch(e){return"switch"==this._resolveTypecode(e);},isMeteringSwitch:function isMeteringSwitch(e){return"powerswitch"==this._resolveTypecode(e);},isBlind:function isBlind(e){return"blind"==this._resolveTypecode(e);},getButtonChannels:function getButtonChannels(e){var t=null;return"001A"==e||"00DC"==e?t=1:"00BF"==e||"006B"==e||"00C2"==e||"0036"==e||"00E0"==e?t=2:"001B"==e||"001D"==e||"001C"==e||"001E"==e?t=3:"0008"==e||"00A6"==e||"00A5"==e||"00A0"==e||"003B"==e||"0035"==e||"0034"==e||"0060"==e?t=4:"00A9"==e?t=6:"00DA"==e?t=8:"004C"==e||"0029"==e||"002A"==e?t=12:"0038"!=e&&"0037"!=e&&"004D"!=e||(t=19),t;},getDeviceChannels:function getDeviceChannels(e){var t=null;return"005F"==e&&(t=3),t;},_resolveChannel:function _resolveChannel(e){var t=["01"];switch(e.toUpperCase()){case"0009":case"000A":case"0016":case"002E":case"0044":case"0052":case"005A":case"0062":case"0070":case"0074":case"00B8":case"00BB":case"00CB":case"00CC":t.push("02");break;case"0046":case"005F":t=t.concat(["02","03"]);break;case"0003":case"0015":case"002D":case"0061":case"0066":case"00AB":case"00CD":case"00CE":case"00CF":case"00D0":case"8001":t=t.concat(["02","03","04"]);break;case"00BE":t=t.concat(["02","03","04","05","06","07","08"]);}return t;},_registDevices:function _registDevices(e,t,a,n){if(!a||a.length<=1)n&&n();else{var r=this,o=0,cb=function cb(t){if(o+=1,t)n&&n(t);else if(o<a.length){var s=(a[o].typecode,a[o].address);s=a[o].address,r._addSensor(e,s,cb);}else n&&n();};this._addSensor(e,a[0].address,cb);}},_addSensor:function _addSensor(e,t,a){e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},_getButtonChannels:function _getButtonChannels(e){var t=0;return"001A"==e?t=1:"00BF"==e||"006B"==e||"00C2"==e||"0036"==e?t=2:"001B"==e||"001D"==e||"001C"==e||"001E"==e?t=3:"0008"==e||"00A6"==e||"00A5"==e||"00A0"==e||"003B"==e||"0035"==e||"0034"==e||"0060"==e?t=4:"00A9"==e?t=6:"004C"==e||"0029"==e||"002A"==e?t=12:"0038"!=e&&"0037"!=e&&"004D"!=e||(t=19),t;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!(t&&t.address&&a&&a.value))return null;var n,r,o=t.address;switch(a.value){case"on":n="01";break;case"off":n="02";break;case"toggle":n="03";break;case"dimUp":n="0F";break;case"dimDown":n="10";break;case"dimTo":case"onTo":case"toggleTo":(r=parseInt(a.ext))>100&&(r=100),r<0&&(r=0),n="onTo"==a.value||"dimTo"==a.value?"05":"04",n+=xnm.aio.gateway.Util.getHexVal(r,2);break;case"stepUp":n="1414";break;case"stepDown":n="1514";break;case"upFor":r=parseInt(a.ext),n="14"+xnm.aio.gateway.Util.getHexVal(r/10,2);break;case"downFor":r=parseInt(a.ext),n="15"+xnm.aio.gateway.Util.getHexVal(r/10,2);break;case"moveUp":n="08";break;case"moveDown":n="09";break;case"stop":n="0B";break;case"moveTo":(r=100-(r=parseInt(a.ext)))>100&&(r=100),r<0&&(r=0),n="0A"+xnm.aio.gateway.Util.getHexVal(r,2);break;case"tempUp":n="12";break;case"tempDown":n="13";break;case"tempTo":var s=(r=parseFloat(a.ext))-parseInt(r,10);r=5==(s=Math.round(10*s))?parseInt(r,10)+.5:s<3||s>7?Math.round(r):parseInt(r,10)+.5,n="11"+xnm.aio.gateway.Util.getHexVal(2*r,2);break;case"setAuto":n="1C00";break;case"setManu":n="1C01";break;case"setBoost":n="1C03";break;case"heaterOn":o=o.substr(0,6)+"02",n="01";break;case"heaterOff":o=o.substr(0,6)+"02",n="02";break;case"smokeRst":n="23";break;case"playChime":for(var i=50,u=0,l=0;l<a.ext.length;l++){"chimeVolume"===(c=a.ext[l]).value?i=parseInt(c.ext,10):"chimeSound"===c.value&&(u=parseInt(c.ext,10));}i=Math.min(100,Math.max(0,i)),u=Math.min(255,Math.max(0,u)),n="42",n+=xnm.aio.gateway.Util.getHexVal(i,2),n+=xnm.aio.gateway.Util.getHexVal(u,2);break;case"blinkLED":var m=3,d=17,p=null,f=[17,18,33,34,49,50,65,66,81,82,97,98,113,114];for(l=0;l<a.ext.length;l++){var c;"lightBlinks"===(c=a.ext[l]).value?m=parseInt(c.ext,10):"lightColor"===c.value&&(p=c.ext);}for(l=0;l<this.DM.MAP.gong.command.length;l++){var v=this.DM.MAP.gong.command[l];if("blinkLED"===v.ref.value){for(var y=v.ref.extMeta,h=0;h<y.length;h++){var w=y[h];if("lightColor"===w.ref.value){d=f[w.ref.extMeta.indexOf(p)];break;}}break;}}m=Math.min(255,Math.max(0,m)),n="41",n+=xnm.aio.gateway.Util.getHexVal(m,2),n+=xnm.aio.gateway.Util.getHexVal(d,2);}return o+n;},_parseData:function _parseData(e,t){if(!e||e.length<10)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;var a=e.substr(0,8),n=e.substr(8).toUpperCase();if("rain"==t.data){if(!t.address||t.address.substr(0,6).toUpperCase()!=a.substr(0,6).toUpperCase())return null;}else if(!t.address||t.address.toUpperCase()!=a.toUpperCase())return null;var r=t.data;switch("thermostat"!=r&&"thermocontrol"!=r&&"wallthermostat"!=r||(r="heater"),r){case"switch":case"dimmer":case"powerswitch":case"blind":case"heater":case"rain":break;default:return null;}var o,s={};switch(n){case"01":"rain"==t.data?s.value="heaterOn":s.value="on";break;case"02":"rain"==t.data?s.value="heaterOff":s.value="off";break;case"03":s.value="toggle";break;case"0F":s.value="dimUp";break;case"10":s.value="dimDown";break;case"1414":s.value="stepUp";break;case"1514":s.value="stepDown";break;case"08":s.value="moveUp";break;case"09":s.value="moveDown";break;case"0B":s.value="stop";break;case"12":s.value="tempUp";break;case"13":s.value="tempDown";break;case"1C00":s.value="setAuto";break;case"1C01":s.value="setManu";break;case"1C03":s.value="setBoost";break;default:if(n.length>=4)switch(o=parseInt(n.substr(2,2),16),n=n.substr(0,2)){case"04":s.value="toggleTo",s.ext=o;break;case"05":s.value="onTo",s.ext=o;break;case"14":s.value="upFor",s.ext=10*o;break;case"15":s.value="downFor",s.ext=10*o;break;case"0A":s.value="moveTo",s.ext=100-o;break;case"11":s.value="tempTo",s.ext=o/2;}}return s.value?s:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state||"HM"!=t.type&&"HMFHT"!=t.type)return null;if("HM"!=e.type||!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=e.data;"thermostat"!=a&&"thermocontrol"!=a&&"wallthermostat"!=a||(a="heater");var n,r=t.state.split(":"),o={};switch(r.length>1&&(n=parseInt(r[r.length-1],16),o.error=254==n?"low_bat":255==n?"timeout":"no_error"),a){case"switch":n=parseInt(r[0],16),o.switchState=200==n?"on":0==n?"off":"?";break;case"dimmer":n=parseInt(r[0],16),n/=2,o.dimmerState=5*Math.floor(n/5);break;case"blind":n=parseInt(r[0],16),n/=2,o.blindState=100-Math.round(n);break;case"powerswitch":r.length>=8&&(o.energy=(parseInt(r[1],16)/10).toFixed(1),o.power=(parseInt(r[2],16)/100).toFixed(1),o.current=parseInt(r[3],16),o.volt=(parseInt(r[4],16)/10).toFixed(1),(32768&(n=parseInt(r[5],16)))>0&&(n-=65536),n=(50+n).toFixed(2),o.freq=n,200==(n=parseInt(r[6],16))?o.switchState="on":0==n&&(o.switchState="off"));break;case"weather":r.length>=3&&((32768&(n=parseInt(r[0],16)))>0&&(n&=32767),(16384&n)>0&&(n-=32768),o.temp=(n/10).toFixed(1),o.hum=parseInt(r[1],16),n=parseInt(r[2],16),o.error=254==n?"low_bat":255==n?"timeout":"no_error");break;case"weather_station":r.length>=12&&((32768&(n=parseInt(r[0],16)))>0&&(n&=32767),(16384&n)>0&&(n-=32768),o.temp=(n/10).toFixed(1),o.hum=parseInt(r[1],16),o.winS=(parseInt(r[2],16)/10).toFixed(1),o.winDR=(5.5*parseInt(r[3],16)).toFixed(1),o.winDG=5*parseInt(r[4],16),o.rainC=(.295*parseInt(r[5],16)).toFixed(1),o.rainCT=(.295*parseInt(r[6],16)).toFixed(1),o.rainCY=(.295*parseInt(r[7],16)).toFixed(1),o.sunT=parseInt(r[8],16),o.bri=parseInt(r[9],16),o.rain=1==parseInt(r[10],16)?"on":"off",o.winD="N",(n=5*parseInt(r[4],16))<23?o.winD="N":n<68?o.winD="NO":n<113?o.winD="O":n<158?o.winD="SO":n<203?o.winD="S":n<248?o.winD="SW":n<293?o.winD="W":n<338&&(o.winD="NW"));break;case"heater":if(r.length>=6){switch("0"==(n=r[0])?o.error="no_error":"B"==n?o.error="low_bat":"I"==n?o.error="timeout":"E"==n&&(o.error="comm_break"),r[1]){case"M":o.mode="manu";break;case"A":o.mode="auto";break;case"B":o.mode="boost";break;case"U":o.mode="vacation";}o.setTempState=(parseInt(r[2],16)/10).toFixed(1),(16384&(n=parseInt(r[3],16)))>0&&(n-=32768),o.currentTempState=(n/10).toFixed(1),o.hum=parseInt(r[4],16),o.valve=parseInt(r[5].substr(0,2),16);}break;case"window":case"contact":case"tilt":case"water":case"switch_interface":switch(n=parseInt(r[0],16)){case 0:o.state="water"==a?"dry":"closed";break;case 100:o.state="water"==a?"moist":"tilted";break;case 200:o.state="water"==a?"water":"open";}n=parseInt(r[1],16),o.error=254==n?"low_bat":255==n?"timeout":"no_error";break;case"rain":switch(n=parseInt(r[0].substr(0,2),16)){case 0:o.state="dry";break;case 200:o.state="raining";}switch(n=parseInt(r[0].substr(2,2),16)){case 0:o.heaterState="off";break;case 200:o.heaterState="on";}n=parseInt(r[1],16),o.error=254==n?"low_bat":255==n?"timeout":"no_error";break;case"lux":n=parseInt(r[0],16),o.state=n/100,n=parseInt(r[1],16),o.error=254==n?"low_bat":255==n?"timeout":"no_error";break;case"motion":case"smoke":case"sensor":switch(n=parseInt(r[0],16)){case 0:switch(a){case"motion":case"smoke":o.state="ok";break;case"switch_interface":case"sensor":o.state="off";}break;case 200:switch(a){case"motion":o.state="motion";break;case"smoke":o.state="smoke";break;case"switch_interface":case"sensor":o.state="on";}}n=parseInt(r[1],16),o.error=254==n?"low_bat":255==n?"timeout":"no_error";break;case"temp2":(32768&(n=parseInt(r[0],16)))>0&&(n-=65536),o.temp1=n/10,(32768&(n=parseInt(r[1],16)))>0&&(n-=65536),o.temp2=n/10,(32768&(n=parseInt(r[2],16)))>0&&(n-=65536),o.tempDiff12=n/10,(32768&(n=parseInt(r[3],16)))>0&&(n-=65536),o.tempDiff21=n/10,n=parseInt(r[4],16),o.error=254==n?"low_bat":255==n?"timeout":"no_error";break;case"capacity":n=parseInt(r[0],16),o.state=n/2,o.error=254==n?"low_bat":255==n?"timeout":"no_error";break;default:return null;}return o;},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||!e)return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;var a;if(8==t.data.length&&"button"==e.data)a=t.data.substr(0,6).toUpperCase()+"01";else if(8==t.data.length&&"switch_interface"==e.data)a=t.data;else{if(10!=t.data.length)return null;a=t.data.substr(0,8).toUpperCase();}if("rain"==e.data){if(!e.address||e.address.substr(0,6).toUpperCase()!=t.data.substr(0,6).toUpperCase())return null;}else if(!e.address||e.address.toUpperCase()!=a)return null;var n,r,o={};switch(e.data){case"rain":switch(r=parseInt(t.data.substr(6,2),16),n=parseInt(t.data.substr(8,2),16)){case 0:1==r?o.state="dry":2==r&&(o.heaterState="off");break;case 200:1==r?o.state="raining":2==r&&(o.heaterState="on");}break;case"lux":return this._handleState(e,{type:"HM",adr:a,state:t.data+":00"});case"window":case"contact":case"smoke":case"blind":case"tilt":case"motion":case"water":case"switch_interface":return this._handleState(e,{type:"HM",adr:a,state:t.data.substr(8,2)+":00"});case"dimmer":n=parseInt(t.data.substr(8,2),16),n/=2,o.dimmerState=5*Math.floor(n/5);break;case"button":r="0"+(n=t.data.substr(6,2)).charAt(1),o[r=("0"==n.charAt(0)?"press":"pressL")+r]="true";break;case"capacity":n=t.data.substr(8,2),o.state=parseInt(n,16)/2;break;case"switch":r||(r="switchState");default:if(r||(r="state"),"C8"==(n=t.data.substr(8,2).toUpperCase()))o[r]="on";else{if("00"!=n)return null;o[r]="off";}}return o;},parseTriggerCode:function parseTriggerCode(e,t){var a=this._handleUdpState(t,{type:this.DM.TYPE,data:e});if(!a)return null;var n,r={};switch(t.data){case"dimmer":return null;case"button":for(var o in a){if(a.hasOwnProperty(o)){r.value=o;break;}}break;case"rain":case"tilt":case"window":case"smoke":case"contact":case"motion":case"water":case"switch_interface":n||(n="state");case"switch":n||(n="switchState");default:if(n||(n="state"),!a[n])return null;r.value=a[n];}return r;},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a,n=t.address;switch(t.data){case"button":n=t.address.substr(0,6),0==e.value.indexOf("pressL")?a="4"+e.value.substr(6,2).charAt(1):0==e.value.indexOf("press")&&(a=e.value.substr(5,2));break;case"smoke":"smoke"==e.value&&(a="C8");break;case"motion":"motion"==e.value&&(a="C8");break;case"contact":case"tilt":case"switch_interface":"open"==e.value?a="C8":"closed"==e.value&&(a="00");break;case"window":"open"==e.value?a="C8":"tilted"==e.value?a="64":"closed"==e.value&&(a="00");break;case"rain":"dry"==e.value?a="00":"raining"==e.value&&(a="C8");break;case"water":"dry"==e.value?a="00":"moist"==e.value?a="64":"water"==e.value&&(a="C8");break;default:n=t.address,"on"==e.value?a="C8":"off"==e.value&&(a="00");}return n&&a?n+a:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"HM",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"onTo",ext:"%d",extMeta:"0-100",step:"5"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"5"}}],status:[{type:"int",name:"state",ref:{value:"dimmerState"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"int",name:"state",ref:{value:"dimmerState"}}]},powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"freq",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"volt",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"energy",ext:"%f",scale:"0.1"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"freq",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"volt",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"energy",ext:"%f",scale:"0.1"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},blind:{command:[{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"blindState"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"int",name:"state",ref:{value:"blindState"}}]},weather:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},weather_station:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"wind direction",ref:{value:"winD",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"int",name:"wind direction degree",ref:{value:"winDG",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"winDR",scale:"0.5"}},{type:"float",name:"wind speed",ref:{value:"winS",scale:"0.1"}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"rain count today",ref:{value:"rainCT",scale:"0.1"}},{type:"float",name:"rain count yesterday",ref:{value:"rainCY",scale:"0.1"}},{type:"int",name:"sunshine time",ref:{value:"sunT",unit:"min"}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"raining",ref:{value:"rain",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"wind direction",ref:{value:"winD",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"int",name:"wind direction degree",ref:{value:"winDG",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"winDR",scale:"0.5"}},{type:"float",name:"wind speed",ref:{value:"winS",scale:"0.1"}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"rain count today",ref:{value:"rainCT",scale:"0.1"}},{type:"float",name:"rain count yesterday",ref:{value:"rainCY",scale:"0.1"}},{type:"int",name:"sunshine time",ref:{value:"sunT",unit:"min"}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"raining",ref:{value:"rain",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},heater:{command:[{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"5-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},{type:"enum",name:"manu mode",ref:{value:"setManu"}},{type:"enum",name:"boost mode",ref:{value:"setBoost"}}],status:[{type:"float",name:"set temperature",ref:{value:"setTempState",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"currentTempState",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"valve postion",ref:{value:"valve"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","vacation"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout","comm_break"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"setTempState",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"currentTempState",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"valve postion",ref:{value:"valve"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","vacation"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout","comm_break"]}}]},water:{status:[{type:"enum",name:"state",ref:{value:"state",options:["dry","moist","water"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"dry",ref:{value:"dry"}},{type:"enum",name:"moist",ref:{value:"moist"}},{type:"enum",name:"water",ref:{value:"water"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["dry","moist","water"]}}]},smoke:{command:[{type:"enum",name:"reset",ref:{value:"smokeRst"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","smoke"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"smoke",ref:{value:"smoke"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["smoke"]}}]},window:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},tilt:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},rain:{command:[{type:"enum",name:"heater on",ref:{value:"heaterOn"}},{type:"enum",name:"heater off",ref:{value:"heaterOff"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["dry","raining"]}},{type:"enum",name:"heater state",ref:{value:"heaterState",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"dry",ref:{value:"dry"}},{type:"enum",name:"raining",ref:{value:"raining"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["dry","raining"]}}]},motion:{status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","motion"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"motion",ref:{value:"motion"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["motion"]}}]},switch_interface:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},lux:{status:[{type:"float",name:"state",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"float",name:"state",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},capacity:{status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},temp2:{status:[{type:"float",name:"temperature 1 (T1)",ref:{value:"temp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T1)",ref:{value:"temp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",ref:{value:"tempDiff12",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"tempDiff21",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],ipevt:[{type:"float",name:"temperature 1 (T1)",ref:{value:"temp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T1)",ref:{value:"temp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",ref:{value:"tempDiff12",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"tempDiff21",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},sensor:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}]},gong:{command:[{type:"multi",name:"play chime",ref:{value:"playChime",ext:"%multi",extMeta:[{type:"int",name:"volume",ref:{value:"chimeVolume",ext:"%d",extMeta:"0-100"}},{type:"int",name:"sound index",ref:{value:"chimeSound",ext:"%d",extMeta:"0-255","default":0}}]}},{type:"multi",name:"blink LED",ref:{value:"blinkLED",ext:"%multi",extMeta:[{type:"int",name:"number of blinks",ref:{value:"lightBlinks",ext:"%d",extMeta:"1-255","default":3}},{type:"enum",name:"color",ref:{value:"lightColor",ext:"%e",extMeta:["red (short)","red (long)","green (short)","green (long)","yellow (short)","yellow (long)","blue (short)","blue (long)","violet (short)","violet (long)","cyan (short)","cyan (long)","white (short)","white (long)"]}}]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e),a=!t||!t.HMMODE;return!e||"EA"!=e.version&&"E7"!=e.version?{type:this.TYPE,name:"HomeMatic",rfmismatch:a}:null;},getCommandStatusMap:function getCommandStatusMap(e){if(!e.data)return null;var t=e.data;if("thermostat"!=t&&"thermocontrol"!=t&&"wallthermostat"!=t||(t="heater"),"button"==t){var a=e.typecode;a||(a="");var n=xnm.aio.gateway.systems.HM.getButtonChannels(a);n||(n=0);for(var r={event:[]},o=1;o<=n;o++){for(var s=o.toString();s.length<2;){s="0"+s;}r.event.push({type:"enum",name:"button"+s+" press",ref:{value:"press"+s}}),r.event.push({type:"enum",name:"button"+s+" long press",ref:{value:"pressL"+s}});}return r;}return this.MAP[t];},getIPevtMap:function getIPevtMap(e,t){if(!e.data)return null;var a=null,n=!1;t&&(a=require("xnm.aio.gateway.js").resolveGateway(t))&&(n=a._isV5());var r=e.data;if("thermostat"!=r&&"thermocontrol"!=r&&"wallthermostat"!=r||(r="heater"),"button"==r){var o=e.typecode;o||(o="");var s=xnm.aio.gateway.systems.HM.getButtonChannels(o);s||(s=0);for(var i={ipevt:[]},u=1;u<=s;u++){for(var l=u.toString();l.length<2;){l="0"+l;}i.ipevt.push({type:"enum",name:"button"+l+" press",ref:{value:"press"+l,options:["true"]}}),i.ipevt.push({type:"enum",name:"button"+l+" long press",ref:{value:"pressL"+l,options:["true"]}});}return i;}var m=this.MAP[r];if(!m)return null;var d=JSON.parse(JSON.stringify(m));return n||("weather"==r||"weather_station"==r||"heater"==r?delete d.ipevt:"powerswitch"==r&&(d.ipevt=[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}}])),d;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?e.typecode?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter typecode is invalid")):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?e.typecode?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter typecode is invalid")):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.HM.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"}}}};break;case"dimmer":n={type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}}},states:{brightness:{value:{type:"INT",min:0,max:100}}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggleTo",ext:100},brightness:{value:"onTo",ext:"%d",extMeta:"0-100",step:"5"}},states:{brightness:{value:"dimmerState"}}}};break;case"powerswitch":n={type:"powerswitch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},power:{type:"FLOAT"},consumption:{type:"FLOAT"},voltage:{type:"FLOAT"},current:{type:"FLOAT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"},power:{value:"power"},consumption:{value:"ernergy"},voltage:{value:"volt"},current:{value:"current"}}}};break;case"blind":n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100}}},states:{position:{value:{type:"INT",min:0,max:100}}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},states:{position:{value:"blindState"}}}};break;case"weather":n={type:"temperature",states:{temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}},details:{states:{temperature:{value:"temp"},humidity:{value:"hum"}}}};break;case"weather_station":n={type:"weatherstation",states:{temperature:{type:"FLOAT"},humidity:{type:"INT"},brightness:{type:"FLOAT"},windSpeed:{type:"FLOAT"},windDirection:{values:["N","NO","O","SO","S","SW","W","NW"]},rain:{values:["true","false"]},rainCount:{type:"FLOAT"},sunshine:{type:"FLOAT"}},details:{states:{temperature:{value:"temp"},humidity:{value:"hum"},brightness:{value:"bri"},windSpeed:{value:"winS"},windDirection:{value:"winD"},rain:{value:"rain",conv_s:{on:"true",off:"false"}},rainCount:{value:"rainC"},sunshine:{value:"sunT"}}}};break;case"thermostat":case"thermocontrol":case"wallthermostat":n={type:"heater",commands:{auto:{},manu:{},boost:{},up:{},down:{},tempTo:{value:{type:"FLOAT",min:5,max:30,step:.5}}},states:{setpoint:{type:"FLOAT",min:5,max:30,step:.5,unit:"C"},temperature:{type:"FLOAT"},humidity:{type:"INT"},mode:{values:["auto","manu","boost"]}},details:{commands:{auto:{value:"setAuto"},manu:{value:"setManu"},boost:{value:"setBoost"},up:{value:"tempUp"},down:{value:"tempDown"},tempTo:{value:"tempTo"}},states:{setpoint:{value:"setTempState"},temperature:{value:"currentTempState"},humidity:{value:"hum"},mode:{value:"mode"}}}};break;case"water":n={type:"water",states:{water:{values:["on","off"]}},details:{states:{water:{value:"state",conv_s:{dry:"off",moist:"on",water:"on"}}}}};break;case"smoke":n={type:"smoke",states:{smoke:{values:["on","off"]}},details:{states:{smoke:{value:"state",conv_s:{ok:"off",smoke:"on"}}}}};break;case"window":n={type:"window",states:{state:{values:["open","closed","tilted"]}},details:{states:{state:{value:"state"}}}};break;case"contact":case"tilt":case"switch_interface":n={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"state"}}}};break;case"rain":n={type:"rain",states:{rain:{values:["on","off"]}},details:{states:{rain:{value:"state",conv_s:{dry:"off",raining:"on"}}}}};break;case"motion":n={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"state",conv_s:{ok:"off",motion:"on"}}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.HM.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=e.data;"thermostat"!=t&&"thermocontrol"!=t&&"wallthermostat"!=t||(t="heater");var a=null;switch(t){case"switch":case"powerswitch":a={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}},states:{switchState:{values:["on","off"]}}};break;case"dimmer":a={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},up:{url:_getUrl(e,{value:"dimUp"})},down:{url:_getUrl(e,{value:"dimDown"})},value:{url:null,hex:2,step:1,min:0,max:100}},states:{dimmerState:{min:0,max:100}}},n=(n=_getUrl(e,{value:"onTo",ext:100})).substr(0,n.length-2)+"{val}",a.commands.value.url=n;break;case"blind":a={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})},value:{url:null,hex:2,step:1,min:0,max:100,noffset:100}},states:{blindState:{min:0,max:100}}},n=(n=_getUrl(e,{value:"onTo",ext:100})).substr(0,n.length-2)+"{val}",a.commands.value.url=n;break;case"heater":var n;a={type:"heater",address:e.address,commands:{auto:{url:_getUrl(e,{value:"setAuto"})},manu:{url:_getUrl(e,{value:"setManu"})},boost:{url:_getUrl(e,{value:"setBoost"})},value:{url:null,hex:2,mult:2,step:.5,min:6,max:30}},states:{setTempState:{type:"FLOAT",min:5,max:30,step:.5,unit:"C"},currentTempState:{type:"FLOAT"},mode:{values:["auto","manu"]}}},n=(n=_getUrl(e,{value:"tempTo",ext:30})).substr(0,n.length-2)+"{val}",a.commands.value.url=n;}return a;}}},xnm.aio.gateway.systems.HM_X={IP_SEIREN_ACOUSTIC_ALARM_SELECTION:["DISABLE_ACOUSTIC_SIGNAL","FREQUENCY_RISING","FREQUENCY_FALLING","FREQUENCY_RISING_AND_FALLING","FREQUENCY_ALTERNATING_LOW_HIGH","FREQUENCY_ALTERNATING_LOW_MID_HIGH","FREQUENCY_HIGHON_OFF","FREQUENCY_HIGHON_LONGOFF","FREQUENCY_LOWON_OFF_HIGHON_OFF","FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF","LOW_BATTERY","DISARMED","INTERNALLY_ARMED","EXTERNALLY_ARMED","DELAYED_INTERNALLY_ARMED","DELAYED_EXTERNALLY_ARMED","EVENT","ERROR"],IP_SEIREN_OPTICAL_ALARM_SELECTION:["DISABLE_OPTICAL_SIGNAL","BLINKING_ALTERNATELY_REPEATING","BLINKING_BOTH_REPEATING","DOUBLE_FLASHING_REPEATING","FLASHING_BOTH_REPEATING","CONFIRMATION_SIGNAL_0","CONFIRMATION_SIGNAL_1","CONFIRMATION_SIGNAL_2"],IP_SEIREN_DURATION_UNIT:["S","M","H","D"],listDevices:function listDevices(e,t){e._executeRequest("GetHmDevices",null,{timeout:5e3},function(e,a){t&&t(e,a);});},getHMConfig:function getHMConfig(e,t,a){if(t&&t.address){e._executeRequest("gethmconfig",{address:t.address},{timeout:2e4},function(e,t){e?a&&a(e):t&&t.config?a&&a(null,t.config):a&&a(new Error("response format invalid"));});}else a&&a(new Error("device format error"));},setHMConfig:function setHMConfig(e,t,a,n){if(t&&t.address){e._executeRequestV5_Post("sethmconfig",{address:t.address,config:a},{timeout:2e4},function(e){n&&n(e);});}else n&&n(new Error("device format error"));},getHMConfigV6:function getHMConfigV6(e,t,a){if(t&&t.address){var n={adr:t.address,type:"HmIP"};e._executeRequest("getConfig",n,{timeout:2e4},function(e,t){e?a&&a(e):t&&Array.isArray(t)?a&&a(null,t[0]):a&&a(new Error("response format invalid"));});}else a&&a(new Error("device format error"));},setHMConfigV6:function setHMConfigV6(e,t,a,n){if(t&&t.address){var r=a;r.adr=t.address,r.type="HmIP",e._executeRequest("setConfig",r,{method:"POST",timeout:2e4},function(e){n&&n(e);});}else n&&n(new Error("device format error"));},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){var n={type:this.DM.TYPE},r={timeout:4e4};t&&t.key&&t.sgtin&&(n.key=t.key,n.sgtin=t.sgtin,r.timeout=6e4),t&&t.qrkey&&(n.qrkey=t.qrkey,r.timeout=6e4),t&&t.snr&&(n.adr=t.snr),e._executeRequest("LearnSC",n,r,function(e,t){if(e)a&&a(e);else if(t.devices){for(var n=[],r=0;r<t.devices.length;r++){var o,s=t.devices[r],i=s.address.split(".");i.length>=3&&(o=i[2]);var u={address:s.address,data:s.type,snr:o,_ver:"v5+"};s.sid&&(u.sid=s.sid),n.push(u);}a&&a(null,n);}else a&&a(new Error("response format invalid"));});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(void 0!==r&&null!=r){var o="SendSC",s={type:this.DM.TYPE,address:t.address,data:r},i={};e&&e._isV6()&&t.sid&&r&&"SendGenericCmd"===r.XC_FNC&&(o=r.XC_FNC,i.method="POST",s=r),e._executeRequest(o,s,i,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(void 0===n||null==n)return null;var r={XC_FNC:"SendSC",type:this.DM.TYPE,address:t.address,data:n};return e&&e._isV6()&&t.sid&&n&&"SendGenericCmd"===n.XC_FNC&&(r=n),r;},_parseData:function _parseData(e,t){if(!e)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;var a={value:e};if(-1!=e.indexOf("dimUp")||-1!=e.indexOf("dimDown")||-1!=e.indexOf("dimTo")||-1!=e.indexOf("toggleTo")||-1!=e.indexOf("tempTo")||-1!=e.indexOf("tempUp")||-1!=e.indexOf("tempDown")||-1!=e.indexOf("setProfile")||-1!=e.indexOf("setValve")||-1!=e.indexOf("valveUp")||-1!=e.indexOf("valveDown")||-1!=e.indexOf("moveTo")||-1!=e.indexOf("stepUp")||-1!=e.indexOf("stepDown")||-1!=e.indexOf("moveTo")||-1!=e.indexOf("stepUp")||-1!=e.indexOf("stepDown")||-1!=e.indexOf("lamellaTo")||-1!=e.indexOf("lamellaStepUp")||-1!=e.indexOf("lamellaStepDown")||-1!=e.indexOf("outputTo")||-1!=e.indexOf("outputDown")||-1!=e.indexOf("outputUp")||-1!=e.indexOf("colorTo")||-1!=e.indexOf("onTo")||-1!=e.indexOf("moveTo")||-1!=e.indexOf("tempTo")||-1!=e.indexOf("rgb")||-1!=e.indexOf("onFor")||-1!=e.indexOf("lamellaTo")||-1!=e.indexOf("setWeekProfile")||-1!=e.indexOf("vChannel")||-1!=e.indexOf("ledRed")||-1!=e.indexOf("ledGreen")||-1!=e.indexOf("dimTo")||-1!=e.indexOf("colorTo")||-1!=e.indexOf("setChime"))a.value=e.match(/([a-zA-Z]+)/)[0],a.ext=e.match(/([0-9\.]+)/)[0];else if(-1!=e.indexOf("setProg"))a.value="setProg",a.ext=e.substring(7);else if(-1!=e.indexOf("triggerAlarm")){a.value="triggerAlarm";var n=e.substr(12).split(",");a.ext=[],a.ext.push({value:"alarmAudio",ext:this.IP_SEIREN_ACOUSTIC_ALARM_SELECTION[n[0]]}),a.ext.push({value:"alarmVisual",ext:this.IP_SEIREN_OPTICAL_ALARM_SELECTION[n[1]]}),a.ext.push({value:"alarmDur",ext:n[2]}),a.ext.push({value:"alarmDurUnit",ext:this.IP_SEIREN_DURATION_UNIT[n[3]]});}return a;},_buildData:function _buildData(e,t,a){if(!(t&&t.address&&a&&a.value))return null;if(!("ip_dimmer"!=t.data&&"ip_dimmer2"!=t.data&&"ip_dimmer3"!=t.data||-1==a.value.indexOf("dimTo")&&-1==a.value.indexOf("dimUp")&&-1==a.value.indexOf("dimDown")&&-1==a.value.indexOf("toggleTo")))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if("ip_siren"==t.data&&"triggerAlarm"==a.value){var n,r,o,s;if(!a.ext)return null;for(var i=0;i<a.ext.length;i++){var u=a.ext[i];if(u)switch(u.value){case"alarmAudio":n=u.ext;break;case"alarmVisual":r=u.ext;break;case"alarmDur":s=u.ext;break;case"alarmDurUnit":o=u.ext;}}return void 0===n||null==n||void 0===r||null==r||void 0===s||null==s||void 0===o||null==o?null:"triggerAlarm"+(n=this.IP_SEIREN_ACOUSTIC_ALARM_SELECTION.indexOf(n))+","+(r=this.IP_SEIREN_OPTICAL_ALARM_SELECTION.indexOf(r))+","+s+","+(o=this.IP_SEIREN_DURATION_UNIT.indexOf(o));}if(!("ip_wallthermo"!=t.data&&"ip_heater"!=t.data||-1==a.value.indexOf("tempTo")&&-1==a.value.indexOf("tempUp")&&-1==a.value.indexOf("tempDown")&&-1==a.value.indexOf("setProfile")))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if("ip_heater"==t.data&&(-1!=a.value.indexOf("setValve")||-1!=a.value.indexOf("valveUp")||-1!=a.value.indexOf("valveDown")))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if("ip_blind"==t.data&&(-1!=a.value.indexOf("moveTo")||-1!=a.value.indexOf("stepUp")||-1!=a.value.indexOf("stepDown")))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if("ip_shading"==t.data&&-1!=a.value.indexOf("moveTo"))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if("ip_jalousie"==t.data&&(-1!=a.value.indexOf("moveTo")||-1!=a.value.indexOf("stepUp")||-1!=a.value.indexOf("stepDown")||-1!=a.value.indexOf("lamellaTo")||-1!=a.value.indexOf("lamellaStepUp")||-1!=a.value.indexOf("lamellaStepDown")))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if("ou_led16"==t.data)return a.value;if("rgb"==t.data&&"setProg"==a.value){if(!a.ext)return null;var l=["off","slow_cycle","normal_cycle","fast_cycle","bonfire","waterfall","tv_simualtion"].indexOf(a.ext);return-1==l?null:"setProg"+l;}if("ip_analog_output"==t.data&&(-1!=a.value.indexOf("outputTo")||-1!=a.value.indexOf("outputUp")||-1!=a.value.indexOf("outputDown")||-1!=a.value.indexOf("toggleTo")))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if("ip_bsl"==t.data)return-1!=a.value.indexOf("dimUp")||-1!=a.value.indexOf("dimDown")||-1!=a.value.indexOf("toggleTo")||-1!=a.value.indexOf("dimTo")||-1!=a.value.indexOf("colorTo")?void 0===a.ext||null==a.ext?a.value:a.value+a.ext:a.value;if("ip_mp3p"===t.data){var _e={XC_FNC:"SendGenericCmd",id:t.sid,cmd:a.value,value:{}};if(["play","setValue"].includes(a.value)){var _t=["brightness","duration","sound","volume"];return Array.isArray(a.ext)&&a.ext.forEach(function(a){var n=a.value,r=_t.includes(n)?parseInt(a.ext,10):a.ext;"duration"===n&&r<=0||(_e.value[n]=r);}),_e;}}else if("ip_wallthermo"===t.data&&"operation_mode"===a.value){return{XC_FNC:"SendGenericCmd",id:t.sid,cmd:a.value,value:a.ext};}switch(a.value){case"moveTo":case"onTo":case"rgb":case"tempTo":return void 0===a.ext||null===a.ext?null:a.ext;case"colorTo":case"dimTo":case"lamellaTo":case"ledGreen":case"ledRed":case"onFor":case"setChime":case"setWeekProfile":case"toggleTo":case"vChannel":return void 0===a.ext||null===a.ext?null:a.value+a.ext;default:return a.value;}},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||!t.state||"HM"!=t.type&&"HMFHT"!=t.type)return null;if("HM"!=e.type)return null;var a=!1;if((t.sid&&e.sid&&e.sid==t.sid||t.adr&&e.address&&e.address.toLowerCase()==t.adr.toLowerCase())&&(a=!0),!a)return null;var n=t.state;switch(e.data){case"rgb":n=JSON.parse(JSON.stringify(t.state));var r=parseInt(t.state.program);n.program=["off","slow_cycle","normal_cycle","fast_cycle","bonfire","waterfall","tv_simualtion"][r];break;case"weatherstation":n.windDN="?",(r=parseInt(t.state.windD))<23?n.windDN="N":r<68?n.windDN="NO":r<113?n.windDN="O":r<158?n.windDN="SO":r<203?n.windDN="S":r<248?n.windDN="SW":r<293?n.windDN="W":r<338&&(n.windDN="NW");break;case"ip_wallthermo2":var o=n.cl_fd_emergencyOP;n.cl_fd_emergencyOP=o?"emergency":"ok";break;case"ip_weather4":n.weatherWindDN="?",(r=parseInt(t.state.weatherWindD))<23?n.weatherWindDN="N":r<68?n.weatherWindDN="NO":r<113?n.weatherWindDN="O":r<158?n.weatherWindDN="SO":r<203?n.weatherWindDN="S":r<248?n.weatherWindDN="SW":r<293?n.weatherWindDN="W":r<338&&(n.weatherWindDN="NW");}return n;},DM:{TYPE:"HM",MAP:{maintenance:{status:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},button:{status:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"onTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"frequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"energy_counter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"frequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"current",ext:"%d"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"energy_counter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},blind:{command:[{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"move up",ref:{value:"up"}},{type:"enum",name:"move down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},weather:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},weather2:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"air pressure",ref:{value:"air"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"int",name:"air pressure",ref:{value:"air"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},weatherstation:{status:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"raining",ref:{value:"rain",options:["true","false"]}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"wind speed",ref:{value:"windS",scale:"0.1"}},{type:"enum",name:"wind direction",ref:{value:"windDN",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"int",name:"wind direction degree",ref:{value:"windD",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"windDR",scale:"0.5"}},{type:"int",name:"sunshine time",ref:{value:"sunD",unit:"min"}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp",extMeta:"5-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"raining",ref:{value:"rain",options:["true","false"]}},{type:"float",name:"rain count",ref:{value:"rainC",scale:"0.1"}},{type:"float",name:"wind speed",ref:{value:"windS",scale:"0.1"}},{type:"enum",name:"wind direction",ref:{value:"windDN",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"int",name:"wind direction degree",ref:{value:"windD",extMeta:"0-360"}},{type:"float",name:"wind direction range",ref:{value:"windDR",scale:"0.5"}},{type:"int",name:"sunshine time",ref:{value:"sunD",unit:"min"}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},heater:{status:[{type:"int",name:"valve postion",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lowbat","VALVE_DRIVE_BLOCKED","VALVE_DRIVE_LOOSE","ADJUSTING_RANGE_TO_SMALL"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"valve postion",ref:{value:"state"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lowbat","VALVE_DRIVE_BLOCKED","VALVE_DRIVE_LOOSE","ADJUSTING_RANGE_TO_SMALL"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},thermostat:{command:[{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"5-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},{type:"enum",name:"manu mode",ref:{value:"setManu"}},{type:"enum",name:"boost mode",ref:{value:"setBoost"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"act_temp",extMeta:"-30-30",scale:"0.1"}},{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"valve postion",ref:{value:"valveLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout","comm_break"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"act_temp",extMeta:"-30-30",scale:"0.1"}},{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"valve postion",ref:{value:"valveLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout","comm_break"]}}]},wallthermo:{command:[{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"6-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"6-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"6-30",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},wallthermostat:{command:[{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"5-30",scale:"0.5",step:"0.5"}},{type:"enum",name:"temperature up",ref:{value:"tempUp"}},{type:"enum",name:"temperature down",ref:{value:"tempDown"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},{type:"enum",name:"manu mode",ref:{value:"setManu"}},{type:"enum",name:"boost mode",ref:{value:"setBoost"}},{type:"int",name:"set week profile",ref:{value:"setWeekProfile",ext:"%d",extMeta:"1-3"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"comm error",ref:{value:"comm",options:["true","false"]}},{type:"enum",name:"window open",ref:{value:"window",options:["true","false"]}},{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"float",name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}}],ipevt:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","boost","party"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"comm error",ref:{value:"comm",options:["true","false"]}},{type:"enum",name:"window open",ref:{value:"window",options:["true","false"]}},{type:"float",name:"battery level",ref:{value:"batLvl"}},{type:"int",name:"boost time",ref:{value:"boostTime"}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-30-30",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"hum"}},{type:"float",name:"set temperature",ref:{value:"state",extMeta:"5-30",scale:"0.5"}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"error",options:["sabotage","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"error",options:["sabotage","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},rain:{command:[{type:"enum",name:"heater on",ref:{value:"heaterOn"}},{type:"enum",name:"heater off",ref:{value:"heaterOff"}},{type:"enum",name:"heater toggle",ref:{value:"heaterToggle"}}],status:[{type:"enum",name:"state",ref:{value:"rain",options:["dry","rain"]}},{type:"enum",name:"heater state",ref:{value:"heat",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"rain",options:["dry","rain"]}},{type:"enum",name:"heater state",ref:{value:"heat",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},gong2:{command:[{type:"enum",name:"led on",ref:{value:"ledOn"}},{type:"enum",name:"led off",ref:{value:"ledOff"}},{type:"enum",name:"chime on",ref:{value:"chimeOn"}},{type:"enum",name:"chime off",ref:{value:"chimeOff"}}],status:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},gong:{command:[{type:"enum",name:"led on",ref:{value:"ledOn"}},{type:"enum",name:"led off",ref:{value:"ledOff"}},{type:"enum",name:"chime on",ref:{value:"chimeOn"}},{type:"enum",name:"chime off",ref:{value:"chimeOff"}},{type:"int",name:"play channel",ref:{value:"vChannel",ext:"%d"}},{type:"int",name:"led red on for",ref:{value:"ledRed",ext:"%d",unit:"s"}},{type:"int",name:"led green on for",ref:{value:"ledGreen",ext:"%d",unit:"s"}},{type:"string",name:"set chime",ref:{value:"setChime",ext:"%s"}}],status:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"led state",ref:{value:"led",options:["on","off"]}},{type:"enum",name:"chime state",ref:{value:"chime",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},window:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["false","true"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["false","true"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},temp:{status:[{type:"float",name:"temperature",ref:{value:"temp"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature",ref:{value:"temp"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},temp2:{status:[{type:"float",name:"temperature 1 (T1)",ref:{value:"temp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T1)",ref:{value:"temp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",ref:{value:"tempDiff12",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"tempDiff21",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"temperature 1 (T1)",ref:{value:"temp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T1)",ref:{value:"temp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",ref:{value:"tempDiff12",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"tempDiff21",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},co2:{status:[{type:"enum",name:"state",ref:{value:"state",options:["normal","medium","high"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["normal","medium","high"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},motion:{status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","motion"]}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["ok","motion"]}},{type:"int",name:"brightness",ref:{value:"bri"}},{type:"enum",name:"sabotage",ref:{value:"error",options:["no_error","sabotage"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},smoke:{status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","smoke"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["ok","smoke"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},siren:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"power error",ref:{value:"error_power",options:["power_failure","no_error"]}},{type:"enum",name:"sabotage",ref:{value:"error_sabotage",options:["sabotage","no_error"]}},{type:"enum",name:"battery error",ref:{value:"error_battery",options:["battery_defect","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"power error",ref:{value:"error_power",options:["power_failure","no_error"]}},{type:"enum",name:"sabotage",ref:{value:"error_sabotage",options:["sabotage","no_error"]}},{type:"enum",name:"battery error",ref:{value:"error_battery",options:["battery_defect","no_error"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},capacity:{status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},switch_interface:{status:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"press",ref:{value:"press",options:["true"]}}]},tilt:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},water:{status:[{type:"enum",name:"state",ref:{value:"state",options:["ok","moist","water"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["ok","moist","water"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},energymeter:{status:[{type:"enum",name:"boot",ref:{value:"boot",options:["true","false"]}},{type:"float",name:"gas energy",ref:{value:"gas_energy"}},{type:"float",name:"gas power",ref:{value:"gas_power"}},{type:"float",name:"energy",ref:{value:"energy"}},{type:"float",name:"power",ref:{value:"power"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"boot",ref:{value:"boot",options:["true","false"]}},{type:"float",name:"gas energy",ref:{value:"gas_energy"}},{type:"float",name:"gas power",ref:{value:"gas_power"}},{type:"float",name:"energy",ref:{value:"energy"}},{type:"float",name:"power",ref:{value:"power"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},rgb:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"onTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}},{type:"enum",name:"set program",ref:{value:"setProg",ext:"%e",extMeta:["off","slow_cycle","normal_cycle","fast_cycle","bonfire","waterfall","tv_simualtion"]}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"int",name:"color",ref:{value:"color"}},{type:"enum",name:"program",ref:{value:"program",options:["off","slow_cycle","normal_cycle","fast_cycle","bonfire","waterfall","tv_simualtion"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}},{type:"int",name:"color",ref:{value:"color"}},{type:"enum",name:"program",ref:{value:"program",options:["off","slow_cycle","normal_cycle","fast_cycle","bonfire","waterfall","tv_simualtion"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},lux:{status:[{type:"float",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"float",name:"state",ref:{value:"state"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},siren2:{command:[{type:"enum",name:"internal alarm on",ref:{value:"switchSensorInOn"}},{type:"enum",name:"internal alarm off",ref:{value:"switchSensorInOff"}},{type:"enum",name:"internal alarm toggle",ref:{value:"switchSensorInToggle"}},{type:"enum",name:"external alarm on",ref:{value:"switchSensorExOn"}},{type:"enum",name:"external alarm off",ref:{value:"switchSensorExOff"}},{type:"enum",name:"external alarm toggle",ref:{value:"switchSensorExToggle"}},{type:"enum",name:"panic alarm on",ref:{value:"switchPanicOn"}},{type:"enum",name:"panic alarm off",ref:{value:"switchPanicOff"}},{type:"enum",name:"panic alarm toggle",ref:{value:"switchPanicToggle"}},{type:"enum",name:"disarmed",ref:{value:"armingDisarm"}},{type:"enum",name:"internal armed",ref:{value:"armingIntern"}},{type:"enum",name:"all armed",ref:{value:"armingAll"}}],status:[{type:"enum",name:"internal alarm status",ref:{value:"switchSensorInState",options:["off","on"]}},{type:"enum",name:"external alarm status",ref:{value:"switchSensorExState",options:["off","on"]}},{type:"enum",name:"panic alarm status",ref:{value:"switchPanicState",options:["off","on"]}},{type:"enum",name:"arming status",ref:{value:"arming",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["no_error","sabotage"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"internal alarm status",ref:{value:"switchSensorInState",options:["off","on"]}},{type:"enum",name:"external alarm status",ref:{value:"switchSensorExState",options:["off","on"]}},{type:"enum",name:"panic alarm status",ref:{value:"switchPanicState",options:["off","on"]}},{type:"enum",name:"arming status",ref:{value:"arming",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["no_error","sabotage"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},jalousie:{command:[{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"enum",name:"lamella step up",ref:{value:"lamellaStepUp"}},{type:"enum",name:"lamella step down",ref:{value:"lamellaStepDown"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"state",ref:{value:"jalState"}},{type:"int",name:"lamella state",ref:{value:"jalLmlState"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"jalState"}},{type:"int",name:"lamella state",ref:{value:"jalLmlState"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},mod_em_8bit:{command:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort"}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong"}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort"}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong"}}],status:[{type:"int",name:"state",ref:{value:"state8bit"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state8bit"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort",options:["true"]}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong",options:["true"]}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort",options:["true"]}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong",options:["true"]}}]},mod_em_8:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}},{type:"enum",name:"long press",ref:{value:"pressLong"}},{type:"enum",name:"press",ref:{value:"press"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"press",ref:{value:"press",options:["true"]}},{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}]},keymatic:{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"open door",ref:{value:"openDoor"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"state uncertain",ref:{value:"uncertain",options:["true","false"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","cluth_failure","motor_aborted"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"state uncertain",ref:{value:"uncertain",options:["true","false"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","cluth_failure","motor_aborted"]}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ou_led16:{command:[{type:"enum",name:"press short",ref:{value:"pressShort"}},{type:"enum",name:"led off",ref:{value:"ledOff"}},{type:"enum",name:"led red",ref:{value:"ledRed"}},{type:"enum",name:"led green",ref:{value:"ledGreen"}},{type:"enum",name:"led orange",ref:{value:"ledOrange"}},{type:"enum",name:"led sleep mode off",ref:{value:"ledSleepOff"}},{type:"enum",name:"led sleep mode on",ref:{value:"ledSleepOn"}}],status:[{type:"enum",name:"led status",ref:{value:"led",options:["off","red","green","orange"]}}],ipevt:[{type:"enum",name:"press short",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"led status",ref:{value:"led",options:["off","red","green","orange"]}}]},dualwhite:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"color off",ref:{value:"colorOff"}},{type:"enum",name:"color on",ref:{value:"colorOn"}},{type:"enum",name:"color toggle",ref:{value:"colorToggle"}},{type:"enum",name:"color up",ref:{value:"colorUp"}},{type:"enum",name:"color down",ref:{value:"colorDown"}},{type:"int",name:"color to",ref:{value:"colorTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"brightness",ref:{value:"bri"}},{type:"int",name:"color",ref:{value:"color"}},{type:"enum",name:"error overheat",ref:{value:"error_overheat",options:["true","false"]}},{type:"enum",name:"error reduced",ref:{value:"error_reduced",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"brightness",ref:{value:"bri"}},{type:"int",name:"color",ref:{value:"color"}},{type:"enum",name:"error overheat",ref:{value:"error_overheat",options:["true","false"]}},{type:"enum",name:"error reduced",ref:{value:"error_reduced",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_contact:{alarm:{state:{devices:[],data:[{value:"state",states:["open"]},{value:"sabotage",states:["true"]}]}},status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},ip_heater:{command:[{type:"enum",name:"auto mode",ref:{value:"auto"}},{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"int",name:"set profile",ref:{value:"setProfile",ext:"%d",extMeta:"1-3"}},{type:"int",name:"set valve",ref:{value:"setValve",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"valve up",ref:{value:"valveUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"valve down",ref:{value:"valveDown",ext:"%d",extMeta:"1-100",unit:"%"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_energyactor:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5on"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5off"}},{type:"enum",name:"ch.5 toggle",ref:{value:"ch5toggle"}},{type:"enum",name:"ch.6 on",ref:{value:"ch6on"}},{type:"enum",name:"ch.6 off",ref:{value:"ch6off"}},{type:"enum",name:"ch.6 toggle",ref:{value:"ch6toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"enum",name:"ch.5 state",ref:{value:"ch5State",options:["on","off"]}},{type:"enum",name:"ch.6 state",ref:{value:"ch6State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"enum",name:"ch.5 state",ref:{value:"ch5State",options:["on","off"]}},{type:"enum",name:"ch.6 state",ref:{value:"ch6State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_energyactor2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"ch.2 on",ref:{value:"ch2on"}},{type:"enum",name:"ch.2 off",ref:{value:"ch2off"}},{type:"enum",name:"ch.2 toggle",ref:{value:"ch2toggle"}},{type:"enum",name:"ch.3 on",ref:{value:"ch3on"}},{type:"enum",name:"ch.3 off",ref:{value:"ch3off"}},{type:"enum",name:"ch.3 toggle",ref:{value:"ch3toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.2 state",ref:{value:"ch2State",options:["on","off"]}},{type:"enum",name:"ch.3 state",ref:{value:"ch3State",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"enum",name:"ch.2 state",ref:{value:"ch2State",options:["on","off"]}},{type:"enum",name:"ch.3 state",ref:{value:"ch3State",options:["on","off"]}},{type:"enum",name:"ch.4 state",ref:{value:"ch4State",options:["on","off"]}},{type:"float",name:"frequency",ref:{value:"meterFrequency",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"int",name:"current",ref:{value:"meterCurrent",ext:"%d"}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_dimmer:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 dim off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 dim off",ref:{value:"ch5dimOff"}},{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim down",ref:{value:"ch5dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 dim off",ref:{value:"ch6dimOff"}},{type:"int",name:"ch.6 dim up",ref:{value:"ch6dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.6 dim down",ref:{value:"ch6dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.6 dim to",ref:{value:"ch6dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.6 toggle to",ref:{value:"ch6toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_dimmer2:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.3 dim off",ref:{value:"ch3dimOff"}},{type:"int",name:"ch.3 dim up",ref:{value:"ch3dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.3 dim down",ref:{value:"ch3dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.3 dim to",ref:{value:"ch3dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.3 toggle to",ref:{value:"ch3toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 dim off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 dim off",ref:{value:"ch5dimOff"}},{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim down",ref:{value:"ch5dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_dimmer3:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.2 dim off",ref:{value:"ch2dimOff"}},{type:"int",name:"ch.2 dim up",ref:{value:"ch2dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.2 dim down",ref:{value:"ch2dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.2 dim to",ref:{value:"ch2dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.2 toggle to",ref:{value:"ch2toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.3 dim off",ref:{value:"ch3dimOff"}},{type:"int",name:"ch.3 dim up",ref:{value:"ch3dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.3 dim down",ref:{value:"ch3dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.3 dim to",ref:{value:"ch3dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.3 toggle to",ref:{value:"ch3toggleTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 dim off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.2 state",ref:{value:"ch2Level"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"int",name:"ch.2 state",ref:{value:"ch2Level"}},{type:"int",name:"ch.3 state",ref:{value:"ch3Level"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_motion:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},command:[{type:"enum",name:"reset",ref:{value:"reset"}},{type:"enum",name:"activate",ref:{value:"activate"}},{type:"enum",name:"deactivate",ref:{value:"deactivate"}},{type:"enum",name:"toggleActivate",ref:{value:"toggleActivate"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}]},ip_motion2:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]},ip_hdrc:{status:[{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_button:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}]},ip_button2:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]},ip_button4:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",options:["true"]}}]},ip_button6:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",options:["true"]}},{type:"enum",name:"button 5 short press",ref:{value:"btn5pressShort",options:["true"]}},{type:"enum",name:"button 5 long press",ref:{value:"btn5pressLong",options:["true"]}},{type:"enum",name:"button 6 short press",ref:{value:"btn6pressShort",options:["true"]}},{type:"enum",name:"button 6 long press",ref:{value:"btn6pressLong",options:["true"]}}]},ip_siren:{command:[{type:"multi",name:"trigger alarm",ref:{value:"triggerAlarm",ext:"%multi",extMeta:[{type:"enum",name:"set audio",ref:{value:"alarmAudio",ext:"%e",extMeta:["DISABLE_ACOUSTIC_SIGNAL","FREQUENCY_RISING","FREQUENCY_FALLING","FREQUENCY_RISING_AND_FALLING","FREQUENCY_ALTERNATING_LOW_HIGH","FREQUENCY_ALTERNATING_LOW_MID_HIGH","FREQUENCY_HIGHON_OFF","FREQUENCY_HIGHON_LONGOFF","FREQUENCY_LOWON_OFF_HIGHON_OFF","FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF","LOW_BATTERY","DISARMED","INTERNALLY_ARMED","EXTERNALLY_ARMED","DELAYED_INTERNALLY_ARMED","DELAYED_EXTERNALLY_ARMED","EVENT","ERROR"]}},{type:"enum",name:"set visual",ref:{value:"alarmVisual",ext:"%e",extMeta:["DISABLE_OPTICAL_SIGNAL","BLINKING_ALTERNATELY_REPEATING","BLINKING_BOTH_REPEATING","DOUBLE_FLASHING_REPEATING","FLASHING_BOTH_REPEATING","CONFIRMATION_SIGNAL_0","CONFIRMATION_SIGNAL_1","CONFIRMATION_SIGNAL_2"]}},{type:"int",name:"set duration",ref:{value:"alarmDur",ext:"%d",extMeta:"0-1000"}},{type:"enum",name:"set duration unit",ref:{value:"alarmDurUnit",ext:"%e",extMeta:["S","M","H","D"]}}]}}],status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},ip_wallthermo:{command:[{type:"enum",name:"auto mode",ref:{value:"auto"}},{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"int",name:"set profile",ref:{value:"setProfile",ext:"%d",extMeta:"1-3"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_window:{alarm:{state:{devices:[],data:[{value:"state",states:["open","tilted"]},{value:"sabotage",states:["true"]}]}},status:[{type:"enum",name:"state",ref:{value:"state",options:["closed","tilted","open"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["closed","tilted","open"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_smoke:{command:[{type:"enum",name:"intrusion alarm off",ref:{value:"intrusionAlarmOff"}},{type:"enum",name:"intrusion alarm on",ref:{value:"intrusionAlarmOn"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["alarm","ok"]}},{type:"int",name:"alarm detail",ref:{value:"alarmDetail",extMeta:"0-3"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["alarm","ok"]}},{type:"int",name:"alarm detail",ref:{value:"alarmDetail",extMeta:"0-3"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},ip_blind:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 stop",ref:{value:"ch4stop"}},{type:"enum",name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 stop",ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},{type:"int",name:"ch.5 step up",ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 step down",ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 move to",ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"ch.4 state",ref:{value:"ch4Level"}},{type:"int",name:"ch.5 state",ref:{value:"ch5Level"}},{type:"int",name:"ch.6 state",ref:{value:"ch6Level"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_shading:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:["true","false"]}}]},ip_jalousie:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 stop",ref:{value:"ch4stop"}},{type:"enum",name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.4 lamella up",ref:{value:"ch4lamellaUp"}},{type:"enum",name:"ch.4 lamella down",ref:{value:"ch4lamellaDown"}},{type:"int",name:"ch.4 lamella step up",ref:{value:"ch4lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 lamella step down",ref:{value:"ch4lamlellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.4 lamella to",ref:{value:"ch4lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 stop",ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},{type:"int",name:"ch.5 step up",ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.5 lamella up",ref:{value:"ch5lamellaUp"}},{type:"enum",name:"ch.5 lamella down",ref:{value:"ch5lamellaDown"}},{type:"int",name:"ch.5 lamella step up",ref:{value:"ch5lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 lamella step down",ref:{value:"ch5lamlellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.5 lamella to",ref:{value:"ch5lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 step down",ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 move to",ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"ch.6 lamella up",ref:{value:"ch6lamellaUp"}},{type:"enum",name:"ch.6 lamella down",ref:{value:"ch6lamellaDown"}},{type:"int",name:"ch.6 lamella step up",ref:{value:"ch6lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 lamella step down",ref:{value:"ch6lamlellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"ch.6 lamella to",ref:{value:"ch6lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"lamella state",ref:{value:"lamellaLevel"}},{type:"int",name:"ch.4 blind state",ref:{value:"ch4blindLevel"}},{type:"int",name:"ch.4 lamella state",ref:{value:"ch4lamellaLevel"}},{type:"int",name:"ch.5 blind state",ref:{value:"ch5blindLevel"}},{type:"int",name:"ch.5 lamella state",ref:{value:"ch5lamellaLevel"}},{type:"int",name:"ch.6 blind state",ref:{value:"ch6blindLevel"}},{type:"int",name:"ch.6 lamella state",ref:{value:"ch6lamellaLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"lamella state",ref:{value:"lamellaLevel"}},{type:"int",name:"ch.4 blind state",ref:{value:"ch4blindLevel"}},{type:"int",name:"ch.4 lamella state",ref:{value:"ch4lamellaLevel"}},{type:"int",name:"ch.5 blind state",ref:{value:"ch5blindLevel"}},{type:"int",name:"ch.5 lamella state",ref:{value:"ch5lamellaLevel"}},{type:"int",name:"ch.6 blind state",ref:{value:"ch6blindLevel"}},{type:"int",name:"ch.6 lamella state",ref:{value:"ch6lamellaLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_presence:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},command:[{type:"enum",name:"reset",ref:{value:"reset"}},{type:"enum",name:"activate",ref:{value:"activate"}},{type:"enum",name:"deactivate",ref:{value:"deactivate"}},{type:"enum",name:"toggleActivate",ref:{value:"toggleActivate"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}}]},ip_wallthermo2:{command:[{type:"enum",name:"auto mode",ref:{value:"auto"}},{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"int",name:"set profile",ref:{value:"setProfile",ext:"%d",extMeta:"1-3"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"room control connection",ref:{value:"cl_fd_emergencyOP",options:["ok","emergency"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_fd_frostProtection",options:["true","false"]}},{type:"enum",name:"switching state",ref:{value:"cl_fd_state",options:["on","off"]}},{type:"enum",name:"humidity alarm",ref:{value:"cl_fd_humidityAlarm",options:["true","false"]}},{type:"enum",name:"valve state",ref:{value:"valveState",options:["on","off"]}}],ipevt:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"frost protection",ref:{value:"frost",options:["true","false"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"active profile",ref:{value:"profile",options:["1","2","3"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"room control connection",ref:{value:"cl_fd_emergencyOP",options:["ok","emergency"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_fd_frostProtection",options:["true","false"]}},{type:"enum",name:"switching state",ref:{value:"cl_fd_state",options:["on","off"]}},{type:"enum",name:"humidity alarm",ref:{value:"cl_fd_humidityAlarm",options:["true","false"]}},{type:"enum",name:"valve state",ref:{value:"valveState",options:["on","off"]}}]},ip_floor_heater:{status:[{type:"enum",name:"controlling",ref:{value:"cl_f_state",options:["on","off"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}}],ipevt:[{type:"enum",name:"controlling",ref:{value:"cl_f_state",options:["on","off"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}}]},ip_floor_pump_heater:{status:[{type:"enum",name:"controlling",ref:{value:"cl_fp_state",options:["on","off"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_fp_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_fp_emergencyOP",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_fp_humidityLimiter",options:["true","false"]}}],ipevt:[{type:"enum",name:"controlling",ref:{value:"cl_fp_state",options:["on","off"]}},{type:"enum",name:"frost protection active",ref:{value:"cl_fp_frostProtection",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_fp_emergencyOP",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_fp_humidityLimiter",options:["true","false"]}}]},ip_weather:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threshold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threshold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threshold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threshold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}}]},ip_weather2:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threshold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threshold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threshold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threshold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}]},ip_weather3:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}}]},ip_weather4:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threshold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threshold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"wind direction",ref:{value:"weatherWindDN",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"float",name:"wind direction degree",ref:{value:"weatherWindD",extMeta:"0.0-357.5",scale:"0.1"}},{type:"float",name:"wind direction range",ref:{value:"weatherWindDR",extMeta:"0.0-146.25",scale:"0.01"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}},{type:"enum",name:"sunshine threshold overflow",ref:{value:"weatherSunTOR",options:["true","false"]}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind threshold overflow",ref:{value:"weatherWindTOR",options:["true","false"]}},{type:"enum",name:"wind direction",ref:{value:"weatherWindDN",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"float",name:"wind direction degree",ref:{value:"weatherWindD",extMeta:"0.0-357.5",scale:"0.1"}},{type:"float",name:"wind direction range",ref:{value:"weatherWindDR",extMeta:"0.0-146.25",scale:"0.01"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}},{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}]},ip_direction:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"current direction",ref:{value:"current_direction",options:["right_to_left","left_to_right"]}},{type:"enum",name:"last direction",ref:{value:"last_direction",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count right to left",ref:{value:"r2l_passage_counter",extMeta:"0-127"}},{type:"int",name:"passage count left to right",ref:{value:"l2r_passage_counter",extMeta:"0-127"}},{type:"enum",name:"passage count overflow right to left",ref:{value:"r2l_passage_counter_overflow",options:["true","false"]}},{type:"enum",name:"passage count overflow left to right",ref:{value:"l2r_passage_counter_overflow",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"current direction",ref:{value:"current_direction",options:["right_to_left","left_to_right"]}},{type:"enum",name:"last direction",ref:{value:"last_direction",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count right to left",ref:{value:"r2l_passage_counter",extMeta:"0-127"}},{type:"int",name:"passage count left to right",ref:{value:"l2r_passage_counter",extMeta:"0-127"}},{type:"enum",name:"passage count overflow right to left",ref:{value:"r2l_passage_counter_overflow",options:["true","false"]}},{type:"enum",name:"passage count overflow left to right",ref:{value:"l2r_passage_counter_overflow",options:["true","false"]}}]},ip_button8:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",options:["true"]}},{type:"enum",name:"button 5 short press",ref:{value:"btn5pressShort",options:["true"]}},{type:"enum",name:"button 5 long press",ref:{value:"btn5pressLong",options:["true"]}},{type:"enum",name:"button 6 short press",ref:{value:"btn6pressShort",options:["true"]}},{type:"enum",name:"button 6 long press",ref:{value:"btn6pressLong",options:["true"]}},{type:"enum",name:"button 7 short press",ref:{value:"btn7pressShort",options:["true"]}},{type:"enum",name:"button 7 long press",ref:{value:"btn7pressLong",options:["true"]}},{type:"enum",name:"button 8 short press",ref:{value:"btn8pressShort",options:["true"]}},{type:"enum",name:"button 8 long press",ref:{value:"btn8pressLong",options:["true"]}}]},ip_generic_input:{status:[{type:"enum",name:"change over",ref:{value:"genInputChangeOver",options:["true","false"]}},{type:"enum",name:"external clockK",ref:{value:"genInputExtClock",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"genInputHumidityLimiter",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"genInputState",options:["on","off"]}},{type:"enum",name:"tactile switch",ref:{value:"genInputTactileSwitch",options:["true","false"]}},{type:"enum",name:"temperature limiter",ref:{value:"genInputTempLimiter",options:["true","false"]}}],ipevt:[{type:"enum",name:"change over",ref:{value:"genInputChangeOver",options:["true","false"]}},{type:"enum",name:"external clockK",ref:{value:"genInputExtClock",options:["true","false"]}},{type:"enum",name:"humidity limiter",ref:{value:"genInputHumidityLimiter",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"genInputState",options:["on","off"]}},{type:"enum",name:"tactile switch",ref:{value:"genInputTactileSwitch",options:["true","false"]}},{type:"enum",name:"temperature limiter",ref:{value:"genInputTempLimiter",options:["true","false"]}}]},ip_analog_output:{command:[{type:"enum",name:"off",ref:{value:"outputOff"}},{type:"int",name:"up",ref:{value:"outputUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"down",ref:{value:"outputDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"move to",ref:{value:"outputTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"output state",ref:{value:"outputLevel"}}],ipevt:[{type:"int",name:"output state",ref:{value:"outputLevel"}}]},ip_acce:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery voltage",ref:{value:"voltage",extMeta:"0-25.2"}},{type:"int",name:"error code",ref:{value:"errorCode",extMeta:"0-255"}},{type:"enum",name:"sensor error",ref:{value:"sensorError",options:["true","false"]}},{type:"enum",name:"motion",ref:{value:"motion",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery volatage",ref:{value:"volatage",extMeta:"0-25.2"}},{type:"int",name:"error code",ref:{value:"errorCode",extMeta:"0-255"}},{type:"enum",name:"sensor error",ref:{value:"sensorError",options:["true","false"]}},{type:"enum",name:"motion",ref:{value:"motion",options:["true","false"]}}]},ip_garagedoor:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0.0-25.2"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0.0-25.2"}},{type:"enum",name:"button short press",ref:{value:"btnPressShort",options:["true"]}},{type:"enum",name:"button long press",ref:{value:"btnPressLong",options:["true"]}}]},ip_multi_input:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"button short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"button long press",ref:{value:"pressLong",options:["true"]}}]},ip_bsl:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"led 1 off",ref:{value:"led1off"}},{type:"int",name:"led 1 dim up",ref:{value:"led1dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 1 dim down",ref:{value:"led1dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 1 dim to",ref:{value:"led1dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"led 1 toggle to",ref:{value:"led1toggleTo",ext:"%d",extMeta:"1-100",step:"1"}},{type:"enum",name:"led 1 color to",ref:{value:"led1colorTo",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"enum",name:"led 2 off",ref:{value:"led2off"}},{type:"int",name:"led 2 dim up",ref:{value:"led2dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 2 dim down",ref:{value:"led2dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 2 dim to",ref:{value:"led2dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"led 2 toggle to",ref:{value:"led2toggleTo",ext:"%d",extMeta:"1-100",step:"1"}},{type:"enum",name:"led 2 color to",ref:{value:"led2colorTo",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"led 1 level",ref:{value:"led1Level"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"int",name:"led 2 level",ref:{value:"led2Level"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"led 1 level",ref:{value:"led1Level"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"int",name:"led 2 level",ref:{value:"led2Level"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_water:{status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",name:"moisture",ref:{value:"moisture",options:["true","false"]}},{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}}],ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",name:"moisture",ref:{value:"moisture",options:["true","false"]}},{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}}]},ip_tormatic:{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"partial open",ref:{value:"partialOpen"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"light on",ref:{value:"lightOn"}},{type:"enum",name:"light off",ref:{value:"lightOff"}},{type:"enum",name:"light toggle",ref:{value:"lightToggle"}}],status:[{type:"enum",name:"door state",ref:{value:"doorState",options:["open","closed","ventilation","unknown"]}},{type:"enum",name:"light state",ref:{value:"lightState",options:["off","on"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"door state",ref:{value:"doorState",options:["open","closed","ventilation","unknown"]}},{type:"enum",name:"light state",ref:{value:"lightState",options:["off","on"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_multi_input_bat:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery voltage",ref:{value:"voltage",extMeta:"0-25.2"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery voltage",ref:{value:"voltage",extMeta:"0-25.2"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"button short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"button long press",ref:{value:"pressLong",options:["true"]}}]},ip_lux:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery voltage",ref:{value:"voltage",extMeta:"0-25.2"}},{type:"float",name:"current illumination",ref:{value:"illu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"average illumination",ref:{value:"avgIllu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"maximum illumination",ref:{value:"maxIllu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"minimum illumination",ref:{value:"minIllu",extMeta:"0-163830",unit:"lux"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery volatage",ref:{value:"volatage",extMeta:"0-25.2"}},{type:"float",name:"current illumination",ref:{value:"illu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"average illumination",ref:{value:"avgIllu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"maximum illumination",ref:{value:"maxIllu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"minimum illumination",ref:{value:"minIllu",extMeta:"0-163830",unit:"lux"}}]},ip_pmfs:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"powerMainsFailure",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"powerMainsFailure",options:["true","false"]}}]},ip_co2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"LED toggle to",ref:{value:"toggleTo",value_t:"ledToggleTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"LED dim down",ref:{value:"dimDown",value_t:"ledDimDown"}},{type:"int",name:"LED dim to",ref:{value:"dimTo",value_t:"ledDimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"LED dim up",ref:{value:"dimUp",value_t:"ledDimUp"}}],status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"float",name:"co2",ref:{value:"co2"}},{type:"enum",name:"switch state",ref:{value:"switchState",options:["on","off"]}},{type:"int",name:"LED dimmer level",ref:{value:"dimmerLevel",value_t:"ledBrightness",extMeta:"0-100"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"float",name:"co2",ref:{value:"co2"}},{type:"enum",name:"switch state",ref:{value:"switchState",options:["on","off"]}},{type:"int",name:"LED dimmer level",ref:{value:"dimmerLevel",value_t:"ledBrightness",extMeta:"0-100"}}]},ip_rain:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"rain",ref:{value:"rain",options:["true","false"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"rain",ref:{value:"rain",options:["true","false"]}}]},ip_dld:{command:[{type:"enum",name:"lock",ref:{value:"lock"}},{type:"enum",name:"unlock",ref:{value:"unlock"}},{type:"enum",name:"open",ref:{value:"open"}}],status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"lock state",ref:{value:"lock_state",options:["unlocked","locked"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"lock state",ref:{value:"lock_state",options:["unlocked","locked"]}}]},ip_ste2:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",unit:"C"}},{type:"float",name:"temperature 2",ref:{value:"temperature2",unit:"C"}},{type:"float",name:"temperature difference",ref:{value:"temperature_delta",unit:"C"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",unit:"C"}},{type:"float",name:"temperature 2",ref:{value:"temperature2",unit:"C"}},{type:"float",name:"temperature difference",ref:{value:"temperature_delta",unit:"C"}}]},ip_mp3p:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"dim to",ref:{value:"dimTo"}},{type:"enum",name:"color",ref:{value:"colorTo",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"multi",name:"play",ref:{value:"play",ext:"%multi",extMeta:[{type:"int",name:"sound",ref:{value:"sound",ext:"%d"}},{type:"int",name:"volume",ref:{value:"volume",ext:"%d",extMeta:"0-100"}}]}},{type:"multi",name:"set LED",ref:{value:"setValue",value_t:"ledSet",ext:"%multi",extMeta:[{type:"enum",name:"color",ref:{value:"color",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100"}},{type:"int",name:"duration",ref:{value:"duration",ext:"%d",unit:"ms"}}]}}],status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}},{type:"enum",name:"color",ref:{value:"color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}},{type:"enum",name:"color",ref:{value:"color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}]}},V6_MAP:{ip_heater:{command:[{type:"enum",name:"auto mode",ref:{value:"auto"}},{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_powerswitch:{command:"v5p_command",status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"float",name:"voltage",ref:{value:"meterVoltage",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_energyactor:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"float",name:"power",ref:{value:"meterPower",ext:"%f",scale:"0.1"}},{type:"float",name:"consumption",ref:{value:"meterEnergyCounter",ext:"%f",scale:"0.1"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_dimmer:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_dimmer2:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_dimmer3:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"dimmer state",ref:{value:"dimmerLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_motion:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},command:"v5p_command",status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}}],event:"v6_status",ipevt:"v6_status"},ip_motion2:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}}],event:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}},{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}],ipevt:"v6_event"},ip_siren:{command:"v5p_command",status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_wallthermo:{command:[{type:"enum",name:"auto mode",ref:{value:"auto"}},{type:"enum",name:"manu mode",ref:{value:"manu"}},{type:"enum",name:"boost on",ref:{value:"boostOn"}},{type:"enum",name:"boost off",ref:{value:"boostOff"}},{type:"enum",name:"operation mode",ref:{value:"operation_mode",ext:"%e",extMeta:["heating","cooling"]}},{type:"enum",name:"window open",ref:{value:"winOpen"}},{type:"enum",name:"window close",ref:{value:"winClose"}},{type:"float",name:"set temperature",ref:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature up",ref:{value:"tempUp",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature down",ref:{value:"tempDown",ext:"%f",extMeta:"0.5-30.5",scale:"0.5",unit:"C"}}],status:[{type:"float",name:"set temperature",ref:{value:"state",extMeta:"4.5-30.5",scale:"0.5"}},{type:"int",name:"humidity",ref:{value:"hum",extMeta:"0-100"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"operation mode",ref:{value:"operation_mode",options:["heating","cooling"]}},{type:"enum",name:"window state",ref:{value:"window",options:["open","closed"]}},{type:"float",name:"current temperature",ref:{value:"temp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"boost",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_smoke:{command:"v5p_command",status:[{type:"enum",name:"state",ref:{value:"state",options:["alarm","ok"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_blind:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_jalousie:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",step:"1"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"blind state",ref:{value:"blindLevel"}},{type:"int",name:"lamella state",ref:{value:"lamellaLevel"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},ip_presence:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},command:"v5p_command",status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0.0-163830.0"}}],event:"v6_status",ipevt:"v6_status"},ip_floor_heater:{status:"v5p_status",event:"v6_status",ipevent:"v6_status"},ip_floor_pump_heater:{status:"v5p_status",event:"v6_status",ipevent:"v6_status"},ip_garagedoor:{command:"v5p_command",status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"button short press",ref:{value:"btnPressShort",options:["true"]}},{type:"enum",name:"button long press",ref:{value:"btnPressLong",options:["true"]}}],ipevt:"v6_event"},ip_water:{status:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}}],event:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"sabotage",ref:{value:"sabotage",options:["true","false"]}}],ipevt:"v6_event"},ip_bsl:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"led 1 off",ref:{value:"led1off"}},{type:"int",name:"led 1 dim up",ref:{value:"led1dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 1 dim down",ref:{value:"led1dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 1 dim to",ref:{value:"led1dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"led 1 toggle to",ref:{value:"led1toggleTo",ext:"%d",extMeta:"1-100",step:"1"}},{type:"enum",name:"led 1 color to",ref:{value:"led1colorTo",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"enum",name:"led 2 off",ref:{value:"led2off"}},{type:"int",name:"led 2 dim up",ref:{value:"led2dimUp",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 2 dim down",ref:{value:"led2dimDown",ext:"%d",extMeta:"1-100",step:"1"}},{type:"int",name:"led 2 dim to",ref:{value:"led2dimTo",ext:"%d",extMeta:"0-100",step:"1"}},{type:"int",name:"led 2 toggle to",ref:{value:"led2toggleTo",ext:"%d",extMeta:"1-100",step:"1"}},{type:"enum",name:"led 2 color to",ref:{value:"led2colorTo",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"led 1 level",ref:{value:"led1Level"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"int",name:"led 2 level",ref:{value:"led2Level"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],ipevt:[{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]},ip_lux:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery voltage",ref:{value:"voltage",extMeta:"0-25.2"}},{type:"float",name:"current illumination",ref:{value:"illu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"average illumination",ref:{value:"avgIllu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"maximum illumination",ref:{value:"maxIllu",extMeta:"0-163830",unit:"lux"}},{type:"float",name:"minimum illumination",ref:{value:"minIllu",extMeta:"0-163830",unit:"lux"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"battery volatage",ref:{value:"volatage",extMeta:"0-25.2"}},{type:"float",name:"current illumination",ref:{value:"illu",extMeta:"0-163830",unit:"lux"}}]},ip_weather:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}}]},ip_weather2:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}}]},ip_weather4:{status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind direction",ref:{value:"weatherWindDN",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"float",name:"wind direction degree",ref:{value:"weatherWindD",extMeta:"0.0-357.5",scale:"0.1"}},{type:"float",name:"wind direction range",ref:{value:"weatherWindDR",extMeta:"0.0-146.25",scale:"0.01"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"weatherActualTemp",extMeta:"-50.0-50.0",scale:"0.1"}},{type:"int",name:"humidity",ref:{value:"weatherHum",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}},{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-16383"}},{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0",scale:"0.1"}},{type:"enum",name:"wind direction",ref:{value:"weatherWindDN",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"float",name:"wind direction degree",ref:{value:"weatherWindD",extMeta:"0.0-357.5",scale:"0.1"}},{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}},{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0",scale:"0.1"}}]},ip_mp3p:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"color",ref:{value:"colorTo",value_t:"color",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"multi",name:"play",ref:{value:"play",ext:"%multi",extMeta:[{type:"int",name:"sound",ref:{value:"sound",ext:"%d"}},{type:"int",name:"volume",ref:{value:"volume",ext:"%d",extMeta:"0-100"}}]}},{type:"multi",name:"set LED",ref:{value:"setValue",value_t:"ledSet",ext:"%multi",extMeta:[{type:"enum",name:"color",ref:{value:"color",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100"}},{type:"int",name:"duration",ref:{value:"duration",value_t:"durationMS",ext:"%d",unit:"ms"}}]}}],status:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}},{type:"enum",name:"color",ref:{value:"color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}],ipevt:[{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}},{type:"enum",name:"color",ref:{value:"color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e),a=!t||!t.HMMODE;return e&&"string"==typeof e.version&&"C"==e.version.charAt(0)?[{type:"HM-IP",name:"Homematic IP",rfmismatch:a},{type:"HM-IP",name:"Blanke Home Basic"},{type:"HM-IP",name:"JAB ANSTOETZ Rollo/Doppelrollo",vendor:"jab_rollo",subtypes:[{id:"PR65EA",data:"blind",vendor:"jab_rollo"},{id:"PR39A",data:"blind",vendor:"jab_rollo"},{id:"PR40KA",data:"blind",vendor:"jab_rollo"},{id:"PR65AT",data:"blind",vendor:"jab_rollo"},{id:"PR59AT",data:"blind",vendor:"jab_rollo"},{id:"PR57AT",data:"blind",vendor:"jab_rollo"},{id:"PR67AT",data:"blind",vendor:"jab_rollo"},{id:"TR65EA",data:"blind",vendor:"jab_rollo"},{id:"TR67EA",data:"blind",vendor:"jab_rollo"},{id:"TR40EA",data:"blind",vendor:"jab_rollo"}]},{type:"HM-IP",name:"JAB ANSTOETZ Plissee/Wabenplissee",vendor:"jab_plissee",subtypes:[{id:"AEH10",data:"blind",vendor:"jab_plissee"},{id:"PEH10",data:"blind",vendor:"jab_plissee"},{id:"PEH11",data:"blind",vendor:"jab_plissee"},{id:"PEH60",data:"blind",vendor:"jab_plissee"},{id:"PEH61",data:"blind",vendor:"jab_plissee"},{id:"PEH65",data:"blind",vendor:"jab_plissee"},{id:"PEH66",data:"blind",vendor:"jab_plissee"}]},{type:"HM-IP",name:"erfal",vendor:"erfal",subtypes:[{id:"Auenjalousie HmIP",data:"blind",vendor:"erfal"},{id:"L Trgerprofil Doppelrollo HmIP",data:"ip_blind",vendor:"erfal"},{id:"L Trgerprofil HmIP",data:"ip_blind",vendor:"erfal"},{id:"L-Basis HmIP",data:"ip_blind",vendor:"erfal"},{id:"L-Kassette E103 HmIP",data:"ip_blind",vendor:"erfal"},{id:"Lamelle 24V HmIP",data:"ip_jalousie",vendor:"erfal"},{id:"M Trgerprofil HmIP",data:"ip_blind",vendor:"erfal"},{id:"M-Basis HmIP",data:"ip_blind",vendor:"erfal"},{id:"M-Kassette R76 E78 HmIP",data:"ip_blind",vendor:"erfal"},{id:"Maxi Line Plus HmIP",data:"blind",vendor:"erfal"},{id:"Motorschiene 9500 HmIP",data:"ip_jalousie",vendor:"erfal"},{id:"Rollo ER1/ER2 HmIP",data:"blind",vendor:"erfal"},{id:"VDA HmIP",data:"blind",vendor:"erfal"},{id:"XL-Basis HmIP",data:"ip_blind",vendor:"erfal"},{id:"XL-Kassette E117 R123 HmIP",data:"ip_blind",vendor:"erfal"},{id:"XL-Trgerprofil HmIP",data:"ip_blind",vendor:"erfal"}]}]:e&&"EA"==e.version?[{type:this.TYPE,name:"HomeMatic"},{type:"HM-IP",name:"Homematic IP"},{type:"HM-IP",name:"Blanke Home Basic"}]:e&&"E7"==e.version?[{type:"HM-IP",name:"Homematic IP"}]:null;},getCommandStatusMap:function getCommandStatusMap(e,t){if(!e.data)return null;var a=e.data,n=this.MAP[e.data];if(!n)return n;var r=JSON.parse(JSON.stringify(n));return r.event=r.ipevt?JSON.parse(JSON.stringify(r.ipevt)):null,"ip_motion"==e.data&&e.address&&-1!=e.address.indexOf("HmIP-SMO")&&(r.status.splice(3,1),r.event.splice(3,1),r.ipevt.splice(3,1)),!t||"string"!=typeof t.version||"C"!=t.version.charAt(0)&&"E7"!=t.version?r:(n=this.V6_MAP[a])?(n.command?"v5p_command"!=n.command&&(r.command=JSON.parse(JSON.stringify(n.command))):r.command=null,n.status?"v5p_status"!=n.status&&(r.status=JSON.parse(JSON.stringify(n.status))):r.status=null,n.event?"v6_status"==n.event?r.event=JSON.parse(JSON.stringify(r.status)):"v5p_event"!=n.event&&(r.event=JSON.parse(JSON.stringify(n.event))):r.event=null,n.ipevt?"v6_status"==n.ipevt?r.ipevt=JSON.parse(JSON.stringify(r.status)):"v6_event"==n.ipevt?r.ipevt=JSON.parse(JSON.stringify(r.event)):"v5p_ipevt"!=n.ipevt&&(r.ipevt=JSON.parse(JSON.stringify(n.ipevt))):r.ipevt=null,r):r;},getIPevtMap:function getIPevtMap(e,t){return this.getCommandStatusMap(e,t);},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.HM_X.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":case"ip_switch":case"ip_bsl":(n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"state"}}};break;case"energymeter":n={type:"powermeter",states:{power:{type:"FLOAT"},consumption:{type:"FLOAT"}},details:{states:{power:{value:"power"},consumption:{value:"energy"}}}};break;case"powerswitch":n={type:"powerswitch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},power:{type:"FLOAT"},consumption:{type:"FLOAT"},voltage:{type:"FLOAT"},current:{type:"FLOAT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"},power:{value:"power"},consumption:{value:"energy_counter"},voltage:{value:"voltage"},current:{value:"current"}}}};break;case"ip_powerswitch":n={type:"powerswitch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},power:{type:"FLOAT"},consumption:{type:"FLOAT"},voltage:{type:"FLOAT"},current:{type:"FLOAT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"},power:{value:"meterPower"},consumption:{value:"meterEnergyCounter"},voltage:{value:"meterVoltage"},current:{value:"meterCurrent"}}}};break;case"ip_energyactor":case"ip_energyactor2":n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"}}}};break;case"dualwhite":(n={type:"dimmer",commands:{on:{},off:{},toggle:{},up:{},down:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},up:{value:"dimUp"},down:{value:"dimDown"},brightness:{value:"dimTo",ext:"%d"}},states:{brightness:{value:"bri"}}};break;case"dimmer":(n={type:"dimmer",commands:{on:{},off:{},up:{},down:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"on"},off:{value:"off"},up:{value:"dimUp"},down:{value:"dimDown"},brightness:{value:"onTo",ext:"%d"}},states:{brightness:{value:"state"}}};break;case"rgb":(n={type:"dimmer",commands:{on:{},off:{},up:{},down:{},white:{},brightness:{value:{type:"INT",min:0,max:100,step:1}},color:{value:{type:"RGB"}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"on"},off:{value:"off"},up:{value:"dimUp"},down:{value:"dimDown"},white:{value:"white"},brightness:{value:"onTo",ext:"%d"},color:{value:"rgb",ext:"%s"}},states:{brightness:{value:"state"}}};break;case"ip_dimmer":case"ip_dimmer2":case"ip_dimmer3":(n={type:"dimmer",commands:{on:{},off:{},up:{},down:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"dimTo",ext:100},off:{value:"dimOff"},up:{value:"dimUp",ext:1},down:{value:"dimDown",ext:1},brightness:{value:"dimTo",ext:"%d"}},states:{brightness:{value:"dimmerLevel"}}};break;case"ip_analog_output":(n={type:"dimmer",commands:{on:{},off:{},up:{},down:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"outputTo",ext:100},off:{value:"outputOff"},up:{value:"outputUp",ext:1},down:{value:"outputDown",ext:1},brightness:{value:"outputTo",ext:"%d"}},states:{brightness:{value:"outputLevel"}}};break;case"blind":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"up"},down:{value:"down"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"state"}}};break;case"ip_blind":case"ip_shading":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"blindLevel"}}};break;case"jalousie":(n={type:"blind",commands:{up:{},down:{},stop:{},lamellaUp:{},lamellaDown:{},position:{value:{type:"INT",min:0,max:100,step:1}},rotation:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100},rotation:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},lamellaUp:{value:"lamellaUp"},lamellaDown:{value:"lamellaDown"},position:{value:"moveTo",ext:"%d"},rotation:{value:"lamellaTo",ext:"%d"}},states:{position:{value:"jalState"},rotation:{value:"jalLmlState"}}};break;case"ip_jalousie":(n={type:"blind",commands:{up:{},down:{},stop:{},lamellaUp:{},lamellaDown:{},position:{value:{type:"INT",min:0,max:100,step:1}},rotation:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100},rotation:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},lamellaUp:{value:"lamellaUp"},lamellaDown:{value:"lamellaDown"},position:{value:"moveTo",ext:"%d"},rotation:{value:"lamellaTo",ext:"%d"}},states:{position:{value:"blindLevel"},rotation:{value:"lamellaLevel"}}};break;case"thermostat":n={type:"heater",commands:{auto:{},manu:{},boost:{},up:{},down:{},tempTo:{value:{type:"FLOAT",min:5,max:30,step:.5}}},states:{setpoint:{type:"FLOAT",min:5,max:30,step:.5,unit:"C"},temperature:{type:"FLOAT"},mode:{values:["auto","manu","boost"]}},details:{commands:{auto:{value:"setAuto"},manu:{value:"setManu"},boost:{value:"setBoost"},up:{value:"tempUp"},down:{value:"tempDown"},tempTo:{value:"tempTo",ext:"%f"}},states:{setpoint:{value:"state"},temperature:{value:"act_temp"},mode:{value:"mode"}}}};break;case"wallthermo":n={type:"heater",commands:{up:{},down:{},tempTo:{value:{type:"FLOAT",min:6,max:30,step:.5}}},states:{setpoint:{type:"FLOAT",min:6,max:30,step:.5,unit:"C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}},details:{commands:{up:{value:"tempUp"},down:{value:"tempDown"},tempTo:{value:"tempTo",ext:"%f"}},states:{setpoint:{value:"state"},temperature:{value:"temp"},humidity:{value:"hum"}}}};break;case"wallthermostat":n={type:"heater",commands:{auto:{},manu:{},boost:{},up:{},down:{},tempTo:{value:{type:"FLOAT",min:5,max:30,step:.5}}},states:{setpoint:{type:"FLOAT",min:5,max:30,step:.5,unit:"C"},temperature:{type:"FLOAT"},humidity:{type:"INT"},mode:{values:["auto","manu","boost"]}},details:{commands:{auto:{value:"setAuto"},manu:{value:"setManu"},boost:{value:"setBoost"},up:{value:"tempUp"},down:{value:"tempDown"},tempTo:{value:"tempTo",ext:"%f"}},states:{setpoint:{value:"state"},temperature:{value:"temp"},humidity:{value:"hum"},mode:{value:"mode"}}}};break;case"ip_heater":n={type:"heater",commands:{auto:{},manu:{},up:{},down:{},boost:{},tempTo:{value:{type:"FLOAT",min:4.5,max:30.5,step:.5}}},states:{setpoint:{type:"FLOAT",min:4.5,max:30.5,step:.5,unit:"C"},temperature:{type:"FLOAT"},mode:{values:["auto","manu"]},boostMode:{values:["on","off"]}},details:{commands:{auto:{value:"auto"},manu:{value:"manu"},up:{value:"tempUp"},down:{value:"tempDown"},boost:{value:"boostOn"},tempTo:{value:"tempTo",ext:"%f"}},states:{setpoint:{value:"state"},temperature:{value:"temp"},mode:{value:"mode"},boostMode:{value:"boost"}}}};break;case"ip_wallthermo":case"ip_wallthermo2":n={type:"heater",commands:{auto:{},manu:{},boost:{},up:{},down:{},tempTo:{value:{type:"FLOAT",min:4.5,max:30.5,step:.5}}},states:{setpoint:{type:"FLOAT",min:4.5,max:30.5,step:.5,unit:"C"},temperature:{type:"FLOAT"},humidity:{type:"INT"},mode:{values:["auto","manu"]},boostMode:{values:["on","off"]}},details:{commands:{auto:{value:"auto"},manu:{value:"manu"},boost:{value:"boostOn"},up:{value:"tempUp",ext:.5},down:{value:"tempDown",ext:.5},tempTo:{value:"tempTo",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}},states:{setpoint:{value:"state"},temperature:{value:"temp"},humidity:{value:"hum"},mode:{value:"mode"},boostMode:{value:"boost"}}}};break;case"weather":case"weather2":n={type:"temperature",states:{temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}},details:{states:{temperature:{value:"temp"},humidity:{value:"hum"}}}};break;case"weatherstation":n={type:"weatherstation",states:{temperature:{type:"FLOAT"},humidity:{type:"INT"},brightness:{type:"FLOAT"},windSpeed:{type:"FLOAT"},windDirection:{type:"FLOAT"},rain:{values:["true","false"]},rainCount:{type:"FLOAT"},sunshine:{type:"FLOAT"}},details:{states:{temperature:{value:"temp"},humidity:{value:"hum"},brightness:{value:"bri"},windSpeed:{value:"winS"},windDirection:{value:"windD"},rain:{value:"rain"},rainCount:{value:"rainC"},sunshine:{value:"sunD"}}}};break;case"contact":case"tilt":case"ip_contact":n={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"state"}}}};break;case"water":n={type:"water",states:{water:{values:["on","off"]}},details:{states:{water:{value:"state",conv_s:{water:"on",moist:"on",ok:"off"}}}}};break;case"ip_water":n={type:"water",states:{water:{values:["on","off"]}},details:{states:{water:{value:"water",conv_s:{"true":"on","false":"off"}}}}};break;case"ip_weather":n={type:"weatherstation",states:{temperature:{type:"FLOAT"},humidity:{type:"FLOAT"},brightness:{type:"FLOAT"},windSpeed:{type:"FLOAT"},sunshine:{type:"FLOAT"}},details:{states:{temperature:{value:"weatherActualTemp"},humidity:{value:"weatherHum"},brightness:{value:"weatherIllu"},windSpeed:{value:"weatherWindS"},sunshine:{value:"weatherSunD"}}}};break;case"ip_weather2":n={type:"weatherstation",states:{temperature:{type:"FLOAT"},humidity:{type:"INT"},brightness:{type:"FLOAT"},windSpeed:{type:"FLOAT"},rain:{values:["true","false"]},rainCount:{type:"FLOAT"},sunshine:{type:"FLOAT"}},details:{states:{temperature:{value:"weatherActualTemp"},humidity:{value:"weatherHum"},brightness:{value:"weatherIllu"},windSpeed:{value:"weatherWindS"},rain:{value:"weatherRain"},rainCount:{value:"weatherRainC"},sunshine:{value:"weatherSunD"}}}};break;case"ip_weather3":n={type:"temperature",states:{temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}},details:{states:{temperature:{value:"temperature"},humidity:{value:"humidity"}}}};break;case"ip_weather4":n={type:"weatherstation",states:{temperature:{type:"FLOAT"},humidity:{type:"INT"},brightness:{type:"FLOAT"},windSpeed:{type:"FLOAT"},windDirection:{type:"FLOAT"},rain:{values:["true","false"]},rainCount:{type:"FLOAT"},sunshine:{type:"FLOAT"}},details:{states:{temperature:{value:"weatherActualTemp"},humidity:{value:"weatherHum"},brightness:{value:"weatherIllu"},windSpeed:{value:"weatherWindS"},windDirection:{value:"weatherWindD"},rain:{value:"weatherRain"},rainCount:{value:"weatherRainC"},sunshine:{value:"weatherSunD"}}}};break;case"temp":n={type:"temperature",states:{temperature:{type:"FLOAT"}},details:{states:{temperature:{value:"temp"}}}};break;case"co2":n={type:"co2",states:{co2:{values:["normal","medium","high"]}},details:{states:{co2:{value:"state"}}}};break;case"motion":n={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"state",conv_s:{ok:"off",motion:"on"}}}}};break;case"ip_motion":case"ip_motion2":case"ip_presence":n={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"state"}}}};break;case"smoke":case"ip_smoke":n={type:"smoke",states:{smoke:{values:["on","off"]}},details:{states:{smoke:{value:"state",conv_s:{alarm:"on",smoke:"on",ok:"off"}}}}};break;case"window":case"ip_window":n={type:"window",states:{state:{values:["closed","tilted","open"]}},details:{states:{state:{value:"state"}}}};break;case"rain":n={type:"rain",states:{rain:{values:["on","off"]}},details:{states:{rain:{value:"rain",conv_s:{dry:"off",rain:"on"}}}}};break;case"ip_rain":n={type:"rain",states:{rain:{values:["true","false"]}},details:{states:{rain:{value:"rain",conv_s:{"false":"off","true":"on"}}}}};break;case"ip_co2":n={type:"co2",commands:{on:{},off:{},toggle:{},dimTo:{value:{type:"INT",min:0,max:100}}},states:{co2:{type:"FLOAT"},temperature:{type:"FLOAT"},humidity:{type:"INT"},switchState:{values:["on","off"]},dimmerLevel:{type:"INT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},dimTo:{value:"dimTo",ext:"%d",extMeta:"0-100"}},states:{co2:{value:"co2",conv_i:{"0|<801":"normal","801|<1501":"added","1501|+":"added_strong"}},temperature:{value:"temperature"},humidity:{value:"humidity"},switchState:{value:"switchState"},dimmerLevel:{value:"dimmerLevel"}}}};break;case"ip_dld":n={type:"door",commands:{open:{},lock:{},unlock:{}},states:{lockState:{values:["unlocked","locked"]}},details:{commands:{open:{value:"open"},lock:{value:"lock"},unlock:{value:"unlock"}},states:{lockState:{value:"lock_state"}}}};break;case"ip_ste2":n={type:"temperature",states:{temperature:{value:"FLOAT"},temperature2:{value:"FLOAT"},temperature_delta:{value:"FLOAT"}},details:{states:{temperature:{value:"temperature"},temperature2:{value:"temperature2"},temperature_delta:{value:"temperature_delta"}}}};break;case"ip_mp3p":n={type:"dimmer",commands:{off:{},dimTo:{value:{type:"INT",min:0,max:100}}},states:{dimmerLevel:{type:"INT"}},details:{commands:{off:{value:"off"},dimTo:{value:"dimTo",ext:"%d",extMeta:"0-100"}},states:{dimmerLevel:{value:"dimmerLevel"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){function _genCmdData(e,t){return{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:t}};}if(!e||!e.data)return null;var t=e.data,a=null;switch(t){case"ip_switch":case"ip_powerswitch":case"ip_energyactor":case"ip_energyactor2":switch(a={type:"switch",commands:{on:_genCmdData(e,{cmd:"on"}),off:_genCmdData(e,{cmd:"off"}),toggle:_genCmdData(e,{cmd:"toggle"})},states:{}},t){case"ip_switch":case"ip_powerswitch":a.states.state={values:["on","off"]};break;case"ip_energyactor":case"ip_energyactor2":a.states.switchState={values:["on","off"]};}break;case"ip_dimmer":case"ip_dimmer2":case"ip_dimmer3":a={type:"dimmer",commands:{on:_genCmdData(e,{cmd:"dimTo",value:100}),off:_genCmdData(e,{cmd:"dimOff"}),up:_genCmdData(e,{cmd:"dimUp",value:1}),down:_genCmdData(e,{cmd:"dimDown",value:1}),value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"dimTo",value:"{val}"}},min:0,max:100,step:1}},states:{dimmerLevel:{min:0,max:100,unit:"%"}}};break;case"ip_blind":case"ip_jalousie":case"ip_shading":a={type:"blind",commands:{up:_genCmdData(e,{cmd:"moveUp"}),down:_genCmdData(e,{cmd:"moveDown"}),stop:_genCmdData(e,{cmd:"stop"}),value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveTo",value:"{val}"}},min:0,max:100,step:1}},states:{blindLevel:{min:0,max:100}}};break;case"ip_heater":case"ip_wallthermo":case"ip_wallthermo2":switch(a={type:"heater",commands:{auto:_genCmdData(e,{cmd:"auto"}),manu:_genCmdData(e,{cmd:"manu"}),boost:_genCmdData(e,{cmd:"boostOn"}),up:_genCmdData(e,{cmd:"tempUp"}),down:_genCmdData(e,{cmd:"tempDown"}),value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"tempTo",value:"{val}"}},min:4.5,max:30.5,step:.5}},states:{state:{type:"FLOAT",min:4.5,max:30.5,step:.5,unit:"C"},temp:{type:"FLOAT"},mode:{values:["auto","manu"]}}},t){case"ip_wallthermo":case"ip_wallthermo2":a.states.hum={type:"INT"};}}return a;},supportSmartWidget:function supportSmartWidget(e,t){if(!e)return!1;switch(e.data){case"lux":case"heater":case"capacity":case"dualwhite":case"keymatic":case"ip_acce":case"ip_dld":case"ip_generic_input":case"ip_garagedoor":case"ip_lux":case"ip_multi_input":case"ip_multi_input_bat":case"ip_pmfs":case"ip_siren":case"ip_ste2":case"ip_tormatic":return!0;default:return!1;}},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o=null,s=null,i=null,u=null,l=function(e){var t=null;if(e&&e.status)for(var a=0;a<e.status.length;a++){var n=e.status[a];if(n&&n.ref)switch(n.ref.value){case"timeout":t||(t={}),t["%timeout%"]=n.ref;break;case"lowbat":t||(t={}),t["%lowbat%"]=n.ref;break;case"sabotage":t||(t={}),t["%sabotage%"]=n.ref;}}return t;}(this.getCommandStatusMap(t,a));return l&&(o=["notification"],i=l),o=function(e,t){switch(e.data){case"heater":case"capacity":t.push("number");break;case"dualwhite":t.push("hm_dualwhite");break;case"keymatic":case"ip_dld":t.push("keymatic");break;case"ip_acce":case"ip_pmfs":t.push("bool");break;case"ip_generic_input":case"ip_multi_input":case"ip_multi_input_bat":t.push("switch","contact");break;case"ip_garagedoor":case"ip_siren":t.push("generic_action");break;case"lux":case"ip_lux":t.push("generic_state");break;case"ip_tormatic":t.push("hm_tormatic");}return t;}(t,o||[]),s=function(e,t){switch(e.data){case"dualwhite":t["%dimOn%"]={value:"on"},t["%dimOff%"]={value:"off"},t["%dimTo%"]={value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"},t["%colorOn%"]={value:"colorOn"},t["%colorOff%"]={value:"colorOff"},t["%colorTo%"]={value:"colorTo",ext:"%d",extMeta:"0-100",step:"1"};break;case"keymatic":t["%unlock%"]={value:"open"},t["%lock%"]={value:"close"},t["%open%"]={value:"openDoor"};break;case"ip_dld":t["%unlock%"]={value:"unlock"},t["%lock%"]={value:"lock"},t["%open%"]={value:"open"};break;case"ip_garagedoor":t["%action%"]={value:"on"};break;case"ip_siren":t["%action%"]={value:"triggerAlarm",ext:[{value:"alarmAudio",ext:"FREQUENCY_RISING"},{value:"alarmVisual",ext:"BLINKING_ALTERNATELY_REPEATING"},{value:"alarmDur",ext:30},{value:"alarmDurUnit",ext:"S"}]};break;case"ip_tormatic":t["%open%"]={value:"open"},t["%stop%"]={value:"stop"},t["%close%"]={value:"close"},t["%partialOpen%"]={value:"partialOpen"},t["%lightToggle%"]={value:"lightToggle"};}return t;}(t,s||{}),i=function(e,t){switch(e.data){case"heater":t["%numberState%"]={value:"state"};break;case"capacity":case"lux":t["%state%"]={value:"state"};break;case"dualwhite":t["%dimmerState%"]={value:"bri"},t["%colorState%"]={value:"color"};break;case"ip_acce":t["%booleanState%"]={value:"motion"},t["%booleanState%"].conv_s={"true":"false","false":"true"};break;case"ip_pmfs":t["%booleanState%"]={value:"powerMainsFailure"};break;case"ip_generic_input":t["%switchState%"]={value:"genInputState"},t["%contactState%"]={value:"genInputState"},t["%contactState%"].conv_s={on:"open",off:"closed"};break;case"ip_multi_input":case"ip_multi_input_bat":t["%switchState%"]={value:"state"},t["%contactState%"]={value:"state"},t["%contactState%"].conv_s={on:"open",off:"closed"};break;case"ip_lux":t["%state%"]={value:"illu"};break;case"ip_tormatic":t["%lightState%"]={value:"lightState"},t["%doorState%"]={value:"doorState"};}return t;}(t,i||{}),u=function(e,t){switch(e.data){case"ip_garagedoor":t["%icon%"]="garage";break;case"lux":case"ip_lux":t["%icon%"]="sun";break;case"ip_siren":t["%icon%"]="alarm";}return t;}(t,u||{}),e._injectToSmartWidgetTemplate(n,o,r,s,i,u);}}},xnm.aio.gateway.systems.WA={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return this._getHexVal(14942207&parseInt(e,16),6);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;var n=14942207&parseInt(t.address,16),r="00";if("up"==a.value)n+=1947992064;else if("down"==a.value)n+=1947729920;else if("stop"==a.value)n+=872677376;else if("moveUp"==a.value)n+=1947992064,r="01";else if("moveDown"==a.value)n+=1947729920,r="01";else if("A"==a.value)n+=1946419200;else if("B"==a.value)n+=1946157056;else{if("C"!=a.value)return null;n+=1947467776;}return this._getHexVal(n,8)+r;},_parseData:function _parseData(e,t){if(!e||e.length<10)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;var a=e.substr(0,e.length-2),n=14942207&parseInt(a,16);if(n!=(14942207&parseInt(t.address,16)))return null;var r=parseInt(a,16)-n,o=parseInt(e.substr(e.length-2,2),16),s={};switch(r){case 1947992064:s.value=1==o?"moveUp":"up";break;case 1947729920:s.value=1==o?"moveDown":"down";break;case 872677376:s.value="stop";break;case 1946419200:s.value="A";break;case 1946157056:s.value="B";break;case 1947467776:s.value="C";}return s.value?s:null;},_getHexVal:xnm.aio.gateway.Util.getHexVal,generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"WA",MAP:{shutter:{command:[{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"A",ref:{value:"A"}},{type:"enum",name:"B",ref:{value:"B"}},{type:"enum",name:"C",ref:{value:"C"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);return t&&!t.SUPPORTS868?null:{type:this.TYPE,name:"Warema EWFS"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP.shutter;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.WA.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;e.data;return{type:"blind",address:e.address,commands:{on:{url:_getUrl(e,{value:"moveUp"})},off:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};}}},xnm.aio.gateway.systems.IA={learn:function learn(e,t,a){t||(t={});t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){e?a&&a(e):t.CODE?a&&a(null,{address:t.CODE}):a&&a(new Error("response format invalid"));});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;var n="0003";if("up"==a.value||"on"==a.value)n="0202";else if("down"==a.value||"off"==a.value)n="0102";else if("dimUp"==a.value)n="0201";else if("dimDown"==a.value)n="0101";else if("moveUp"==a.value)n="0203";else if("moveDown"==a.value)n="0103";else if("scene"==a.value)n="0302";else{if("stop2"!=a.value)return null;n="0000";}return n?t.address+n:void 0;},_parseData:function _parseData(e,t){if(e.length<=4)return null;var a=e.substr(0,e.length-4);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(e.length-4)){case"0003":n.value="stop";break;case"0202":"shutter"==t.data?n.value="up":n.value="on";break;case"0102":"shutter"==t.data?n.value="down":n.value="off";break;case"0201":n.value="dimUp";break;case"0101":n.value="dimDown";break;case"0203":n.value="moveUp";break;case"0103":n.value="moveDown";break;case"0302":n.value="scene";break;case"0000":n.value="stop2";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"IA",MAP:{shutter:{command:[{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"stop 2",ref:{value:"stop2"}},{type:"enum",name:"do scene",ref:{value:"scene"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"do scene",ref:{value:"scene"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"do scene",ref:{value:"scene"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return[{type:this.TYPE,name:"Berker",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]},{type:this.TYPE,name:"Gira",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]},{type:this.TYPE,name:"Insta",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]},{type:this.TYPE,name:"Jung",subtypes:[{id:"Shutter",data:"shutter"},{id:"Dimmer",data:"dimmer"},{id:"Switch",data:"switch"}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":(n={type:"switch",commands:{on:{},off:{}}}).details={commands:{on:{value:"on"},off:{value:"off"}}};break;case"dimmer":(n={type:"dimmer",commands:{on:{},off:{},up:{},down:{}}}).details={commands:{on:{value:"on"},off:{value:"off"},up:{value:"dimUp"},down:{value:"dimDown"}}};break;case"shutter":(n={type:"blind",commands:{up:{},down:{},stop:{}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.IA.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"blind",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},up:{url:_getUrl(e,{value:"dimUp"})},down:{url:_getUrl(e,{value:"dimDown"})}}};break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};}return t;}}},xnm.aio.gateway.systems.L3={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);r?a&&a(null,{address:r}):a&&a(new Error("gateway result address invalid"));}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return 8==e.length?e.substr(0,5):null;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;var n=null;if("on"==a.value)n="07";else if("off"==a.value)n="38";else if("white"==a.value)n="09";else if("color"==a.value)n="36";else if("red"==a.value)n="4f";else if("purple"==a.value)n="56";else if("blue"==a.value)n="60";else if("cyan"==a.value)n="68";else if("green"==a.value)n="70";else if("yellow"==a.value)n="41";else if("orange"==a.value)n="4a";else if("rgb"==a.value){if(!a.ext||a.ext.length<6)return null;var r=parseInt(a.ext.substr(0,2),16);r>255&&(r=255);var o=parseInt(a.ext.substr(2,2),16);o>255&&(o=255);var s=parseInt(a.ext.substr(4,2),16);s>255&&(s=255);var i=0,u=r/255,l=o/255,m=s/255,d=Math.min(u,Math.min(l,m)),p=Math.max(u,Math.max(l,m));if(d!=p)(i=60*((u==d?3:m==d?1:5)-(u==d?l-m:m==d?u-l:m-u)/(p-d))-110)<0&&(i+=360);var f=i/360*50;n=this._getHexVal(50-Math.floor(f)+64,2);}else{if("bri"!=a.value)return null;if(null==a.ext||void 0===a.ext)return null;var c=parseInt(a.ext);n=this._getHexVal(192+Math.floor(c/100*48),2);}return t.address+n+"0";},_getHexVal:function _getHexVal(e,t){for(var a=e.toString(16).toUpperCase();a.length<t;){a="0"+a;}return a;},_parseData:function _parseData(e,t){if(!e||e.length<3||!t||!t.address)return null;if(e.substr(0,e.length-3).toUpperCase()!=t.address.toUpperCase())return null;var a=e.substr(t.address.length,2),n={};switch(a.toUpperCase()){case"07":n.value="on";break;case"38":n.value="off";break;case"09":n.value="white";break;case"36":n.value="color";break;case"4F":n.value="red";break;case"56":n.value="purple";break;case"60":n.value="blue";break;case"68":n.value="cyan";break;case"70":n.value="green";break;case"41":n.value="yellow";break;case"4A":n.value="orange";break;default:(a=parseInt(a,16))>192?(n.value="bri",n.ext=Math.floor((a-192)/48*100)):a>64&&(n.value="rgb");}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"L3",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"color",ref:{value:"color"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"enum",name:"red",ref:{value:"red"}},{type:"enum",name:"purple",ref:{value:"purple"}},{type:"enum",name:"blue",ref:{value:"blue"}},{type:"enum",name:"cyan",ref:{value:"cyan"}},{type:"enum",name:"green",ref:{value:"green"}},{type:"enum",name:"yellow",ref:{value:"yellow"}},{type:"enum",name:"orange",ref:{value:"orange"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100",step:"10"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"Konine RGB"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return null;return{type:"dimmer",commands:{on:{},off:{},white:{},brightness:{value:{type:"INT",min:0,max:100}},color:{value:{type:"RGB"}}},details:{commands:{on:{value:"on"},off:{value:"off"},white:{value:"white"},brightness:{value:"bri",ext:"%d",extMeta:"0-100",step:"10"},color:{value:"rgb",ext:"%s"}}}};}}},xnm.aio.gateway.systems.L2={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return 6==e.length?e.substr(0,3):e.substr(0,6);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;var n,r,o,s=null;if(3==t.address.length){if("power"==a.value)s="fff";else if("left"==a.value)s="ff3";else if("right"==a.value||"white"==a.value)s="fc3";else if("up"==a.value)s="fcc";else if("down"==a.value)s="ff0";else if("red"==a.value)s="33f";else if("purple"==a.value)s="30f";else if("blue"==a.value)s="03f";else if("cyan"==a.value)s="000";else if("green"==a.value)s="f03";else if("yellow"==a.value)s="c33";else if("orange"==a.value)s="c03";else{if("rgb"!=a.value)return null;if(!a.ext)return null;(n=parseInt(a.ext.substr(0,2),16))>255&&(n=255),(r=parseInt(a.ext.substr(2,2),16))>255&&(r=255),(o=parseInt(a.ext.substr(4,2),16))>255&&(o=255);var i=0,u=n/255,l=r/255,m=o/255,d=Math.min(u,Math.min(l,m)),p=Math.max(u,Math.max(l,m));d!=p&&(i=60*((u==d?3:m==d?1:5)-(u==d?l-m:m==d?u-l:m-u)/(p-d))-180)<0&&(i+=360);s=["000","003","00c","00f","030","033","03c","03f","0c0","0c3","0cc","0cf","0f0","0f3","0fc","0ff","300","303","30c","30f","330","333","33c","33f","3c0","3c3","3cc","3cf","3f0","3f3","3fc","3ff","c00","c03","c0c","c0f","c30","c33","c3c","c3f","cc0","cc3","ccc","ccf","cf0","cf3","cfc","cff","f00","f03","f0c","f0f","f30","f33","f3c","f3f","fc0"][Math.floor(i/360*56)];}return t.address+s;}if("power"==a.value)s=2;else if("left"==a.value)s=5;else if("right"==a.value||"white"==a.value)s=6;else if("up"==a.value)s=3;else if("down"==a.value)s=4;else if("red"==a.value)s=408;else if("purple"==a.value)s=40;else if("blue"==a.value)s=80;else if("cyan"==a.value)s=152;else if("green"==a.value)s=240;else if("yellow"==a.value)s=336;else if("orange"==a.value)s=368;else{if("rgb"!=a.value)return null;if(!a.ext)return null;(n=parseInt(a.ext.substr(0,2),16))>255&&(n=255),(r=parseInt(a.ext.substr(2,2),16))>255&&(r=255),(o=parseInt(a.ext.substr(4,2),16))>255&&(o=255);var f=2128,c=2296,v=o,y=r;o<=n&&o<=r?(v=r,y=n,f=2304,c=2456):r<=n&&r<=o&&(v=n,y=o,f=2456,c=2640);var h,w=Math.round((c-f)/8+1),g=Math.round(w/2),_=w-g;255==v?h=Math.round(y/255*g):(h=g,h+=Math.round((1-v/255)*_)),(h=f+8*h)>2552&&(h-=512),s=h-2048;}var x=parseInt(t.address.substr(4),16)<<8;return s=this._getHexVal((65534&x)+s,4),s=t.address.substr(0,4)+s;},_getHexVal:xnm.aio.gateway.Util.getHexVal,_parseData:function _parseData(e,t){if(!e||!t||!t.address)return null;var a,n={};if(3==t.address.length){if(e.length<5)return null;if(e.substr(0,3).toUpperCase()!=t.address.toUpperCase())return null;switch(a=e.substr(3,3)){case"fff":n.value="power";break;case"ff3":n.value="left";break;case"fc3":n.value="right";break;case"fcc":n.value="up";break;case"ff0":n.value="down";break;case"33f":n.value="red";break;case"30f":n.value="purple";break;case"03f":n.value="blue";break;case"000":n.value="cyan";break;case"f03":n.value="green";break;case"c33":n.value="yellow";break;case"c03":n.value="orange";break;default:n.value="rgb";}}else{if(e.length<8)return null;if(e.substr(0,4).toUpperCase()!=t.address.substr(0,4).toUpperCase())return null;var r=parseInt(t.address.substr(4),16)<<8;switch(a=parseInt(e.substr(4,4),16),a-=65534&r){case 2:n.value="power";break;case 5:n.value="left";break;case 6:n.value="right";break;case 3:n.value="up";break;case 4:n.value="down";break;case 408:n.value="red";break;case 40:n.value="purple";break;case 80:n.value="blue";break;case 152:n.value="cyan";break;case 240:n.value="green";break;case 336:n.value="yellow";break;case 368:n.value="orange";break;default:n.value="rgb";}}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"L2",MAP:{command:[{type:"enum",name:"power",ref:{value:"power"}},{type:"enum",name:"left",ref:{value:"left"}},{type:"enum",name:"right",ref:{value:"right"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"enum",name:"red",ref:{value:"red"}},{type:"enum",name:"purple",ref:{value:"purple"}},{type:"enum",name:"blue",ref:{value:"blue"}},{type:"enum",name:"cyan",ref:{value:"cyan"}},{type:"enum",name:"green",ref:{value:"green"}},{type:"enum",name:"yellow",ref:{value:"yellow"}},{type:"enum",name:"orange",ref:{value:"orange"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}}]},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"RGB Controller"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return null;return{type:"dimmer",commands:{on:{},up:{},down:{},white:{},color:{value:{type:"RGB"}}},details:{commands:{on:{value:"power"},up:{value:"up"},down:{value:"down"},white:{value:"white"},color:{value:"rgb",ext:"%s"}}}};}}},xnm.aio.gateway.systems.ML={executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,adr:t.address,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,adr:t.address,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){var n=null;switch(a.value){case"power":n="80";break;case"up":n="4b";break;case"white":n="ffffff";break;case"bri":var r;if("number"==typeof a.ext)r=parseInt(a.ext);else{if(!a.ext.match(/^[-+]?[0-9]+$/))return null;r=parseInt(a.ext);}r>100&&(r=100),r<0&&(r=0),n=this._getHexVal(r,2);break;case"rgb":case"rgbS":if(!a.ext)return null;n=a.ext;break;default:return null;}return n;},_getHexVal:xnm.aio.gateway.Util.getHexVal,DM:{TYPE:"ML",MAP:{command:[{type:"enum",name:"power",ref:{value:"power"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100",step:"10"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}},{type:"string",name:"rgb color",ref:{value:"rgbS",ext:"%s"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);return t&&!t.SUPPORTS868?null:{type:this.TYPE,name:"mediola LM Pro"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getActionMap:function getActionMap(){return{};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return null;return{type:"dimmer",commands:{on:{},brightness:{value:{type:"INT",min:0,max:100}},color:{value:{type:"RGB"}}},details:{commands:{on:{value:"power"},brightness:{value:"bri",ext:"%d",extMeta:"0-100",step:"10"},color:{value:"rgb",ext:"%s"}}}};}}},xnm.aio.gateway.systems.RT={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t||!t.address||6!=t.address.length)return null;var n=t.address,r=null;return"up"==a.value||"moveUp"==a.value?r="20":"down"==a.value||"moveDown"==a.value?r="40":"fullUp"==a.value?r="2F":"fullDown"==a.value?r="4F":"stop"==a.value||"pos1"==a.value?r="10":"program"==a.value?r="80":"learn"==a.value?r="60":"up_stop"==a.value?r="30":"down_stop"==a.value?r="50":"sunOn"==a.value?r="90":"sunOff"==a.value&&(r="A0"),r+n;},_parseData:function _parseData(e,t){if(e.length<=2)return null;var a=e.substr(2);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(0,2)){case"20":"shutter"==t.data||"switch"==t.data?n.value="moveUp":n.value="up";break;case"40":"shutter"==t.data||"switch"==t.data?n.value="moveDown":n.value="down";break;case"2F":n.value="fullUp";break;case"4F":n.value="fullDown";break;case"10":n.value="stop";break;case"90":n.value="sunOn";break;case"A0":n.value="sunOff";}return n.value?n:null;},generateAddress:function generateAddress(e){var t=[];if(e)for(var a=e.length;a--;){e[a].address&&t.push(e[a].address);}return this._generateFreeAdr(t);},teach:function teach(e,t,a){if(t){if(t.address){var n={type:this.DM.TYPE,data:"80"+t.address};e._executeRequest("SendSC",n,null,function(e){a&&a(e,{address:t.address});});}else a&&a(new Error("options address is null"));}else a&&a(new Error("options is null"));},setLearnMode:function setLearnMode(e,t,a){if(t){if(t.address){var n={type:this.DM.TYPE,data:"60"+t.address};e._executeRequest("SendSC",n,null,function(e){a&&a(e,{address:t.address});});}else a&&a(new Error("options address is null"));}else a&&a(new Error("options is null"));},_generateFreeAdr:function _generateFreeAdr(e){for(var t,a,n=!1;!n;){204==(255&(a=Math.floor(15658734*Math.random())+1118481))&&a++,t=this._getHexVal(a,6),n=!this._contains(e,t);}return t;},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"RT",MAP:{shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"sun detector on",ref:{value:"sunOn"}},{type:"enum",name:"sun detector off",ref:{value:"sunOff"}}]},jalousie:{command:[{type:"enum",name:"move up",ref:{value:"fullUp"}},{type:"enum",name:"move down",ref:{value:"fullDown"}},{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"sun detector on",ref:{value:"sunOn"}},{type:"enum",name:"sun detector off",ref:{value:"sunOff"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"moveUp"}},{type:"enum",name:"off",ref:{value:"moveDown"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=[],a={type:this.TYPE,name:"Somfy RTS",subtypes:[]};a.subtypes.push({id:"Switch",data:"switch"}),a.subtypes.push({id:"Shutter",data:"shutter"}),a.subtypes.push({id:"Blind",data:"jalousie"});var n={type:this.TYPE,name:"SIMU",vendor:"simu",subtypes:[]};n.subtypes.push({id:"Switch",data:"switch",vendor:"simu"}),n.subtypes.push({id:"Shutter",data:"shutter",vendor:"simu"}),n.subtypes.push({id:"Blind",data:"jalousie",vendor:"simu"});var r={type:this.TYPE,name:"Roto",vendor:"roto",subtypes:[]};r.subtypes.push({id:"Roto Q",data:"shutter",vendor:"roto"});var o={type:this.TYPE,name:"erfal",vendor:"erfal",subtypes:[{id:"Auenjalousie RTS",data:"shutter",vendor:"erfal"},{id:"Basic Line RTS",data:"jalousie",vendor:"erfal"},{id:"L Trgerprofil Doppelrollo RTS",data:"shutter",vendor:"erfal"},{id:"L Trgerprofil RTS",data:"shutter",vendor:"erfal"},{id:"L-Basis RTS",data:"shutter",vendor:"erfal"},{id:"L-Kassette E100 RTS",data:"shutter",vendor:"erfal"},{id:"Lamelle 24V RTS",data:"jalousie",vendor:"erfal"},{id:"M Trgerprofil RTS",data:"shutter",vendor:"erfal"},{id:"M-Basis RTS",data:"blind",vendor:"erfal"},{id:"M-Kassette R76 E75 RTS",data:"shutter",vendor:"erfal"},{id:"Maxi Line Plus RTS",data:"jalousie",vendor:"erfal"},{id:"MegaView RTS",data:"jalousie",vendor:"erfal"},{id:"Motorschiene 9500 RTS",data:"shutter",vendor:"erfal"},{id:"Plissee RTS",data:"shutter",vendor:"erfal"},{id:"Raffrollo RTS",data:"shutter",vendor:"erfal"},{id:"Rollo ER1/ER2 RTS",data:"shutter",vendor:"erfal"},{id:"VDA RTS",data:"shutter",vendor:"erfal"},{id:"XL-Basis RTS",data:"shutter",vendor:"erfal"},{id:"XL-Kassette E117 R120 RTS",data:"shutter",vendor:"erfal"},{id:"XL-Trgerprofil RTS",data:"shutter",vendor:"erfal"}]},s={type:this.TYPE,name:"MHZ Sonnenschutz",vendor:"mhz",subtypes:[{id:"Somfy  Shutter",data:"shutter",vendor:"mhz"},{id:"Somfy  Blind",data:"jalousie",vendor:"mhz"}]};t.push(a,n,r,o,s);return e&&["C1","C3","CA"].indexOf(e.version)>=0&&(t.push({type:this.TYPE,name:"JAB ANSTOETZ Rollo/Doppelrollo",vendor:"jab_rollo",subtypes:[{id:"PR55E",data:"shutter",vendor:"jab_rollo"},{id:"PR75E",data:"shutter",vendor:"jab_rollo"},{id:"PR57TE",data:"shutter",vendor:"jab_rollo"},{id:"PR59TE",data:"shutter",vendor:"jab_rollo"},{id:"PR66ET",data:"shutter",vendor:"jab_rollo"},{id:"PR55ET",data:"shutter",vendor:"jab_rollo"}]}),t.push({type:this.TYPE,name:"JAB ANSTOETZ Plissee/Wabenplissee",vendor:"jab_plissee",subtypes:[{id:"AE10",data:"shutter",vendor:"jab_plissee"},{id:"PE10",data:"shutter",vendor:"jab_plissee"},{id:"PE11",data:"shutter",vendor:"jab_plissee"},{id:"PE60",data:"shutter",vendor:"jab_plissee"},{id:"PE61",data:"shutter",vendor:"jab_plissee"},{id:"PE65",data:"shutter",vendor:"jab_plissee"},{id:"PE66",data:"shutter",vendor:"jab_plissee"}]}),t.push({type:this.TYPE,name:"JAB ANSTOETZ Faltrollo",vendor:"jab_falt",subtypes:[{id:"RH10",data:"shutter",vendor:"jab_falt"},{id:"RH20",data:"shutter",vendor:"jab_falt"},{id:"RV10",data:"shutter",vendor:"jab_falt"},{id:"RV20",data:"shutter",vendor:"jab_falt"}]})),t;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.RT.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":(n={type:"switch",commands:{on:{},off:{}}}).details={commands:{on:{value:"moveUp"},off:{value:"moveDown"}}};break;case"shutter":(n={type:"blind",commands:{up:{},down:{},stop:{}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}};break;case"jalousie":(n={type:"blind",commands:{up:{},down:{},stop:{}}}).details={commands:{up:{value:"fullUp"},down:{value:"fullDown"},stop:{value:"stop"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.RT.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"moveUp"})},off:{url:_getUrl(e,{value:"moveDown"})}}};break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};break;case"jalousie":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"fullUp"})},down:{url:_getUrl(e,{value:"fullDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};}return t;}}},xnm.aio.gateway.systems.KN={learn:function learn(e,t,a){t||(t={}),t.freq&&"868"!=t.freq?this._learn433(e,t,a):this._learn868(e,t,a);},_learn868:function _learn868(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_learn433:function _learn433(e,t,a){xnm.aio.gateway.systems.Code.learn(e,t,a);},_resolveAddress:function _resolveAddress(e){var t=e.substr(0,10);return"7"==t.charAt(0)&&(t="F"+e.substr(1,9)),t;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},buildQuery:function buildQuery(e,t,a){if(t.freq&&"868"!=t.freq)return xnm.aio.gateway.systems.Code.buildQuery(e,t,a);var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_executeCommand:function _executeCommand(e,t,a,n){t.freq&&"868"!=t.freq?this._executeCommand433(e,t,a,n):this._executeCommand868(e,t,a,n);},_executeCommand868:function _executeCommand868(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},_executeCommand433:function _executeCommand433(e,t,a,n){xnm.aio.gateway.systems.Code.executeCommandCreator(e,t,a,n);},_buildData:function _buildData(e,t,a){if(!t||!t.address||10!=t.address.length)return null;var n=t.address,r=null;switch(a.value){case"up":case"moveUp":case"on":r="80";break;case"down":case"moveDown":case"off":r="20";break;case"stop":r="40";break;case"pos1":r="4C";}return n+r+"AEAE";},_parseData:function _parseData(e,t){if(e.length<=6)return null;var a=e.substr(0,e.length-6);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(e.length-6,2)){case"80":"switch"==t.data?n.value="on":"shutter"==t.data&&(n.value="up");break;case"20":"switch"==t.data?n.value="off":"shutter"==t.data&&(n.value="down");break;case"40":n.value="stop";break;case"4C":n.value="pos1";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return t?t.freq&&"868"!=t.freq?xnm.aio.gateway.systems.Code.generateActionCode(e,t):this._buildData(null,t,e):null;},parseActionCode:function parseActionCode(e,t){return t?t.freq&&"868"!=t.freq?xnm.aio.gateway.systems.Code.parseActionCode(e,t):this._parseData(e,t):null;},DM:{TYPE:"KN",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},shutter:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"position",ref:{value:"pos1"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){return[{type:this.TYPE,name:"Kaiser Nienhaus",subtypes:[{id:"Shutter",data:"shutter"},{id:"Switch",data:"switch"}]},{type:this.TYPE,name:"Gaposa",subtypes:[{id:"Shutter",data:"shutter"},{id:"Switch",data:"switch"}]}];},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.data)return null;if(e.freq&&"868"!=e.freq){var t={command:[]};if(e&&e.ircodes&&e.ircodes.codes){for(var a=0;a<e.ircodes.codes.length;a++){var n=e.ircodes.codes[a];t.command.push({type:"enum",name:n.key,ref:{value:n.key}});}return t;}return null;}return e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;if(e.freq&&"868"!=e.freq){if(e&&e.ircodes&&e.ircodes.codes){(n={type:null,commands:{},details:{commands:{}}}).type=e.data,"shutter"==n.type&&(n.type="blind");for(var r=0;r<e.ircodes.codes.length;r++){var o=e.ircodes.codes[r];n.commands[o.key]={},n.details.commands[o.key]={value:o.key};}return n;}n=null;}else switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"shutter":n={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"up"},down:{value:"down"},stop:{value:"stop"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.KN.buildQuery(null,e,t);if(!a)return null;if("Send2"==a.XC_FNC){var n="/cmd?";for(var r in a){n+=r+"="+encodeURIComponent(a[r]),n+="&";}return n;}return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=e.data,a=null;if(e.freq&&"868"!=e.freq){if(e&&e.ircodes&&e.ircodes.codes){(a={type:null,address:e.address,commands:{}}).type=e.data;for(var n=0;n<e.ircodes.codes.length;n++){var r=e.ircodes.codes[n];a.commands[r.key]={url:_getUrl(e,{value:r.key})};}return ret;}a=null;}else switch(t){case"switch":a={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"shutter":a={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"up"})},down:{url:_getUrl(e,{value:"down"})},stop:{url:_getUrl(e,{value:"stop"})}}};}return a;}}},xnm.aio.gateway.systems.DY={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e.substr(0,8);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t||!t.address||8!=t.address.length)return null;var n=t.address,r=null;return"up"==a.value?r="11":"down"==a.value?r="33":"moveUp"==a.value?r="22":"moveDown"==a.value?r="44":"stop"==a.value&&(r="55"),n+r;},_parseData:function _parseData(e,t){if(e.length<=2)return null;var a=e.substr(0,e.length-2);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(e.length-2,2)){case"11":n.value="up";break;case"33":n.value="down";break;case"22":n.value="moveUp";break;case"44":n.value="moveDown";break;case"55":n.value="stop";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"DY",MAP:{blind:{command:[{type:"enum",name:"step up",ref:{value:"up"}},{type:"enum",name:"step down",ref:{value:"down"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){return e&&["C2","C4"].includes(e.version)?[]:[{type:this.TYPE,name:"Dooya",subtypes:[{id:"Shutter",data:"shutter"},{id:"Blind",data:"blind"}]},{type:this.TYPE,name:"rohrmotor24",subtypes:[{id:"Shutter",data:"shutter"},{id:"Blind",data:"blind"}]},{type:this.TYPE,name:"Brel M",subtypes:[{id:"Shutter",data:"shutter"},{id:"Blind",data:"blind"}]},{type:this.TYPE,name:"MHZ Sonnenschutz",vendor:"mhz",subtypes:[{id:"Dooya Tubular Motor  Shutter",data:"shutter",vendor:"mhz"},{id:"Dooya Tubular Motor  Blind",data:"blind",vendor:"mhz"}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.DY.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};return e&&e.data?{type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}}:null;}}},xnm.aio.gateway.systems.NY={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4;var r={type:this.DM.TYPE};t.adr&&(r.adr=t.adr),e._executeRequest("LearnSC",r,t,function(e,r){if(e)a&&a(e);else if(r.CODE||t.adr){var o=n._resolveAddress(r.CODE?r.CODE:t.adr);a&&a(null,{sys:"aio",type:"NY",address:o,data:t.data,subtype:t.subtype});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e.substr(0,8);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t||!t.address||8!=t.address.length)return null;var n=t.address,r=null;return"moveUp"==a.value?r="22":"moveDown"==a.value?r="44":"pos"==a.value?r="66":"stop"==a.value?r="55":"on"==a.value?r="77":"off"==a.value&&(r="88"),n+r;},_parseData:function _parseData(e,t){if(e.length<=2)return null;var a=e.substr(0,e.length-2);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(e.length-2,2)){case"22":n.value="moveUp";break;case"44":n.value="moveDown";break;case"66":n.value="pos";break;case"55":n.value="stop";break;case"77":n.value="on";break;case"88":n.value="off";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"NY",MAP:{shutter:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"intermediate position",ref:{value:"pos"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},shutter2:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},light:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return[{type:this.TYPE,name:"Nobily",subtypes:[{id:"Nobily PR",data:"shutter",subtype:"PR"},{id:"Nobily PRE",data:"shutter",subtype:"PRE"},{id:"Nobily Switch",data:"switch"}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?"shutter"===e.data?"PR"==e.subtype?this.MAP.shutter2:this.MAP.shutter:this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":case"light":n={type:e.data,commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"shutter":n={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.NY.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=e.data,a=null;switch(t){case"switch":case"light":a={type:t,address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"shutter":a={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};}return a;}}},xnm.aio.gateway.systems.CL={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},null,function(e){a&&a(e);});},learn:function learn(e,t,a){if(t&&t.type){var n={type:this.DM.TYPE,deviceType:t.type};delete t.type,t.address&&(n.adr=t.address,delete t.address);t.timeout=2e4,e._executeRequest("LearnSC",n,t,function(e,t){if(e)a&&a(e);else if(t&&t.devices&&t.devices.length&&t.devices[0]){var n=t.devices[0],r={sys:"aio",type:"CL",sid:n.id,address:n.address,data:n.deviceType,typeID:n.deviceTypeId};a&&a(null,r);}else a&&a(new Error("response format invalid"));});}else a&&a(new Error("invalid argument"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){XC.debugf(a),t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,"refresh"==o?e._executeRequest(o,r,{method:"GET"},function(e){n&&n(e);}):e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t||!t.sid)return null;if(!a||!a.value)return null;var n=null;if("refresh"==a.value){if(!t.address)return null;n={XC_FNC:"refresh",type:"CL",adr:t.address};}else{var r=this._buildData(e,t,a);if(!r)return null;n={XC_FNC:"SendGenericCmd",id:t.sid,data:r};}return n;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;var n;if("position"==a.value){if(!a.ext)return null;(n={}).cmd="position",n.value={};for(var r=0;r<a.ext.length;r++){var o=a.ext[r];if(o)switch(o.value){case"top":n.value.top=parseInt(o.ext);break;case"bottom":n.value.bottom=parseInt(o.ext);}}}else if("top"==a.value){if(!a.ext)return null;(n={}).cmd="position",n.value={top:parseInt(o.ext)};}else if("bottom"==a.value){if(!a.ext)return null;(n={}).cmd="position",n.value={bottom:parseInt(o.ext)};}else n={cmd:a.value},(0==a.ext||a.ext)&&(n.value=a.ext);return n;},_parseData:function _parseData(e,t){var a=null;if(!e)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;if("object"==_typeof(e)){if(e.cmd&&(a={value:e.cmd},e.value))for(var n in a.ext=[],e.value){a.ext.push({value:n,ext:e.value[n]});}}else a={value:e};return a;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&"cl"==t.type.toLowerCase()&&t.adr&&e.address==t.adr&&t.state?t.state:null;},DM:{TYPE:"CL",MAP:{blind:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"position",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"refresh",ref:{value:"refresh"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"int",name:"battery",ref:{value:"battery",extMeta:"0-100"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:[!0,!1]}}]},venetian:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"int",name:"position",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"refresh",ref:{value:"refresh"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"lamella",extMeta:"0-100"}}]},top_down_bottom_up:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"top",ref:{value:"top",ext:"%d",extMeta:"0-100"}},{type:"int",name:"bottom",ref:{value:"bottom",ext:"%d",extMeta:"0-100"}},{type:"multi",name:"position",ref:{value:"position",ext:"%multi",extMeta:[{type:"int",name:"top",ref:{value:"top",ext:"%d",extMeta:"0-100"}},{type:"int",name:"bottom",ref:{value:"bottom",ext:"%d",extMeta:"0-100"}}]}},{type:"enum",name:"refresh",ref:{value:"refresh"}}],status:[{type:"int",name:"top",ref:{value:"top",extMeta:"0-100"}},{type:"int",name:"bottom",ref:{value:"bottom",extMeta:"0-100"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS433)return null;var a=!1;t&&t.CLMODE||(a=!0);for(var n=[{type:this.TYPE,name:"Coulisse"}],r=[{type:"Blind",name:"blind",rfmismatch:a},{type:"Venetian",name:"venetian",rfmismatch:a},{type:"Top-Down Bottom-Up",name:"top_down_bottom_up",rfmismatch:a}],o=0;o<n.length;o++){n[o].subtypes=r;}return n;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDevice(e);var n;switch(e.data){case"blind":case"venetian":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"position"}}};break;case"top_down_bottom_up":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"bottom",ext:"%d"}},states:{position:{value:"bottom"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var t;switch(e.data){case"blind":case"venetian":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}},value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveTo",value:"{val}"}},min:0,max:100,step:1}},states:{position:{min:0,max:100}}};break;case"top_down_bottom_up":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}},value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"position",value:{bottom:"{val}"}}},min:0,max:100,step:1}},states:{bottom:{min:0,max:100}}};}return t;}}},xnm.aio.gateway.systems.BL={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},null,function(e){a&&a(e);});},learn:function learn(e,t,a){if(t&&t.type){var n={type:this.DM.TYPE,deviceType:t.type};delete t.type,t.address&&(n.adr=t.address,delete t.address);t.timeout=2e4,e._executeRequest("LearnSC",n,t,function(e,t){if(e)a&&a(e);else if(t&&t.devices&&t.devices.length&&t.devices[0]){var n=t.devices[0],r={sys:"aio",type:"BL",sid:n.id,address:n.address,data:n.deviceType,typeID:n.deviceTypeId};a&&a(null,r);}else a&&a(new Error("response format invalid"));});}else a&&a(new Error("invalid argument"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,"refresh"==o?e._executeRequest(o,r,{method:"GET"},function(e){n&&n(e);}):e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},_getCurrentState:function _getCurrentState(e,t,a){if(t&&t.address){var n={adr:t.address,type:"BL"};e._executeRequest("refreshSC",n,null,function(e,t){e?a&&a(e):a&&a(null,t);});}else a&&a(new Error("device format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t||!t.sid)return null;if(!a||!a.value)return null;var n=null;if("refresh"==a.value){if(!t.address)return null;n={XC_FNC:"refresh",type:"BL",adr:t.address};}else{var r=this._buildData(e,t,a);if(!r)return null;n={XC_FNC:"SendGenericCmd",id:t.sid,data:r};}return n;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;var n;if("position"==a.value){if(!a.ext)return null;(n={}).cmd="position",n.value={};for(var r=0;r<a.ext.length;r++){var o=a.ext[r];if(o)switch(o.value){case"top":n.value.top=parseInt(o.ext);break;case"bottom":n.value.bottom=parseInt(o.ext);}}}else n={cmd:a.value},(0==a.ext||a.ext)&&(n.value=a.ext);return n;},_parseData:function _parseData(e,t){var a=null;if(!e)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;if("object"==_typeof(e)){if(e.cmd&&(a={value:e.cmd},e.value))for(var n in a.ext=[],e.value){a.ext.push({value:n,ext:e.value[n]});}}else a={value:e};return a;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&"bl"==t.type.toLowerCase()&&t.adr&&e.address==t.adr&&t.state?t.state:null;},DM:{TYPE:"BL",MAP:{blind:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"position",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"refresh",ref:{value:"refresh"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"int",name:"battery",ref:{value:"battery",extMeta:"0-100"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:[!0,!1]}}]},venetian:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"int",name:"position",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"refresh",ref:{value:"refresh"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"lamella",extMeta:"0-100"}}]},top_down_bottom_up:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"multi",name:"position",ref:{value:"position",ext:"%multi",extMeta:[{type:"int",name:"top",ref:{value:"top",ext:"%d",extMeta:"0-100"}},{type:"int",name:"bottom",ref:{value:"bottom",ext:"%d",extMeta:"0-100"}}]}},{type:"enum",name:"refresh",ref:{value:"refresh"}}],status:[{type:"int",name:"top",ref:{value:"top",extMeta:"0-100"}},{type:"int",name:"bottom",ref:{value:"bottom",extMeta:"0-100"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS433)return null;var a=!1;return t&&t.BLMODE||(a=!0),[{type:this.TYPE,name:"Brel",subtypes:[{id:"Blind",data:"blind",rfmismatch:a},{id:"Venetian",data:"venetian",rfmismatch:a},{id:"Top-Down Bottom-Up",data:"top_down_bottom_up",rfmismatch:a}]},{type:this.TYPE,name:"erfal",vendor:"erfal",subtypes:[{id:"ESM5 TD",data:"top_down_bottom_up",vendor:"erfal",rfmismatch:a}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDevice(e);var n;switch(e.data){case"blind":case"venetian":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"position"}}};break;case"top_down_bottom_up":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"bottom",ext:"%d"}},states:{position:{value:"bottom"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var t;switch(e.data){case"blind":case"venetian":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}},value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveTo",value:"{val}"}},min:0,max:100,step:1}},states:{position:{min:0,max:100}}};break;case"top_down_bottom_up":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}},value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"position",value:{bottom:"{val}"}}},min:0,max:100,step:1}},states:{bottom:{min:0,max:100}}};}return t;}}},xnm.aio.gateway.systems.ERFAL={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},null,function(e){a&&a(e);});},learn:function learn(e,t,a){if(t&&t.type){var n={type:this.DM.TYPE,deviceType:t.type};delete t.type,t.address&&(n.adr=t.address,delete t.address);t.timeout=2e4,e._executeRequest("LearnSC",n,t,function(e,t){if(e)a&&a(e);else if(t&&t.devices&&t.devices.length&&t.devices[0]){var n=t.devices[0],r={sys:"aio",type:"ERFAL",sid:n.id,address:n.address,data:n.deviceType,typeID:n.deviceTypeId};a&&a(null,r);}else a&&a(new Error("response format invalid"));});}else a&&a(new Error("invalid argument"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){XC.debugf(a),t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,"refresh"==o?e._executeRequest(o,r,{method:"GET"},function(e){n&&n(e);}):e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},_getCurrentState:function _getCurrentState(e,t,a){if(t&&t.address){var n={adr:t.address,type:"ERFAL"};e._executeRequest("refreshSC",n,null,function(e,t){e?a&&a(e):a&&a(null,t);});}else a&&a(new Error("device format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t||!t.sid)return null;if(!a||!a.value)return null;var n=null;if("refresh"==a.value){if(!t.address)return null;n={XC_FNC:"refresh",type:"ERFAL",adr:t.address};}else{var r=this._buildData(e,t,a);if(!r)return null;n={XC_FNC:"SendGenericCmd",id:t.sid,data:r};}return n;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;var n;if("position"==a.value){if(!a.ext)return null;(n={}).cmd="position",n.value={};for(var r=0;r<a.ext.length;r++){var o=a.ext[r];if(o)switch(o.value){case"top":n.value.top=parseInt(o.ext);break;case"bottom":n.value.bottom=parseInt(o.ext);}}}else n={cmd:a.value},(0==a.ext||a.ext)&&(n.value=a.ext);return n;},_parseData:function _parseData(e,t){var a=null;if(!e)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;if("object"==_typeof(e)){if(e.cmd&&(a={value:e.cmd},e.value))for(var n in a.ext=[],e.value){a.ext.push({value:n,ext:e.value[n]});}}else a={value:e};return a;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&"erfal"==t.type.toLowerCase()&&t.adr&&e.address==t.adr&&t.state?t.state:null;},DM:{TYPE:"ERFAL",MAP:{blind:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"position",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"refresh",ref:{value:"refresh",value_t:"refresh_blind_status"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"int",name:"battery",ref:{value:"battery",extMeta:"0-100"}},{type:"enum",name:"lowbat",ref:{value:"lowbat",options:[!0,!1]}}]},venetian:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"int",name:"position",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"refresh",ref:{value:"refresh",value_t:"refresh_blind_status"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"lamella",value_t:"lamellaPos",extMeta:"0-100"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS433)return null;var a=!1;return t&&t.CLMODE||(a=!0),[{type:this.TYPE,name:"erfal",subtypes:[{id:"Auenjalousie eAccu",data:"venetian",rfmismatch:a},{id:"Basic Line eAccu",data:"venetian",rfmismatch:a},{id:"L Trgerprofil Doppelrollo eAccu",data:"blind",rfmismatch:a},{id:"L Trgerprofil eAccu",data:"blind",rfmismatch:a},{id:"L-Basis eAccu",data:"blind",rfmismatch:a},{id:"L-Kassette E102 eAccu",data:"blind",rfmismatch:a},{id:"Lamelle 24V eAccu",data:"venetian",rfmismatch:a},{id:"M Trgerprofil eAccu",data:"blind",rfmismatch:a},{id:"M-Basis eAccu",data:"blind",rfmismatch:a},{id:"M-Kassette R76 E77 eAccu",data:"blind",rfmismatch:a},{id:"Maxi Line Plus eAccu",data:"venetian",rfmismatch:a},{id:"MegaView eAccu",data:"venetian",rfmismatch:a},{id:"Motorschiene 9500 eAccu",data:"blind",rfmismatch:a},{id:"Raffrollo eAccu",data:"blind",rfmismatch:a},{id:"Rollo ER1/ER2 eAccu",data:"blind",rfmismatch:a},{id:"Plissee eAccu",data:"blind",rfmismatch:a},{id:"VDA eAccu",data:"blind",rfmismatch:a},{id:"XL-Basis eAccu",data:"blind",rfmismatch:a},{id:"XL-Kassette E117 R122 eAccu",data:"blind",rfmismatch:a},{id:"XL-Trgerprofil eAccu",data:"blind",rfmismatch:a}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDevice(e);var n;switch(e.data){case"blind":case"venetian":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"position"}}};break;case"top_down_bottom_up":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"bottom",ext:"%d"}},states:{position:{value:"bottom"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var t;switch(e.data){case"blind":case"venetian":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}},value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveTo",value:"{val}"}},min:0,max:100,step:1}},states:{position:{min:0,max:100}}};break;case"top_down_bottom_up":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}},value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"position",value:{bottom:"{val}"}}},min:0,max:100,step:1}},states:{bottom:{min:0,max:100}}};}return t;}}},xnm.aio.gateway.systems.AN={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e.substr(0,8);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t||!t.address||8!=t.address.length)return null;var n=t.address,r=null;return"on"==a.value?r="00":"off"==a.value&&(r="10"),n+r;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<10||!t||!t.address)return null;var a=e.substr(8,2),n={},r=e.substr(0,8).toUpperCase();return t.address.toUpperCase()!=r||"motion"!==t.data?null:("00"==a?n.value="motion":"10"==a&&(n.value="off"),n);},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a,n=t.address;if("motion"===t.data)"motion"==e.value?a="00":"off"==e.value&&(a="10");return n&&a?n+a:null;},_parseData:function _parseData(e,t){if(e.length<=2)return null;var a=e.substr(0,e.length-2);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(e.length-2,2)){case"00":n.value="on";break;case"10":n.value="off";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"AN",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},shutter:{command:[{type:"enum",name:"up",ref:{value:"on"}},{type:"enum",name:"down",ref:{value:"off"}}]},motion:{event:[{type:"enum",name:"motion",ref:{value:"motion"}},{type:"enum",name:"off",ref:{value:"off"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return[{type:this.TYPE,name:"Avidsen",subtypes:[{id:"Switch",data:"switch"},{id:"Motion",data:"motion"}]},{type:this.TYPE,name:"blyss",subtypes:[{id:"Shutter",data:"shutter"}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"shutter":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"on"},down:{value:"off"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.AN.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"on"})},down:{url:_getUrl(e,{value:"off"})}}};}return t;}}},xnm.aio.gateway.systems.UR={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e.substr(0,5);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t||!t.address||5!=t.address.length)return null;var n=t.address,r=null;return"moveUp"==a.value||"up"==a.value?r="1":"moveDown"==a.value||"down"==a.value?r="4":"stop"==a.value&&(r="2"),n+r;},_parseData:function _parseData(e,t){if(e.length<=1)return null;var a=e.substr(0,e.length-1);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(e.length-1,1)){case"1":n.value="moveUp";break;case"4":n.value="moveDown";break;case"2":n.value="stop";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"UR",MAP:{shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);return t&&!t.SUPPORTS868?null:[{type:this.TYPE,name:"Uniroll"},{type:this.TYPE,name:"Bauer"}];},getCommandStatusMap:function getCommandStatusMap(e){return this.MAP.shutter;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.UR.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};return e&&e.data?{type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}}:null;}}},xnm.aio.gateway.systems.SL={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){var t=e,a=parseInt(t.substr(3,2),16)>>2;return 0==(15&a)||8==(15&a)?a+=2:14==(15&a)&&(a-=3),a<<=2,t.substr(0,3)+this._getHexVal(a,2);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t||!t.address||5!=t.address.length)return null;var n=t.address,r=parseInt(n.substr(3,2),16)>>2;"on"==a.value||"moveUp"==a.value||"up"==a.value||"off"!=a.value&&"moveDown"!=a.value&&"down"!=a.value||(11==(15&r)?r+=3:10!=(15&r)&&2!=(15&r)||(r-=2)),r<<=2;var o=n.substr(0,3)+this._getHexVal(r,2)+"0";return"moveUp"!=a.value&&"moveDown"!=a.value||(o+="15"),"up"!=a.value&&"down"!=a.value||(o+="0A"),o;},_parseData:function _parseData(e,t){if(e.length<=5)return null;var a=e.substr(0,3);if(t.address.substr(0,3).toUpperCase()!=a.toUpperCase())return null;var n=!1,r=!1;"15"==e.substr(e.length-2,2)&&(n=!0),"0A"==e.substr(e.length-2,2)&&(r=!0);var o=!1,s={};return e.substr(0,5).toUpperCase()==t.address.toUpperCase()&&(o=!0),s.value=o?n?"moveUp":r?"up":"on":n?"moveDown":r?"down":"off",s.value?s:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},_getHexVal:xnm.aio.gateway.Util.getHexVal,DM:{TYPE:"SL",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},blind:{command:[{type:"enum",name:"step up",ref:{value:"on"}},{type:"enum",name:"step down",ref:{value:"off"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}}]},shutter:{command:[{type:"enum",name:"move up",ref:{value:"up"}},{type:"enum",name:"move down",ref:{value:"down"}}]},shutter12:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}}]},awning:{command:[{type:"enum",name:"move in",ref:{value:"up"}},{type:"enum",name:"move out",ref:{value:"down"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t={type:this.TYPE,name:"Siral",subtypes:[]};return t.subtypes.push({id:"Switch",data:"switch"}),t.subtypes.push({id:"Dimmer",data:"dimmer"}),t.subtypes.push({id:"Blind",data:"blind"}),t.subtypes.push({id:"Shutter",data:"shutter"}),t.subtypes.push({id:"Shutter (12V)",data:"shutter12"}),t.subtypes.push({id:"Awning",data:"awning"}),t;},getCommandStatusMap:function getCommandStatusMap(e){return e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"dimmer":n={type:"dimmer",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"blind":case"shutter12":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"}}}};break;case"shutter":case"awning":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"up"},down:{value:"down"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.SL.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"blind":case"shutter12":t={type:"blind",address:e.address,commands:{on:{url:_getUrl(e,{value:"moveUp"})},off:{url:_getUrl(e,{value:"moveDown"})}}};break;case"shutter":case"awning":t={type:"blind",address:e.address,commands:{on:{url:_getUrl(e,{value:"up"})},off:{url:_getUrl(e,{value:"down"})}}};}return t;}}},xnm.aio.gateway.systems.KOPP={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){if(e){var n,r=[],o=this;if(t&&t.devices)for(n=t.devices.length;n--;){t.devices[n]&&t.devices[n].address&&r.push(t.devices[n].address);}switch(t?t.type:null){case"switch":case"dimmer":case"shutter":this._learnActuator(e,r,a);break;case"contact":case"motion":case"smoke":case"sensor":case"button2":case"button4":this._learnSensor(e,function(t,n){t?a&&a(t):o._addSensor(e,n.address,function(e){a&&a(e,{address:n.address});});});}}else a&&a(new Error("gateway is null"));},_addSensor:function _addSensor(e,t,a){e._executeRequest("AddSensor",{type:this.DM.TYPE,adr:t.substr(0,4)},{timeout:2e4},function(e){a&&a(e);});},_learnActuator:function _learnActuator(e,t,a){var n=this._generateFreeAdr(t),r=n+"30CC0F03",o=n+"20CC0F03",s=this,i="SendSC",u={timeout:2e4};e._executeRequest(i,{type:this.DM.TYPE,data:r},u,function(t){t?a&&a(t):setTimeout(function(){e._executeRequest(i,{type:s.DM.TYPE,data:o},u,function(e){a&&a(e,{address:n+"1003"});});},1e3);});},_learnSensor:function _learnSensor(e,t){e._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2e4},function(e,a){if(e)t&&t(e);else if(a.CODE&&18==a.CODE.length){var n=a.CODE;t&&t(null,{address:n.substr(2,4)+"00"+n.substr(14,2)});}else t&&t(new Error("response format invalid"));});},learnDimmerStep2:function learnDimmerStep2(e,t,a){if(t){var n=t.substr(0,4)+"00CC0F03";e._executeRequest("SendSC",{type:this.DM.TYPE,data:n},{timeout:2e4},function(e){a&&a(e,{address:t.substr(0,4)+"1003"});});}else a&&a(new Error("dimmer address invalid"));},_generateFreeAdr:function _generateFreeAdr(e){for(var t,a=!1;!a;){t=this._getHexVal(Math.floor(58624*Math.random()+4096),4),a=!this._contains(e,t);}return t;},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(t&&t.address&&8==t.address.length){var n,r=t.address.substr(0,4),o=t.address.substr(6);if("on"==a.value)n="30";else if("off"==a.value)n="20";else if("stopDim"==a.value||"stop"==a.value)n="FF";else if("startDim"==a.value)n="80";else if("dimTo"==a.value)return r+"00"+this._getHexVal(parseInt(a.ext),2)+"0F10";return r+n+"CC0F"+o;}},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"kopp"!=t.type.toLowerCase())return null;if(!t.adr)return null;if(!t.state)return null;if(e.address.substr(0,4).toLowerCase()!=t.adr.toLowerCase())return null;var a=t.state;t.state.indexOf(":")>0&&(a=t.state.split(":")[0]);switch(e.data){case"contact":if("10"==a)return{contactState:"closed"};if("20"==a)return{contactState:"open"};break;case"motion":if("10"==a)return{state:"motion"};if("20"==a)return{state:"ok"};break;case"smoke":if("10"==a)return{state:"fire"};if("20"==a)return{state:"ok"};break;case"sensor":if("10"==a)return{state:"on"};if("20"==a)return{state:"off"};break;case"button2":case"button4":return"00"==a?{press:"channel1"}:"10"==a?{press:"channel2"}:"20"==a?{press:"channel3"}:"30"==a?{press:"channel4"}:null;default:return null;}},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<10||!e)return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE||!e.address)return null;var a=t.data.substr(2,4),n=t.data.substr(8,2);return e.address.substr(0,4).toUpperCase()!=a.toUpperCase()?null:"button2"==e.data||"button4"==e.data?"00"==n?{press:"channel1"}:"10"==n?{press:"channel2"}:"20"==n?{press:"channel3"}:"30"==n?{press:"channel4"}:null:this._handleState(e,{type:this.DM.TYPE,adr:a.toUpperCase(),state:n.toUpperCase()+":00"});},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<12||!t||!t.address)return null;var a=e.substr(0,4)+"00"+e.substr(10,2);if((t.address.substr(0,4)+"00"+t.address.substr(6)).toUpperCase()!=a.toUpperCase())return null;var n=e.substr(4,2),r={};switch(t.data){case"button2":case"button4":switch(n){case"00":r.value="press1";break;case"10":r.value="press2";break;case"20":r.value="press3";break;case"30":r.value="press4";}break;default:var o=this._handleState(t,{type:this.DM.TYPE,adr:e.substr(0,4),state:n+":00"});if(r)if("contact"===t.data)r.value=o.contactState;else r.value=o.state;}return r.value?r:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!e||!e.value||!t||!t.address||t.address<8)return null;var a,n=t.address.substr(0,4).toUpperCase(),r=t.address.substr(6).toUpperCase();switch(t.data){case"contact":"open"==e.value?a="20":"closed"==e.value&&(a="10");break;case"smoke":"fire"==e.value?a="10":"ok"==e.value&&(a="20");break;case"motion":"motion"==e.value?a="10":"ok"==e.value&&(a="20");break;case"sensor":"on"==e.value?a="10":"off"==e.value&&(a="20");break;case"button2":case"button4":"press1"==e.value?a="00":"press2"==e.value?a="10":"press3"==e.value?a="20":"press4"==e.value&&(a="30");}return a?n+a+"CC0F"+r:null;},_parseData:function _parseData(e,t){if(e.length<12)return null;var a=e.substr(0,4)+e.substr(10,2);if((t.address.substr(0,4)+t.address.substr(6,2)).toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(4,2).toUpperCase()){case"30":n.value="on";break;case"20":n.value="off";break;case"FF":n.value="stopDim";break;case"80":n.value="startDim";break;case"00":n.value="dimTo",n.ext=parseInt(e.substr(6,2),16);}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"KOPP",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"start dim",ref:{value:"startDim"}},{type:"enum",name:"stop dim",ref:{value:"stopDim"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}}]},shutter:{command:[{type:"enum",name:"up",ref:{value:"on"}},{type:"enum",name:"down",ref:{value:"off"}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"contactState",options:["open","closed"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"contactState",options:["open","closed"]}}]},motion:{status:[{type:"enum",name:"state",ref:{value:"state",options:["motion","ok"]}}],event:[{type:"enum",name:"motion",ref:{value:"motion"}},{type:"enum",name:"ok",ref:{value:"ok"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["motion","ok"]}}]},smoke:{status:[{type:"enum",name:"state",ref:{value:"state",options:["fire","ok"]}}],event:[{type:"enum",name:"fire",ref:{value:"fire"}},{type:"enum",name:"ok",ref:{value:"ok"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["fire","ok"]}}]},sensor:{status:[{type:"enum",name:"state",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["off","on"]}}]},button2:{event:[{type:"enum",name:"press 1.ch",ref:{value:"press1"}},{type:"enum",name:"press 2.ch",ref:{value:"press2"}}],ipevt:[{type:"enum",name:"press",ref:{value:"press",options:["channel1","channel2"]}}]},button4:{event:[{type:"enum",name:"press 1.ch",ref:{value:"press1"}},{type:"enum",name:"press 2.ch",ref:{value:"press2"}},{type:"enum",name:"press 3.ch",ref:{value:"press3"}},{type:"enum",name:"press 4.ch",ref:{value:"press4"}}],ipevt:[{type:"enum",name:"press",ref:{value:"press",options:["channel1","channel2","channel3","channel4"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS868)return null;var a={type:this.TYPE,name:"Kopp",subtypes:[]};a.subtypes.push({id:"Switch",data:"switch"}),a.subtypes.push({id:"Dimmer",data:"dimmer"}),a.subtypes.push({id:"Shutter",data:"shutter"});var n=!1;return t&&t.KOPPMODE||(n=!0),a.subtypes.push({id:"Contact Sensor",data:"contact",rfmismatch:n}),a.subtypes.push({id:"Motion Detector",data:"motion",rfmismatch:n}),a.subtypes.push({id:"Smoke Detector",data:"smoke",rfmismatch:n}),a.subtypes.push({id:"2 Channel Button",data:"button2",rfmismatch:n}),a.subtypes.push({id:"4 Channel Button",data:"button4",rfmismatch:n}),a.subtypes.push({id:"General Sensor",data:"sensor",rfmismatch:n}),a;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e){return e.data&&this.MAP[e.data]?{ipevt:this.MAP[e.data].ipevt}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.KOPP.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"dimmer":n={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100}}},details:{commands:{on:{value:"on"},off:{value:"off"},brightness:{value:"dimTo",ext:"%d",extMeta:"0-100"}}}};break;case"shutter":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"on"},down:{value:"off"}}}};break;case"contact":n={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"contactState"}}}};break;case"motion":n={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"state",conv_s:{motion:"on",ok:"off"}}}}};break;case"smoke":n={type:"smoke",states:{smoke:{values:["on","off"]}},details:{states:{smoke:{value:"state",conv_s:{fire:"on",ok:"off"}}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.KOPP.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},up:{url:_getUrl(e,{value:"dimUp"})},down:{url:_getUrl(e,{value:"dimDown"})},value:{url:null,min:0,max:100,step:1,hex:2}}};var a=_getUrl(e,{value:"off"});a=a.substr(0,a.length-8)+"00{val}0F10",t.commands.value.url=a;break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"on"})},down:{url:_getUrl(e,{value:"off"})}}};}return t;}}},xnm.aio.gateway.systems.HE={learn:function learn(e,t,a){t||(t={});var n=this;t.timeout=2e4,e._executeRequest("LearnSC",{type:this.DM.TYPE},t,function(t,r){if(t)a&&a(t);else if(r.CODE){var o=n._resolveAddress(r.CODE);n.regist(e,{address:o},function(e){a&&a(e,{address:o});});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){var t=e,a=parseInt(t.substr(10,2),16),n=(a&=0==(24&a)?-7:-4).toString(16).toUpperCase();return n.length<2&&(n="0"+n),t.substr(0,10)+n+t.substr(12,2);},regist:function regist(e,t,a){if(t&&t.address){var n=t.address.replace(/\./g,""),r={type:this.DM.TYPE,adr:n};e._executeRequest("addSensor",r,null,function(e){a&&a(e);});}else a&&a(new Error("regist device option foramt invalid"));},delSensor:function delSensor(e,t,a){var n={type:this.DM.TYPE,adr:t};e._executeRequest("delSensor",n,null,function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(t&&t.address&&14==t.address.length){var n=parseInt(t.address.substr(10,2),16);0==(24&n)?(n&=-7,"on"==a.value?n|=4:"off"==a.value&&(n|=2)):(n&=-4,"on"==a.value?n|=2:"off"==a.value&&(n|=1));var r=n.toString(16).toUpperCase();return r.length<2&&(r="0"+r),t.address.substr(0,10)+r+t.address.substr(12,2);}},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"he"!=t.type.toLowerCase())return null;if(!t.adr)return null;if(!t.state)return null;if(e.address.replace(/\./g,"").toLowerCase()!=t.adr.toLowerCase())return null;var a,n=t.state;if(t.state.indexOf(":")>0&&(n=(a=t.state.split(":"))[0]),n=parseInt(a[0],16),0==(24&parseInt(e.address.substr(10,2),16)))return 4&n?{state:"open"}:2&n?{state:"closed"}:null;var r={};switch(e.data){case"switch":case"motion":2&n?r.state="on":1&n&&(r.state="off");break;case"shutter":case"contact":2&n?r.state="open":1&n&&(r.state="closed");break;default:return null;}return r.state?r:null;},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<14||!e)return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE||!e.address)return null;var a=parseInt(t.data.substr(10,2),16);a&=0==(24&a)?-7:-4;var n=t.data.substr(0,10)+xnm.aio.gateway.Util.getHexVal(a,2)+t.data.substr(12,2),r=t.data.substr(10,2);return e.address.toUpperCase()!=n.toUpperCase()?null:this._handleState(e,{type:this.DM.TYPE,adr:n.toUpperCase(),state:r.toUpperCase()+":00"});},parseTriggerCode:function parseTriggerCode(e,t){if(!e||14!=e.length||!t||!t.address)return null;var a=this._handleUdpState(t,{type:this.DM.TYPE,data:e});return a&&a.state?{value:a.state}:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!e||!e.value||!t||!t.address||t.address<14)return null;var a=parseInt(t.address.substr(10,2),16),n=e.value;0==(24&a)?(a&=-7,"open"==n?a|=4:"closed"==n&&(a|=2)):(a&=-4,"on"==n||"open"==n?a|=2:"off"!=n&&"closed"!=n||(a|=1));var r=a.toString(16).toUpperCase();return r.length<2&&(r="0"+r),t.address.substr(0,10)+r+t.address.substr(12,2);},_parseData:function _parseData(e,t){if(e.length<14)return null;var a=e.substr(0,10)+e.substr(12,2);if((t.address.substr(0,10)+t.address.substr(12,2)).toUpperCase()!=a.toUpperCase())return null;var n=e.substr(0,14),r=this._buildData(null,t,{value:"on"});if(r&&r.toUpperCase()==n.toUpperCase())return{value:"on"};var o=this._buildData(null,t,{value:"off"});return o&&o.toUpperCase()==n.toUpperCase()?{value:"off"}:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e)+"FF";},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"HE",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},shutter:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},motion:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"HOME easy",subtypes:[]};return e.subtypes.push({id:"Switch",data:"switch"}),e.subtypes.push({id:"Shutter",data:"shutter"}),e.subtypes.push({id:"Motion Detector",data:"motion"}),e.subtypes.push({id:"Contact Sensor",data:"contact"}),e;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e){if(!e||!e.data)return null;var t=e.data,a=this.MAP[t];return a?{ipevt:a.ipevt}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.HE.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"}},states:{state:{value:"state"}}}};break;case"shutter":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"on"},down:{value:"off"}}}};break;case"motion":n={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"state"}}}};break;case"contact":n={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"state"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.HE.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"on"})},down:{url:_getUrl(e,{value:"off"})}}};}return t;}}},xnm.aio.gateway.systems.GV={learn:function learn(e,t,a){var n={type:this.DM.TYPE};e._executeRequest("LearnSC",n,{timeout:2e4},function(e,t){e?a&&a(e):t.CODE?a&&a(null,{address:t.CODE}):a&&a(new Error("response format invalid"));});},_handleUdpState:function _handleUdpState(e,t){return t&&t.data&&e&&e.type&&e.type.toUpperCase()==this.DM.TYPE&&e.address?e.address.toUpperCase()!=t.data.toUpperCase()?null:{state:"fire"}:null;},parseTriggerCode:function parseTriggerCode(e,t){return e&&t&&t.address?t.address.toUpperCase()!=e.toUpperCase()?null:{value:"fire"}:null;},generateTriggerCode:function generateTriggerCode(e,t){return e&&e.value&&t&&t.address?"fire"!=e.value?null:t.address.toUpperCase():null;},DM:{TYPE:"GV",MAP:{smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["fire"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"GEV FSR 4160"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP.smoke;},getIPevtMap:function getIPevtMap(e){return{ipevt:this.MAP.smoke.ipevt};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));}}},xnm.aio.gateway.systems.MX={learn:function learn(e,t,a){var n={type:this.DM.TYPE};e._executeRequest("LearnSC",n,{timeout:2e4},function(e,t){e?a&&a(e):t.CODE?a&&a(null,{address:t.CODE}):a&&a(new Error("response format invalid"));});},_handleUdpState:function _handleUdpState(e,t){return t&&t.data&&e&&e.type&&e.type.toUpperCase()==this.DM.TYPE&&e.address?e.address.toUpperCase()!=t.data.toUpperCase()?null:{state:"fire"}:null;},parseTriggerCode:function parseTriggerCode(e,t){return e&&t&&t.address?t.address.toUpperCase()!=e.toUpperCase()?null:{value:"fire"}:null;},generateTriggerCode:function generateTriggerCode(e,t){return e&&e.value&&t&&t.address?"fire"!=e.value?null:t.address.toUpperCase():null;},DM:{TYPE:"MX",MAP:{smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["fire"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"REV Minimax"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP.smoke;},getIPevtMap:function getIPevtMap(e){return{ipevt:this.MAP.smoke.ipevt};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));}}},xnm.aio.gateway.systems.ELRO={learn:function learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2e4},function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);r?a&&a(null,{address:r}):a&&a(new Error("gateway return code format invalid"));}else a&&a(new Error("response format invalid"));});},addSensor:function addSensor(e,t,a){t=t.substr(0,t.length-1)+"0",e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},delSensor:function delSensor(e,t,a){t=t.substr(0,t.length-1)+"0",e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},_resolveAddress:function _resolveAddress(e){return 6==e.length?e.substr(0,5)+"1":e;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(8==t.address.length)return null;var n;switch(a.value){case"on":n="1";break;case"off":n="4";break;default:return null;}return t.address.substr(0,5)+n;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"elro"!=t.type.toLowerCase())return null;if(!t.adr)return null;if(!t.state)return null;if(!e||!e.address)return null;if(e.address.substr(0,5).toLowerCase()!=t.adr.substr(0,5).toLowerCase())return null;if("smoke"==e.data)return null;var a;t.state.indexOf(":")>0&&(n=(a=t.state.split(":"))[0]);var n=parseInt(a[0],16);switch(n){case 1:return{state:"on"};case 0:return{state:"off"};default:return null;}},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<6||!e)return null;if(!e.address||e.address.length<5||!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;var a=t.data.substr(0,5),n=t.data.substr(5,1);if(a!=e.address.substr(0,5))return null;if("smoke"==e.data)return{fire:"true"};switch(n){case"1":return{state:"on"};case"4":return{state:"off"};default:return null;}},parseTriggerCode:function parseTriggerCode(e,t){return e&&t&&t.address?t.address.toUpperCase()!=e.toUpperCase()?null:{value:"fire"}:null;},generateTriggerCode:function generateTriggerCode(e,t){return e&&e.value&&t&&t.address?"fire"!=e.value?null:t.address.toUpperCase():null;},_parseData:function _parseData(e,t){if(e.length<6)return null;var a=e.substr(0,5);if(t.address.substr(0,5).toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(5,1)){case"1":n.value="on";break;case"4":n.value="off";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"ELRO",MAP:{actuator:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},smoke:{event:[{type:"enum",name:"fire",ref:{value:"fire"}}],ipevt:[{type:"enum",name:"fire",ref:{value:"fire",options:["true"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"ELRO",subtypes:[]};e.subtypes.push({id:"Switch",data:"switch"}),e.subtypes.push({id:"Dimmer",data:"dimmer"}),e.subtypes.push({id:"Shutter",data:"shutter"}),e.subtypes.push({id:"ELRO RM150RF",data:"smoke"});var t={type:this.TYPE,name:"Flamingo FA20-RF",subtypes:[]};t.subtypes.push({id:"Smoke Detector",data:"smoke"});var a={type:this.TYPE,name:"mumbi RMF",subtypes:[]};return a.subtypes.push({id:"Smoke Detector",data:"smoke"}),[e,t,a];},getCommandStatusMap:function getCommandStatusMap(e){if(!e)return null;switch(e.data){case"switch":case"dimmer":case"shutter":return JSON.parse(JSON.stringify(this.MAP.actuator));case"smoke":return this.MAP.smoke;default:return null;}},getIPevtMap:function getIPevtMap(e){if(!e||!e.data)return null;var t;switch(e.data){case"switch":case"dimmer":case"shutter":t=JSON.parse(JSON.stringify(this.MAP.actuator));break;case"smoke":t=this.MAP.smoke;break;default:return null;}return{ipevt:t.ipevt};},createDevice:function createDevice(e,t,a,n){var r=xnm.aio.gateway.DM.DMError,o=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(e.address){if(e.data){var s=JSON.parse(JSON.stringify(e));n&&xnm.aio.gateway.systems.ELRO.addSensor(n,e.address,function(){}),a(null,s);}else a(new r(o.INVALID,"parameter data is invalid"));}else a(new r(o.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a,n){var r=xnm.aio.gateway.DM.DMError,o=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(e.address){if(e.data){var s=JSON.parse(JSON.stringify(e));n&&xnm.aio.gateway.systems.ELRO.addSensor(n,e.address,function(){}),a(null,s);}else a(new r(o.INVALID,"parameter data is invalid"));}else a(new r(o.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.ELRO.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"}},states:{state:{value:"state"}}}};break;case"dimmer":n={type:"dimmer",commands:{on:{},off:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"}},states:{state:{value:"state"}}}};break;case"shutter":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"on"},down:{value:"off"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.ELRO.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"on"})},down:{url:_getUrl(e,{value:"off"})}}};}return t;}}},xnm.aio.gateway.systems.CR={learn:function learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(e,t){if(e)a&&a(e);else if(t.CODE){if(6!=t.CODE.length){var r=n._resolveAddress(t.CODE);r?a&&a(null,{address:r}):a&&a(new Error("gateway return code format invalid"));}else{var o=xnm.aio.gateway.systems.MC._resolveAddress(t.CODE);a&&a(null,{address:o,type:xnm.aio.gateway.systems.MC.DM.TYPE});}}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){var t=e,a=t.charAt(0);this._isOffCommand(e)&&(a=(parseInt(a,16)-1).toString(16).toUpperCase());return a+t.substr(1);},_isOffCommand:function _isOffCommand(e){var t=e,a=t.charAt(0);return"1"!=t.charAt(1)&&("7"==a||"A"==a||"1"==a||"4"==a)||"1"==t.charAt(1)&&"7"!=a&&"A"!=a&&"1"!=a&&"4"!=a;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;if(!a)return null;var n=t.address;if("dim"==a.value)n+="0A";else if("off"==a.value){var r=parseInt(n.charAt(0),16)+1;n=r.toString(16).toUpperCase()+n.substr(1);}return n;},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<6||!e)return null;if(!e.address||e.address.length<6||!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;if((6==t.data.length?xnm.aio.gateway.systems.MC._resolveAddress(t.data):this._resolveAddress(t.data)).toLowerCase()!=e.address.toLowerCase())return null;var a=this._isOffCommand(t.data);switch(e.data){case"contact":return{state:a?"closed":"open"};case"motion":return{state:a?"off":"motion"};default:return null;}},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<8||!t||!t.address||t.address.length<8)return null;var a=e.charAt(0),n="on";("1"!=e.charAt(1)&&("7"==a||"A"==a||"1"==a||"4"==a)||"1"==e.charAt(1)&&"7"!=a&&"A"!=a&&"1"!=a&&"4"!=a)&&(a=(parseInt(a,16)-1).toString(16).toUpperCase(),n="off");if((a+e.substr(1)).toUpperCase()!=t.address.toUpperCase())return null;var r={};switch(t.data){case"contact":switch(n){case"on":r.value="open";break;case"off":r.value="closed";}break;case"motion":switch(n){case"on":r.value="motion";break;case"off":r.value="off";}}return r.value?r:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a;switch(t.data){case"contact":switch(e.value){case"open":a="on";break;case"closed":a="off";}break;case"motion":switch(e.value){case"motion":a="on";break;case"off":a="off";}}if(!a)return null;var n=t.address;if("off"==a){var r=parseInt(n.charAt(0),16)+1;n=r.toString(16).toUpperCase()+n.substr(1);}return n;},_parseData:function _parseData(e,t){if(e.length<6)return null;var a=e.substr(1,7);return t.address.substr(1,7).toUpperCase()!=a.toUpperCase()?null:10==e.length?{value:"dim"}:e.toUpperCase()==t.address.toUpperCase()?{value:"on"}:{value:"off"};},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"CR",MAP:{general:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",name:"dim",ref:{value:"dim"}}]},blind:{command:[{type:"enum",name:"down",ref:{value:"on"}},{type:"enum",name:"up",ref:{value:"off"}}]},contact:{event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},motion:{event:[{type:"enum",name:"motion",ref:{value:"motion"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["motion","off"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"RSL",subtypes:[]};return e.subtypes.push({id:"General",data:"general"}),e.subtypes.push({id:"Switch",data:"switch"}),e.subtypes.push({id:"Dimmer",data:"dimmer"}),e.subtypes.push({id:"Blind",data:"blind"}),e.subtypes.push({id:"Contact Sensor",data:"contact"}),e.subtypes.push({id:"Motion Detector",data:"motion"}),e;},getCommandStatusMap:function getCommandStatusMap(e){if(!e)return null;switch(e.data){case"dimmer":case"blind":case"contact":case"motion":return this.MAP[e.data];default:return this.MAP.general;}},getIPevtMap:function getIPevtMap(e){if(!e||!e.data)return null;var t=this.MAP[e.data];return t?{ipevt:t.ipevt}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"blind":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"off"},down:{value:"on"}}}};break;case"dimmer":break;case"general":case"switch":n={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.CR.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"dimmer":break;case"general":case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"blind":t={type:"blind",commands:{up:{url:_getUrl(e,{value:"off"})},down:{url:_getUrl(e,{value:"on"})}}};}return t;}}},xnm.aio.gateway.systems.MC={learn:function learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);r?a&&a(null,{address:r}):a&&a(new Error("gateway return code format invalid"));}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return 6==e.length?e.substr(0,5):null;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;if(!a)return null;var n=t.address;return"on"==a.value?n+="5":n+="4",n;},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||!e)return null;if(!e.address||!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;var a=this._resolveAddress(t.data);return a.toLowerCase()!=e.address.toLowerCase()?null:"5"==t.data.substr(a.length)?{state:"on"}:{state:"off"};},parseTriggerCode:function parseTriggerCode(e,t){return!e||e.length<6||!t||!t.address||t.address.length<5||e.substr(0,5).toUpperCase()!=t.address.toUpperCase()?null:"5"==e.charAt(5)?{value:"on"}:{value:"off"};},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a=t.address;return"on"==e.value?a+="5":a+="4",a;},_parseData:function _parseData(e,t){if(e.length<6)return null;var a=e.substr(0,5);return t.address.toUpperCase()!=a.toUpperCase()?null:"5"==e.charAt(5)?{value:"on"}:{value:"off"};},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"MC",MAP:{general:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Multi Comfort"};},getCommandStatusMap:function getCommandStatusMap(e){return e?this.MAP.general:null;},getIPevtMap:function getIPevtMap(e){return{ipevt:this.MAP.general.ipevt};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.MC.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;e.data;return{type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};}}},xnm.aio.gateway.systems.EO={teach:function teach(e,t,a){var n=[];if(t)for(var r=0;r<t.length;r++){t[r].address&&n.push(t[r].address);}var o=this._generateFreeAdr(n),s={type:this.DM.TYPE,data:"F610"+o+"05"};e._executeRequest("SendSC",s,null,function(e){a&&a(e,{address:o});});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;if(!a||!a.value)return null;var n="00",r="";return"on"==(a=a.value)||"dimUp"==a||"up"==a||"holdOn"==a?n="10":"off"!=a&&"dimDown"!=a&&"down"!=a&&"holdOff"!=a||(n="30"),"on"==a||"off"==a?r="05":"up"==a||"down"==a?r="0E":"dimUp"!=a&&"dimDown"!=a||(r="28"),"F6"+n+t.address+r;},_generateFreeAdr:function _generateFreeAdr(e){for(var t,a=!1;!a;){t="FF80"+this._getHexVal(Math.floor(61166*Math.random())+4369,4),a=!this._contains(e,t);}return t;},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,_parseData:function _parseData(e,t){if(e.length<6)return null;var a=e.substr(4,e.length-6);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n=e.substr(2,2),r={},o="";switch(e.length>t.address.length+4&&(o=e.substr(e.length-2,2)),(n+o).toUpperCase()){case"1005":r.value="on";break;case"3005":r.value="off";break;case"100E":r.value="up";break;case"300E":r.value="down";break;case"1028":r.value="dimUp";break;case"3028":r.value="dimDown";break;case"10":r.value="holdOn";break;case"30":r.value="holdOff";break;case"00":r.value="stop";}return r.value?r:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"EO",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"hold on",ref:{value:"holdOn"}},{type:"enum",name:"hold off",ref:{value:"holdOff"}},{type:"enum",name:"release",ref:{value:"stop"}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"hold up",ref:{value:"holdOn"}},{type:"enum",name:"hold down",ref:{value:"holdOff"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},shutter:{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move down",ref:{value:"holdOff"}},{type:"enum",name:"move up",ref:{value:"holdOn"}}]},blind:{command:[{type:"enum",name:"move up",ref:{value:"holdOn"}},{type:"enum",name:"move down",ref:{value:"holdOff"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS868)return null;var a={type:this.TYPE,name:"EnOcean (embedded)",subtypes:[]};return a.subtypes.push({id:"Switch",data:"switch"}),a.subtypes.push({id:"Dimmer",data:"dimmer"}),a.subtypes.push({id:"Shutter",data:"shutter"}),a.subtypes.push({id:"Blind",data:"blind"}),a;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));}}},xnm.aio.gateway.systems.ENOCEAN={addSensor:function addSensor(e,t,a){if(t&&t.data&&t.vendor){if(e._isV6()){var n="addSensor",r={type:this.DM.TYPE,data:t.data,vendor:t.vendor};t.address&&(r.adr=t.address),t.senderID&&(r.senderID=t.senderID),e._executeRequest(n,r,{timeout:2e4},function(e,n){!e&&n&&(n.sys="aio",n.vendor||(n.vendor=t.vendor)),a&&a(e,n);});}else{n="AddEnoceanDevice";e._executeRequestV5_Post(n,t,{timeout:2e4},function(e,t){a&&a(e,t);});}}else a&&a(new Error("device format error"));},updateSensor:function updateSensor(e,t,a,n){if(t){if(a&&a.data&&a.vendor){var r={address:t,device:a};e._executeRequestV5_Post("UpdateEnoceanDevice",r,{timeout:2e4},function(e,t){n&&n(e,t);});}else n&&n(new Error("device format error"));}else n&&n(new Error("address invalid"));},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,address:t},{timeout:2e4},function(e){a&&a(e);});},teachin:function teachin(e,t,a){if(t&&t.data){var n=t;e._executeRequest("TeachinEnocean",n,{timeout:2e4},function(e,t){e?a&&a(e):a&&a(null,t);});}else a&&a(new Error("data is null"));},learn:function learn(e,t,a){var n={type:this.DM.TYPE};t&&t.vendor&&(n.vendor=t.vendor),t&&t.data&&(n.data=t.data),t&&t.address&&(n.address=t.address),t&&t.senderID&&(n.senderID=t.senderID),t&&t.key&&(n.key=t.key),e._executeRequest("LearnSC",n,{timeout:2e4},function(e,t){e?a&&a(e):a&&a(null,t);});},remoteCommissioning:function remoteCommissioning(e,t,a){var n={type:this.DM.TYPE};t&&t.vendor&&(n.vendor=t.vendor),t&&t.data&&(n.data=t.data),t&&t.adr&&(n.adr=t.adr),t&&t.code&&(n.code=t.code),t&&t["function"]&&(n["function"]=t["function"]),t&&t.key&&(n.key=t.key),e._executeRequest("remoteCommissioning",n,{timeout:2e4},function(e,t){e?a&&a(e):a&&a(null,t);});},bindWithQr:function bindWithQr(e,t,a){if(t&&t.qr){var n=t.qr.split("+");if(3==n.length||4==n.length){var r,o=n[1].length>2?n[1].substring(2,5):n[1],s=n[1].length>2?n[1].substring(5):n[1],i=null,u=null,l=null;r=n[0].substring(7),n[3]&&(i=n[3].substring(3));var m=!1;switch(o){case"004":switch(u="opus",s){case"000000005":case"00000000F":l="opus_bridge_switch1k",m=!0;break;case"000000006":l="opus_bridge_switch2k",m=!0;break;case"000000004":l="opus_bridge_blind",m=!0;break;case"000000003":l="opus_bridge_dimmer",m=!0;break;case"010000009":case"01000000A":l="f6-02-01";break;case"010000029":l="afriso_water_eco";break;case"010000028":l="afriso_water_con";break;case"01000001E":l="d5-00-01";break;case"010000025":l="f6-10-00";break;case"010000016":l="hoppe_door";break;case"01000002E":l="f6-05-02";break;case"000000008":l="opus_sms_std";break;case"00000000B":l="opus_sms_aw";break;case"000000009":l="opus_sms_multifnc";}break;case"1P":if("1P"===s)l="d2-06-40";}if(!l&&t.data&&(l=t.data),l){if(u||(u=t.vendor?t.vendor:"general"),m)this.remoteCommissioning(e,{vendor:u,data:l,adr:r,code:i},function(e,t){!e&&t&&(t.sys="aio",t.vendor||(t.vendor=u)),a&&a(e,t);});else{var d={type:"ENOCEAN"};u=u||(t.vendor?t.vendor:"general"),"d2-06-40"===l?d.key=i:d.address=r,this.addSensor(e,d,a);}}else a&&a(new Error("unknown device type"));}else a&&a(new Error("invalid qr code"));}else a&&a(new Error("invalid qr code"));},genVirtualDevice:function genVirtualDevice(e,t,a){if(t&&t.data){var n=t;e._executeRequest("AddEnoceanVirtualDevice",n,{timeout:2e4},function(e,t){e?a&&a(e):a&&a(null,t);});}else a&&a(new Error("data is null"));},regist:function regist(e,t,a){this.addSensor(e,t,a);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC;var s=null;"SendGenericCmd"==o&&(s={method:"POST"}),e._executeRequest(o,r,s,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(void 0===n||null==n)return null;return e&&e._hwv&&"C"==e._hwv.charAt(0)&&t.sid?t&&t.sid?"string"==typeof n?{XC_FNC:"SendGenericCmd",id:t.sid,data:{cmd:n}}:{XC_FNC:"SendGenericCmd",id:t.sid,data:n}:null:t.address&&n?{XC_FNC:"SendSC",type:"ENOCEAN",address:t.address,data:n}:null;},_parseData:function _parseData(e,t){if(!e)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;var a={value:e};return-1!=e.indexOf("level")||-1!=e.indexOf("mode")||-1!=e.indexOf("dimTo")||-1!=e.indexOf("toggleTo")||-1!=e.indexOf("setRampTime")||-1!=e.indexOf("moveTo")||-1!=e.indexOf("lamellaTo")||-1!=e.indexOf("setValve")||-1!=e.indexOf("setDisplay")||-1!=e.indexOf("stepUp")||-1!=e.indexOf("stepDown")||-1!=e.indexOf("setRunTime")||-1!=e.indexOf("setRotationTime")||-1!=e.indexOf("setRV")||-1!=e.indexOf("setTo")||-1!=e.indexOf("setSensorUpdateInterval")||-1!=e.indexOf("setVacationBlinkInterval")||-1!=e.indexOf("setFanLevel")||-1!=e.indexOf("tempto")?(a.value=e.match(/([a-zA-Z]+)/)[0],a.ext=e.match(/([0-9\.]+)/)[0]):-1!=e.indexOf("setWakeup")&&(a.value="setWakeup",a.ext=e.substr(9)),a;},_buildData:function _buildData(e,t,a){if(!(t&&t.address&&a&&a.value))return null;if("setFunction"===a.value){if(!a.ext)return null;var _e2={cmd:a.value};for(var _t2=0;_t2<a.ext.length;_t2++){var n=a.ext[_t2];n&&("position"===n.value?_e2.value=n.ext:"duration"===n.value&&(_e2.options||(_e2.options={}),_e2.options.duration=n.ext));}return _e2;}if("moveToDuration"===a.value){if(!a.ext)return null;var _e3={cmd:"moveTo",value:{}};for(var _t3=0;_t3<a.ext.length;_t3++){var _n=a.ext[_t3];_n&&("position"===_n.value?_e3.value.position=_n.ext:"duration"===_n.value&&(_e3.value.options||(_e3.value.options={}),_e3.value.options.duration=_n.ext));}return _e3;}if(["dimTo","lamellaTo","moveTo","setDisplay","setFanLevel","setRampTime","setRotationTime","setRunTime","setRV","setSensorUpdateInterval","setTo","setVacationBlinkInterval","setValve","stepDown","stepUp","tempto","toggleTo"].find(function(e){return a.value.startsWith(e);}))return void 0===a.ext||null==a.ext?a.value:a.value+a.ext;if(a.value.startsWith("button")){if("buttonLock"==a.value||"buttonUnlock"==a.value)return a.value;var _e4=a.value.substr(6);_e4||(_e4="");var _t4=null;return _t4=void 0===a.ext||null==a.ext?"shortPress":a.ext,_t4+_e4;}if(a.value.startsWith("setWakeup")){if(!a.ext)return null;var _e5=String(a.ext);var _t5=_e5.substr(0,_e5.length-1);return _t5=parseInt(_t5),_e5.includes("s")?10==_t5?a.value+0:a.value+((_t5-60)/30+1):_e5.includes("h")?a.value+((_t5-3)/3+50):null;}return void 0!==a.ext&&null!==a.ext?{cmd:a.value,value:a.ext}:a.value;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);if(!n)return null;if("wakeup_cycle"==t.value){var r=n[t.value];return 0==r?"10s":r>=1&&r<=49?30*(r-1)+60+"s":3*(r-50)+3+"h";}return n[t.value];},_handleState:function _handleState(e,t){if(!t.type||!t.state)return null;if(!e.type||e.type.toLowerCase()!=t.type.toLowerCase())return null;var a=!1;if((t.sid&&e.sid&&e.sid==t.id||t.adr&&e.address&&e.address.toLowerCase()==t.adr.toLowerCase())&&(a=!0),!a)return null;var n=t.state;if("d2-20-00"==e.data){var r=n.message_code;void 0!==r&&null!=r&&r.toString&&(n.message_code_hex=r.toString(16));var o=n.operating_time;o&&(o=o.split(":"),n.operating_time_y=o[0],n.operating_time_d=o[1],n.operating_time_h=o[2],n.operating_time_m=o[3]);var s=n.filter_remaining_time;s&&(s=s.split(":"),n.filter_remaining_time_y=s[0],n.filter_remaining_time_d=s[1],n.filter_remaining_time_h=s[2],n.filter_remaining_time_m=s[3]);}return n;},DM:{TYPE:"ENOCEAN",MAP:{general:{"f6-01-01":{command:[{type:"enum",name:"button",ref:{value:"button",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},"f6-02-01":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}}]},"f6-02-02":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}}]},"f6-02-03":{command:[{type:"enum",name:"auto",ref:{value:"auto"}},{type:"enum",name:"manu",ref:{value:"manu"}},{type:"enum",name:"dimUp",ref:{value:"dimUp"}},{type:"enum",name:"dimDown",ref:{value:"dimDown"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["auto","manu","dimUp","dimDown"]}}]},"f6-02-04":{status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"energy bow",ref:{value:"energyBow",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"energy bow",ref:{value:"energyBow",options:["pressed","released","shortPress","longPress"]}}]},"f6-03-01":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released","shortPress","longPress"]}}]},"f6-03-02":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",ext:"%e",extMeta:["press","release","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",ext:"%e",extMeta:["press","release","shortPress","longPress"]}}],status:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released","shortPress","longPress"]}}]},"f6-04-01":{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["inserted","takeout"]}}]},"f6-04-02":{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["inserted","takeout"]}}]},"f6-05-00":{status:[{type:"enum",name:"wind",ref:{value:"wind",options:["alarm","ok"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},"f6-05-01":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"enum",name:"water",ref:{value:"water",options:["alarm","ok"]}}]},"f6-05-02":{status:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["alarm","ok"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]},"f6-10-00":{alarm:{state:{devices:[],data:[{value:"window",states:["open","tilted"]}]}},status:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"handle position",ref:{value:"handle_pos",options:["up","down","middle"]}},{type:"int",name:"handle raw",ref:{value:"handle_raw"}}]},"f6-10-01":{alarm:{state:{devices:[],data:[{value:"window",states:["open","tilted"]}]}},status:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"handle position",ref:{value:"handle_pos",options:["up","down","middle"]}},{type:"int",name:"handle raw",ref:{value:"handle_raw"}}]},"d5-00-01":{alarm:{state:{devices:[],data:[{value:"contact",states:["open"]}]}},status:[{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"contact raw",ref:{value:"contact_raw"}}]},"a5-02-01":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-0"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-02":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-30-10"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-03":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-20"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-04":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-10-30"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-05":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-06":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"10-50"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-07":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-08":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"30-70"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-09":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"40-80"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-0a":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"50-90"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-0b":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"60-100"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-10":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-60-20"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-11":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-50-30"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-12":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-13":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-30-50"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-14":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-15":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-10-70"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-16":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-80"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-17":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"10-90"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-18":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"20-100"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-19":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"30-110"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-1a":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"40-120"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-1b":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"50-130"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},"a5-02-20":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-10-41.2"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-1023"}}]},"a5-02-30":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-62.3"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-1023"}}]},"a5-04-01":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}}]},"a5-04-02":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}}]},"a5-04-03":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-1023"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-255"}}]},"a5-06-01":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination 1",ref:{value:"illumination1",extMeta:"600-60000"}},{type:"int",name:"illumination 1 raw",ref:{value:"illumination1_raw",extMeta:"0-255"}},{type:"float",name:"illumination 2",ref:{value:"illumination2",extMeta:"300-30000"}},{type:"int",name:"illumination 2 raw",ref:{value:"illumination2_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"300-60000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"range",ref:{value:"range",options:["db1","db2"]}},{type:"int",name:"range raw",ref:{value:"range_raw",extMeta:"0-1"}}]},"a5-06-02":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination 1",ref:{value:"illumination1",extMeta:"0-1020"}},{type:"int",name:"illumination 1 raw",ref:{value:"illumination1_raw",extMeta:"0-255"}},{type:"float",name:"illumination 2",ref:{value:"illumination2",extMeta:"0-510"}},{type:"int",name:"illumination 2 raw",ref:{value:"illumination2_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1020"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"range",ref:{value:"range",options:["db1","db2"]}},{type:"int",name:"range raw",ref:{value:"range_raw",extMeta:"0-1"}}]},"a5-06-03":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-1000"}}]},"a5-06-04":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-100"}},{type:"int",name:"energy raw",ref:{value:"energy_raw",extMeta:"0-15"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-65535"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-65535"}},{type:"enum",name:"temperature available",ref:{value:"temperature_avail",options:["true","true"]}},{type:"enum",name:"energy available",ref:{value:"energy_avail",options:["true","true"]}}]},"a5-06-05":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination 1",ref:{value:"illumination1",extMeta:"0-10200"}},{type:"int",name:"illumination 1 raw",ref:{value:"illumination1_raw",extMeta:"0-255"}},{type:"float",name:"illumination 2",ref:{value:"illumination2",extMeta:"0-5100"}},{type:"int",name:"illumination 2 raw",ref:{value:"illumination2_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-10200"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"range",ref:{value:"range",options:["db1","db2"]}},{type:"int",name:"range raw",ref:{value:"range_raw",extMeta:"0-1"}}]},"a5-07-01":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-255"}},{type:"float",name:"voltage available",ref:{value:"voltage_avail",options:["true","false"]}}]},"a5-07-02":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}]},"a5-07-03":{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-1000"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}]},"a5-08-01":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-510"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-08-02":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1020"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-08-03":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1530"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-30-50"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-09-02":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"gas",ref:{value:"gas",extMeta:"0-1020"}},{type:"int",name:"gas raw",ref:{value:"gas_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"temperature available",ref:{value:"temperature_available",options:["true","false"]}}]},"a5-09-04":{status:[{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"float",name:"co2",ref:{value:"co2",extMeta:"0-2550"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-51"}}]},"a5-09-05":{status:[{type:"float",name:"voc",ref:{value:"voc",extMeta:"0-655350"}},{type:"int",name:"voc raw",ref:{value:"voc_raw",extMeta:"0-65535"}},{type:"enum",name:"voc id",ref:{value:"voc_id",options:["VOCT","Formaldehyde","Benzene","Styrene","Toluene","Tetrachloroethylene","Xylene","n-Hexane","n-Octane","Cyclopentane","Methanol","Ethanol","1-Pentanol","Acetone","ethylene Oxide","Acetaldehyde ue","Acetic Acid","Propionice Acid","Valeric Acid","Butyric Acid","Ammoniac","Hydrogen Sulfide","Dimethylsulfide","2-Butanol","2-Methylpropanol","Diethyl ether","ozone"]}},{type:"int",name:"voc id raw",ref:{value:"voc_id_raw",extMeta:"0-255"}},{type:"float",name:"scale",ref:{value:"scale"}}]},"a5-09-06":{status:[{type:"int",name:"radon",ref:{value:"radon",extMeta:"0-1023"}}]},"a5-09-07":{status:[{type:"int",name:"pm 10",ref:{value:"pm10",extMeta:"0-511"}},{type:"int",name:"pm 2.5",ref:{value:"pm25",extMeta:"0-511"}},{type:"int",name:"pm 1",ref:{value:"pm1",extMeta:"0-511"}},{type:"enum",name:"pm 10 active",ref:{value:"pm10_active",options:["true","false"]}},{type:"enum",name:"pm 2.5 active",ref:{value:"pm25_active",options:["true","false"]}},{type:"enum",name:"pm 1 active",ref:{value:"pm1_active",options:["true","false"]}}]},"a5-09-08":{status:[{type:"float",name:"co2",ref:{value:"co2",extMeta:"0-2000"}},{type:"int",name:"co2 raw",ref:{value:"co2_raw",extMeta:"0-255"}}]},"a5-09-09":{status:[{type:"float",name:"co2",ref:{value:"co2",extMeta:"0-2000"}},{type:"int",name:"co2 raw",ref:{value:"co2_raw",extMeta:"0-255"}},{type:"enum",name:"power failure detected",ref:{value:"power_failure_detected",options:["true","false"]}}]},"a5-09-0a":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"2.0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-15"}},{type:"int",name:"gas",ref:{value:"gas",extMeta:"0-65535"}},{type:"int",name:"gas raw",ref:{value:"gas_raw",extMeta:"0-65535"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"enum",name:"temperature available",ref:{value:"temperature_available",options:["true","false"]}},{type:"enum",name:"voltage available",ref:{value:"voltage_available",options:["true","false"]}}]},"a5-09-0b":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"2.0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-15"}},{type:"float",name:"radio",ref:{value:"radio",extMeta:"0-6553"}},{type:"int",name:"radio raw",ref:{value:"radio_raw",extMeta:"0-65535"}},{type:"float",name:"scale",ref:{value:"scale"}},{type:"enum",name:"unit",ref:{value:"unit",options:["Sv/h","cpm","Bq/L","Bq/kg"]}},{type:"int",name:"unit raw",ref:{value:"unit_raw",extMeta:"0-3"}},{type:"enum",name:"temperature available",ref:{value:"temperature_available",options:["true","false"]}},{type:"enum",name:"voltage available",ref:{value:"voltage_available",options:["true","false"]}}]},"a5-09-0c":{status:[{type:"float",name:"voc",ref:{value:"voc",extMeta:"0-655350"}},{type:"int",name:"voc raw",ref:{value:"voc_raw",extMeta:"0-65535"}},{type:"enum",name:"voc id",ref:{value:"voc_id",options:["VOCT","Formaldehyde","Benzene","Styrene","Toluene","Tetrachloroethylene","Xylene","n-Hexane","n-Octane","Cyclopentane","Methanol","Ethanol","1-Pentanol","Acetone","ethylene Oxide","Acetaldehyde ue","Acetic Acid","Propionice Acid","Valeric Acid","Butyric Acid","Ammoniac","Hydrogen Sulfide","Dimethylsulfide","2-Butanol","2-Methylpropanol","Diethyl ether","Naphthalene","4-Phenylcyclohexene","Limonene","Trichloroethylene","Isovaleric acid","Indole","Cadaverine","Putrescine","Caproic acid","ozone"]}},{type:"int",name:"voc id raw",ref:{value:"voc_id_raw",extMeta:"0-255"}},{type:"float",name:"scale",ref:{value:"scale"}},{type:"enum",name:"unit",ref:{value:"unit",options:["Sv/h","ppb"]}},{type:"int",name:"unit raw",ref:{value:"unit_raw",extMeta:"0-1"}}]},"a5-10-01":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"set point",ref:{value:"setpoint",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-02":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"set point",ref:{value:"setpoint",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-03":{status:[{type:"float",name:"set point",ref:{value:"setpoint",unit:"C",extMeta:"0-40"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-04":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"set point",ref:{value:"setpoint",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-05":{status:[{type:"float",name:"set point",ref:{value:"setpoint",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-06":{status:[{type:"float",name:"set point",ref:{value:"setpoint",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-07":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-08":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-09":{status:[{type:"enum",name:"fan speed",ref:{value:"fan_speed",options:["0","1","2","3","auto"]}},{type:"int",name:"fan speed raw",ref:{value:"fan_speed_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-0a":{status:[{type:"float",name:"set point",ref:{value:"setpoint",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"contact raw",ref:{value:"contact_raw",extMeta:"0-1"}}]},"a5-10-0b":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"contact raw",ref:{value:"contact_raw",extMeta:"0-1"}}]},"a5-10-0c":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-0d":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-10":{status:[{type:"float",name:"set point",ref:{value:"setpoint",unit:"%"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-11":{status:[{type:"float",name:"set point",ref:{value:"setpoint",unit:"%"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-10-12":{status:[{type:"float",name:"set point",ref:{value:"setpoint",unit:"%"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},"a5-10-13":{status:[{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}},{type:"int",name:"button raw",ref:{value:"button_raw",extMeta:"0-1"}}]},"a5-10-14":{status:[{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"enum",name:"slider",ref:{value:"slider",options:["day","night"]}},{type:"int",name:"slider raw",ref:{value:"slider_raw",extMeta:"0-1"}}]},"a5-12-00":{status:[{type:"float",name:"current",ref:{value:"current",extMeta:"0-16777215"}},{type:"float",name:"counter",ref:{value:"counter",extMeta:"0-16777215"}},{type:"int",name:"channel",ref:{value:"channel",extMeta:"0-15"}}]},"a5-12-01":{status:[{type:"float",name:"power",ref:{value:"power",extMeta:"0-16777215"}},{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-16777215"}},{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-15"}}]},"a5-12-02":{status:[{type:"float",name:"flow",ref:{value:"flow",extMeta:"0-16777215"}},{type:"float",name:"volume",ref:{value:"volume",extMeta:"0-16777215"}},{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-15"}}]},"a5-12-03":{status:[{type:"float",name:"flow",ref:{value:"flow",extMeta:"0-16777215"}},{type:"float",name:"volume",ref:{value:"volume",extMeta:"0-16777215"}},{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-15"}}]},"a5-13-01":{status:[{type:"float",name:"lux",ref:{value:"lux",extMeta:"0-1000"}},{type:"int",name:"lux raw",ref:{value:"lux_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-40-80"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"float",name:"wind",ref:{value:"wind",extMeta:"0-70"}},{type:"int",name:"wind raw",ref:{value:"wind_raw",extMeta:"0-255"}},{type:"enum",name:"day/night",ref:{value:"day_night",options:["day","night"]}},{type:"enum",name:"rain",ref:{value:"rain",options:["true","false"]}},{type:"float",name:"sun west",ref:{value:"sun_west",extMeta:"0-150"}},{type:"int",name:"sun west raw",ref:{value:"sun_west_raw",extMeta:"0-255"}},{type:"float",name:"sun south",ref:{value:"sun_south",extMeta:"0-150"}},{type:"int",name:"sun south raw",ref:{value:"sun_south_raw",extMeta:"0-255"}},{type:"float",name:"sun east",ref:{value:"sun_east",extMeta:"0-150"}},{type:"int",name:"sun east raw",ref:{value:"sun_east_raw",extMeta:"0-255"}},{type:"enum",name:"hemisphere",ref:{value:"hemisphere",options:["south","north"]}},{type:"int",name:"day",ref:{value:"day",extMeta:"1-31"}},{type:"int",name:"month",ref:{value:"month",extMeta:"1-12"}},{type:"int",name:"year",ref:{value:"year",extMeta:"2000-2099"}},{type:"enum",name:"date source",ref:{value:"date_src",options:["gps","rtc"]}},{type:"int",name:"weekday",ref:{value:"weekday",extMeta:"1-7"}},{type:"int",name:"hour",ref:{value:"hour",extMeta:"0-23"}},{type:"int",name:"min",ref:{value:"min",value_t:"minute",extMeta:"0-59"}},{type:"int",name:"sec",ref:{value:"sec",extMeta:"0-59"}},{type:"enum",name:"time format",ref:{value:"time_format",options:["12","24"]}},{type:"enum",name:"am/pm",ref:{value:"am_pm",options:["am","pm"]}},{type:"enum",name:"time source",ref:{value:"time_src",options:["gps","rtc"]}},{type:"int",name:"elevation",ref:{value:"elv",extMeta:"-90-90"}},{type:"int",name:"azimuth",ref:{value:"azm",extMeta:"0-359"}},{type:"float",name:"latitude",ref:{value:"latitude",extMeta:"-90-90"}},{type:"int",name:"latitude raw",ref:{value:"latitude_raw",extMeta:"0-4095"}},{type:"float",name:"longitude",ref:{value:"longitude",extMeta:"-180-180"}},{type:"int",name:"longitude raw",ref:{value:"longitude_raw",extMeta:"0-4095"}}]},"a5-13-02":{status:[{type:"float",name:"sun west",ref:{value:"sun_west",extMeta:"0-150"}},{type:"int",name:"sun west raw",ref:{value:"sun_west_raw",extMeta:"0-255"}},{type:"float",name:"sun south",ref:{value:"sun_south",extMeta:"0-150"}},{type:"int",name:"sun south raw",ref:{value:"sun_south_raw",extMeta:"0-255"}},{type:"float",name:"sun east",ref:{value:"sun_east",extMeta:"0-150"}},{type:"int",name:"sun east raw",ref:{value:"sun_east_raw",extMeta:"0-255"}},{type:"enum",name:"hemisphere",ref:{value:"hemisphere",options:["south","north"]}}]},"a5-13-03":{status:[{type:"int",name:"day",ref:{value:"day",extMeta:"1-31"}},{type:"int",name:"month",ref:{value:"month",extMeta:"1-12"}},{type:"int",name:"year",ref:{value:"year",extMeta:"2000-2099"}},{type:"enum",name:"date source",ref:{value:"date_src",options:["gps","rtc"]}}]},"a5-13-04":{status:[{type:"int",name:"weekday",ref:{value:"weekday",extMeta:"1-7"}},{type:"int",name:"hour",ref:{value:"hour",extMeta:"0-23"}},{type:"int",name:"min",ref:{value:"min",value_t:"minute",extMeta:"0-59"}},{type:"int",name:"sec",ref:{value:"sec",extMeta:"0-59"}},{type:"enum",name:"time format",ref:{value:"time_format",options:["12","24"]}},{type:"enum",name:"am/pm",ref:{value:"am_pm",options:["am","pm"]}},{type:"enum",name:"time source",ref:{value:"time_src",options:["gps","rtc"]}}]},"a5-13-05":{status:[{type:"int",name:"elevation",ref:{value:"elv",extMeta:"-90-90"}},{type:"int",name:"azimuth",ref:{value:"azm",extMeta:"0-359"}}]},"a5-13-06":{status:[{type:"float",name:"latitude",ref:{value:"latitude",extMeta:"-90-90"}},{type:"int",name:"latitude raw",ref:{value:"latitude_raw",extMeta:"0-4095"}},{type:"float",name:"longitude",ref:{value:"longitude",extMeta:"-180-180"}},{type:"int",name:"longitude raw",ref:{value:"longitude_raw",extMeta:"0-4095"}}]},"a5-14-01":{alarm:{state:{devices:[],data:[{value:"state",states:["open"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},"a5-14-02":{alarm:{state:{devices:[],data:[{value:"state",states:["open"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},"a5-14-03":{alarm:{state:{devices:[],data:[{value:"state",states:["open"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"vibration",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-04":{alarm:{state:{devices:[],data:[{value:"state",states:["open"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"vibration",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-05":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"vibration",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-06":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-250"}},{type:"enum",name:"vibration",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-07":{alarm:{state:{devices:[],data:[{value:"state",states:["open"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lock",ref:{value:"lock",options:["locked","unlocked"]}}]},"a5-14-08":{alarm:{state:{devices:[],data:[{value:"state",states:["open"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"lock",ref:{value:"lock",options:["locked","unlocked"]}},{type:"enum",name:"vibration",ref:{value:"viberation",options:["true","false"]}}]},"a5-14-09":{alarm:{state:{devices:[],data:[{value:"state",states:["open","tilted"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}}]},"a5-14-0a":{alarm:{state:{devices:[],data:[{value:"state",states:["open","tilted"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"vibration",ref:{value:"viberation",options:["true","false"]}}]},"a5-20-04":{command:[{type:"float",name:"set temperature",ref:{value:"setTo",ext:"%f",extMeta:"10.0-30.0",scale:"0.5",unit:"C"}},{type:"int",name:"set valve",ref:{value:"setValve",ext:"%d",extMeta:"0-100"}},{type:"float",name:"temperature up",ref:{value:"up",value_t:"tempUp",ext:"%f",extMeta:"0.5-5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature down",ref:{value:"down",value_t:"tempDown",ext:"%f",extMeta:"0.5-5",scale:"0.5",unit:"C"}},{type:"enum",name:"temperature measure on",ref:{value:"measureOn"}},{type:"enum",name:"temperature measure off",ref:{value:"measureOff"}},{type:"enum",name:"lock button",ref:{value:"buttonLock"}},{type:"enum",name:"unlock button",ref:{value:"buttonUnlock"}},{type:"enum",name:"open valve",ref:{value:"openValve"}},{type:"enum",name:"close valve",ref:{value:"closeValve"}},{type:"enum",name:"init adaption",ref:{value:"init"}},{type:"enum",name:"set wakup cycle",ref:{value:"setWakeup",ext:"%e",sort:"none",extMeta:["10s","60s","90s","120s","150s","180s","210s","240s","270s","300s","330s","360s","390s","420s","450s","480s","510s","540s","570s","600s","630s","660s","690s","720s","750s","780s","810s","840s","870s","900s","930s","960s","990s","1020s","1050s","1080s","1110s","1140s","1170s","1200s","1230s","1260s","1290s","1320s","1350s","1380s","1410s","1440s","1470s","1500s","3h","6h","9h","12h","15h","18h","21h","24h","27h","30h","33h","36h","39h","42h"]}}],status:[{type:"int",name:"valve",ref:{value:"valve",extMeta:"0-100"}},{type:"enum",name:"temperature measurement",ref:{value:"measurement",options:["inactive","active"]}},{type:"enum",name:"button lock",ref:{value:"button_lock",options:["locked","unlocked"]}},{type:"enum",name:"temperature selection",ref:{value:"temperature_selection",options:["setpoint","feed_temperature"]}},{type:"float",name:"feed temperature",ref:{value:"feed_temperature",extMeta:"20-80",unit:"C"}},{type:"float",name:"set temperature",ref:{value:"setpoint",extMeta:"10-30",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"10-30",unit:"C"}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","measurement_error","battery_empty","frost_protection","blocked_valve","end_point_detection_error","no_valve","not_taught_in","no_response_from_controller","teach_in_error","unknown_error"]}},{type:"enum",name:"wakeup cycle",ref:{value:"wakeup_cycle",options:["10s","60s","90s","120s","150s","180s","210s","240s","270s","300s","330s","360s","390s","420s","450s","480s","510s","540s","570s","600s","630s","660s","690s","720s","750s","780s","810s","840s","870s","900s","930s","960s","990s","1020s","1050s","1080s","1110s","1140s","1170s","1200s","1230s","1260s","1290s","1320s","1350s","1380s","1410s","1440s","1470s","1500s","3h","6h","9h","12h","15h","18h","21h","24h","27h","30h","33h","36h","39h","42h"]}},{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}]},"a5-30-01":{status:[{type:"enum",name:"battery low",ref:{value:"battery_low",options:["true","false"]}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-255"}}]},"a5-30-02":{status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},"a5-30-03":{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"int",name:"wake",ref:{value:"wake",extMeta:"0-1"}},{type:"int",name:"input 3",ref:{value:"input3",extMeta:"0-1"}},{type:"int",name:"input 2",ref:{value:"input2",extMeta:"0-1"}},{type:"int",name:"input 1",ref:{value:"input1",extMeta:"0-1"}},{type:"int",name:"input 0",ref:{value:"input0",extMeta:"0-1"}}]},"a5-30-04":{status:[{type:"int",name:"analog input",ref:{value:"analog_input",extMeta:"0-255"}},{type:"int",name:"input 2",ref:{value:"input2",extMeta:"0-1"}},{type:"int",name:"input 1",ref:{value:"input1",extMeta:"0-1"}},{type:"int",name:"input 0",ref:{value:"input0",extMeta:"0-1"}}]},"d2-01-00":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"int",name:"output value",ref:{value:"output_value",extMeta:"0-100"}},{type:"enum",name:"output state",ref:{value:"output_state",options:["on","off"]}}]},"d2-01-01":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"int",name:"output value",ref:{value:"output_value",extMeta:"0-100"}},{type:"enum",name:"output state",ref:{value:"output_state",options:["on","off"]}}]},"d2-01-03":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"enum",name:"output state",ref:{value:"output_state",options:["on","off"]}},{type:"int",name:"output value",ref:{value:"output_value",extMeta:"0-100"}}]},"d2-01-11":{command:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"on",ref:{value:"ch1On"}},{type:"enum",name:"off",ref:{value:"ch1Off"}},{type:"enum",name:"toggle",ref:{value:"ch1Toggle"}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"on",ref:{value:"ch2On"}},{type:"enum",name:"off",ref:{value:"ch2Off"}},{type:"enum",name:"toggle",ref:{value:"ch2Toggle"}}]}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"state",ref:{value:"ch1_output_state",options:["on","off"]}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"state",ref:{value:"ch2_output_state",options:["on","off"]}}]}]},"d2-01-13":{command:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"on",ref:{value:"ch1On"}},{type:"enum",name:"off",ref:{value:"ch1Off"}},{type:"enum",name:"toggle",ref:{value:"ch1Toggle"}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"on",ref:{value:"ch2On"}},{type:"enum",name:"off",ref:{value:"ch2Off"}},{type:"enum",name:"toggle",ref:{value:"ch2Toggle"}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"on",ref:{value:"ch3On"}},{type:"enum",name:"off",ref:{value:"ch3Off"}},{type:"enum",name:"toggle",ref:{value:"ch3Toggle"}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"on",ref:{value:"ch4On"}},{type:"enum",name:"off",ref:{value:"ch4Off"}},{type:"enum",name:"toggle",ref:{value:"ch4Toggle"}}]}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"state",ref:{value:"ch1_output_state",options:["on","off"]}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"state",ref:{value:"ch2_output_state",options:["on","off"]}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"state",ref:{value:"ch3_output_state",options:["on","off"]}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"state",ref:{value:"ch4_output_state",options:["on","off"]}}]}]},"d2-01-14":{command:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"on",ref:{value:"ch1On"}},{type:"enum",name:"off",ref:{value:"ch1Off"}},{type:"enum",name:"toggle",ref:{value:"ch1Toggle"}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"on",ref:{value:"ch2On"}},{type:"enum",name:"off",ref:{value:"ch2Off"}},{type:"enum",name:"toggle",ref:{value:"ch2Toggle"}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"on",ref:{value:"ch3On"}},{type:"enum",name:"off",ref:{value:"ch3Off"}},{type:"enum",name:"toggle",ref:{value:"ch3Toggle"}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"on",ref:{value:"ch4On"}},{type:"enum",name:"off",ref:{value:"ch4Off"}},{type:"enum",name:"toggle",ref:{value:"ch4Toggle"}}]},{type:"root",name:"channel 5",value:"ch5",children:[{type:"enum",name:"on",ref:{value:"ch5On"}},{type:"enum",name:"off",ref:{value:"ch5Off"}},{type:"enum",name:"toggle",ref:{value:"ch5Toggle"}}]},{type:"root",name:"channel 6",value:"ch6",children:[{type:"enum",name:"on",ref:{value:"ch6On"}},{type:"enum",name:"off",ref:{value:"ch6Off"}},{type:"enum",name:"toggle",ref:{value:"ch6Toggle"}}]},{type:"root",name:"channel 7",value:"ch7",children:[{type:"enum",name:"on",ref:{value:"ch7On"}},{type:"enum",name:"off",ref:{value:"ch7Off"}},{type:"enum",name:"toggle",ref:{value:"ch7Toggle"}}]},{type:"root",name:"channel 8",value:"ch8",children:[{type:"enum",name:"on",ref:{value:"ch8On"}},{type:"enum",name:"off",ref:{value:"ch8Off"}},{type:"enum",name:"toggle",ref:{value:"ch8Toggle"}}]}],status:[{type:"enum",name:"power failure detection",ref:{value:"power_failure_detection",options:["true","false"]}},{type:"enum",name:"power failure",ref:{value:"power_failure",options:["true","false"]}},{type:"int",name:"over current switch off",ref:{value:"over_current_switch_off",extMeta:"0-1"}},{type:"int",name:"error level",ref:{value:"error_level",extMeta:"0-3"}},{type:"enum",name:"local_control",ref:{value:"local_control",options:["true","false"]}},{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"state",ref:{value:"ch1_output_state",options:["on","off"]}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"state",ref:{value:"ch2_output_state",options:["on","off"]}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"state",ref:{value:"ch3_output_state",options:["on","off"]}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"state",ref:{value:"ch4_output_state",options:["on","off"]}}]},{type:"root",name:"channel 5",value:"ch5",children:[{type:"enum",name:"state",ref:{value:"ch5_output_state",options:["on","off"]}}]},{type:"root",name:"channel 6",value:"ch6",children:[{type:"enum",name:"state",ref:{value:"ch6_output_state",options:["on","off"]}}]},{type:"root",name:"channel 7",value:"ch7",children:[{type:"enum",name:"state",ref:{value:"ch7_output_state",options:["on","off"]}}]},{type:"root",name:"channel 8",value:"ch8",children:[{type:"enum",name:"state",ref:{value:"ch8_output_state",options:["on","off"]}}]}]},"d2-05-00":{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"move to",ref:{value:"moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"stop"}}],status:[{type:"int",name:"position",ref:{value:"state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"lock",options:["normal","blockage_mode","alarm_mode"]}}]},"d2-05-01":{command:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"enum",name:"move up",ref:{value:"ch1moveUp"}},{type:"enum",name:"move down",ref:{value:"ch1moveDown"}},{type:"int",name:"move to",ref:{value:"ch1moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"ch1stepUp"}},{type:"enum",name:"step down",ref:{value:"ch1stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch1lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"ch1lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch1lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"ch1stop"}},{type:"float",name:"set run duration",ref:{value:"ch1setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duration",ref:{value:"ch1setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"enum",name:"move up",ref:{value:"ch2moveUp"}},{type:"enum",name:"move down",ref:{value:"ch2moveDown"}},{type:"int",name:"move to",ref:{value:"ch2moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"ch2stepUp"}},{type:"enum",name:"step down",ref:{value:"ch2stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch2lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"ch2lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch2lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"ch2stop"}},{type:"float",name:"set run duration",ref:{value:"ch2setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duration",ref:{value:"ch2setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"enum",name:"move up",ref:{value:"ch3moveUp"}},{type:"enum",name:"move down",ref:{value:"ch3moveDown"}},{type:"int",name:"move to",ref:{value:"ch3moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"ch3stepUp"}},{type:"enum",name:"step down",ref:{value:"ch3stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch3lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"ch3lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch3lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"ch3stop"}},{type:"float",name:"set run duration",ref:{value:"ch3setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duration",ref:{value:"ch3setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"enum",name:"move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"move down",ref:{value:"ch4moveDown"}},{type:"int",name:"move to",ref:{value:"ch4moveTo",extMeta:"0-100"}},{type:"enum",name:"step up",ref:{value:"ch4stepUp"}},{type:"enum",name:"step down",ref:{value:"ch4stepDown"}},{type:"enum",name:"lamella up",ref:{value:"ch4lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"ch4lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"ch4lamellaTo",extMeta:"0-100"}},{type:"enum",name:"stop",ref:{value:"ch4stop"}},{type:"float",name:"set run duration",ref:{value:"ch4setRunTime",ext:"%f",extMeta:"5-300",scale:"0.1",unit:"s"}},{type:"int",name:"set rotation duration",ref:{value:"ch4setRotationTime",ext:"%d",extMeta:"10-2540",scale:"10",unit:"ms"}}]}],status:[{type:"root",name:"channel 1",value:"ch1",children:[{type:"int",name:"position",ref:{value:"ch1state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch1angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch1lock",options:["normal","blockage_mode","alarm_mode"]}}]},{type:"root",name:"channel 2",value:"ch2",children:[{type:"int",name:"position",ref:{value:"ch2state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch2angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch2lock",options:["normal","blockage_mode","alarm_mode"]}}]},{type:"root",name:"channel 3",value:"ch3",children:[{type:"int",name:"position",ref:{value:"ch3state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch3angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch3lock",options:["normal","blockage_mode","alarm_mode"]}}]},{type:"root",name:"channel 4",value:"ch4",children:[{type:"int",name:"position",ref:{value:"ch4state",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"ch4angle",extMeta:"0-100"}},{type:"enum",name:"lock mode",ref:{value:"ch4lock",options:["normal","blockage_mode","alarm_mode"]}}]}]},"d2-06-01":{command:[{type:"enum",name:"vacation mode on",ref:{value:"vacationOn"}},{type:"enum",name:"vacation mode off",ref:{value:"vacationOff"}},{type:"enum",name:"handle closed click on",ref:{value:"handleClosedClickOn"}},{type:"enum",name:"handle closed click off",ref:{value:"handleClosedClickOff"}},{type:"enum",name:"battery low click on",ref:{value:"batteryLowClickOn"}},{type:"enum",name:"battery low click off",ref:{value:"batteryLowClickOff"}},{type:"int",name:"set sensor update interval",ref:{value:"setSensorUpdateInterval",ext:"%d",extMeta:"5-65535",unit:"s"}},{type:"int",name:"set vacation blink interval",ref:{value:"setVacationBlinkInterval",ext:"%d",extMeta:"3-255",unit:"s"}}],status:[{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}},{type:"enum",name:"burglary alarm",ref:{value:"bal",options:["ok","alarm","invalid","unsupported"]}},{type:"enum",name:"protection plus alarm",ref:{value:"ppal",options:["ok","alarm","invalid","unsupported"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted","invalid","undefined"]}},{type:"enum",name:"handle state",ref:{value:"handle",options:["up","down","left","right","undefined","invalid","unsupported"]}},{type:"enum",name:"window state",ref:{value:"window",options:["tilted","not_tilted","undefined","invalid","unsupported"]}},{type:"enum",name:"right button",ref:{value:"br",options:["pressed","releaseed","undefined","invalid","unsupported"]}},{type:"enum",name:"left button",ref:{value:"bl",options:["pressed","releaseed","undefined","invalid","unsupported"]}},{type:"enum",name:"motion",ref:{value:"motion",options:["ok","alarm","invalid","unsupported"]}},{type:"enum",name:"vacation mode",ref:{value:"vacation",options:["on","off","unchanged","invalid","unsupported"]}},{type:"float",name:"temperature",ref:{value:"temperature"}},{type:"float",name:"humidity",ref:{value:"humidity"}},{type:"int",name:"illumination",ref:{value:"illumination"}},{type:"int",name:"battery",ref:{value:"battery"}},{type:"enum",name:"handle closed click",ref:{value:"hccr",options:["on","off"]}},{type:"enum",name:"battery low click",ref:{value:"blcr",options:["on","off"]}},{type:"int",name:"sensor update interval",ref:{value:"suir",unit:"s"}},{type:"int",name:"vacation blink interval",ref:{value:"vbir",unit:"s"}}]},"d2-06-02":{command:[{type:"enum",name:"vacation mode on",ref:{value:"vacationOn"}},{type:"enum",name:"vacation mode off",ref:{value:"vacationOff"}},{type:"enum",name:"lock active click on",ref:{value:"lockActiveClickOn"}},{type:"enum",name:"lock active click off",ref:{value:"lockActiveClickOff"}},{type:"enum",name:"battery low click on",ref:{value:"batteryLowClickOn"}},{type:"enum",name:"battery low click off",ref:{value:"batteryLowClickOff"}},{type:"int",name:"set sensor update interval",ref:{value:"setSensorUpdateInterval",ext:"%d",extMeta:"5-65535",unit:"s"}},{type:"int",name:"set vacation blink interval",ref:{value:"setVacationBlinkInterval",ext:"%d",extMeta:"3-255",unit:"s"}}],status:[{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","burglary_alarm","unlock_alarm"]}},{type:"enum",name:"operation mode",ref:{value:"operation_mode",options:["standard","hst"]}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"lock state",ref:{value:"lock",options:["unlocked","locked"]}},{type:"enum",name:"window state",ref:{value:"window",options:["tilted","not_tilted"]}},{type:"enum",name:"vacation mode",ref:{value:"vacation",options:["on","off","unchanged","invalid","unsupported"]}},{type:"float",name:"temperature",ref:{value:"temperature"}},{type:"float",name:"humidity",ref:{value:"humidity"}},{type:"int",name:"battery",ref:{value:"battery"}},{type:"enum",name:"lock active click",ref:{value:"hccr",options:["on","off"]}},{type:"enum",name:"battery low click",ref:{value:"blcr",options:["on","off"]}},{type:"int",name:"sensor update interval",ref:{value:"suir",unit:"s"}},{type:"int",name:"vacation blink interval",ref:{value:"vbir",unit:"s"}}]},"d2-06-20":{command:[{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"activate",ref:{value:"activate"}},{type:"enum",name:"deactivate",ref:{value:"deactivate"}},{type:"enum",name:"lock",ref:{value:"lock"}},{type:"enum",name:"unlock",ref:{value:"unlock"}},{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"enum",name:"locked",ref:{value:"locked",options:["true","false"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","tilt_error","connection_error","overcurrent_error","timeout_error","failure_error"]}},{type:"string",name:"running",ref:{value:"running"}},{type:"enum",name:"function",ref:{value:"function",options:["true","false"]}},{type:"int",name:"function tilt",ref:{value:"functionTilt",extMeta:"0-100"}},{type:"int",name:"function duration",ref:{value:"functionDuration",extMeta:"0-120",unit:"min"}},{type:"int",name:"remaining time",ref:{value:"remaining_time",extMeta:"0-120",unit:"min"}}],event:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"enum",name:"locked",ref:{value:"locked",options:["true","false"]}},{type:"int",name:"remaining time",ref:{value:"remaining_time",ext:"%d",extMeta:"0-120",unit:"min"}}],ipevt:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"enum",name:"locked",ref:{value:"locked",options:["true","false"]}},{type:"int",name:"remaining time",ref:{value:"remaining_time",ext:"%d",extMeta:"0-120",unit:"min"}}]},"d2-06-40":{alarm:{state:{devices:[],data:[{value:"state",states:["open","tilted"]}]}},command:[{type:"enum",name:"authenticate",ref:{value:"authenticate"}},{type:"enum",name:"deauthenticate",ref:{value:"deauthenticate"}}],status:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"lock",ref:{value:"lock",options:["true","false"]}},{type:"enum",name:"auth",ref:{value:"auth",options:["true","false"]}},{type:"string",name:"error",ref:{value:"error"}}]},afriso_water_con:{status:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}}]},afriso_water_eco:{status:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}}]},afriso_asd_10:{status:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["true","false"]}}]},hoppe_door:{alarm:{state:{devices:[],data:[{value:"door",states:["open"]}]}},status:[{type:"enum",name:"door",ref:{value:"door",options:["open","closed"]}}]},generic_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]}},eltako:{eltako_contact:{alarm:{state:{devices:[],data:[{value:"contact",states:["open"]}]}},status:[{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"handle raw",ref:{value:"handle_raw"}}]},eltako_motion:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-2048"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}]},eltako_motion2:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-510"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}]},eltako_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level",extMeta:"0-100"}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}]},eltako_dimmer2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}]},eltako_dimmer_knob:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level",extMeta:"0-100"}}]},eltako_fsud:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"dimmerLevel",extMeta:"0-100"}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}]},eltako_weather:{status:[{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-7.2"}},{type:"int",name:"energy raw",ref:{value:"energy_raw",extMeta:"0-250"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-20-60"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}},{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"int",name:"humidity raw",ref:{value:"humidity_raw",extMeta:"0-250"}}]},eltako_lux:{status:[{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-30000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}}]},eltako_lux2:{status:[{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-30000"}},{type:"int",name:"illumination raw",ref:{value:"illumination_raw",extMeta:"0-255"}}]},eltako_sender4:{status:[{type:"enum",name:"E1",ref:{value:"E1",options:["pressed","released"]}},{type:"enum",name:"E2",ref:{value:"E2",options:["pressed","released"]}},{type:"enum",name:"E3",ref:{value:"E3",options:["pressed","released"]}},{type:"enum",name:"E4",ref:{value:"E4",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"E1",ref:{value:"E1",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"E2",ref:{value:"E2",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"E3",ref:{value:"E3",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"E4",ref:{value:"E4",options:["pressed","released","shortPress","longPress"]}}]},eltako_sender2:{status:[{type:"enum",name:"A1",ref:{value:"A1",options:["pressed","released"]}},{type:"enum",name:"A3",ref:{value:"A3",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"A1",ref:{value:"A1",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"A3",ref:{value:"A3",options:["pressed","released","shortPress","longPress"]}}]},eltako_button4:{status:[{type:"enum",name:"BO",ref:{value:"BO",options:["pressed","released"]}},{type:"enum",name:"BI",ref:{value:"BI",options:["pressed","released"]}},{type:"enum",name:"AO",ref:{value:"AO",options:["pressed","released"]}},{type:"enum",name:"AI",ref:{value:"AI",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"BO",ref:{value:"BO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"BI",ref:{value:"BI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"AO",ref:{value:"AO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"AI",ref:{value:"AI",options:["pressed","released","shortPress","longPress"]}}]},eltako_button2:{status:[{type:"enum",name:"button O",ref:{value:"buttonO",options:["pressed","released"]}},{type:"enum",name:"button I",ref:{value:"buttonI",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button O",ref:{value:"buttonO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"button I",ref:{value:"buttonI",options:["pressed","released","shortPress","longPress"]}}]},eltako_button1:{status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},eltako_fsm60b:{status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},eltako_fkf:{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["inserted","takeout"]}}]},eltako_fkc:{status:[{type:"enum",name:"key card",ref:{value:"keycard",options:["guest_card","service_card","takeout"]}}]},eltako_thermo:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"int",name:"night reduce",ref:{value:"night_reduce",extMeta:"0-5"}},{type:"int",name:"night reduce raw",ref:{value:"night_reduce_raw",extMeta:"0-255"}}]},eltako_ftr65hb:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},eltako_futh55d:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"int",name:"night reduce",ref:{value:"night_reduce",extMeta:"0-5"}},{type:"int",name:"night reduce raw",ref:{value:"night_reduce_raw",extMeta:"0-255"}}]},eltako_futh65d:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}},{type:"int",name:"night reduce",ref:{value:"night_reduce",extMeta:"0-5"}},{type:"int",name:"night reduce raw",ref:{value:"night_reduce_raw",extMeta:"0-255"}}]},eltako_ftr78s:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"8-30",unit:"C"}},{type:"int",name:"set point raw",ref:{value:"setpoint_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},eltako_powermeter:{status:[{type:"float",name:"power",ref:{value:"power",extMeta:"0-16777215"}},{type:"float",name:"energy",ref:{value:"energy",extMeta:"0-16777215"}},{type:"int",name:"tariff",ref:{value:"tariff",extMeta:"0-1"}}]},eltako_powermeter2:{status:[{type:"float",name:"power",ref:{value:"power",extMeta:"0-16777215"}}]},eltako_fzs:{status:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},eltako_blind:{command:[{type:"enum",name:"sync",ref:{value:"sync"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set rv",ref:{value:"setRV",ext:"%d",extMeta:"1-200"}},{type:"int",name:"set run time",ref:{value:"setRunTime",ext:"%d",extMeta:"1-200"}}],status:[{type:"enum",name:"sync",ref:{value:"sync",options:["true","false"]}},{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}},{type:"int",name:"run time",ref:{value:"rt",extMeta:"1-200"}},{type:"int",name:"time delay (rv)",ref:{value:"rv",extMeta:"1-200"}}],ipevt:[{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}}]},eltako_relay:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_relay2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"channel 1",ref:{value:"ch1",options:["on","off"]}},{type:"enum",name:"channel 2",ref:{value:"ch2",options:["on","off"]}}]},eltako_heat:{status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"int",name:"alarm raw",ref:{value:"alarmy_raw",extMeta:"0-255"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-250"}}]},eltako_water_m3:{status:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}},{type:"int",name:"water raw",ref:{value:"water_raw",extMeta:"0-255"}}]},eltako_water_m4:{status:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}},{type:"int",name:"water raw",ref:{value:"water_raw",extMeta:"0-255"}}]},eltako_tf_ttb:{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"present",ref:{value:"state",options:["on","off"]}},{type:"int",name:"state raw",ref:{value:"state_raw",extMeta:"0-1"}}],ipevt:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"enum",name:"present",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"button",ref:{value:"button",options:["pressed","released","shortPress","longPress"]}}]},eltako_tf_smoke:{status:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["true","false"]}},{type:"int",name:"smoke raw",ref:{value:"smoke_raw"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"temperature raw",ref:{value:"temperature_raw",extMeta:"0-255"}}]},eltako_tf_contact:{alarm:{state:{devices:[],data:[{value:"contact",states:["open"]}]}},status:[{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}},{type:"int",name:"contact raw",ref:{value:"contact_raw"}},{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-255"}}]},eltako_tf_motion:{alarm:{state:{devices:[],data:[{value:"motion",states:["true"]}]}},status:[{type:"enum",name:"motion",ref:{value:"motion",options:["true","false"]}},{type:"int",name:"motion raw",ref:{value:"motion_raw",extMeta:"0-255"}}]},eltako_tf_input:{status:[{type:"enum",name:"input",ref:{value:"input",options:["true","false"]}},{type:"int",name:"input raw",ref:{value:"input_raw",extMeta:"0-255"}}]},eltako_tf_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_tf_dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level",extMeta:"0-100"}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level",extMeta:"0-100"}}]},eltako_tf_blind:{command:[{type:"enum",name:"sync",ref:{value:"sync"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set rv",ref:{value:"setRV",ext:"%d",extMeta:"1-200"}},{type:"int",name:"set run time",ref:{value:"setRunTime",ext:"%d",extMeta:"1-200"}}],status:[{type:"enum",name:"sync",ref:{value:"sync",options:["true","false"]}},{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}},{type:"int",name:"run time",ref:{value:"rt",extMeta:"1-200"}},{type:"int",name:"time delay (rv)",ref:{value:"rv",extMeta:"1-200"}}],ipevt:[{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}}]},eltako_tf_alarm:{command:[{type:"enum",name:"activate",ref:{value:"activate"}},{type:"enum",name:"deactivate",ref:{value:"deactivate"}},{type:"enum",name:"trigger alarm",ref:{value:"triggerAlarm"}}],status:[{type:"enum",name:"active",ref:{value:"active",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}}]},eltako_tf_lux:{status:[{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-30000"}}]},eltako_tf_thermo:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"12-28",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}}]},eltako_f6t:{status:[{type:"enum",name:"CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"AI",ref:{value:"buttonAI",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"CO",ref:{value:"buttonCO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"CI",ref:{value:"buttonCI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"BO",ref:{value:"buttonBO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"BI",ref:{value:"buttonBI",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"AO",ref:{value:"buttonAO",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"AI",ref:{value:"buttonAI",options:["pressed","released","shortPress","longPress"]}}]},eltako_sec_button6:{status:[{type:"enum",name:"1",ref:{value:"button1",options:["pressed","released"]}},{type:"enum",name:"2",ref:{value:"button2",options:["pressed","released"]}},{type:"enum",name:"3",ref:{value:"button3",options:["pressed","released"]}},{type:"enum",name:"4",ref:{value:"button4",options:["pressed","released"]}},{type:"enum",name:"5",ref:{value:"button5",options:["pressed","released"]}},{type:"enum",name:"6",ref:{value:"button6",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"1",ref:{value:"button1",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"2",ref:{value:"button2",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"3",ref:{value:"button3",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"4",ref:{value:"button4",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"5",ref:{value:"button5",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"6",ref:{value:"button6",options:["pressed","released","shortPress","longPress"]}}]},eltako_fhk:{command:[{type:"float",name:"set point",ref:{value:"tempto",ext:"%f",extMeta:"8-30",step:"0.5"}},{type:"enum",name:"mode",ref:{value:"mode",ext:"%e",extMeta:["manu","cent","limit"]}}],status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"8-30",unit:"C"}},{type:"float",name:"actual set point",ref:{value:"actualSetPoint",extMeta:"8-30",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"8-30"}},{type:"enum",name:"mode",ref:{value:"mode",options:["manu","cent","limit"]}}],ipevt:[{type:"float",name:"set point",ref:{value:"state",extMeta:"8-30",unit:"C"}},{type:"float",name:"actual set point",ref:{value:"actualSetPoint",extMeta:"8-30",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"8-30"}},{type:"enum",name:"mode",ref:{value:"mode",options:["manu","cent","limit"]}}]},eltako_pl_dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}}]},eltako_pl_samtemp:{command:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","cent","limit"]}},{type:"float",name:"set point",ref:{value:"tempTo",extMeta:"8-30",scale:"0.5",unit:"C"}}]},eltako_pl_blind:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set rv",ref:{value:"setRV",ext:"%d",extMeta:"1-200"}},{type:"int",name:"set run time",ref:{value:"setRunTime",ext:"%d",extMeta:"1-200"}}]},eltako_siren:{command:[{type:"enum",name:"on",ref:{value:"alertOn"}},{type:"enum",name:"off",ref:{value:"alertOff"}}],status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["alarm","ok"]}}]},eltako_rgbw:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100"}},{type:"rgb",name:"color",ref:{value:"color",ext:"%rgb"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}},{type:"rgb",name:"color",ref:{value:"rgb"}},{type:"int",name:"white",ref:{value:"white",extMeta:"0-100"}}]},eltako_ww:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100"}},{type:"int",name:"color temperature",ref:{value:"colorTemp",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}}]},eltako_kw:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100"}},{type:"int",name:"color temperature",ref:{value:"colorTemp",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}}]},eltako_wwkw:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100"}},{type:"int",name:"color temperature",ref:{value:"colorTemp",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100"}},{type:"int",name:"color temperature",ref:{value:"colorTemp",extMeta:"0-100"}}]},eltako_fstap:{status:[{type:"enum",name:"state",ref:{value:"state",options:["unlocked","locked"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"state",options:["unlocked","locked"]}}]},eltako_pl_relay:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_pl_relay2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_buth55:{command:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","cent","limit"]}},{type:"float",name:"set point",ref:{value:"tempTo",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","cent","limit"]}},{type:"float",name:"set point",ref:{value:"setpoint",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}},{type:"float",name:"actual set point",ref:{value:"actualSetPoint",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}}]},eltako_buth65:{command:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","cent","limit"]}},{type:"float",name:"set point",ref:{value:"tempTo",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu","cent","limit"]}},{type:"float",name:"set point",ref:{value:"setpoint",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}},{type:"float",name:"actual set point",ref:{value:"actualSetPoint",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%d",extMeta:"8-30",scale:"0.5",unit:"C"}}]}},opus:{opus_sms_multifnc:{alarm:{state:{devices:[],data:[{value:"motion",states:["true"]}]}},status:[{type:"enum",name:"motion",ref:{value:"motion",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"int",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}}]},opus_sms_aw:{alarm:{state:{devices:[],data:[{value:"motion",states:["true"]}]}},status:[{type:"enum",name:"motion",ref:{value:"motion",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1000"}},{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}}]},opus_sms_std:{alarm:{state:{devices:[],data:[{value:"motion",states:["true"]}]}},status:[{type:"enum",name:"motion",ref:{value:"motion",options:["true","false"]}}]},opus_bridge_switch1k:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},opus_bridge_switch2k:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},opus_bridge_dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"dimmerLevel",extMeta:"0-100"}}]},opus_bridge_blind:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"int",name:"lamella",ref:{value:"lamella",extMeta:"0-100"}}]}},peha:{peha_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lamp_failure","intern_failure","extern_failure"]}}]},peha_powerswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","lamp_failure","intern_failure","extern_failure"]}},{type:"int",name:"power",ref:{value:"power",ext:"%d"}},{type:"enum",name:"power unit",ref:{value:"power_unit",options:["mW","W","KW","MW"]}},{type:"int",name:"energy",ref:{value:"energy",ext:"%d"}},{type:"enum",name:"energy unit",ref:{value:"energy_unit",options:["Wh","kWh","MWh","GWh"]}}]},peha_blind:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-10"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-10"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"string",name:"set run time",ref:{value:"setRunTime",ext:"%s",format:"closeTime:openTime"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"1-100"}},{type:"enum",name:"position enabled",ref:{value:"position_flag",options:["true","false"]}},{type:"enum",name:"angle enabled",ref:{value:"angle_flag",options:["true","false"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","no_end_position","intern_failure"]}},{type:"int",name:"position mode",ref:{value:"position_mode",extMeta:"0-1"}}]}},rehau:{"bb-aa-cc":{alarm:{state:{devices:[],data:[],check:[{value:"state",states:["closed"]}]}},command:[{type:"enum",name:"alarm on",ref:{value:"alertOn"}},{type:"enum",name:"alarm off",ref:{value:"alertOff"}},{type:"enum",name:"alarm toggle",ref:{value:"alertToggle"}},{type:"enum",name:"reset alarm",ref:{value:"resetAlarm"}},{type:"enum",name:"reset pre-alarm",ref:{value:"resetPreAlarm"}},{type:"enum",name:"pre-alarm on",ref:{value:"preAlarmOn"}},{type:"enum",name:"pre-alarm off",ref:{value:"preAlarmOff"}},{type:"enum",name:"pre-alarm toggle",ref:{value:"preAlarmToggle"}}],status:[{type:"int",name:"battery",ref:{value:"battery",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm enabled",ref:{value:"pre_alarm_enabled",options:["true","false"]}},{type:"enum",name:"alarm enabled",ref:{value:"alarm_enabled",options:["true","false"]}},{type:"int",name:"error",ref:{value:"error",ext:"%d"}},{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}]},"d2-06-10":{alarm:{state:{devices:[],data:[],check:[{value:"window",states:["closed"]}]}},command:[{type:"enum",name:"alarm on",ref:{value:"alertOn"}},{type:"enum",name:"alarm off",ref:{value:"alertOff"}},{type:"enum",name:"alarm toggle",ref:{value:"alertToggle"}},{type:"enum",name:"reset alarm",ref:{value:"resetAlarm"}},{type:"enum",name:"reset pre-alarm",ref:{value:"resetPreAlarm"}},{type:"enum",name:"pre-alarm on",ref:{value:"preAlarmOn"}},{type:"enum",name:"pre-alarm off",ref:{value:"preAlarmOff"}},{type:"enum",name:"pre-alarm toggle",ref:{value:"preAlarmToggle"}}],status:[{type:"int",name:"battery",ref:{value:"battery",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm enabled",ref:{value:"pre_alarm_enabled",options:["true","false"]}},{type:"enum",name:"alarm enabled",ref:{value:"alarm_enabled",options:["true","false"]}},{type:"int",name:"error",ref:{value:"error",ext:"%d"}},{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}]},"d2-06-ff":{alarm:{state:{devices:[],data:[],check:[{value:"window",states:["closed"]}]}},command:[{type:"enum",name:"alarm on",ref:{value:"alertOn"}},{type:"enum",name:"alarm off",ref:{value:"alertOff"}},{type:"enum",name:"alarm toggle",ref:{value:"alertToggle"}},{type:"enum",name:"reset alarm",ref:{value:"resetAlarm"}},{type:"enum",name:"reset pre-alarm",ref:{value:"resetPreAlarm"}},{type:"enum",name:"pre-alarm on",ref:{value:"preAlarmOn"}},{type:"enum",name:"pre-alarm off",ref:{value:"preAlarmOff"}},{type:"enum",name:"pre-alarm toggle",ref:{value:"preAlarmToggle"}}],status:[{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0-5.0",scale:"0.1"}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"pre-alarm enabled",ref:{value:"pre_alarm_enabled",options:["true","false"]}},{type:"enum",name:"alarm enabled",ref:{value:"alarm_enabled",options:["true","false"]}},{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}],event:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0-5.0",scale:"0.1"}}]},"d2-20-00":{command:[{type:"enum",name:"fan level up",ref:{value:"fanLevelUp"}},{type:"enum",name:"fan level down",ref:{value:"fanLevelDown"}},{type:"int",name:"set fan level",ref:{value:"setFanLevel",ext:"%d",extMeta:"0-6"}},{type:"enum",name:"update status",ref:{value:"requestStatus"}}],status:[{type:"int",name:"current fan level",ref:{value:"current_fan_level",ext:"%d",extMeta:"0-4"}},{type:"int",name:"set fan level",ref:{value:"set_fan_level",ext:"%d",extMeta:"0-6"}},{type:"enum",name:"anti freeze",ref:{value:"anti_freeze",options:["on","off"]}},{type:"int",name:"message code",ref:{value:"message_code",ext:"%d"}},{type:"string",name:"message code (hex)",ref:{value:"message_code_hex",ext:"%s"}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-20.0-70.0"}},{type:"int",name:"operating time (min)",ref:{value:"operating_time_m"}},{type:"int",name:"operating time (hour)",ref:{value:"operating_time_h"}},{type:"int",name:"operating time (day)",ref:{value:"operating_time_d"}},{type:"int",name:"operating time (year)",ref:{value:"operating_time_y"}},{type:"int",name:"filter remain time (min)",ref:{value:"filter_remaining_time_m"}},{type:"int",name:"filter remain time (hour)",ref:{value:"filter_remaining_time_h"}},{type:"int",name:"filter remain time (day)",ref:{value:"filter_remaining_time_d"}},{type:"int",name:"filter remain time (year)",ref:{value:"filter_remaining_time_y"}}]}},schueco:{schueco_bolt:{alarm:{state:{devices:[],data:[{value:"state",states:["unlocked"]}]}},status:[{type:"enum",name:"window",ref:{value:"state",options:["locked","unlocked"]}}]}},siegenia:{"d2-06-50":{status:[{type:"enum",name:"alive timeout",ref:{value:"aliveTimeout",options:["true","false"]}},{type:"int",name:"battery charge",ref:{value:"battery",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"battery OK",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"handle",ref:{value:"handle",options:["closed","open","tilted"]}},{type:"enum",name:"state",ref:{value:"state",options:["closed","open","tilted"]}}],ipevt:[{type:"enum",name:"alive timeout",ref:{value:"aliveTimeout",options:["true","false"]}},{type:"int",name:"battery charge",ref:{value:"battery",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"battery OK",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"handle",ref:{value:"handle",options:["closed","open","tilted"]}},{type:"enum",name:"state",ref:{value:"state",options:["closed","open","tilted"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true"]}}]},"a5-14-0a":{alarm:{state:{devices:[],data:[{value:"state",states:["open","tilted"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"vibration",ref:{value:"viberation",options:["true","false"]}}]}},elero:{elero_R10:{command:[{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}],status:[{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"0-100"}}]}},becker:{becker_motor:{command:[{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}],status:[{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"0-100"}}]}}},V6_MAP:{general:{"f6-01-01":{command:[{type:"enum",name:"button",ref:{value:"button",ext:"%e",extMeta:["pressed","released"]}}],event:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:"v6_event"},"f6-02-01":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["pressed","released"]}}],event:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}}],ipevt:"v6_event"},"f6-02-02":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["pressed","released"]}}],event:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}}],ipevt:"v6_event"},"f6-03-01":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",ext:"%e",extMeta:["pressed","released"]}}],event:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released"]}}],ipevt:"v6_event"},"f6-03-02":{command:[{type:"enum",name:"button AI",ref:{value:"buttonAI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",ext:"%e",extMeta:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",ext:"%e",extMeta:["pressed","released"]}}],event:[{type:"enum",name:"button AI",ref:{value:"buttonAI",options:["pressed","released"]}},{type:"enum",name:"button AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"button BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"button BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"button CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"button CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"button DI",ref:{value:"buttonDI",options:["pressed","released"]}},{type:"enum",name:"button DO",ref:{value:"buttonDO",options:["pressed","released"]}}],ipevt:"v6_event"},"f6-05-00":{status:[{type:"enum",name:"wind",ref:{value:"wind",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:[{type:"enum",name:"wind",ref:{value:"wind_state",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:"v6_status"},"f6-05-01":{command:"v5p_command",status:[{type:"enum",name:"water",ref:{value:"water",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},"f6-05-02":{status:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["alarm","ok"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:"v6_status"},"f6-10-00":{alarm:{state:{devices:[],data:[{value:"window",states:["open","tilted"]}]}},status:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}}],event:"v6_status",ipevt:"v6_status"},"f6-10-01":{alarm:{state:{devices:[],data:[{value:"window",states:["open","tilted"]}]}},status:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}}],event:"v6_status",ipevt:"v6_status"},"a5-06-01":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"300-60000"}}],event:"v6_status",ipevt:"v6_status"},"a5-06-02":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-1020"}}],event:"v6_status",ipevt:"v6_status"},"a5-06-05":{status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.1"}},{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-10200"}}],event:"v6_status",ipevt:"v6_status"},"a5-07-01":{command:"v5p_command",status:"v5p_status",event:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],ipevt:"v6_event"},"a5-10-12":{status:[{type:"float",name:"humidity",ref:{value:"humidity",extMeta:"0-100"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}}],event:"v6_status",ipevt:"v6_status"},"a5-14-0a":{alarm:{state:{devices:[],data:[{value:"state",states:["open","tilted"]}]}},status:[{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0-5.0"}},{type:"int",name:"voltage raw",ref:{value:"voltage_raw",extMeta:"0-250"}},{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted"]}},{type:"enum",name:"vibration",ref:{value:"vibration",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},"a5-20-04":{command:[{type:"float",name:"set temperature",ref:{value:"setTo",ext:"%f",extMeta:"10.0-30.0",scale:"0.5",unit:"C"}},{type:"int",name:"set valve",ref:{value:"setValve",ext:"%d",extMeta:"0-100"}},{type:"float",name:"temperature up",ref:{value:"up",ext:"%f",extMeta:"0.5-5",scale:"0.5",unit:"C"}},{type:"float",name:"temperature down",ref:{value:"down",ext:"%f",extMeta:"0.5-5",scale:"0.5",unit:"C"}},{type:"enum",name:"temperature measure on",ref:{value:"measureOn"}},{type:"enum",name:"temperature measure off",ref:{value:"measureOff"}},{type:"enum",name:"lock button",ref:{value:"buttonLock"}},{type:"enum",name:"unlock button",ref:{value:"buttonUnlock"}},{type:"enum",name:"open valve",ref:{value:"open"}},{type:"enum",name:"close valve",ref:{value:"close"}},{type:"enum",name:"init adaption",ref:{value:"init"}},{type:"enum",name:"set wakup cycle",ref:{value:"setWakeup",ext:"%e",sort:"none",extMeta:["10s","60s","90s","120s","150s","180s","210s","240s","270s","300s","330s","360s","390s","420s","450s","480s","510s","540s","570s","600s","630s","660s","690s","720s","750s","780s","810s","840s","870s","900s","930s","960s","990s","1020s","1050s","1080s","1110s","1140s","1170s","1200s","1230s","1260s","1290s","1320s","1350s","1380s","1410s","1440s","1470s","1500s","3h","6h","9h","12h","15h","18h","21h","24h","27h","30h","33h","36h","39h","42h"]}}],status:"v5p_status",event:"v6_status",ipevt:"v6_status"},"d2-06-40":{alarm:{state:{devices:[],data:[{value:"window",states:["open","tilted"]}]}},command:"v5p_command",status:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"locked",ref:{value:"locked",options:["true","false"]}},{type:"enum",name:"auth",ref:{value:"auth",options:["true","false"]}},{type:"string",name:"error",ref:{value:"error",options:["no_error","error"]}}],event:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"locked",ref:{value:"locked",options:["true","false"]}},{type:"enum",name:"auth",ref:{value:"auth",options:["true","false"]}},{type:"string",name:"error",ref:{value:"error",options:["no_error","error"]}}],ipevt:"v6_status"},generic_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]}},eltako:{eltako_dimmer:{command:"v5p_command",status:"v5p_status",event:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"dimmerLevel",extMeta:"0-100"}}],ipevt:"v6_event"},eltako_dimmer2:{command:"v5p_command",status:"v5p_status",event:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"dimmerLevel",extMeta:"0-100"}}],ipevt:"v6_event"},eltako_button4:{status:[{type:"enum",name:"BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"AI",ref:{value:"buttonAI",options:["pressed","released"]}}],event:[{type:"enum",name:"BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"AI",ref:{value:"buttonAI",options:["pressed","released"]}}],ipevt:"v6_event"},eltako_fsud:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set ramp time",ref:{value:"setRampTime",ext:"%d",extMeta:"0-255"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"dimmerLevel",extMeta:"0-100"}},{type:"int",name:"ramp time",ref:{value:"ramp_time",extMeta:"0-255"}}]},eltako_button2:{status:[{type:"enum",name:"button O",ref:{value:"buttonO",options:["pressed","released"]}},{type:"enum",name:"button I",ref:{value:"buttonI",options:["pressed","released"]}}],event:[{type:"enum",name:"button O",ref:{value:"buttonO",options:["pressed","released"]}},{type:"enum",name:"button I",ref:{value:"buttonI",options:["pressed","released"]}}],ipevt:"v6_event"},eltako_button1:{event:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:"v6_event"},eltako_fzs:{event:[{type:"enum",name:"button",ref:{value:"button",options:["pressed","released"]}}],ipevt:"v6_event"},eltako_relay:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_relay2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},eltako_blind:{command:[{type:"enum",name:"sync",ref:{value:"sync"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set rv",ref:{value:"setRV",ext:"%d",extMeta:"1-200"}},{type:"int",name:"set run time",ref:{value:"setRunTime",ext:"%d",extMeta:"1-200"}}],status:"v5p_status",event:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}],ipevt:"v6_event"},eltako_tf_dimmer:{command:"v5p_command",status:"v5p_status",event:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"level",ref:{value:"dimmerLevel",extMeta:"0-100"}}],ipevt:"v6_event"},eltako_tf_blind:{command:[{type:"enum",name:"sync",ref:{value:"sync"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set rv",ref:{value:"setRV",ext:"%d",extMeta:"1-200"}},{type:"int",name:"set run time",ref:{value:"setRunTime",ext:"%d",extMeta:"1-200"}}],status:"v5p_status",event:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}],ipevt:"v6_event"},eltako_contact:{alarm:{state:{devices:[],data:[{value:"contact",states:["open"]}]}},status:[{type:"enum",name:"contact",ref:{value:"contact",options:["open","closed"]}}],event:"v6_status",ipevt:"v6_status"},eltako_ftr65hb:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}}],event:"v6_status",ipevt:"v6_status"},eltako_thermo:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}}],event:"v6_status",ipevt:"v6_status"},eltako_motion:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},status:[{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-2048"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],event:"v6_status",ipevt:"v6_status"},eltako_motion2:{alarm:{state:{devices:[],data:[{value:"state",states:["on"]}]}},status:[{type:"float",name:"illumination",ref:{value:"illumination",extMeta:"0-510"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}],event:"v6_status",ipevt:"v6_status"},eltako_tf_thermo:{status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"12-28",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}}],event:"v6_status",ipevt:"v6_status"},eltako_tf_input:{status:[{type:"enum",name:"input",ref:{value:"input",options:["true","false"]}}],event:"v6_status",ipevt:"v6_status"},"f6-05-02":{status:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["alarm","ok"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:[{type:"enum",name:"smoke",ref:{value:"smoke",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],ipevt:"v6_status"},eltako_f6t:{status:[{type:"enum",name:"CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"AI",ref:{value:"buttonAI",options:["pressed","released"]}}],event:[{type:"enum",name:"CO",ref:{value:"buttonCO",options:["pressed","released"]}},{type:"enum",name:"CI",ref:{value:"buttonCI",options:["pressed","released"]}},{type:"enum",name:"BO",ref:{value:"buttonBO",options:["pressed","released"]}},{type:"enum",name:"BI",ref:{value:"buttonBI",options:["pressed","released"]}},{type:"enum",name:"AO",ref:{value:"buttonAO",options:["pressed","released"]}},{type:"enum",name:"AI",ref:{value:"buttonAI",options:["pressed","released"]}}],ipevt:"v6_event"},eltako_sec_button6:{status:[{type:"enum",name:"1",ref:{value:"button1",options:["pressed","released"]}},{type:"enum",name:"2",ref:{value:"button2",options:["pressed","released"]}},{type:"enum",name:"3",ref:{value:"button3",options:["pressed","released"]}},{type:"enum",name:"4",ref:{value:"button4",options:["pressed","released"]}},{type:"enum",name:"5",ref:{value:"button5",options:["pressed","released"]}},{type:"enum",name:"6",ref:{value:"button6",options:["pressed","released"]}}],ipevt:[{type:"enum",name:"1",ref:{value:"button1",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"2",ref:{value:"button2",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"3",ref:{value:"button3",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"4",ref:{value:"button4",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"5",ref:{value:"button5",options:["pressed","released","shortPress","longPress"]}},{type:"enum",name:"6",ref:{value:"button6",options:["pressed","released","shortPress","longPress"]}}]},eltako_fhk:{command:[{type:"float",name:"set point",ref:{value:"tempto",ext:"%f",extMeta:"0-40",step:"0.5"}},{type:"enum",name:"mode",ref:{value:"mode",ext:"%e",extMeta:["manu","cent","limit"]}}],status:[{type:"float",name:"set point",ref:{value:"setpoint",extMeta:"0-40",unit:"C"}},{type:"float",name:"actual set point",ref:{value:"actualSetPoint",extMeta:"0-40",unit:"C"}},{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"0-40"}},{type:"enum",name:"mode",ref:{value:"mode",options:["manu","cent","limit"]}}],event:"v6_status",ipevt:"v6_status"},eltako_weather:{ipevt:[{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-40-85",step:"0.5"}},{type:"float",name:"wind speed",ref:{value:"wind",ext:"%f",extMeta:"0-70",step:"1"}},{type:"enum",name:"rain state",ref:{value:"rain_state",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",ext:"%f",extMeta:"0-999",step:"9"}},{type:"float",name:"sun intensity 1",ref:{value:"s1",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"float",name:"sun intensity 2",ref:{value:"s2",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"float",name:"sun intensity 3",ref:{value:"s3",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:[{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-40-85",step:"0.5"}},{type:"float",name:"wind speed",ref:{value:"wind",ext:"%f",extMeta:"0-70",step:"1"}},{type:"enum",name:"rain state",ref:{value:"rain_state",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",ext:"%f",extMeta:"0-999",step:"9"}},{type:"float",name:"sun intensity 1",ref:{value:"s1",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"float",name:"sun intensity 2",ref:{value:"s2",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"float",name:"sun intensity 3",ref:{value:"s3",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],status:[{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-40-85",step:"0.5"}},{type:"float",name:"wind speed",ref:{value:"wind",ext:"%f"}},{type:"enum",name:"rain state",ref:{value:"rain_state",options:["true","false"]}},{type:"float",name:"illumination",ref:{value:"illumination",ext:"%f",extMeta:"0-999",step:"9"}},{type:"float",name:"sun intensity 1",ref:{value:"s1",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"float",name:"sun intensity 2",ref:{value:"s2",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"float",name:"sun intensity 3",ref:{value:"s3",ext:"%f",extMeta:"0-150",step:"0.5"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]}},rehau:{"bb-aa-cc":{alarm:{state:{devices:[],data:[],check:[{value:"window",states:["open"]}]}},command:"v5p_command",status:"v5p_staus",event:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0-5.0",scale:"0.1"}}]},"d2-06-10":{alarm:{state:{devices:[],data:[],check:[{value:"window",states:["open"]}]}},command:"v5p_command",status:[{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0-5.0",scale:"0.1"}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm enabled",ref:{value:"pre_alarm_enabled",options:["true","false"]}},{type:"enum",name:"alarm enabled",ref:{value:"alarm_enabled",options:["true","false"]}},{type:"enum",name:"pending",ref:{value:"pending",options:["true","false"]}}],event:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0-5.0",scale:"0.1"}}],ipevt:[{type:"enum",name:"window",ref:{value:"window",options:["open","closed"]}},{type:"enum",name:"pre-alarm",ref:{value:"pre_alarm",options:["true","false"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",extMeta:"0-5.0",scale:"0.1"}}]},"d2-20-00":{command:[{type:"enum",name:"fan level up",ref:{value:"levelUp"}},{type:"enum",name:"fan level down",ref:{value:"levelDown"}},{type:"enum",name:"mode",ref:{value:"mode",ext:"%e",extMeta:["co2","humidity"]}},{type:"enum",name:"fan level",ref:{value:"level",ext:"%e",extMeta:["0","1","2","3","4"]}}],status:[{type:"int",name:"current fan level",ref:{value:"level",ext:"%d",extMeta:"0-4"}},{type:"enum",name:"mode",ref:{value:"mode",options:["manu","co2","humidity"]}},{type:"enum",name:"anti freeze",ref:{value:"anti_freeze",options:["on","off"]}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-20.0-70.0"}},{type:"int",name:"message code",ref:{value:"message_code",ext:"%d"}},{type:"string",name:"message code (hex)",ref:{value:"message_code_hex",ext:"%s"}},{type:"int",name:"operating time (min)",ref:{value:"operating_time_m"}},{type:"int",name:"operating time (hour)",ref:{value:"operating_time_h"}},{type:"int",name:"operating time (day)",ref:{value:"operating_time_d"}},{type:"int",name:"operating time (year)",ref:{value:"operating_time_y"}},{type:"int",name:"filter remain time (min)",ref:{value:"filter_remaining_time_m"}},{type:"int",name:"filter remain time (hour)",ref:{value:"filter_remaining_time_h"}},{type:"int",name:"filter remain time (day)",ref:{value:"filter_remaining_time_d"}},{type:"int",name:"filter remain time (year)",ref:{value:"filter_remaining_time_y"}}],event:[{type:"int",name:"current fan level",ref:{value:"level",ext:"%d",extMeta:"0-4"}},{type:"enum",name:"mode",ref:{value:"mode",options:["manu","co2","humidity"]}},{type:"enum",name:"anti freeze",ref:{value:"anti_freeze",options:["on","off"]}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-20.0-70.0"}}],ipevt:[{type:"int",name:"current fan level",ref:{value:"level",ext:"%d",extMeta:"0-4"}},{type:"enum",name:"mode",ref:{value:"mode",options:["manu","co2","humidity"]}},{type:"enum",name:"anti freeze",ref:{value:"anti_freeze",options:["on","off"]}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"-20.0-70.0"}}]}},siegenia:{"d2-06-50":{status:[{type:"enum",name:"alive timeout",ref:{value:"aliveTimeout",options:["true","false"]}},{type:"int",name:"battery charge",ref:{value:"battery",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"battery OK",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"handle",ref:{value:"handle",options:["closed","open","tilted"]}},{type:"enum",name:"state",ref:{value:"state",options:["closed","open","tilted"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}}],event:[{type:"enum",name:"alive timeout",ref:{value:"aliveTimeout",options:["true","false"]}},{type:"int",name:"battery charge",ref:{value:"battery",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"battery OK",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"handle",ref:{value:"handle",options:["closed","open","tilted"]}},{type:"enum",name:"state",ref:{value:"state",options:["closed","open","tilted"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true"]}}]}},elero:{elero_R10:{command:"v5p_command",status:"v5p_status"}},becker:{becker_motor:{command:"v5p_command",status:"v5p_status"}}},DEVICES:[{id:"General",vendor:"general",subtypes:[{id:"F6-01-01",data:"f6-01-01",desc:"Switch Buttons Push Button"},{id:"F6-02-01",data:"f6-02-01",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-02-02",data:"f6-02-02",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 2"},{id:"F6-02-03",data:"f6-02-03",desc:"Rocker Switch, 2 Rocker, Light Control - Applicatio Style 1"},{id:"F6-02-04",data:"f6-02-04",desc:"Rocker Switch, 2 Rocker, Light and Blind Control ERP2"},{id:"F6-03-01",data:"f6-03-01",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-03-02",data:"f6-03-02",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 2"},{id:"F6-04-01",data:"f6-04-01",desc:"Position Switch, Home and Office Application, Key Card Activated Switch"},{id:"F6-04-02",data:"f6-04-02",desc:"Position Switch, Home and Office Application, Key Card Activated Switch ERP2"},{id:"F6-05-00",data:"f6-05-00",desc:"Detectors, Wind Speed Threshold Detector"},{id:"F6-05-01",data:"f6-05-01",desc:"Detectors, Liquid Leakage Sensor"},{id:"F6-05-02",data:"f6-05-02",desc:"Detectors, Smoke Detector"},{id:"F6-10-00",data:"f6-10-00",desc:"Window Handle"},{id:"F6-10-01",data:"f6-10-01",desc:"Window Handle ERP2"},{id:"D5-00-01",data:"d5-00-01",desc:"Single Input Contact"},{id:"A5-02-01",data:"a5-02-01",desc:"Temperature Sensor Range -40C to 0C"},{id:"A5-02-02",data:"a5-02-02",desc:"Temperature Sensor Range -30C to +10C"},{id:"A5-02-03",data:"a5-02-03",desc:"Temperature Sensor Range -20C to +20C"},{id:"A5-02-04",data:"a5-02-04",desc:"Temperature Sensor Range -10C to +30C"},{id:"A5-02-05",data:"a5-02-05",desc:"Temperature Sensor Range 0C to +40C"},{id:"A5-02-06",data:"a5-02-06",desc:"Temperature Sensor Range 10C to +50C"},{id:"A5-02-07",data:"a5-02-07",desc:"Temperature Sensor Range 20C to +60C"},{id:"A5-02-08",data:"a5-02-08",desc:"Temperature Sensor Range 30C to +70C"},{id:"A5-02-09",data:"a5-02-09",desc:"Temperature Sensor Range 40C to +80C"},{id:"A5-02-0A",data:"a5-02-0a",desc:"Temperature Sensor Range 50C to +90C"},{id:"A5-02-0B",data:"a5-02-0b",desc:"Temperature Sensor Range 60C to +100C"},{id:"A5-02-10",data:"a5-02-10",desc:"Temperature Sensor Range -60C to +20C"},{id:"A5-02-11",data:"a5-02-11",desc:"Temperature Sensor Range -50C to +30C"},{id:"A5-02-12",data:"a5-02-12",desc:"Temperature Sensor Range -40C to +40C"},{id:"A5-02-13",data:"a5-02-13",desc:"Temperature Sensor Range -30C to +50C"},{id:"A5-02-14",data:"a5-02-14",desc:"Temperature Sensor Range -20C to +60C"},{id:"A5-02-15",data:"a5-02-15",desc:"Temperature Sensor Range -10C to +70C"},{id:"A5-02-16",data:"a5-02-16",desc:"Temperature Sensor Range 0C to +80C"},{id:"A5-02-17",data:"a5-02-17",desc:"Temperature Sensor Range +10C to +90C"},{id:"A5-02-18",data:"a5-02-18",desc:"Temperature Sensor Range +20C to +100C"},{id:"A5-02-19",data:"a5-02-19",desc:"Temperature Sensor Range +30C to +110C"},{id:"A5-02-1a",data:"a5-02-1a",desc:"Temperature Sensor Range +40C to +120C"},{id:"A5-02-1b",data:"a5-02-1b",desc:"Temperature Sensor Range +50C to +130C"},{id:"A5-02-20",data:"a5-02-20",desc:"Temperature Sensor Range -10C to +41.2C"},{id:"A5-02-30",data:"a5-02-30",desc:"Temperature Sensor Range -40C to +62.3C"},{id:"A5-04-01",data:"a5-04-01",desc:"Temperature and Humidity Sensor Range 0C to +40C and 0% to 100%"},{id:"A5-04-02",data:"a5-04-02",desc:"Temperature and Humidity Sensor Range -20C to +60C and 0% to 100%"},{id:"A5-04-03",data:"a5-04-03",desc:"Temperature and Humidity Sensor Range -20C to +60C 10bit-measurement and 0% to 100%"},{id:"A5-06-01",data:"a5-06-01",desc:"Light Sensor Range 300lx to 60000lx"},{id:"A5-06-02",data:"a5-06-02",desc:"Light Sensor Range 0lx to 1020lx"},{id:"A5-06-03",data:"a5-06-03",desc:"Light Sensor 10-bit measurement (1-Lux resolution) with range 0lx to 1000lx"},{id:"A5-06-04",data:"a5-06-04",desc:"Light Sensor Curtain Wall Brightness Sensor"},{id:"A5-06-05",data:"a5-06-05",desc:"Light Sensor Range 0lx to 10.200lx"},{id:"A5-07-01",data:"a5-07-01",desc:"Occupancy Sensor with Supply voltage monitor"},{id:"A5-07-02",data:"a5-07-02",desc:"Occupancy Sensor with Supply voltage monitor"},{id:"A5-07-03",data:"a5-07-03",desc:"Occupancy Sensor with upply voltage monitor and 10-bit illumination measurement"},{id:"A5-08-01",data:"a5-08-01",desc:"Range 0lx to 510lx, 0C to +51C and Occupancy Button"},{id:"A5-08-02",data:"a5-08-02",desc:"Range 0lx to 1020lx, 0C to +51C and Occupancy Button"},{id:"A5-08-03",data:"a5-08-03",desc:"Range 0lx to 1530lx, -30C to +50C and Occupancy Button"},{id:"A5-09-02",data:"a5-09-02",desc:"CO-Sensor 0 ppm to 1020 ppm"},{id:"A5-09-04",data:"a5-09-04",desc:"CO2 Sensor"},{id:"A5-09-05",data:"a5-09-05",desc:"VOC Sensor"},{id:"A5-09-06",data:"a5-09-06",desc:"Radon"},{id:"A5-09-07",data:"a5-09-07",desc:"Particles"},{id:"A5-09-08",data:"a5-09-08",desc:"Pure CO2 Sensor"},{id:"A5-09-09",data:"a5-09-09",desc:"Pure CO2 Sensor with Power Failure Detection"},{id:"A5-09-0A",data:"a5-09-0a",desc:"Hydrogen Gas Sensor"},{id:"A5-09-0B",data:"a5-09-0b",desc:"Radioactivity Sensor"},{id:"A5-09-0C",data:"a5-09-0c",desc:"VOC Sensor"},{id:"A5-10-01",data:"a5-10-01",desc:"Temperature Sensor, Set Point, Fan Speed and Occupancy Control"},{id:"A5-10-02",data:"a5-10-02",desc:"Temperature Sensor, Set Point, Fan Speed and Day/Night Control"},{id:"A5-10-03",data:"a5-10-03",desc:"Temperature Sensor, Set Point Control"},{id:"A5-10-04",data:"a5-10-04",desc:"Temperature Sensor, Set Point and Fan Speed Control"},{id:"A5-10-05",data:"a5-10-05",desc:"Temperature Sensor, Set Point and Occupancy Control"},{id:"A5-10-06",data:"a5-10-06",desc:"Temperature Sensor, Set Point and Day/Night Control"},{id:"A5-10-07",data:"a5-10-07",desc:"Temperature Sensor, Fan Speed Control"},{id:"A5-10-08",data:"a5-10-08",desc:"Temperature Sensor, Fan Speed and Occupancy Control"},{id:"A5-10-09",data:"a5-10-09",desc:"Temperature Sensor, Fan Speed and Day/Night Control"},{id:"A5-10-0A",data:"a5-10-0a",desc:"Temperature Sensor, Set Point Adjust and Single Input Contact"},{id:"A5-10-0B",data:"a5-10-0b",desc:"Temperature Sensor and Single Input Contact"},{id:"A5-10-0C",data:"a5-10-0c",desc:"Temperature Sensor and Occupancy Control"},{id:"A5-10-0D",data:"a5-10-0d",desc:"Temperature Sensor and Day/Night Control"},{id:"A5-10-10",data:"a5-10-10",desc:"Temperature and Humidity Sensor, Set Point and Occupancy Control"},{id:"A5-10-11",data:"a5-10-11",desc:"Temperature and Humidity Sensor, Set Point and Day/Night Control"},{id:"A5-10-12",data:"a5-10-12",desc:"Temperature and Humidity Sensor and Set Point"},{id:"A5-10-13",data:"a5-10-13",desc:"Temperature and Humidity Sensor, Occupancy Control"},{id:"A5-10-14",data:"a5-10-14",desc:"Temperature and Humidity Sensor, Day/Night Control"},{id:"A5-12-00",data:"a5-12-00",desc:"Automated Meter Reading (AMR), Counter"},{id:"A5-12-01",data:"a5-12-01",desc:"Automated Meter Reading (AMR), Electricity"},{id:"A5-12-02",data:"a5-12-02",desc:"Automated Meter Reading (AMR), Gas"},{id:"A5-12-03",data:"a5-12-03",desc:"Automated Meter Reading (AMR), Water"},{id:"A5-13-01",data:"a5-13-01",desc:"Environmental Applications, Weather Station"},{id:"A5-13-02",data:"a5-13-02",desc:"Environmental Applications, Sun Intensity"},{id:"A5-13-03",data:"a5-13-03",desc:"Environmental Applications, Date Exchange"},{id:"A5-13-04",data:"a5-13-04",desc:"Environmental Applications, Time and Day Exchange"},{id:"A5-13-05",data:"a5-13-05",desc:"Environmental Applications, Direction Exchange"},{id:"A5-13-06",data:"a5-13-06",desc:"Environmental Applications, Geographic Position Exchange"},{id:"A5-14-01",data:"a5-14-01",desc:"Single Input Contact (Window/Door), Supply voltage monitor"},{id:"A5-14-02",data:"a5-14-02",desc:"Single Input Contact (Window/Door), Supply voltage monitor and Illumination"},{id:"A5-14-03",data:"a5-14-03",desc:"Single Input Contact (Window/Door), Supply voltage monitor and Vibration"},{id:"A5-14-04",data:"a5-14-04",desc:"Single Input Contact (Window/Door), Supply voltage monitor, Vibration and Illumination"},{id:"A5-14-05",data:"a5-14-05",desc:"Vibration/Tilt, Supply voltage monitor"},{id:"A5-14-06",data:"a5-14-06",desc:"Vibration/Tilt, Illumination and Supply voltage monitor"},{id:"A5-14-07",data:"a5-14-07",desc:"Dual-door-contact with States Open/Closed and Locked/Unlocked, Supply voltage monitor"},{id:"A5-14-08",data:"a5-14-08",desc:"Dual-door-contact with States Open/Closed and Locked/Unlocked, Supply voltage monitor and Vibration detection"},{id:"A5-14-09",data:"a5-14-09",desc:"Window/Door-Sensor with States Open/Closed/Tilt, Supply voltage monitor"},{id:"A5-14-0A",data:"a5-14-0a",desc:"Window/Door-Sensor with States Open/Closed/Tilt, Supply voltage monitor and Vibration detection"},{id:"A5-20-04",data:"a5-20-04",desc:"Heating Radiator Valve Actuating Drive with Feed and Room Temperature Measurement, Local Set Point Control and Display (BI-DIR)"},{id:"A5-30-01",data:"a5-30-01",desc:"Single Input Contact, Battery Monitor"},{id:"A5-30-02",data:"a5-30-02",desc:"Single Input Contact"},{id:"A5-30-03",data:"a5-30-03",desc:"4 Digital Inputs, Wake and Temperature"},{id:"A5-30-04",data:"a5-30-04",desc:"3 Digital Inputs, 1 Digital Input 8 Bits"},{id:"D2-01-01",data:"d2-01-01",teachin:"general",desc:"Electronic switches and dimmers with Energy Measurement and Local Control, Type 0x01"},{id:"D2-01-03",data:"d2-01-03",teachin:"general",desc:"Electronic switches and dimmers with Energy Measurement and Local Control, Type 0x03"},{id:"D2-05-00",data:"d2-05-00",teachin:"general",desc:"Blinds Control for Position and Angle, Type 0x00"},{id:"D2-06-01",data:"d2-06-01",desc:"Multisensor Window Handle, Alarm, Position Sensor, Vacation Mode, Optional Sensors"}]},{id:"Eltako",vendor:"eltako",subtypes:[{id:"DSZ14DRS",data:"eltako_powermeter",desc:"Power Meter"},{id:"DSZ14WDRS",data:"eltako_powermeter",desc:"Power Meter"},{id:"F1FT65",data:"eltako_button1",desc:"1 Ch Button"},{id:"F2L14",data:"eltako_relay",desc:"Relay"},{id:"F2T55E",data:"eltako_button1",desc:"1 Ch Button"},{id:"F3Z14D (Electricity)",data:"a5-12-01",desc:"Power Meter"},{id:"F3Z14D (Gas)",data:"a5-12-02",desc:"Gas Meter"},{id:"F3Z14D (Water)",data:"a5-12-03",desc:"Water Meter"},{id:"F4T65 (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"F4T65 (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"F6T65B",data:"eltako_f6t",desc:"6 Ch Button"},{id:"F6T65B (encrypted)",data:"eltako_sec_button6",desc:"6 Ch Button"},{id:"FABH65S",data:"eltako_motion",desc:"Motion Sensor"},{id:"FAH60",data:"eltako_lux",desc:"Light Sensor"},{id:"FAH60B",data:"eltako_lux",desc:"Light Sensor"},{id:"FAH65S",data:"eltako_lux",desc:"Light Sensor"},{id:"FAFT60",data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FASM60",data:"eltako_sender2",desc:"2 Ch Sender"},{id:"FBH63AP",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65B",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65S",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65TFB (motion)",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65TFB (weather)",data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FCO2TF65",data:"a5-09-04",desc:"CO2 Sensor"},{id:"FD62NPN-230V",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"FDG14",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FDG71-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FDG71L-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FFG7B (A5-14-09)",data:"a5-14-09",desc:"Window Handle"},{id:"FFG7B (F6-10-00)",data:"f6-10-00",desc:"Window Handle"},{id:"FFR14",data:"eltako_relay",desc:"Relay"},{id:"FFR61-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FFT65B",data:"a5-04-02",desc:"Temperature and Humidity Sensor"},{id:"FIFT65S",data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FIH65B",data:"eltako_lux2",desc:"Light Sensor"},{id:"FIH65S",data:"eltako_lux",desc:"Light Sensor"},{id:"FJ62-230V",data:"eltako_tf_blind",teachin:"general",desc:"Blind"},{id:"FJ62NP-230V",data:"eltako_tf_blind",teachin:"general",desc:"Blind"},{id:"FHF",data:"f6-10-00",desc:"Hoppe Window Handle"},{id:"FKC",data:"eltako_fkc",desc:"Keycard"},{id:"FKF",data:"eltako_fkf",desc:"Keycard"},{id:"FKLD61",data:"eltako_dimmer2",teachin:"general",desc:"Dimmer"},{id:"FL62-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"FLGTF55 (A5-04-02)",data:"a5-04-02",desc:"Temperature"},{id:"FLGTF55 (A5-09-0C)",data:"a5-09-0c",desc:"Sensor"},{id:"FMH2",data:"eltako_button2",desc:"2 Ch Button"},{id:"FMH4",data:"eltako_button4",desc:"4 Ch Button"},{id:"FMT55/2",data:"eltako_button2",desc:"2 Ch Button"},{id:"FMT55/4",data:"eltako_button4",desc:"4 Ch Button"},{id:"FMS14",data:"eltako_relay",desc:"Relay"},{id:"FMZ14",data:"eltako_relay",desc:"Relay"},{id:"FMZ61-230V",data:"eltako_relay",desc:"Relay"},{id:"FLC61NP-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FLD61",data:"eltako_dimmer2",teachin:"general",desc:"Dimmer"},{id:"FMS61NP-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FR62-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"FRGBW71L",data:"eltako_rgbw",desc:"RGBW Light"},{id:"FRW",data:"f6-05-02",desc:"Smoke Detector"},{id:"FSB14",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB61-230V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB61NP-230V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB71",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSDG14",data:"eltako_powermeter",desc:"Power Meter"},{id:"FSG14/1-10V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FSG71/1-10V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FSM14",data:"eltako_sender4",desc:"4 Ch Sender"},{id:"FSM60B (Mode 1&2)",data:"eltako_fsm60b",desc:"Radio Sender"},{id:"FSM60B (A5-30-03)",data:"a5-30-03",desc:"Radio Sender"},{id:"FSM60B (A5-30-01)",data:"a5-30-01",desc:"Radio Sender"},{id:"FSM61",data:"eltako_sender2",desc:"2 Ch Sender"},{id:"FSR14-2x",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR14-4x",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR14SSR",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61/8-24V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61G-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61LN-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61NP-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61VA-10A (switch)",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61VA-10A (meter)",data:"eltako_powermeter2",desc:"Power Meter"},{id:"FSR71-2x-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR71-4x-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSS12",data:"a5-12-01",desc:"Power Meter"},{id:"FSSA-230V",data:"eltako_switch",desc:"Switch"},{id:"FSTAP-al/sz",data:"eltako_fstap",desc:"Keyswitch"},{id:"FSUD-230V",data:"eltako_fsud",desc:"Dimmer"},{id:"FSVA-230V (switch)",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSVA-230V (meter)",data:"eltako_powermeter2",desc:"Power Meter"},{id:"FT4F (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"FT4F (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"FT55 (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"FT55 (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"FTF55",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTF65",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTF65S",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTKB",data:"d5-00-01",desc:"Window/Door Contact"},{id:"FTKB-hg",data:"a5-14-0a",desc:"Window/Door Contact"},{id:"FTK",data:"d5-00-01",desc:"Window/Door Contact"},{id:"FTKE",data:"eltako_contact",desc:"Window/Door Contact"},{id:"FTN14",data:"eltako_relay",desc:"Relay"},{id:"FTN61NP-230V",data:"eltako_relay",desc:"Relay"},{id:"FTR65DS",data:"eltako_thermo",desc:"Thermostate"},{id:"FTR65HB",data:"eltako_ftr65hb",desc:"Thermostate"},{id:"FTR65HS",data:"eltako_thermo",desc:"Thermostate"},{id:"FTR78S",data:"eltako_ftr78s",desc:"Thermostate"},{id:"FUD14",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD14/800W",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD61NP-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD61NPN-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD71",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD70S-230V",data:"eltako_fsud",teachin:"general",desc:"Dimmer"},{id:"FUTH55D",data:"eltako_futh55d",desc:"Thermostate"},{id:"FUTH65D",data:"eltako_futh65d",desc:"Thermostate"},{id:"FWS60B (A5-30-03)",data:"eltako_water_m3",desc:"Water Sensor"},{id:"FWS60B (A5-30-01)",data:"eltako_water_m4",desc:"Water Sensor"},{id:"FWS61",data:"a5-13-01",desc:"Weatherstation"},{id:"FWS81",data:"afriso_water_eco",desc:"Water Sensor"},{id:"FWWKW71L",data:"eltako_wwkw",desc:"Warm/Cold White Light"},{id:"FWWKW71L (KW)",data:"eltako_kw",desc:"Cold White Light"},{id:"FWWKW71L (WW)",data:"eltako_ww",desc:"Warm White Light"},{id:"FWZ12",data:"a5-12-01",desc:"Power Meter"},{id:"FWZ14",data:"eltako_powermeter",desc:"Power Meter"},{id:"FWZ61",data:"a5-12-01",desc:"Power Meter"},{id:"FZK14",data:"eltako_relay",desc:"Relay"},{id:"FZK61NP-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FZS",data:"eltako_fzs",desc:"Button"},{id:"FZS65",data:"eltako_fzs",desc:"Button"},{id:"PL-SAM1L",data:"eltako_pl_relay",desc:"Relay"},{id:"PL-SAM2",data:"eltako_pl_blind",desc:"Blind"},{id:"PL-SAM2L",data:"eltako_pl_relay",desc:"Relay"},{id:"PL-SAMDR",data:"eltako_pl_dimmer",desc:"Dimmer"},{id:"PL-SAMDU",data:"eltako_pl_dimmer",desc:"Dimmer"},{id:"PL-SAMTEMP",data:"eltako_pl_samtemp",desc:"Thermostate"},{id:"TF100A-230V",data:"eltako_tf_alarm",teachin:"general",desc:"Alarm"},{id:"TF100D-230V",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF100L-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF61D-230V",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF61L-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF61J-230V",data:"eltako_tf_blind",teachin:"general",desc:"Blind"},{id:"TF61R-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF-1FT",data:"eltako_button1",desc:"Button"},{id:"TF-2ZT55",data:"eltako_button2",desc:"Button"},{id:"TF-4FT",data:"eltako_button4",desc:"Button"},{id:"TF-4FT55",data:"eltako_button4",desc:"Button"},{id:"TF-4PT55",data:"eltako_button4",desc:"Button"},{id:"TF-AHDSB (TF mode)",data:"eltako_tf_input",desc:"Brightness Sensor"},{id:"TF-AHDSB (FAH mode)",data:"eltako_tf_lux",desc:"Brightness Sensor"},{id:"TF-BHSB (TF mode)",data:"eltako_tf_motion",desc:"Motion Sensor"},{id:"TF-BHSB (FBH mode)",data:"eltako_motion2",desc:"Motion Sensor"},{id:"TF-BSB55",data:"eltako_tf_motion",desc:"Motion Sensor"},{id:"TF-DTB",data:"eltako_dimmer_knob",desc:"Dimmer Knob"},{id:"TF-FGB (a5-14-09)",data:"a5-14-09",desc:"Window Handle"},{id:"TF-FGB (f6-10-00)",data:"f6-10-00",desc:"Window Handle"},{id:"TF-FKB",data:"eltako_tf_contact",desc:"Contact"},{id:"TF-FKE",data:"eltako_contact",desc:"Contact"},{id:"TF-FKS",data:"a5-20-04",desc:"Thermostate"},{id:"TF-FTE",data:"eltako_contact",desc:"Contact"},{id:"TF-FTSB (a5-04-02)",data:"a5-04-02",desc:"Temperature and Humidity Sensor"},{id:"TF-FTSB (a5-04-03)",data:"a5-04-03",desc:"Temperature and Humidity Sensor"},{id:"TF-HMB",data:"eltako_heat",desc:"Heat Sensor"},{id:"TF-IUS",data:"eltako_tf_alarm",teachin:"general",desc:"Switch"},{id:"TF-RWB",data:"eltako_tf_smoke",desc:"Smoke Sensor"},{id:"TF-TA55DL",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF-TA65D",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF-TA65J",data:"eltako_tf_blind",teachin:"general",desc:"Blind"},{id:"TF-TA65L",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF-TRHB (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRHB (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TRHB55 (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRHB55 (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TRSB (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRSB (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TRSB55 (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRSB55 (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TTB (Pushbutton)",data:"f6-01-01",desc:"Button"},{id:"TF-TTB (Tracker+Pushbutton)",data:"eltako_tf_ttb",desc:"Button"},{id:"TF-WTB",data:"eltako_button1",desc:"Button"},{id:"TF-WTB55",data:"eltako_button2",desc:"Button"}]},{id:"Omnio",vendor:"omnio",subtypes:[{id:"CO2-Sensor",data:"a5-09-04",desc:"CO2 Sensor"},{id:"FG101",data:"f6-10-00",desc:"Window Handle"},{id:"FG111",data:"f6-10-00",desc:"Window Handle"},{id:"FG121",data:"f6-10-00",desc:"Window Handle"},{id:"FG131",data:"f6-10-00",desc:"Window Handle"},{id:"FK101",data:"d5-00-01",desc:"Window Contact"},{id:"FDM-SOLARPIR (f6-02-01)",data:"f6-02-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-06-02)",data:"a5-06-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-01)",data:"a5-07-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-02)",data:"a5-07-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-03)",data:"a5-07-03",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-01)",data:"a5-08-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-02)",data:"a5-08-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-03)",data:"a5-08-03",desc:"Motion Sensor"},{id:"H20-ECO",data:"f6-05-01",desc:"Water Sensor"},{id:"KD230/10",data:"d2-01-03",desc:"Dimmer Actuator"},{id:"KS230/10",data:"d2-01-01",desc:"Switch Actuator"},{id:"KXJ230/12",data:"d2-05-00",desc:"Jalousie Actuator"},{id:"REGH12/08",data:"d2-01-14",desc:"Thermostat Actuator 8 Channel"},{id:"REGJ12/04",data:"d2-05-01",desc:"Jalousie Actuator 4 Channel"},{id:"REGS12/04",data:"d2-01-13",desc:"Switch Actuator 4 Channel"},{id:"REGS12/08",data:"d2-01-14",desc:"Switch Actuator 8 Channel"},{id:"RTF160 (A5-10-03)",data:"a5-10-03",desc:"Temperature and Humidity Sensor"},{id:"RTF160 (A5-10-10)",data:"a5-10-10",desc:"Temperature and Humidity Sensor"},{id:"RTF161 (A5-10-03)",data:"a5-10-03",desc:"Temperature and Humidity Sensor"},{id:"RTF161 (A5-10-10)",data:"a5-10-10",desc:"Temperature and Humidity Sensor"},{id:"UPD230/10",data:"d2-01-03",desc:"Dimmer Actuator"},{id:"UPH230/10",data:"d2-01-01",desc:"Thermostat Actuator"},{id:"UPH230/12",data:"d2-01-11",desc:"Thermostat Actuator 2 Channel"},{id:"UPJ230/12",data:"d2-05-00",desc:"Jalousie Actuator"},{id:"UPS230/08",data:"d2-01-01",desc:"Switch Actuator"},{id:"UPS230/10",data:"d2-01-01",desc:"Switch Actuator"},{id:"UPS230/12",data:"d2-01-11",desc:"Switch Actuator 2 Channel"},{id:"XFJ",data:"a5-13-01",desc:"Weather Station"}]},{id:"EiMSIG",vendor:"eimsig",subtypes:[{id:"FGSE,FSE,USE (A5-14-01)",data:"a5-14-01",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-03)",data:"a5-14-03",desc:"Window/Door Sensor"},{id:"FGSE,FSE,USE (A5-14-07)",data:"a5-14-07",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-08)",data:"a5-14-08",desc:"Window/Door Sensor"},{id:"FGSE,FSE,USE (A5-14-09)",data:"a5-14-09",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-0A)",data:"a5-14-0a",desc:"Window/Door Sensor"}]},{id:"MACO",vendor:"maco",subtypes:[{id:"mTRONIC Multisensor",data:"a5-14-0a",desc:"Window Sensor"},{id:"eTronic Windowsensor",data:"a5-14-01",desc:"Window Sensor"}]},{id:"HORA",vendor:"hora",subtypes:[{id:"SmartDrive",data:"a5-20-04",desc:"Thermostat"}]},{id:"PEHA",vendor:"peha",subtypes:[{id:"D 20.450.xxx FU-RTR",data:"a5-10-03",desc:"Room Operating Unit"},{id:"D 20.450.xxx FU-RTR MS",data:"a5-10-06",desc:"Room Operating Unit"},{id:"D 450 FU FK",data:"d5-00-01",desc:"Window Contact"},{id:"D 451 FU-BM",data:"a5-07-01",desc:"Motion Sensor"},{id:"D 451 FU-BM DE",data:"a5-07-01",desc:"Motion Sensor"},{id:"D 451 FU FK",data:"d5-00-01",desc:"Window Contact"},{id:"D 451 FU-B EBI",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI UP O.A.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI PF O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-B EBIM",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 451 FU-EBIM O.T.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 451 FU-EBIM UP O.A.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 4511 FU-EBIM ST",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 452 FU-EBI O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 452 FU-EBIM O.T.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 452 FU-EBI JR O.T.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBIM JR O.T.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBI JR UP O.A.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBIM JR UP O.A.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-2REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-SPV 4REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-2REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-JR 2REG",data:"peha_blind",teachin:"general",desc:"Switch Actuator"},{id:"D 4571 FU-EBIM ST",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"}]},{id:"Thermokon",vendor:"thermokon",subtypes:[{id:"SRC-DO Light",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"SRC-DO Blind",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"SRW01",data:"d5-00-01",desc:"Window Contact"},{id:"SR04",data:"a5-02-05",desc:"Temperature Sensor"},{id:"SR04P",data:"a5-10-03",desc:"Temperature Sensor"},{id:"SR04P-MS",data:"a5-10-06",desc:"Temperature Sensor"},{id:"SR04PS",data:"a5-10-04",desc:"Temperature Sensor"},{id:"SR04PST",data:"a5-10-01",desc:"Temperature Sensor"},{id:"SR04PT",data:"a5-10-05",desc:"Temperature Sensor"},{id:"SR04T",data:"a5-10-0c",desc:"Temperature Sensor"}]},{id:"WINKHAUS",vendor:"winkhaus",subtypes:[{id:"FM.A",data:"d5-00-01",desc:"Window Contact"},{id:"FM.V (D5-00-01)",data:"d5-00-01",desc:"Window Contact"},{id:"FM.V (A5-14-01)",data:"a5-14-01",desc:"Window Contact"}]},{id:"AFRISOLab",vendor:"afriso",subtypes:[{id:"AMC 10",data:"d5-00-01",desc:"Window Contact"},{id:"AVD 20-D",data:"a5-20-04",desc:"Thermostat"},{id:"CO2-Sensor",data:"a5-09-08",desc:"CO2 Sensor"},{id:"FT",data:"a5-10-03",desc:"Room Operating Unit"},{id:"FTF",data:"a5-10-12",desc:"Room Operating Unit"},{id:"FTM TF (a5-04-01)",data:"a5-04-01",desc:"Temperature and Humidity Sensor"},{id:"FTM TF (a5-10-12)",data:"a5-10-12",desc:"Temperature and Humidity Sensor"},{id:"FTM 20 TF",data:"a5-04-03",desc:"Temperature and Humidity Sensor"},{id:"WaterSensor - con",data:"afriso_water_con",desc:"Water Sensor"},{id:"WaterSensor - eco",data:"afriso_water_eco",desc:"Water Sensor"},{id:"ASD 10",data:"afriso_asd_10",desc:"Smoke Sensor"}]},{id:"HOPPE",vendor:"hoppe",subtypes:[{id:"eFenstergriff SecuSignal",data:"f6-10-00",desc:"F6-10-00"},{id:"eFenstergriff ConnectHome",data:"f6-10-00",desc:"F6-10-00"},{id:"Lift/Slide Doors",data:"hoppe_door",desc:"Sliding Door Handle, open closed"},{id:"Window/Door Contact",data:"d5-00-01",desc:"HOPPE Window/Door Contact"},{id:"eFenstergriff AutoLock",data:"d2-06-40",desc:"D2-06-40"}]},{id:"SODA",vendor:"soda",subtypes:[{id:"Window Handle",data:"d2-06-01"}]},{id:"LOCKSTAR",vendor:"lockstar",subtypes:[{id:"Window Handle Demo",data:"d2-06-02"}]},{id:"Rehau",vendor:"rehau",subtypes:[{id:"SmartGuard Window Sensor",data:"d2-06-10"},{id:"SmartGuard 2 Window Sensor",data:"d2-06-ff"},{id:"Inovent Fan",data:"d2-20-00"}]},{id:"Siegenia",vendor:"siegenia",subtypes:[{id:"Window Sensor"}]},{id:"OPUS",vendor:"opus",subtypes:[{id:"OPUS 1 / 55",data:"f6-02-01",desc:"Wall Button"},{id:"ASD 20",data:"f6-05-02",desc:"Smoke Sensor"},{id:"WaterSensor - con",data:"afriso_water_con",desc:"Water Sensor"},{id:"WaterSensor - eco",data:"afriso_water_eco",desc:"Water Sensor"},{id:"SR06 LCD 2T",data:"a5-10-03",desc:"Wallthermostat"},{id:"Window/Door Handle",data:"f6-10-00",desc:"Sliding Door Handle, open closed"},{id:"Door Handle",data:"hoppe_door",desc:"Sliding Door Handle, open closed"},{id:"Window/Door Contact",data:"d5-00-01",desc:"Window/Door Contact"},{id:"TemperatureSensor FTM 20 TF",data:"a5-04-03",desc:"Temperature Sensor"}]},{id:"Roto",vendor:"roto",subtypes:[{id:"Com-Tec Basic (a5-14-01)",data:"a5-14-01",desc:"Window/Door Sensor"},{id:"Com-Tec Basic (d5-00-01)",data:"d5-00-01",desc:"Window/Door Sensor"},{id:"Com-Tec Comfort",data:"a5-14-09",desc:"Window/Door Sensor"},{id:"Com-Tec Comfort S",data:"a5-14-0a",desc:"Window/Door Sensor"},{id:"E-Tec Drive",data:"d2-06-20",desc:"Window Opener"}]},{id:"Elero",vendor:"elero",subtypes:[{id:"RolMotion R10",data:"elero_R10",desc:"Shutter"}]},{id:"Virtual",vendor:"general",subtypes:[{id:"F6-01-01",data:"f6-01-01",teachin:"command",desc:"Switch Buttons Push Button"},{id:"F6-02-01",data:"f6-02-01",teachin:"command",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-02-02",data:"f6-02-02",teachin:"command",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 2"},{id:"F6-02-03",data:"f6-02-03",teachin:"command",desc:"Rocker Switch, 2 Rocker, Light Control - Applicatio Style 1"},{id:"F6-03-01",data:"f6-03-01",teachin:"command",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-03-02",data:"f6-03-02",teachin:"command",desc:"Light and Blind Control - Applicatio Style 1"}]}],V6_DEVICES:[{id:"General",vendor:"general",subtypes:[{id:"F6-01-01",data:"f6-01-01",desc:"Switch Buttons Push Button"},{id:"F6-02-01",data:"f6-02-01",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-02-02",data:"f6-02-02",desc:"Rocker Switch, 2 Rocker, Light and Blind Control - Applicatio Style 2"},{id:"F6-02-03",data:"f6-02-03",desc:"Rocker Switch, 2 Rocker, Light Control - Applicatio Style 1"},{id:"F6-02-04",data:"f6-02-04",desc:"Rocker Switch, 2 Rocker, Light and Blind Control ERP2"},{id:"F6-03-01",data:"f6-03-01",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 1"},{id:"F6-03-02",data:"f6-03-02",desc:"Rocker Switch, 4 Rocker, Light and Blind Control - Applicatio Style 2"},{id:"F6-04-01",data:"f6-04-01",desc:"Position Switch, Home and Office Application, Key Card Activated Switch"},{id:"F6-04-02",data:"f6-04-02",desc:"Position Switch, Home and Office Application, Key Card Activated Switch ERP2"},{id:"F6-05-00",data:"f6-05-00",desc:"Detectors, Wind Speed Threshold Detector"},{id:"F6-05-01",data:"f6-05-01",desc:"Detectors, Liquid Leakage Sensor"},{id:"F6-05-02",data:"f6-05-02",desc:"Detectors, Smoke Detector"},{id:"F6-10-00",data:"f6-10-00",desc:"Window Handle"},{id:"F6-10-01",data:"f6-10-01",desc:"Window Handle ERP2"},{id:"D5-00-01",data:"d5-00-01",desc:"Single Input Contact"},{id:"A5-02-01",data:"a5-02-01",desc:"Temperature Sensor Range -40C to 0C"},{id:"A5-02-02",data:"a5-02-02",desc:"Temperature Sensor Range -30C to +10C"},{id:"A5-02-03",data:"a5-02-03",desc:"Temperature Sensor Range -20C to +20C"},{id:"A5-02-04",data:"a5-02-04",desc:"Temperature Sensor Range -10C to +30C"},{id:"A5-02-05",data:"a5-02-05",desc:"Temperature Sensor Range 0C to +40C"},{id:"A5-02-06",data:"a5-02-06",desc:"Temperature Sensor Range 10C to +50C"},{id:"A5-02-07",data:"a5-02-07",desc:"Temperature Sensor Range 20C to +60C"},{id:"A5-02-08",data:"a5-02-08",desc:"Temperature Sensor Range 30C to +70C"},{id:"A5-02-09",data:"a5-02-09",desc:"Temperature Sensor Range 40C to +80C"},{id:"A5-02-0A",data:"a5-02-0a",desc:"Temperature Sensor Range 50C to +90C"},{id:"A5-02-0B",data:"a5-02-0b",desc:"Temperature Sensor Range 60C to +100C"},{id:"A5-02-10",data:"a5-02-10",desc:"Temperature Sensor Range -60C to +20C"},{id:"A5-02-11",data:"a5-02-11",desc:"Temperature Sensor Range -50C to +30C"},{id:"A5-02-12",data:"a5-02-12",desc:"Temperature Sensor Range -40C to +40C"},{id:"A5-02-13",data:"a5-02-13",desc:"Temperature Sensor Range -30C to +50C"},{id:"A5-02-14",data:"a5-02-14",desc:"Temperature Sensor Range -20C to +60C"},{id:"A5-02-15",data:"a5-02-15",desc:"Temperature Sensor Range -10C to +70C"},{id:"A5-02-16",data:"a5-02-16",desc:"Temperature Sensor Range 0C to +80C"},{id:"A5-02-17",data:"a5-02-17",desc:"Temperature Sensor Range +10C to +90C"},{id:"A5-02-18",data:"a5-02-18",desc:"Temperature Sensor Range +20C to +100C"},{id:"A5-02-19",data:"a5-02-19",desc:"Temperature Sensor Range +30C to +110C"},{id:"A5-02-1a",data:"a5-02-1a",desc:"Temperature Sensor Range +40C to +120C"},{id:"A5-02-1b",data:"a5-02-1b",desc:"Temperature Sensor Range +50C to +130C"},{id:"A5-02-20",data:"a5-02-20",desc:"Temperature Sensor Range -10C to +41.2C"},{id:"A5-02-30",data:"a5-02-30",desc:"Temperature Sensor Range -40C to +62.3C"},{id:"A5-04-01",data:"a5-04-01",desc:"Temperature and Humidity Sensor Range 0C to +40C and 0% to 100%"},{id:"A5-04-02",data:"a5-04-02",desc:"Temperature and Humidity Sensor Range -20C to +60C and 0% to 100%"},{id:"A5-04-03",data:"a5-04-03",desc:"Temperature and Humidity Sensor Range -20C to +60C 10bit-measurement and 0% to 100%"},{id:"A5-06-01",data:"a5-06-01",desc:"Light Sensor Range 300lx to 60000lx"},{id:"A5-06-02",data:"a5-06-02",desc:"Light Sensor Range 0lx to 1020lx"},{id:"A5-06-03",data:"a5-06-03",desc:"Light Sensor 10-bit measurement (1-Lux resolution) with range 0lx to 1000lx"},{id:"A5-06-04",data:"a5-06-04",desc:"Light Sensor Curtain Wall Brightness Sensor"},{id:"A5-06-05",data:"a5-06-05",desc:"Light Sensor Range 0lx to 10.200lx"},{id:"A5-07-01",data:"a5-07-01",desc:"Occupancy Sensor with Supply voltage monitor"},{id:"A5-07-02",data:"a5-07-02",desc:"Occupancy Sensor with Supply voltage monitor"},{id:"A5-07-03",data:"a5-07-03",desc:"Occupancy Sensor with upply voltage monitor and 10-bit illumination measurement"},{id:"A5-08-01",data:"a5-08-01",desc:"Range 0lx to 510lx, 0C to +51C and Occupancy Button"},{id:"A5-08-02",data:"a5-08-02",desc:"Range 0lx to 1020lx, 0C to +51C and Occupancy Button"},{id:"A5-08-03",data:"a5-08-03",desc:"Range 0lx to 1530lx, -30C to +50C and Occupancy Button"},{id:"A5-09-02",data:"a5-09-02",desc:"CO-Sensor 0 ppm to 1020 ppm"},{id:"A5-09-04",data:"a5-09-04",desc:"CO2 Sensor"},{id:"A5-09-05",data:"a5-09-05",desc:"VOC Sensor"},{id:"A5-09-06",data:"a5-09-06",desc:"Radon"},{id:"A5-09-07",data:"a5-09-07",desc:"Particles"},{id:"A5-09-08",data:"a5-09-08",desc:"Pure CO2 Sensor"},{id:"A5-09-09",data:"a5-09-09",desc:"Pure CO2 Sensor with Power Failure Detection"},{id:"A5-09-0A",data:"a5-09-0a",desc:"Hydrogen Gas Sensor"},{id:"A5-09-0B",data:"a5-09-0b",desc:"Radioactivity Sensor"},{id:"A5-09-0C",data:"a5-09-0c",desc:"VOC Sensor"},{id:"A5-10-01",data:"a5-10-01",desc:"Temperature Sensor, Set Point, Fan Speed and Occupancy Control"},{id:"A5-10-02",data:"a5-10-02",desc:"Temperature Sensor, Set Point, Fan Speed and Day/Night Control"},{id:"A5-10-03",data:"a5-10-03",desc:"Temperature Sensor, Set Point Control"},{id:"A5-10-04",data:"a5-10-04",desc:"Temperature Sensor, Set Point and Fan Speed Control"},{id:"A5-10-05",data:"a5-10-05",desc:"Temperature Sensor, Set Point and Occupancy Control"},{id:"A5-10-06",data:"a5-10-06",desc:"Temperature Sensor, Set Point and Day/Night Control"},{id:"A5-10-07",data:"a5-10-07",desc:"Temperature Sensor, Fan Speed Control"},{id:"A5-10-08",data:"a5-10-08",desc:"Temperature Sensor, Fan Speed and Occupancy Control"},{id:"A5-10-09",data:"a5-10-09",desc:"Temperature Sensor, Fan Speed and Day/Night Control"},{id:"A5-10-0A",data:"a5-10-0a",desc:"Temperature Sensor, Set Point Adjust and Single Input Contact"},{id:"A5-10-0B",data:"a5-10-0b",desc:"Temperature Sensor and Single Input Contact"},{id:"A5-10-0C",data:"a5-10-0c",desc:"Temperature Sensor and Occupancy Control"},{id:"A5-10-0D",data:"a5-10-0d",desc:"Temperature Sensor and Day/Night Control"},{id:"A5-10-10",data:"a5-10-10",desc:"Temperature and Humidity Sensor, Set Point and Occupancy Control"},{id:"A5-10-11",data:"a5-10-11",desc:"Temperature and Humidity Sensor, Set Point and Day/Night Control"},{id:"A5-10-12",data:"a5-10-12",desc:"Temperature and Humidity Sensor and Set Point"},{id:"A5-10-13",data:"a5-10-13",desc:"Temperature and Humidity Sensor, Occupancy Control"},{id:"A5-10-14",data:"a5-10-14",desc:"Temperature and Humidity Sensor, Day/Night Control"},{id:"A5-12-00",data:"a5-12-00",desc:"Automated Meter Reading (AMR), Counter"},{id:"A5-12-01",data:"a5-12-01",desc:"Automated Meter Reading (AMR), Electricity"},{id:"A5-12-02",data:"a5-12-02",desc:"Automated Meter Reading (AMR), Gas"},{id:"A5-12-03",data:"a5-12-03",desc:"Automated Meter Reading (AMR), Water"},{id:"A5-13-01",data:"a5-13-01",desc:"Environmental Applications, Weather Station"},{id:"A5-13-02",data:"a5-13-02",desc:"Environmental Applications, Sun Intensity"},{id:"A5-13-03",data:"a5-13-03",desc:"Environmental Applications, Date Exchange"},{id:"A5-13-04",data:"a5-13-04",desc:"Environmental Applications, Time and Day Exchange"},{id:"A5-13-05",data:"a5-13-05",desc:"Environmental Applications, Direction Exchange"},{id:"A5-13-06",data:"a5-13-06",desc:"Environmental Applications, Geographic Position Exchange"},{id:"A5-14-01",data:"a5-14-01",desc:"Single Input Contact (Window/Door), Supply voltage monitor"},{id:"A5-14-02",data:"a5-14-02",desc:"Single Input Contact (Window/Door), Supply voltage monitor and Illumination"},{id:"A5-14-03",data:"a5-14-03",desc:"Single Input Contact (Window/Door), Supply voltage monitor and Vibration"},{id:"A5-14-04",data:"a5-14-04",desc:"Single Input Contact (Window/Door), Supply voltage monitor, Vibration and Illumination"},{id:"A5-14-05",data:"a5-14-05",desc:"Vibration/Tilt, Supply voltage monitor"},{id:"A5-14-06",data:"a5-14-06",desc:"Vibration/Tilt, Illumination and Supply voltage monitor"},{id:"A5-14-07",data:"a5-14-07",desc:"Dual-door-contact with States Open/Closed and Locked/Unlocked, Supply voltage monitor"},{id:"A5-14-08",data:"a5-14-08",desc:"Dual-door-contact with States Open/Closed and Locked/Unlocked, Supply voltage monitor and Vibration detection"},{id:"A5-14-09",data:"a5-14-09",desc:"Window/Door-Sensor with States Open/Closed/Tilt, Supply voltage monitor"},{id:"A5-14-0A",data:"a5-14-0a",desc:"Window/Door-Sensor with States Open/Closed/Tilt, Supply voltage monitor and Vibration detection"},{id:"A5-20-04",data:"a5-20-04",desc:"Heating Radiator Valve Actuating Drive with Feed and Room Temperature Measurement, Local Set Point Control and Display (BI-DIR)"},{id:"A5-30-01",data:"a5-30-01",desc:"Single Input Contact, Battery Monitor"},{id:"A5-30-02",data:"a5-30-02",desc:"Single Input Contact"},{id:"A5-30-03",data:"a5-30-03",desc:"4 Digital Inputs, Wake and Temperature"},{id:"A5-30-04",data:"a5-30-04",desc:"3 Digital Inputs, 1 Digital Input 8 Bits"},{id:"D2-01-01",data:"d2-01-01",teachin:"general",desc:"Electronic switches and dimmers with Energy Measurement and Local Control, Type 0x01"},{id:"D2-01-03",data:"d2-01-03",teachin:"general",desc:"Electronic switches and dimmers with Energy Measurement and Local Control, Type 0x03"},{id:"D2-05-00",data:"d2-05-00",teachin:"general",desc:"Blinds Control for Position and Angle, Type 0x00"},{id:"D2-06-01",data:"d2-06-01",desc:"Multisensor Window Handle, Alarm, Position Sensor, Vacation Mode, Optional Sensors"},{id:"Generic Switch",data:"generic_switch"}]},{id:"Eltako",vendor:"eltako",subtypes:[{id:"BUTH55",data:"eltako_buth55",desc:"Thermostate",only:["v6plus"]},{id:"BUTH65",data:"eltako_buth65",desc:"Thermostate",only:["v6plus"]},{id:"DSZ14DRS",data:"eltako_powermeter",desc:"Power Meter"},{id:"DSZ14WDRS",data:"eltako_powermeter",desc:"Power Meter"},{id:"F1FT65",data:"eltako_button1",desc:"1 Ch Button"},{id:"F2L14",data:"eltako_relay",desc:"Relay"},{id:"F2T55E",data:"eltako_button1",desc:"1 Ch Button"},{id:"F3Z14D (Electricity)",data:"a5-12-01",desc:"Power Meter"},{id:"F3Z14D (Gas)",data:"a5-12-02",desc:"Gas Meter"},{id:"F3Z14D (Water)",data:"a5-12-03",desc:"Water Meter"},{id:"F4HK14",data:"eltako_fhk",teachin:"general",desc:"Heat-Cool-Relay"},{id:"F4T65 (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"F4T65 (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"F6T65B",data:"eltako_f6t",desc:"6 Ch Button"},{id:"F6T65B (encrypted)",data:"eltako_sec_button6",desc:"6 Ch Button"},{id:"FABH65S",data:"eltako_motion",desc:"Motion Sensor"},{id:"FAE14SSR",data:"eltako_fhk",teachin:"general",desc:"Heat-Cool-Relay"},{id:"FAH60",data:"eltako_lux",desc:"Light Sensor"},{id:"FAH60B",data:"eltako_lux",desc:"Light Sensor"},{id:"FAH65S",data:"eltako_lux",desc:"Light Sensor"},{id:"FAFT60",data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FASM60",data:"eltako_sender2",desc:"2 Ch Sender"},{id:"FBH63AP",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65B",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65S",data:"eltako_motion",desc:"Motion Sensor"},{id:"FBH65TFB (motion)",data:"eltako_motion",desc:"Motion Sensor"},{id:"FCO2TF65",data:"a5-09-04",desc:"CO2 Sensor"},{id:"FD62NPN-230V",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer",eep:"a5-38-08"},{id:"FDG14",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FDG71-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FDG71L-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FFG7B (A5-14-09)",data:"a5-14-09",desc:"Window Handle"},{id:"FFG7B (F6-10-00)",data:"f6-10-00",desc:"Window Handle"},{id:"FFR14",data:"eltako_relay",desc:"Relay"},{id:"FFR61-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FFT65B",data:"a5-04-02",desc:"Temperature and Humidity Sensor"},{id:"FIFT65S",data:"eltako_weather",desc:"Temperature and Humidity Sensor"},{id:"FIH65B",data:"eltako_lux2",desc:"Light Sensor"},{id:"FIH65S",data:"eltako_lux",desc:"Light Sensor"},{id:"FJ62-230V",data:"eltako_tf_blind",teachin:"general",desc:"Blind",eep:"a5-3f-7f"},{id:"FJ62NP-230V",data:"eltako_tf_blind",teachin:"general",desc:"Blind"},{id:"FHF",data:"f6-10-00",desc:"Hoppe Window Handle"},{id:"FHK14",data:"eltako_fhk",teachin:"general",desc:"Heat-Cool-Relay"},{id:"FHK61-230V",data:"eltako_fhk",teachin:"general",desc:"Heat-Cool-Relay"},{id:"FHK61SSR-230V",data:"eltako_fhk",teachin:"general",desc:"Heat-Cool-Relay"},{id:"FHK61U-230V",data:"eltako_fhk",teachin:"general",desc:"Heat-Cool-Relay"},{id:"FKC",data:"eltako_fkc",desc:"Keycard"},{id:"FKF",data:"eltako_fkf",desc:"Keycard"},{id:"FKLD61",data:"eltako_dimmer2",teachin:"general",desc:"Dimmer"},{id:"FL62-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"FLGTF55 (A5-04-02)",data:"a5-04-02",desc:"Temperature"},{id:"FLGTF55 (A5-09-0C)",data:"a5-09-0c",desc:"Sensor"},{id:"FMH2",data:"eltako_button2",desc:"2 Ch Button"},{id:"FMH4",data:"eltako_button4",desc:"4 Ch Button"},{id:"FMT55/2",data:"eltako_button2",desc:"2 Ch Button"},{id:"FMT55/4",data:"eltako_button4",desc:"4 Ch Button"},{id:"FMS14",data:"eltako_relay",desc:"Relay"},{id:"FMZ14",data:"eltako_relay",desc:"Relay"},{id:"FMZ61-230V",data:"eltako_relay",desc:"Relay"},{id:"FLC61NP-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FLD61",data:"eltako_dimmer2",teachin:"general",desc:"Dimmer"},{id:"FMS61NP-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FR62-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"FRGBW71L",data:"eltako_rgbw",desc:"RGBW Light"},{id:"FRW",data:"f6-05-02",desc:"Smoke Detector"},{id:"FSB14",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB61-230V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB61NP-230V",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSB71",data:"eltako_blind",teachin:"general",desc:"Blind"},{id:"FSDG14",data:"eltako_powermeter",desc:"Power Meter"},{id:"FSG14/1-10V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FSG71/1-10V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FSHA-230V",data:"eltako_fhk",teachin:"general",desc:"Heat-Cool-Relay"},{id:"FSM14",data:"eltako_sender4",desc:"4 Ch Sender"},{id:"FSM60B (Mode 1&2)",data:"eltako_fsm60b",desc:"Radio Sender"},{id:"FSM60B (A5-30-03)",data:"a5-30-03",desc:"Radio Sender"},{id:"FSM60B (A5-30-01)",data:"a5-30-01",desc:"Radio Sender"},{id:"FSM61",data:"eltako_sender2",desc:"2 Ch Sender"},{id:"FSR14-2x",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR14-4x",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR14SSR",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61/8-24V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61G-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61LN-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61NP-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61VA-10A (switch)",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR61VA-10A (meter)",data:"eltako_powermeter2",desc:"Power Meter"},{id:"FSR71-2x-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSR71-4x-230V",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSS12",data:"a5-12-01",desc:"Power Meter"},{id:"FSSA-230V",data:"eltako_switch",desc:"Switch"},{id:"FSTAP-al/sz",data:"eltako_fstap",desc:"Keyswitch"},{id:"FSUD-230V",data:"eltako_fsud",desc:"Dimmer"},{id:"FSVA-230V (switch)",data:"eltako_switch",teachin:"general",desc:"Switch"},{id:"FSVA-230V (meter)",data:"eltako_powermeter2",desc:"Power Meter"},{id:"FT4F (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"FT4F (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"FT55 (2 Button)",data:"eltako_button4",desc:"4 Ch Button"},{id:"FT55 (1 Button)",data:"eltako_button2",desc:"2 Ch Button"},{id:"FTF55",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTF65",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTF65S",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTKB",data:"d5-00-01",desc:"Window/Door Contact"},{id:"FTKB-hg",data:"a5-14-0a",desc:"Window/Door Contact"},{id:"FTK",data:"d5-00-01",desc:"Window/Door Contact"},{id:"FTKE",data:"eltako_contact",desc:"Window/Door Contact"},{id:"FTN14",data:"eltako_relay",desc:"Relay"},{id:"FTN61NP-230V",data:"eltako_relay",desc:"Relay"},{id:"FTR65DS",data:"eltako_thermo",desc:"Thermostate"},{id:"FTR65HB",data:"eltako_ftr65hb",desc:"Thermostate"},{id:"FTR65HS",data:"eltako_thermo",desc:"Thermostate"},{id:"FTR78S",data:"eltako_ftr78s",desc:"Thermostate"},{id:"FUD14",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD14/800W",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD61NP-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD61NPN-230V",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD71",data:"eltako_dimmer",teachin:"general",desc:"Dimmer"},{id:"FUD70S-230V",data:"eltako_fsud",teachin:"general",desc:"Dimmer"},{id:"FUTH55D",data:"eltako_futh55d",desc:"Thermostate"},{id:"FUTH65D",data:"eltako_futh65d",desc:"Thermostate"},{id:"FWS60B (A5-30-03)",data:"eltako_water_m3",desc:"Water Sensor"},{id:"FWS60B (A5-30-01)",data:"eltako_water_m4",desc:"Water Sensor"},{id:"FWS61",data:"eltako_weather",desc:"Weatherstation"},{id:"FWS81",data:"afriso_water_eco",desc:"Water Sensor"},{id:"FWWKW71L",data:"eltako_wwkw",desc:"Warm/Cold White Light"},{id:"FWWKW71L (KW)",data:"eltako_kw",desc:"Cold White Light"},{id:"FWWKW71L (WW)",data:"eltako_ww",desc:"Warm White Light"},{id:"FWZ12",data:"a5-12-01",desc:"Power Meter"},{id:"FWZ14",data:"eltako_powermeter",desc:"Power Meter"},{id:"FWZ61",data:"a5-12-01",desc:"Power Meter"},{id:"FZK14",data:"eltako_relay",desc:"Relay"},{id:"FZK61NP-230V",data:"eltako_relay2",desc:"Relay2"},{id:"FZS",data:"eltako_fzs",desc:"Button"},{id:"FZS65",data:"eltako_fzs",desc:"Button"},{id:"PL-SAM1L",data:"eltako_pl_relay",desc:"Relay"},{id:"PL-SAM2",data:"eltako_pl_blind",desc:"Blind"},{id:"PL-SAM2L",data:"eltako_pl_relay",desc:"Relay"},{id:"PL-SAMDR",data:"eltako_pl_dimmer",desc:"Dimmer"},{id:"PL-SAMDU",data:"eltako_pl_dimmer",desc:"Dimmer"},{id:"PL-SAMTEMP",data:"eltako_pl_samtemp",desc:"Thermostate"},{id:"TF100A-230V",data:"eltako_tf_alarm",teachin:"general",desc:"Alarm"},{id:"TF100D-230V",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF100L-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF61D-230V",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF61L-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF61J-230V",data:"eltako_tf_blind",teachin:"general",desc:"Blind"},{id:"TF61R-230V",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF-1FT",data:"eltako_button1",desc:"Button"},{id:"TF-2ZT55",data:"eltako_button2",desc:"Button"},{id:"TF-4FT",data:"eltako_button4",desc:"Button"},{id:"TF-4FT55",data:"eltako_button4",desc:"Button"},{id:"TF-4PT55",data:"eltako_button4",desc:"Button"},{id:"TF-AHDSB (TF mode)",data:"eltako_tf_input",desc:"Brightness Sensor"},{id:"TF-AHDSB (FAH mode)",data:"eltako_tf_lux",desc:"Brightness Sensor"},{id:"TF-BHSB (TF mode)",data:"eltako_tf_motion",desc:"Motion Sensor"},{id:"TF-BHSB (FBH mode)",data:"eltako_motion2",desc:"Motion Sensor"},{id:"TF-BSB55",data:"eltako_tf_motion",desc:"Motion Sensor"},{id:"TF-DTB",data:"eltako_dimmer_knob",desc:"Dimmer Knob"},{id:"TF-FGB (a5-14-09)",data:"a5-14-09",desc:"Window Handle"},{id:"TF-FGB (f6-10-00)",data:"f6-10-00",desc:"Window Handle"},{id:"TF-FKB",data:"eltako_tf_contact",desc:"Contact"},{id:"TF-FKE",data:"eltako_contact",desc:"Contact"},{id:"TF-FKS",data:"a5-20-04",desc:"Thermostate"},{id:"TF-FTE",data:"eltako_contact",desc:"Contact"},{id:"TF-FTSB (a5-04-02)",data:"a5-04-02",desc:"Temperature and Humidity Sensor"},{id:"TF-FTSB (a5-04-03)",data:"a5-04-03",desc:"Temperature and Humidity Sensor"},{id:"TF-HMB",data:"eltako_heat",desc:"Heat Sensor"},{id:"TF-IUS",data:"eltako_tf_alarm",teachin:"general",desc:"Switch"},{id:"TF-RWB",data:"eltako_tf_smoke",desc:"Smoke Sensor"},{id:"TF-TA55DL",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF-TA65D",data:"eltako_tf_dimmer",teachin:"general",desc:"Dimmer"},{id:"TF-TA65J",data:"eltako_tf_blind",teachin:"general",desc:"Blind"},{id:"TF-TA65L",data:"eltako_tf_switch",teachin:"general",desc:"Switch"},{id:"TF-TRHB (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRHB (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TRHB55 (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRHB55 (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TRSB (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRSB (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TRSB55 (FHK mode)",data:"eltako_tf_thermo",desc:"Thermostate"},{id:"TF-TRSB55 (TF mode)",data:"eltako_tf_input",desc:"Thermostate"},{id:"TF-TTB (Pushbutton)",data:"f6-01-01",desc:"Button"},{id:"TF-TTB (Tracker+Pushbutton)",data:"eltako_tf_ttb",desc:"Button"},{id:"TF-WTB",data:"eltako_button1",desc:"Button"},{id:"TF-WTB55",data:"eltako_button2",desc:"Button"}]},{id:"Omnio",vendor:"omnio",subtypes:[{id:"CO2-Sensor",data:"a5-09-04",desc:"CO2 Sensor"},{id:"FG101",data:"f6-10-00",desc:"Window Handle"},{id:"FG111",data:"f6-10-00",desc:"Window Handle"},{id:"FG121",data:"f6-10-00",desc:"Window Handle"},{id:"FG131",data:"f6-10-00",desc:"Window Handle"},{id:"FK101",data:"d5-00-01",desc:"Window Contact"},{id:"FDM-SOLARPIR (f6-02-01)",data:"f6-02-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-06-02)",data:"a5-06-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-01)",data:"a5-07-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-02)",data:"a5-07-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-07-03)",data:"a5-07-03",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-01)",data:"a5-08-01",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-02)",data:"a5-08-02",desc:"Motion Sensor"},{id:"FDM-SOLARPIR (A5-08-03)",data:"a5-08-03",desc:"Motion Sensor"},{id:"H20-ECO",data:"f6-05-01",desc:"Water Sensor"},{id:"KD230/10",data:"d2-01-03",desc:"Dimmer Actuator"},{id:"KS230/10",data:"d2-01-01",desc:"Switch Actuator"},{id:"KXJ230/12",data:"d2-05-00",desc:"Jalousie Actuator"},{id:"REGH12/08",data:"d2-01-14",desc:"Thermostat Actuator 8 Channel"},{id:"REGJ12/04",data:"d2-05-01",desc:"Jalousie Actuator 4 Channel"},{id:"REGS12/04",data:"d2-01-13",desc:"Switch Actuator 4 Channel"},{id:"REGS12/08",data:"d2-01-14",desc:"Switch Actuator 8 Channel"},{id:"RTF160 (A5-10-03)",data:"a5-10-03",desc:"Temperature and Humidity Sensor"},{id:"RTF160 (A5-10-10)",data:"a5-10-10",desc:"Temperature and Humidity Sensor"},{id:"RTF161 (A5-10-03)",data:"a5-10-03",desc:"Temperature and Humidity Sensor"},{id:"RTF161 (A5-10-10)",data:"a5-10-10",desc:"Temperature and Humidity Sensor"},{id:"UPD230/10",data:"d2-01-03",desc:"Dimmer Actuator"},{id:"UPH230/10",data:"d2-01-01",desc:"Thermostat Actuator"},{id:"UPH230/12",data:"d2-01-11",desc:"Thermostat Actuator 2 Channel"},{id:"UPJ230/12",data:"d2-05-00",desc:"Jalousie Actuator"},{id:"UPS230/08",data:"d2-01-01",desc:"Switch Actuator"},{id:"UPS230/10",data:"d2-01-01",desc:"Switch Actuator"},{id:"UPS230/12",data:"d2-01-11",desc:"Switch Actuator 2 Channel"},{id:"XFJ",data:"a5-13-01",desc:"Weather Station"}]},{id:"EiMSIG",vendor:"eimsig",subtypes:[{id:"FGSE,FSE,USE (A5-14-01)",data:"a5-14-01",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-03)",data:"a5-14-03",desc:"Window/Door Sensor"},{id:"FGSE,FSE,USE (A5-14-07)",data:"a5-14-07",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-08)",data:"a5-14-08",desc:"Window/Door Sensor"},{id:"FGSE,FSE,USE (A5-14-09)",data:"a5-14-09",desc:"Window/Door Sensor"},{id:"FGSE (A5-14-0A)",data:"a5-14-0a",desc:"Window/Door Sensor"}]},{id:"MACO",vendor:"maco",subtypes:[{id:"mTRONIC Multisensor",data:"a5-14-0a",desc:"Window Sensor"},{id:"eTronic Windowsensor",data:"a5-14-01",desc:"Window Sensor"}]},{id:"HORA",vendor:"hora",subtypes:[{id:"SmartDrive",data:"a5-20-04",desc:"Thermostat"}]},{id:"PEHA",vendor:"peha",subtypes:[{id:"D 20.450.xxx FU-RTR",data:"a5-10-03",desc:"Room Operating Unit"},{id:"D 20.450.xxx FU-RTR MS",data:"a5-10-06",desc:"Room Operating Unit"},{id:"D 450 FU FK",data:"d5-00-01",desc:"Window Contact"},{id:"D 451 FU-BM",data:"a5-07-01",desc:"Motion Sensor"},{id:"D 451 FU-BM DE",data:"a5-07-01",desc:"Motion Sensor"},{id:"D 451 FU FK",data:"d5-00-01",desc:"Window Contact"},{id:"D 451 FU-B EBI",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI UP O.A.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-EBI PF O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 451 FU-B EBIM",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 451 FU-EBIM O.T.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 451 FU-EBIM UP O.A.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 4511 FU-EBIM ST",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 452 FU-EBI O.T.",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 452 FU-EBIM O.T.",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"D 452 FU-EBI JR O.T.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBIM JR O.T.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBI JR UP O.A.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-EBIM JR UP O.A.",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"D 452 FU-2REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-SPV 4REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-2REG",data:"peha_switch",teachin:"general",desc:"Switch Actuator"},{id:"D 454 FU-JR 2REG",data:"peha_blind",teachin:"general",desc:"Switch Actuator"},{id:"D 4571 FU-EBIM ST",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"}]},{id:"Thermokon",vendor:"thermokon",subtypes:[{id:"SRC-DO Light",data:"peha_powerswitch",teachin:"general",desc:"Power Meter Switch"},{id:"SRC-DO Blind",data:"peha_blind",teachin:"general",desc:"Blind Actuator"},{id:"SRW01",data:"d5-00-01",desc:"Window Contact"},{id:"SR04",data:"a5-02-05",desc:"Temperature Sensor"},{id:"SR04P",data:"a5-10-03",desc:"Temperature Sensor"},{id:"SR04P-MS",data:"a5-10-06",desc:"Temperature Sensor"},{id:"SR04PS",data:"a5-10-04",desc:"Temperature Sensor"},{id:"SR04PST",data:"a5-10-01",desc:"Temperature Sensor"},{id:"SR04PT",data:"a5-10-05",desc:"Temperature Sensor"},{id:"SR04T",data:"a5-10-0c",desc:"Temperature Sensor"}]},{id:"WINKHAUS",vendor:"winkhaus",subtypes:[{id:"FM.A",data:"d5-00-01",desc:"Window Contact"},{id:"FM.V (D5-00-01)",data:"d5-00-01",desc:"Window Contact"},{id:"FM.V (A5-14-01)",data:"a5-14-01",desc:"Window Contact"}]},{id:"AFRISOLab",vendor:"afriso",subtypes:[{id:"AMC 10",data:"d5-00-01",desc:"Window Contact"},{id:"AVD 20-D",data:"a5-20-04",desc:"Thermostat"},{id:"CO2-Sensor",data:"a5-09-08",desc:"CO2 Sensor"},{id:"FT",data:"a5-10-03",desc:"Room Operating Unit"},{id:"FTM T",data:"a5-02-05",desc:"Temperature Sensor"},{id:"FTM TF (a5-04-01)",data:"a5-04-01",desc:"Temperature and Humidity Sensor"},{id:"FTM TF (a5-10-12)",data:"a5-10-12",desc:"Temperature and Humidity Sensor"},{id:"FTM 20 TF",data:"a5-04-03",desc:"Temperature and Humidity Sensor"},{id:"WaterSensor - con",data:"afriso_water_con",desc:"Water Sensor"},{id:"WaterSensor - eco",data:"afriso_water_eco",desc:"Water Sensor"},{id:"ASD 10",data:"afriso_asd_10",desc:"Smoke Sensor"}]},{id:"HOPPE",vendor:"hoppe",subtypes:[{id:"eFenstergriff SecuSignal",data:"f6-10-00",desc:"F6-10-00"},{id:"eFenstergriff ConnectHome",data:"f6-10-00",desc:"F6-10-00"},{id:"Lift/Slide Doors",data:"hoppe_door",desc:"Sliding Door Handle, open closed"},{id:"Window/Door Contact",data:"d5-00-01",desc:"HOPPE Window/Door Contact"},{id:"eFenstergriff AutoLock",data:"d2-06-40",desc:"D2-06-40"}]},{id:"SODA",vendor:"soda",subtypes:[{id:"Window Handle",data:"d2-06-01"}]},{id:"Rehau",vendor:"rehau",subtypes:[{id:"SmartGuard Window Sensor",data:"d2-06-10"},{id:"SmartGuard 2 Window Sensor",data:"d2-06-ff"},{id:"Inovent Fan",data:"d2-20-00"}]},{id:"OPUS",vendor:"opus",subtypes:[{id:"Bridge Switch 1 channel / 16A 2p",data:"opus_bridge_switch1k",learn:"recomm",desc:"Switch"},{id:"Bridge Switch 2 channel",data:"opus_bridge_switch2k",learn:"recomm",desc:"Switch"},{id:"Bridge Dimmer",data:"opus_bridge_dimmer",learn:"recomm",desc:"Dimmer"},{id:"Bridge Blind",data:"opus_bridge_blind",learn:"recomm",desc:"Blind"},{id:"OPUS 1 / 55",data:"f6-02-01",learn:"recomm+gen",desc:"Wall Button"},{id:"ASD 20",data:"f6-05-02",learn:"recomm+gen",desc:"Smoke Sensor"},{id:"WaterSensor - con",data:"afriso_water_con",learn:"recomm+gen",desc:"Water Sensor"},{id:"WaterSensor - eco",data:"afriso_water_eco",learn:"recomm+gen",desc:"Water Sensor"},{id:"SR06 LCD 2T",data:"a5-10-03",learn:"recomm+gen",desc:"Wallthermostat"},{id:"Window/Door Handle",data:"f6-10-00",learn:"recomm+gen",desc:"Sliding Door Handle, open closed"},{id:"Door Handle",data:"hoppe_door",learn:"recomm+gen",desc:"Sliding Door Handle, open closed"},{id:"Window/Door Contact",data:"d5-00-01",learn:"recomm+gen",desc:"Window/Door Contact"},{id:"SMS-MultiFunction",data:"opus_sms_multifnc",learn:"recomm+gen",desc:"Motion Sensor with Temperature and Humidity"},{id:"SMS-Presence",data:"opus_sms_aw",learn:"recomm+gen",desc:"Motion Sensor with illuminationMotion"},{id:"SMS-Standard",data:"opus_sms_std",learn:"recomm+gen",desc:"Motion Sensor"},{id:"TemperatureSensor FTM 20 TF",data:"a5-04-03",desc:"Temperature Sensor"}]},{id:"Roto",vendor:"roto",subtypes:[{id:"Com-Tec Basic (a5-14-01)",data:"a5-14-01",desc:"Window/Door Sensor"},{id:"Com-Tec Basic (d5-00-01)",data:"d5-00-01",desc:"Window/Door Sensor"},{id:"Com-Tec Comfort",data:"a5-14-09",desc:"Window/Door Sensor"},{id:"Com-Tec Comfort S",data:"a5-14-0a",desc:"Window/Door Sensor"},{id:"E-Tec Drive",data:"d2-06-20",desc:"Window Opener"}]},{id:"Elero",vendor:"elero",subtypes:[{id:"RolMotion R10",data:"elero_R10",desc:"Shutter"}]},{id:"Schco",vendor:"schueco",subtypes:[{id:"Schco SensTrak",data:"schueco_bolt",desc:"Window Contact"}]},{id:"Siegenia",vendor:"siegenia",subtypes:[{id:"senso secure (d2-06-50)",data:"d2-06-50",desc:"Window Sensor"},{id:"senso secure (a5-14-0a)",data:"a5-14-0a",desc:"Window Sensor"}]}],getGatewayDeviceType:function getGatewayDeviceType(e){return!e||"C1"!=e.version&&"C2"!=e.version&&"CA"!=e.version?e&&"EA"==e.version?{type:this.TYPE,name:"EnOcean (USB Stick)",manufacturers:this.DEVICES}:null:{type:this.TYPE,name:"EnOcean",manufacturers:this.V6_DEVICES};},getCommandStatusMap:function getCommandStatusMap(e,t){if(!e||!e.vendor)return null;var a=e.vendor;"string"==typeof a&&(a=a.toLowerCase());var n,r=this.MAP[a];if(r&&r[e.data]&&(n=r[e.data]),n||(n=(r=this.MAP.general)[e.data]),!n)return null;var o=JSON.parse(JSON.stringify(n));if(e.senderID||"a5-20-04"==e.data||delete o.command,o.ipevt||(o.ipevt=o.status?JSON.parse(JSON.stringify(o.status)):null),o.event||(o.event=o.ipevt?JSON.parse(JSON.stringify(o.ipevt)):null),t&&"string"==typeof t.version&&"C"==t.version.charAt(0)){if((r=this.V6_MAP[a])||(r=this.V6_MAP.general),!(n=r&&r[e.data]?r[e.data]:null))return o;n.command?"v5p_command"!=n.command&&(o.command=JSON.parse(JSON.stringify(n.command))):o.command=null;var s=[],i=null;if(o.status){for(var u=0;u<o.status.length;u++){(i=o.status[u])&&i.ref&&i.ref.value&&-1==i.ref.value.indexOf("_raw")&&s.push(i);}o.status=JSON.parse(JSON.stringify(s)),s=[],i=null;}if(n.status?"v5p_status"!=n.status&&(o.status=JSON.parse(JSON.stringify(n.status))):o.status=null,o.event){for(u=0;u<o.event.length;u++){(i=o.event[u])&&i.ref&&i.ref.value&&-1==i.ref.value.indexOf("_raw")&&s.push(i);}o.event=JSON.parse(JSON.stringify(s)),s=[],i=null;}if(n.event?"v6_status"==n.event?o.event=JSON.parse(JSON.stringify(o.status)):"v5p_event"!=n.event&&(o.event=JSON.parse(JSON.stringify(n.event))):o.event=null,o.ipevt){for(u=0;u<o.ipevt.length;u++){(i=o.ipevt[u])&&i.ref&&i.ref.value&&-1==i.ref.value.indexOf("_raw")&&s.push(i);}o.ipevt=JSON.parse(JSON.stringify(s)),s=[],i=null;}return n.ipevt?"v6_status"==n.ipevt?o.ipevt=JSON.parse(JSON.stringify(o.status)):"v6_event"==n.ipevt?o.ipevt=JSON.parse(JSON.stringify(o.event)):"v5p_ipevt"!=n.ipevt&&(o.ipevt=JSON.parse(JSON.stringify(n.ipevt))):o.ipevt=null,e.senderID||"a5-20-04"==e.data||delete o.command,o;}return o;},getIPevtMap:function getIPevtMap(e,t){return this.getCommandStatusMap(e,t);},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?e.vendor?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter vendor is invalid")):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?e.vendor?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter vendor is invalid")):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.ENOCEAN.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a,n){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var r=!1;n&&n.version&&"c"==n.version.toLowerCase().charAt(0)&&(r=!0);var o=null;switch(e.data){case"f6-05-01":o={type:"water",states:{water:{values:["on","off"]}},details:{states:{water:{value:"water",conv_s:{alarm:"on",ok:"off"}}}}},r&&(o.details.states.water.conv_s={"true":"on","false":"off"});break;case"f6-05-02":o={type:"smoke",states:{smoke:{values:["on","off"]}},details:{states:{smoke:{value:"smoke",conv_s:{alarm:"on",ok:"off"}}}}};break;case"f6-10-00":case"f6-10-01":case"d2-06-40":o={type:"window",states:{state:{values:["open","closed","tilted"]}},details:{states:{state:{value:"window"}}}};break;case"d5-00-01":case"eltako_contact":case"eltako_tf_contact":o={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"contact"}}}};break;case"hoppe_door":o={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"door"}}}};break;case"a5-14-01":case"a5-14-02":case"a5-14-03":case"a5-14-04":case"a5-14-07":case"a5-14-08":o={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"state"}}}};break;case"a5-14-09":case"a5-14-0a":o={type:"window",states:{state:{values:["open","closed","tilted"]}},details:{states:{state:{value:"state"}}}};break;case"a5-08-01":case"a5-08-02":case"a5-08-03":case"eltako_motion":case"eltako_motion2":case"a5-07-01":case"a5-07-02":case"a5-07-03":o={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"state"}}}};break;case"a5-02-01":case"a5-02-02":case"a5-02-03":case"a5-02-04":case"a5-02-05":case"a5-02-06":case"a5-02-07":case"a5-02-08":case"a5-02-09":case"a5-02-0a":case"a5-02-0b":case"a5-02-10":case"a5-02-11":case"a5-02-12":case"a5-02-13":case"a5-02-14":case"a5-02-15":case"a5-02-16":case"a5-02-17":case"a5-02-18":case"a5-02-19":case"a5-02-1a":case"a5-02-1b":case"a5-02-20":case"a5-02-30":case"a5-10-07":case"a5-10-08":case"a5-10-09":case"a5-10-0b":case"a5-10-0c":case"a5-10-0d":case"eltako_heat":o={type:"temperature",states:{temperature:{type:"FLOAT"}},details:{states:{temperature:{value:"temperature"}}}};break;case"a5-10-01":case"a5-10-02":case"a5-10-03":case"a5-10-04":case"a5-10-05":case"a5-10-06":case"a5-10-0a":case"eltako_thermo":case"eltako_ftr65hb":case"eltako_futh55d":case"eltako_futh65d":case"eltako_ftr78s":case"eltako_tf_thermo":o={type:"temperature",states:{setpoint:{type:"FLOAT"},temperature:{type:"FLOAT"}},details:{states:{setpoint:{value:"setpoint"},temperature:{value:"temperature"}}}};break;case"a5-04-01":case"a5-04-02":case"a5-04-03":case"a5-10-13":case"a5-10-14":case"eltako_weather":o={type:"temperature",states:{temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}},details:{states:{temperature:{value:"temperature"},humidity:{value:"humidity"}}}};break;case"a5-10-10":case"a5-10-11":case"a5-10-12":o={type:"temperature",states:{setpoint:{type:"FLOAT"},temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}},details:{states:{setpoint:{value:"setpoint"},temperature:{value:"temperature"},humidity:{value:"humidity"}}}};break;case"a5-06-01":case"a5-06-02":case"a5-06-03":case"a5-06-04":case"a5-06-05":case"eltako_lux":case"eltako_lux2":o={type:"brightness",states:{brightness:{type:"FLOAT"}},details:{states:{brightness:{value:"illumination"}}}};break;case"a5-09-08":case"a5-09-09":o={type:"co2",states:{co2:{type:"FLOAT"}},details:{states:{co2:{value:"co2"}}}};break;case"eltako_water_m3":case"eltako_water_m4":case"afriso_water_con":case"afriso_water_eco":o={type:"water",states:{water:{values:["on","off"]}},details:{states:{water:{value:"water",conv_s:{"true":"on","false":"off"}}}}};break;case"afriso_asd_10":case"eltako_tf_smoke":o={type:"smoke",states:{smoke:{values:["on","off"]}},details:{states:{smoke:{value:"smoke",conv_s:{"true":"on","false":"off"}}}}};break;case"eltako_tf_motion":o={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"state",conv_s:{"true":"on","false":"off"}}}}};break;case"eltako_switch":case"eltako_tf_switch":case"eltako_relay2":case"peha_switch":case"peha_powerswitch":case"opus_bridge_switch1k":case"opus_bridge_switch2k":(o={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"state"}}};break;case"eltako_dimmer":case"eltako_dimmer2":case"eltako_fsud":case"eltako_tf_dimmer":(o={type:"dimmer",commands:{on:{},off:{},toggle:{},up:{},down:{},brightness:{value:{type:"INT",min:0,max:100,step:10}}},states:{state:{values:["on","off"]},brightness:{min:0,max:100}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},up:{value:"dimUp"},down:{value:"dimDown"},brightness:{value:"dimTo",ext:"%d",extMeta:"0-100"}},states:{state:{value:"state"},brightness:{value:"level"}}},"eltako_dimmer2"==e.data&&(delete o.states.brightness,delete o.details.states.brightness);break;case"opus_bridge_dimmer":(o={type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100,step:10}}},states:{state:{values:["on","off"]},brightness:{min:0,max:100}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"dimTo",ext:"%d",extMeta:"10-100"}},states:{state:{value:"state"},brightness:{value:"dimmerLevel"}}};break;case"eltako_blind":case"eltako_tf_blind":case"peha_blind":(o={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"up"},down:{value:"down"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d",extMeta:"0-100"}},states:{position:{value:"pos"}}};break;case"opus_bridge_blind":case"elero_R10":(o={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d",extMeta:"0-100"}},states:{position:{value:"position"}}};break;case"eltako_powermeter":(o={type:"powermeter",states:{power:{type:"FLOAT"},consumption:{type:"FLOAT"}}}).details={states:{power:{value:"power"},consumption:{value:"energy"}}};break;case"eltako_powermeter2":(o={type:"powermeter",states:{power:{type:"FLOAT"}}}).details={states:{power:{value:"power"}}};break;case"d2-06-20":o={type:"window",commands:{open:{},close:{},stop:{},position:{},lock:{},unlock:{}},states:{position:{type:"INT",min:0,max:100},locked:{values:[!1,!0]}},details:{commands:{open:{value:"open"},close:{value:"close"},stop:{value:"stop"},position:{value:"position"},lock:{value:"lock"},unlock:{value:"unlock"}},states:{position:{value:"position"},locked:{value:"locked"}}}};}return o;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.ENOCEAN.buildQuery({_hwv:"C1"},e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&id="+encodeURIComponent(a.id)+"&data="+encodeURIComponent(JSON.stringify(a.data));};if(!e||!e.data)return null;var t=null;switch(e.data){case"a5-02-01":case"a5-02-02":case"a5-02-03":case"a5-02-04":case"a5-02-05":case"a5-02-06":case"a5-02-07":case"a5-02-08":case"a5-02-09":case"a5-02-0a":case"a5-02-0b":case"a5-02-10":case"a5-02-11":case"a5-02-12":case"a5-02-13":case"a5-02-14":case"a5-02-15":case"a5-02-16":case"a5-02-17":case"a5-02-18":case"a5-02-19":case"a5-02-1a":case"a5-02-1b":case"a5-02-20":case"a5-02-30":case"a5-10-07":case"a5-10-08":case"a5-10-09":case"a5-10-0b":case"a5-10-0c":case"a5-10-0d":case"eltako_heat":t={type:"temperature",address:e.address,states:{temperature:{type:"FLOAT"}}};break;case"a5-10-01":case"a5-10-02":case"a5-10-03":case"a5-10-04":case"a5-10-05":case"a5-10-06":case"a5-10-0a":case"eltako_thermo":case"eltako_ftr65hb":case"eltako_futh55d":case"eltako_futh65d":case"eltako_ftr78s":case"eltako_tf_thermo":t={type:"temperature",address:e.address,states:{setpoint:{type:"FLOAT"},temperature:{type:"FLOAT"}}};break;case"a5-04-01":case"a5-04-02":case"a5-04-03":case"a5-10-13":case"a5-10-14":case"eltako_weather":t={type:"temperature",states:{temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}}};break;case"a5-10-10":case"a5-10-11":case"a5-10-12":t={type:"temperature",states:{setpoint:{type:"FLOAT"},temperature:{type:"FLOAT"},humidity:{type:"FLOAT"}}};break;case"eltako_switch":case"eltako_tf_switch":case"eltako_relay2":case"opus_bridge_switch1k":case"opus_bridge_switch2k":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}},states:{state:{values:["on","off"]}}};break;case"eltako_dimmer":case"eltako_tf_dimmer":case"eltako_pl_dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},up:{url:_getUrl(e,{value:"dimUp"})},down:{url:_getUrl(e,{value:"dimDown"})},value:{url:null,min:0,max:100,step:1}},states:{level:{min:0,max:100}}},"eltako_pl_dimmer"==e.data&&(delete t.commands.up,delete t.commands.down),a=(a=_getUrl(e,{value:"dimTo",ext:0})).replace("dimTo0","dimTo{val}"),t.commands.value.url=a;break;case"opus_bridge_dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},value:{url:null,min:0,max:100,step:1}},states:{dimmerLevel:{min:0,max:100}}},a=(a=_getUrl(e,{value:"dimTo",ext:0})).replace("dimTo0","dimTo{val}"),t.commands.value.url=a;break;case"eltako_blind":case"eltako_tf_blind":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"up"})},down:{url:_getUrl(e,{value:"down"})},stop:{url:_getUrl(e,{value:"stop"})},value:{url:null,min:0,max:100,step:1}},states:{pos:{min:0,max:100}}},a=(a=_getUrl(e,{value:"moveTo",ext:0})).replace("moveTo0","moveTo{val}"),t.commands.value.url=a;break;case"opus_bridge_blind":case"elero_R10":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})},value:{url:null,min:0,max:100,step:1}},states:{position:{min:0,max:100}}},a=(a=_getUrl(e,{value:"moveTo",ext:0})).replace("moveTo0","moveTo{val}"),t.commands.value.url=a;break;case"d2-06-20":var a;t={type:"window",commands:{on:{url:_getUrl(e,{value:"open"})},off:{url:_getUrl(e,{value:"close"})},value:{url:null,min:0,max:100,step:1},lock:{url:_getUrl(e,{value:"lock"})},unlock:{url:_getUrl(e,{value:"unlock"})}},states:{position:{min:0,max:100},locked:{values:[!1,!0]}}},a=(a=_getUrl(e,{value:"moveTo",ext:0})).replace("moveTo0","moveTo{val}"),t.commands.value.url=a;}return t;},supportSmartWidget:function supportSmartWidget(e,t){if(!e)return!1;switch(e.data){case"f6-05-00":case"eltako_heat":case"eltako_powermeter2":case"generic_switch":return!0;default:return!1;}},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o=null,s=null,i=null,u=null;return o=function(e,t){switch(e.data){case"f6-05-00":case"eltako_powermeter2":case"eltako_thermo":t.push("generic_state");break;case"eltako_heat":t.push("bool");break;case"generic_switch":t.push("switch");}return t;}(t,o||[]),s=function(e,t){if("generic_switch"===e.data)t["%on%"]={value:"on"},t["%off%"]={value:"off"};return t;}(t,s||{}),i=function(e,t){switch(e.data){case"f6-05-00":t["%state%"]={value:"wind"};break;case"eltako_heat":t["%booleanState%"]={value:"alarm"},t["%booleanState%"].conv_s={ok:"true",alarm:"false"};break;case"eltako_powermeter2":t["%state%"]={value:"power"};break;case"eltako_thermo":t["%state%"]={value:"setpoint"};break;case"generic_switch":t["%state%"]={value:"state"};}return t;}(t,i||{}),u=function(e,t){switch(e.data){case"f6-05-00":t["%icon%"]="wind";break;case"eltako_powermeter2":t["%icon%"]="power_on";break;case"eltako_thermo":t["%icon%"]="thermo";}return t;}(t,u||{}),e._injectToSmartWidgetTemplate(n,o,r,s,i,u);}}},xnm.aio.gateway.systems.IW={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){if(e){var n=this;this._checkIWAes(e,function(r){if(r)a&&a(r);else{var o=[];if(n._getIWdevicesFromGateway(e,function(r,s){if(s)for(var i=0;i<s.length;i++){if(s[i]&&s[i].adr&&s[i].adr.length>=8){var u=s[i].adr.substr(6,2);n._contains(o,u)||o.push(u);}}var l=n._findFreeAdr(o);l?n._learn(e,l,function(r,o){if(r)a&&a(r);else if(!o||!o.address||o.length<8)a&&a(new Error("lean iw address response format invalid"));else{var s=o.address.substr(6,2),i="06";"DKL"==t.subtype&&(i="09"),n.configWindow(e,{adr:s,config:i},function(e){a&&a(e,{address:o.address});});}}):a&&a(new Error("iw address exceed 254"));}),t&&t.devices){var s=this._getIWdevicesAddress(t.devices);s&&(o=o.concat(s));}}});}else a&&a(new Error("gateway is null"));},configWindow:function configWindow(e,t,a){if(t&&t.adr&&t.config){e._executeRequest("SendSC",{type:this.DM.TYPE,data:"05"+t.adr+t.config},null,function(e){a&&a(e);});}else a&&a(new Error("options format invalid"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);if(!n)return null;var r={status:n[t.value]};if(t.extra){var o,s=n[t.extra];if(s){switch(s){case"low":o="battery";break;case"timeout":o="clock";}r.info=o;}return r;}return n[t.value];},_handleState:function _handleState(e,t){if(!(t&&t.type&&"iw"==t.type.toLowerCase()&&t.adr&&t.state))return null;if(!e.address)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a={},n=t.state,r=n.indexOf(":");r>0&&(n=n.substr(0,r));var o=parseInt(n,16);return 16&o&&(a.windowState=1&o?"tilted":2&o?"closed":"open",a.errorState=4&o?"low":8&o?"timeout":"no_error"),a;},_checkIWAes:function _checkIWAes(e,t){xnm.aio.gateway.Admin.checkAESKey(e._ip,function(e){var a;e&&e.error&&(a=new Error("set gateway IW aes key error")),t&&t(a);});},_learn:function _learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE,adr:t},null,function(e,t){if(e)a&&a(e);else if(t.adr){var r=n._resolveAddress(t.adr);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_getIWdevicesFromGateway:function _getIWdevicesFromGateway(e,t){e._executeRequest("getStates",null,null,function(e,a){if(e)t(e);else{for(var n=[],r=0;r<a.length;r++){a[r]&&"IW"==a[r].type&&n.push(a[r]);}t(null,n);}});},_getIWdevicesAddress:function _getIWdevicesAddress(e){for(var t=[],a=0;a<e.length;a++){if(e[a]&&e[a].address&&e[a].address.length>=8){var n=e[a].address.substr(6,2);this._contains(t,n)||t.push(n);}}return t;},_findFreeAdr:function _findFreeAdr(e){for(var t=1,a=!1;!a&&t<255;){for(var n=!1,r=0;r<e.length;r++){if(e[r])if(parseInt(e[r],16)==t){n=!0;break;}}if(!n){a=!0;break;}t++;}if(256==t)return null;for(t=t.toString(16);t.length<2;){t="0"+t;}return t;},_contains:function _contains(e,t){for(var a=0;a<e.length;a++){if(e[a]===t)return!0;}return!1;},_resolveAddress:function _resolveAddress(e){return e;},_handleUdpState:function _handleUdpState(e,t){return t&&t.data&&(6==t.data.length||12==t.data.length)&&e&&e.type&&e.type.toUpperCase()==this.DM.TYPE&&e.address?(12==t.data.length?a=t.data.substr(0,8):6==t.data.length&&(a=t.data.substr(0,2)),e.address.toUpperCase()!=a.toUpperCase()?null:this._handleState(e,{type:"IW",adr:e.address,state:t.data.substr(t.data.length-4)+":00"})):null;var a;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||12!=e.length||!t||!t.address)return null;var a,n=e.substr(8);return e.substr(0,8).toUpperCase()!=t.address?null:("0100"==(n=n.substr(0,2)+"0"+n.substr(3,1))?a="open":"0102"==n?a="closed":"0101"==n&&(a="tilted"),{value:a});},generateTriggerCode:function generateTriggerCode(e,t){if(!e||!e.value||!t||!t.address||t.address<8)return null;var a;switch(e.value){case"open":a="0100";break;case"closed":a="0102";break;case"tilted":a="0101";}return a?t.address+a:null;},DM:{TYPE:"IW",MAP:{status:[{type:"enum",name:"state",ref:{value:"windowState",options:["open","tilted","closed"]}},{type:"enum",name:"error",ref:{value:"errorState",options:["no_error","low","timeout"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"windowState",options:["open","tilted","closed"]}},{type:"enum",name:"error",ref:{value:"errorState",options:["no_error","low","timeout"]}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"Internorm Window"};},getCommandStatusMap:function getCommandStatusMap(){for(var e=JSON.parse(JSON.stringify(this.MAP)),t=0;t<e.status.length;t++){"errorState"!=e.status[t].ref.value&&(e.status[t].ref.extra="errorState");}return e;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.IW.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return null;return{type:"window",states:{state:{values:["open","closed","tilted"]}},details:{states:{state:{value:"windowState"}}}};}}},xnm.aio.gateway.systems.IN={search:function search(e,t,a){e._executeRequest("inSearchBlinds",null,{timeout:2e4},function(e,t){if(e)a&&a(e);else if(t){for(var n=0;n<t.length;n++){t[n]&&t[n].id&&(t[n].data="1"==t[n].id.charAt(1)?"fan":"blind");}a&&a(null,t);}else a&&a(new Error("response format invalid"));});},login:function login(e,t,a){if(t&&t.address&&t.group&&t["native"]){var n=this._getHexVal(parseInt(t.address),2),r=this._getHexVal(parseInt(t.group),2),o={adr:t["native"]+n+r};e._executeRequest("inLogin",o,{timeout:2e4},function(e,t){var n;e?a&&a(e):(t&&t.deviceType&&"06"==t.deviceType&&(n={type:"fanV2"}),a&&a(null,n));});}else a&&a(new Error("option format invalid"));},logout:function logout(e,t,a){if(t&&t.address&&t.group&&t["native"]){var n=this._getHexVal(parseInt(t.address),2),r=this._getHexVal(parseInt(t.group),2),o={adr:t["native"]+n+r};e._executeRequest("inLogout",o,{timeout:2e4},function(e,t){a&&a(e,t);});}else a&&a(new Error("option format invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},getCurrentStateCreator:function getCurrentStateCreator(e,t,a){if(t){if(0!=t.length){var n,r={};for(n=0;n<t.length;n++){t[n]&&t[n].device&&t[n].device.address&&(r[t[n].device.address]=t[n].device);}var o=[];for(var s in r){r.hasOwnProperty(s)&&r[s]&&o.push(r[s]);}var i=this,u=0,cb=function cb(n,r){var s={};if(!n&&r&&(r.type="IN",r.adr=i._getHexVal(o[u].address,2),r.state&&(r.state=r.state.substr(2)),s[o[u].address]=r),++u<o.length)i._getCurrentState(e,o[u],cb);else{for(var l=[],m=0;m<t.length;m++){if(t[m]&&t[m].device&&t[m].device.address){var d=s[t[m].device.address];if(d){var p=i.handleStateCreator(t[m].device,t[m].status,d);p&&("object"==_typeof(p)?(p.id=t[m].id,l.push(p)):l.push({id:t[m].id,status:p}));}}}a&&a(null,l);}};this._getCurrentState(e,o[0],cb);}else a&&a(null,[]);}else a&&a(new Error("device list in null"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);if(!n)return null;var r={status:n[t.value]};if(t.extra){var o,s=n[t.extra];if(s){switch(s){case"low1":case"low2":o="battery";break;default:o="notification";}r.info=o;}return r;}return n[t.value];},getFreeAddresses:function getFreeAddresses(e,t,a){e?this._getINDevicesFromGateway(e,function(e,n){var r=t&&t.devices?t.devices:[],o=t&&t.groups?t.groups:[];!e&&n&&(n.devices&&(r=r.concat(n.devices)),n.groups&&(o=o.concat(n.groups)));var s,i,u,l={devices:[],groups:[]};for(s=1;s<=100;s++){for(u=!0,i=0;i<r.length;i++){if(s==r[i]){u=!1;break;}}u&&l.devices.push(s);}for(s=101;s<=200;s++){for(u=!0,i=0;i<o.length;i++){if(s==o[i]){u=!1;break;}}u&&l.groups.push(s);}a&&a(null,l);}):a&&a(new Error("gateway is null"));},_getINDevicesFromGateway:function _getINDevicesFromGateway(e,t){e._executeRequest("getStates",null,null,function(e,a){if(e)t(e);else{var n={devices:[],groups:[]};if(a)for(var r=0;r<a.length;r++){if(a[r]&&"IN"==a[r].type&&a[r].adr){var o=parseInt(a[r].adr,16);o<=100?n.devices.push(o):n.groups.push(o);}}t(null,n);}});},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_getCurrentState:function _getCurrentState(e,t,a){if(t&&t.address){if(parseInt(t.address)>100)a&&a(new Error("device address is a group address"));else{var n={adr:this._getHexVal(t.address,2)};e._executeRequest("inGetState",n,null,function(e,t){e?a&&a(e):a&&a(null,t);});}}else a&&a(new Error("device format invalid"));},_handleState:function _handleState(e,t){if(!(t&&t.type&&"in"==t.type.toLowerCase()&&t.adr&&t.state))return null;if(!e.address)return null;var a=this._getHexVal(e.address,2);if(!a||a.toLowerCase()!=t.adr.toLowerCase())return null;var n=t.state;8!=n.length&&20!=n.length||(n=n.substr(2));var r={};switch(e.data){case"fan":case"fanV2":switch(n=n.substr(0,2)){case"03":case"0C":case"0D":r.mode="standby";break;case"04":r.mode="level1";break;case"05":r.mode="level2";break;case"06":r.mode="level3";break;case"07":case"0F":r.mode="turbo";break;case"08":case"09":case"0A":case"0B":r.mode="auto";break;case"11":case"12":case"13":case"14":r.mode="night";break;case"0E":r.mode="error";}break;case"blind":var o=n.substr(0,2),s=n.substr(4,2),i=n.substr(2,2);32==n.length?(o=n.substr(2,2),s=n.substr(26,2),i=n.substr(18,2)):30==n.length&&(o=n.substr(0,2),s=n.substr(24,2),i=n.substr(16,2));var u=parseInt(o,16);128&u?r.errorState="undefined":(2&u?r.errorState="low1":64&u?r.errorState="low2":16&u?r.errorState="temp":8&u&&(r.errorState="temp2"),(u=100-parseInt(s,16))>100&&(u=100),u<0&&(u=0),r.positionState=u,u=parseInt(i,16),(u=Math.floor((u+1)/4))>15&&(u=15),r.lamellaState=u+1);}return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;if(!a)return null;var n;switch(a.value){case"moveUpS":return t["native"]?t["native"]+"7F61":null;case"moveDownS":case"turboS":return t["native"]?t["native"]+"7F62":null;case"stopS":case"level1S":return t["native"]?t["native"]+"7F63":null;case"moveUp":case"up":n="000C";break;case"moveDown":case"down":n="000D";break;case"stop":n="0007";break;case"lamella":if(null==a.ext||void 0===a.ext)return null;(n=parseInt(a.ext))<1&&(n=1),n>16&&(n=16),n+=63,n=this._getHexVal(n,4);break;case"gotoP":case"saveP":if(null==a.ext||void 0===a.ext)return null;(n=parseInt(a.ext))<1&&(n=1),n>8&&(n=8),n+="saveP"==a.value?319:327,n=this._getHexVal(n,4);break;case"position":if(null==a.ext||void 0===a.ext)return null;(n=parseInt(a.ext))<0&&(n=0),n>100&&(n=100),n=100-n,n+=6144,n=this._getHexVal(n,4);break;case"levelUp":n="011B";break;case"levelDown":n="011D";break;case"level1":n="0040";break;case"level2":n="0041";break;case"level3":n="0042";break;case"standby":n="0043";break;case"auto":n="0044";break;case"manu":n="0045";break;case"turbo":n="0046";break;case"turbo_2":n="0051";break;case"turbo_3":n="0052";break;case"turbo_4":n="0053";break;case"night_mode_in_1":n="0054";break;case"night_mode_in_2":n="0055";break;case"night_mode_in_3":n="0056";break;case"night_mode_out_1":n="0057";break;case"night_mode_out_2":n="0058";break;case"night_mode_out_3":n="0059";}return null==n||void 0===n?null:this._getHexVal(t.address,2)+n;},_getHexVal:function _getHexVal(e,t){for(var a=e.toString(16).toUpperCase();a.length<t;){a="0"+a;}return a;},_parseData:function _parseData(e,t){if(e.length<4)return null;var a=e.substr(0,e.length-4).toUpperCase(),n=e.substr(e.length-4).toUpperCase(),r={};switch(n){case"7F61":case"7F62":case"7F63":if(!t["native"]||t["native"].toUpperCase()!=a)return null;"7F61"==n&&(r.value="moveUpS"),"7F62"==n&&("blind"==t.data?r.value="moveDownS":r.value="turboS"),"7F63"==n&&("blind"==t.data?r.value="stopS":r.value="level1S");}if(!r.value&&t.address.toUpperCase()!=a)return null;if("blind"===t.data){switch(n){case"000C":r.value="moveUp";break;case"000D":r.value="moveDown";break;case"0007":r.value="stop";}var o;if(!r.value)(o=parseInt(n,16))>=64&&o<=79?(r.value="lamella",r.ext=o-63):o>=320&&o<=327?(r.value="saveP",r.ext=o-319):o>=328&&o<=335?(r.value="gotoP",r.ext=o-327):o>=6144&&o<=6244&&(r.value="position",r.ext=100-(o-6144));}else switch(n){case"011B":r.value="levelUp";break;case"011D":r.value="levelDown";break;case"0040":r.value="level1";break;case"0041":r.value="level2";break;case"0042":r.value="level3";break;case"0043":r.value="standby";break;case"0044":r.value="auto";break;case"0045":r.value="manu";break;case"0046":r.value="turbo";break;case"0051":r.value="turbo_2";break;case"0052":r.value="turbo_3";break;case"0053":r.value="turbo_4";break;case"0054":r.value="night_mode_in_1";break;case"0055":r.value="night_mode_in_2";break;case"0056":r.value="night_mode_in_3";break;case"0057":r.value="night_mode_out_1";break;case"0058":r.value="night_mode_out_2";break;case"0059":r.value="night_mode_out_3";}r.value||((o=parseInt(n,16))>=64&&o<=79?(r.value="lamella",r.ext=o-63):o>=320&&o<=327?(r.value="saveP",r.ext=o-319):o>=328&&o<=335?(r.value="gotoP",r.ext=o-327):o>=6144&&o<=6244&&(r.value="position",r.ext=100-(o-6144)));return r.value?r:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},deleteDevice:function deleteDevice(e,t,a){a&&a(null,JSON.parse(JSON.stringify(t))),e._executeRequest("inLogout",{adr:t.id},{timeout:2e4},function(e,t){});},DM:{TYPE:"IN",MAP:{blind:{command:[{type:"enum",name:"move up (service)",ref:{value:"moveUpS"}},{type:"enum",name:"move down (service)",ref:{value:"moveDownS"}},{type:"enum",name:"stop (service)",ref:{value:"stopS"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"lamella",ref:{value:"lamella",ext:"%d",extMeta:"1-16",step:"1"}},{type:"enum",name:"preset position",ref:{value:"gotoP",ext:"%e",extMeta:["1","2","3","4","5","6","7","8"]}},{type:"enum",name:"save position",ref:{value:"saveP",ext:"%e",extMeta:["1","2","3","4","5","6","7","8"]}},{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"lamella",ref:{value:"lamellaState",extMeta:"1-16",step:"1"}},{type:"int",name:"position",ref:{value:"positionState",extMeta:"0-100",step:"1"}},{type:"enum",name:"error",ref:{value:"errorState",options:["low1","low2","temp","temp2","undefined"]}}]},fan:{command:[{type:"enum",name:"turbo (service)",ref:{value:"turboS"}},{type:"enum",name:"level 1 (service)",ref:{value:"level1S"}},{type:"enum",name:"level up",ref:{value:"levelUp"}},{type:"enum",name:"level down",ref:{value:"levelDown"}},{type:"enum",name:"level 1",ref:{value:"level1"}},{type:"enum",name:"level 2",ref:{value:"level2"}},{type:"enum",name:"level 3",ref:{value:"level3"}},{type:"enum",name:"standby",ref:{value:"standby"}},{type:"enum",name:"auto",ref:{value:"auto"}},{type:"enum",name:"manu",ref:{value:"manu"}},{type:"enum",name:"turbo",ref:{value:"turbo"}},{type:"enum",name:"turbo 2",ref:{value:"turbo_2"}},{type:"enum",name:"turbo 3",ref:{value:"turbo_3"}},{type:"enum",name:"turbo 4",ref:{value:"turbo_4"}},{type:"enum",name:"night mode in 1",ref:{value:"night_mode_in_1"}},{type:"enum",name:"night mode in 2",ref:{value:"night_mode_in_2"}},{type:"enum",name:"night mode in 3",ref:{value:"night_mode_in_3"}},{type:"enum",name:"night mode out 1",ref:{value:"night_mode_out_1"}},{type:"enum",name:"night mode out 2",ref:{value:"night_mode_out_2"}},{type:"enum",name:"night mode out 3",ref:{value:"night_mode_out_3"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["standby","level1","level2","level3","turbo","auto","night","error"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t={type:this.TYPE,name:"Internorm",subtypes:[]};return t.subtypes.push({id:"Blind",data:"blind"}),t.subtypes.push({id:"Fan",data:"fan"}),t.subtypes.push({id:"Fan V2",data:"fanV2"}),t;},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.data)return null;var t;switch(e.data){case"blind":case"blindgroup":t=JSON.parse(JSON.stringify(this.MAP.blind));for(var a=0;a<t.status.length;a++){"errorState"!=t.status[a].ref.value&&(t.status[a].ref.extra="errorState");}return"blindgroup"==e.data&&delete t.status,t;case"fan":case"fanV2":return this.MAP.fan;case"fangroup":return delete(t=JSON.parse(JSON.stringify(this.MAP.blind))).status,t;}return null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"blind":case"blindgroup":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100}},rotation:{value:{type:"INT",min:1,max:16}}},states:{position:{min:0,max:100},rotation:{min:1,max:16}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"position",ext:"%d",extMeta:"0-100",step:"1"},rotation:{value:"lamella",ext:"%d",extMeta:"1-16",step:"1"}},states:{position:{value:"positionState"},rotation:{value:"lamellaState"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.IN.buildQuery({_hwv:"C1"},e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"blind":case"blindgroup":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})},value:{url:null,min:0,max:100,step:1,noffset:6244,hex:4}},states:{positionState:{min:0,max:100}}};var a=_getUrl(e,{value:"position",ext:0});a=a.substr(0,a.length-4)+"{val}",t.commands.value.url=a;}return t;}}},xnm.aio.gateway.systems.R2={regist:function regist(e,t,a){if(t&&t.address){var n=t.address.replace(/\./g,"");this.addSensor(e,n,a);}else a&&a(new Error("regist device option foramt invalid"));},delSensor:function delSensor(e,t,a){t=t.substr(0,4),e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},addSensor:function addSensor(e,t,a){e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){if(t)switch(t.type){case"switch":case"dimmer":case"blind":break;case"motion":case"contact":case"dusk":case"button":return void this._learnWithAddress(e,t.devices,a);default:return void(a&&a(new Error("no such device type")));}var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:1e4},function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);r?a&&a(null,r):a&&a(new Error("gateway return code format invalid"));}else a&&a(new Error("response format invalid"));});},_learnWithAddress:function _learnWithAddress(e,t,a){var n=[];if(t)for(var r=t.length;r--;){t[r]&&t[r].address&&n.push(t[r].address);}var o=this._generateFreeAdr(n);if(o){e._executeRequest("SendSC",{type:this.DM.TYPE,data:o+"2001"},null,function(e,t){e?a&&a(e):a&&a(null,{address:o});});}else a&&a(new Error("can not generate new address"));},_generateFreeAdr:function _generateFreeAdr(e){for(var t,a=!1;!a;){t=this._getHexVal(Math.floor(61166*Math.random())+4369,4)+"40",a=!this._contains(e,t);}return t;},_resolveAddress:function _resolveAddress(e){return e.length<8?null:{address:e.substr(0,6)};},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n.state:null;},_handleUdpState:function _handleUdpState(e,t){return t.type&&"r2"==t.type.toLowerCase()&&t.data&&e.type&&"r2"==e.type.toLowerCase()&&e.address?(8==t.data.length&&(a=t.data.substr(0,4),n=t.data.substr(6)),a&&n?this._handleState(e,{type:"R2",adr:a,state:n+":00"}):null):null;var a,n;},_executeCommand:function _executeCommand(e,t,a,n){var r,o;if("refresh"==a.value){if(!t.address||t.address.length<4)return void(n&&n(new Error("device format invalid")));r="refreshSC",o={type:this.DM.TYPE,adr:t.address.substr(0,4)};}else{r="SendSC";var s=this._buildData(e,t,a);if(!s)return void(n&&n(new Error("command format invalid")));o={type:this.DM.TYPE,data:s};}e._executeRequest(r,o,null,function(e){n&&n(e);});},buildQuery:function buildQuery(e,t,a){var n,r;if("refresh"==a.value){if(!t.address||t.address.length<4)return null;n="refreshSC",r={type:this.DM.TYPE,adr:t.address.substr(0,4)};}else{n="SendSC";var o=this._buildData(e,t,a);if(!o)return null;r={type:this.DM.TYPE,data:o};}return r.XC_FNC=n,r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;if(!a)return null;var n;switch(a.value){case"on":n="0001";break;case"off":n="0002";break;case"up":n="0101";break;case"down":n="0102";break;case"stop":n="0003";break;case"dimTo":if(null==a.ext||void 0===a.ext)return null;var r=parseInt(a.ext);r<0&&(r=0),r>100&&(r=100),n=0==r?"0002AAAA":"01AAAA"+this._getHexVal(r,2);break;default:return null;}return t.address+n;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state)return null;if(!e.type||e.type.toLowerCase()!=t.type.toLowerCase())return null;if(!e.address||e.address.length<4)return null;if(e.address.substr(0,4).toLowerCase()!=t.adr.toLowerCase())return null;var a={},n=t.state.split(":"),r=parseInt(n[0],16);switch(e.data){case"switch":case"motion":case"dusk":case"button":switch(r){case 2:a.state="off";break;case 1:a.state="on";break;default:return null;}break;case"contact":switch(r){case 2:a.state="closed";break;case 1:a.state="open";break;default:return null;}break;case"dimmer":a.state=r;break;case"blind":switch(r){case 1:a.state="up";break;case 2:a.state="down";break;case 3:a.state="stop";}break;default:return null;}return a;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||10!=e.length&&8!=e.length||!t||!t.address)return null;var a=e.substr(0,6);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(6)){case"02":"contact"==t.data?n.value="closed":n.value="off";break;case"01":"contact"==t.data?n.value="open":"motion"==t.data?n.value="motion":n.value="on";break;default:return null;}return n;},generateTriggerCode:function generateTriggerCode(e,t){if(!e||!e.value||!t||!t.address||t.address<6)return null;var a;switch(e.value){case"off":case"closed":a="02";break;case"on":case"motion":case"open":a="01";}return a?t.address+a:null;},_contains:xnm.aio.gateway.Util.contains,_getHexVal:xnm.aio.gateway.Util.getHexVal,_parseData:function _parseData(e,t){if(e.length<6)return null;var a=e.substr(0,6);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n=e.substr(6).toUpperCase(),r={};switch(n){case"0001":r.value="on";break;case"0002":r.value="off";break;case"0101":r.value="up";break;case"0102":r.value="down";break;case"0003":r.value="stop";break;case"0002AAAA":r.value="dimTo",r.ext=0;break;default:"01AAAA"==n.substr(0,6)&&(r.value="dimTo",r.ext=parseInt(n.substr(6,2),16));}return r.value?r:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"R2",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},dimmer:{command:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"refresh",ref:{value:"refresh"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",step:"1"}}],status:[{type:"int",name:"status",ref:{value:"state",ext:"%d",extMeta:"0-100",step:"1"}}]},blind:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"refresh",ref:{value:"refresh"}}]},motion:{status:[{type:"enum",name:"status",ref:{value:"state",options:["off","motion"]}}],event:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"motion",ref:{value:"motion"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},dusk:{status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},contact:{status:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"open",ref:{value:"open"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}}]},button:{event:[{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"on",ref:{value:"on"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS868)return null;var a={type:this.TYPE,name:"RS2W",subtypes:[]};a.subtypes.push({id:"Switch",data:"switch"}),a.subtypes.push({id:"Dimmer",data:"dimmer"}),a.subtypes.push({id:"Blind",data:"blind"});var n=!1;return t&&t.RS2MODE||(n=!0),a.subtypes.push({id:"Dusk Sensor",data:"dusk",rfmismatch:n}),a.subtypes.push({id:"Motion Detector",data:"motion",rfmismatch:n}),a.subtypes.push({id:"Contact Sensor",data:"contact",rfmismatch:n}),a.subtypes.push({id:"Button",data:"button",rfmismatch:n}),a;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e){return e.data?{ipevt:this.MAP[e.data].ipevt}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.R2.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":(n={type:"switch",commands:{on:{},off:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"}},states:{state:{value:"state"}}};break;case"dimmer":(n={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100}}},states:{brightness:{value:{type:"INT",min:0,max:100}}}}).details={commands:{on:{value:"on"},off:{value:"off"},brightness:{value:"dimTo",ext:"%d",extMeta:"0-100"}},states:{brightness:{value:"state"}}};break;case"blind":(n={type:"blind",commands:{up:{},down:{},stop:{}}}).details={commands:{up:{value:"up"},down:{value:"down"},stop:{value:"stop"}}};break;case"motion":(n={type:"motion",states:{motion:{values:["on","off"]}}}).details={states:{motion:{value:"state",conv_s:{off:"off",motion:"on"}}}};break;case"contact":(n={type:"door",states:{state:{values:["open","closed"]}}}).details={states:{state:{value:"state"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.R2.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}},states:{state:{values:["on","off"]}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},value:{url:null,min:0,max:100,step:1,hex:2}},states:{state:{min:0,max:100}}};var a=_getUrl(e,{value:"off"});a=a.substr(0,a.length-4)+"01AAAA{val}",t.commands.value.url=a;break;case"shutter":case"blind":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"on"})},down:{url:_getUrl(e,{value:"off"})},stop:{url:_getUrl(e,{value:"stop"})}}};}return t;}}},xnm.aio.gateway.systems.GQ={learn:function learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_resolveAddress:function _resolveAddress(e){return e.substr(0,8);},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address)return null;if(!a)return null;var n;switch(a.value){case"up":n="11";break;case"down":n="33";break;case"stop":n="55";break;default:return null;}return t.address+n;},_parseData:function _parseData(e,t){if(e.length<2)return null;var a=e.substr(e.length-2),n=e.substr(0,e.length-2);if(t.address.toUpperCase()!=n.toUpperCase())return null;var r={};switch(a){case"11":r.value="up";break;case"33":r.value="down";break;case"55":r.value="stop";}return r.value?r:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"GQ",MAP:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"GreenteQ"};},getCommandStatusMap:function getCommandStatusMap(e){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"up"},down:{value:"down"},stop:{value:"stop"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.GQ.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};return{type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"up"})},down:{url:_getUrl(e,{value:"down"})},stop:{url:_getUrl(e,{value:"stop"})}}};}}},xnm.aio.gateway.systems.SIAU={delSensor:function delSensor(e,t,a){e._executeRequest("delSIAU",{adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(r,o){if(r)a&&a(r);else if(o.CODE){var s=n._resolveAddress(o.CODE);t.address=s,n.regist(e,t,function(e){e?a&&a(e):a&&a(null,{address:s});});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e;},regist:function regist(e,t,a){if(t&&t.address&&t.data){var n={type:this.DM.TYPE,adr:t.address};switch(t.data){case"window":n.config="012","DKL"==t.subtype&&(n.config="021");break;case"door":n.config="333";break;case"glass":n.config="111";break;case"smoke":n.config="222";}e._executeRequest("addSIAU",n,null,function(e){a&&a(e);});}else a&&a(new Error("regist device option foramt invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_executeCommand:function _executeCommand(e,t,a,n){if("glass"===t.data){e._executeRequest("SIAUGreset",null,null,function(e){n&&n(e);});}else n&&n(new Error("no such command:"+a.value));},buildQuery:function buildQuery(e,t,a){if("glass"===t.data){var n={XC_FNC:"SIAUGreset"};return n;}return null;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=null;switch(t.type){case"SIAU":case"SIAUD":if(t.state&&2==t.state.length){switch(a={},t.state.charAt(0)){case"0":a.status="open";break;case"1":a.status="tilted";break;case"2":a.status="closed";}switch(t.state.charAt(1)){case"0":a.error="no_error";break;case"1":a.error="low_bat";break;case"2":a.error="timeout";}}return a;case"SIAUR":case"SIAUG":if(t.state&&2==t.state.length){switch(a={},t.state.charAt(0)){case"0":a.alarm="ok";break;case"1":a.alarm="alarm";}switch(t.state.charAt(1)){case"0":a.error="no_error";break;case"1":a.error="low_bat";break;case"2":a.error="timeout";}}return a;default:return null;}},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<15||!e)return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;var a,n=t.data.substr(0,6),r=t.data.substr(9,3),o=t.data.substr(6,2);if(!e.address||n.toUpperCase()!=e.address.toUpperCase())return null;switch(r){case"111":if("glass"!=e.data)return null;a="SIAUG";break;case"222":if("smoke"!=e.data)return null;a="SIAUR";break;case"333":if("door"!=e.data)return null;a="SIAUD";break;default:a="SIAU";}return this._handleState(e,{type:a,adr:n,state:o});},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<8||!t)return null;var a=e.substr(0,6),n=e.substr(6,2),r={};if(!t.address||t.address.toUpperCase()!=a.toUpperCase())return null;switch(t.data){case"window":case"door":switch(n.charAt(0)){case"0":r.value="open";break;case"1":r.value="tilted";break;case"2":r.value="closed";}break;case"smoke":case"glass":switch(n.charAt(0)){case"0":r.value="ok";break;case"1":r.value="alarm";}}return r.value?r:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a,n,r=t.address;switch(t.data){case"window":n="SIAU";case"door":switch(n||(n="SIAUD"),e.value){case"open":a="0F";break;case"tilted":a="1F";break;case"closed":a="2F";}break;case"smoke":n||(n="SIAUR");case"glass":switch(n||(n="SIAUG"),e.value){case"alarm":a="1F";break;case"ok":a="0F";}}return r&&a?{type:n,code:r+a}:null;},DM:{TYPE:"SIAU",MAP:{window:{status:[{type:"enum",name:"status",ref:{value:"status",options:["closed","tilted","open"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","timeout","low_bat"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"open",ref:{value:"open"}}],ipevt:[{type:"enum",name:"status",ref:{value:"status",options:["closed","tilted","open"]}}]},door:{status:[{type:"enum",name:"status",ref:{value:"status",options:["closed","tilted","open"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","timeout","low_bat"]}}],event:[{type:"enum",name:"closed",ref:{value:"closed"}},{type:"enum",name:"tilted",ref:{value:"tilted"}},{type:"enum",name:"open",ref:{value:"open"}}],ipevt:[{type:"enum",name:"status",ref:{value:"status",options:["closed","tilted","open"]}}]},glass:{command:[{type:"enum",name:"reset",ref:{value:"reset"}}],status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"alarm",ref:{value:"alarm"}},{type:"enum",name:"ok",ref:{value:"ok"}}],ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}}]},smoke:{status:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}},{type:"enum",name:"error",ref:{value:"error",options:["no_error","low_bat","timeout"]}}],event:[{type:"enum",name:"alarm",ref:{value:"alarm"}},{type:"enum",name:"ok",ref:{value:"ok"}}],ipevt:[{type:"enum",name:"alarm",ref:{value:"alarm",options:["ok","alarm"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t={type:this.TYPE,name:"Siegenia-AUBI",subtypes:[]};return t.subtypes.push({id:"Window Sensor",data:"window"}),t.subtypes.push({id:"Door Sensor",data:"door"}),t.subtypes.push({id:"Glass Sensor",data:"glass"}),t.subtypes.push({id:"Smoke Detetor",data:"smoke"}),t;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e){return e.data&&this.MAP[e.data]?{ipevt:this.MAP[e.data].ipevt}:null;},getActionMap:function getActionMap(){return{};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.SIAU.delSensor(e,t.address,function(){});}}},xnm.aio.gateway.systems.PE={learn:function learn(e,t,a){if(e){var n=[],r=this;this._getPEdevicesFromGateway(e,function(o,s){if(s&&s.length>=8)a&&a(new Error("exceed maximum number of devices"));else{if(s)for(var i=0;i<s.length;i++){if(s[i]&&s[i].adr&&s[i].adr.length>2){var u=s[i].adr.substr(0,2);r._contains(n,u)||n.push(u);}}if(t&&t.devices){var l=r._getPEdevicesAddresses(t.devices);l&&(n=n.concat(l));}var m=r._findFreeAdr(n);m?r._learn(e,m,a):a&&a(new Error("pe address exceed 255"));}});}else a&&a(new Error("gateway is null"));},_contains:function _contains(e,t){for(var a=0;a<e.length;a++){if(e[a]===t)return!0;}return!1;},_findFreeAdr:function _findFreeAdr(e){for(var t=1,a=!1;!a&&t<256;){for(var n=!1,r=0;r<e.length;r++){if(e[r])if(parseInt(e[r],16)==t){n=!0;break;}}if(!n){a=!0;break;}t++;}if(256==t)return null;for(t=t.toString(16);t.length<2;){t="0"+t;}return t;},_getPEdevicesAddresses:function _getPEdevicesAddresses(e){for(var t=[],a=0;a<e.length;a++){if(e[a]&&e[a].address&&e[a].address.length>2){var n=e[a].address.substr(0,2);this._contains(t,n)||t.push(n);}}return t;},_getPEdevicesFromGateway:function _getPEdevicesFromGateway(e,t){e._executeRequest("getStates",null,null,function(e,a){if(e)t(e);else{for(var n=[],r=0;r<a.length;r++){a[r]&&"PE"==a[r].type&&n.push(a[r]);}t(null,n);}});},_learn:function _learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE,adr:t},null,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,{address:r});}else a&&a(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e;},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!t.address||t.address.length<8)return null;if(!a)return null;var n;switch(a.value){case"on":n="01";break;case"off":n="00";break;case"toggle":n="03";break;default:return null;}return t.address.substr(0,2)+"05"+t.address.substr(2)+n;},_handleState:function _handleState(e,t){if(!t.type||"pe"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=t.state.split(":");if(3!=a.length||0==a[0].length)return null;var n={};switch(a[2]){case"1":n.switchState="on";break;case"2":n.switchState="off";break;default:return null;}return a[0]&&(n.consumption=(parseInt(a[0],16)/10).toFixed(1)),n;},_parseData:function _parseData(e,t){if(e.length<12)return null;var a=e.substr(10,2),n=e.substr(0,2)+e.substr(4,6);if(t.address.substr(0,8).toUpperCase()!=n.toUpperCase())return null;var r={};switch(a){case"01":r.value="on";break;case"00":r.value="off";break;case"03":r.value="toggle";}return r.value?r:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"PE",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"switchState",options:["off","on"]}},{type:"float",name:"consumption",ref:{value:"consumption"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);return t&&!t.SUPPORTS868?null:{type:this.TYPE,name:"EMS-PCA-301"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.PE.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"powerswitch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},consumption:{type:"FLOAT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"},consumption:{value:"consumption"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.PE.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};return{type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},toggle:{url:_getUrl(e,{value:"toggle"})}},states:{switchState:{values:["on","off"]}}};}}},xnm.aio.gateway.systems.FHT80b={regist:function regist(e,t,a){if(t&&t.address){var n=t.address.split(".");if(n.length<2)a&&a(new Error("address foramt invalid"));else{var r=parseInt(n[0],16),o=parseInt(n[1],16);if(r<1||r>99||o<1||o>99)a&&a(new Error("hc1 or hc2 out of range"));else{var s={hc1:r=this._getHexVal(r,2),hc2:o=this._getHexVal(o,2)};e._executeRequest("AddFHT80b",s,null,function(e){a&&a(e);});}}}else a&&a(new Error("regist device json foramt invalid"));},delSensor:function delSensor(e,t,a){var n=t.split(".");e._executeRequest("delFHT80b",{hc1:n[0],hc2:n[1]},{timeout:2e4},function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"fht80b"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=t.state.split(":");if(3!=a.length||0==a[0].length)return null;var n,r={};if(a[0]){switch(a[0].charAt(0)){case"A":r.mode="auto";break;case"M":r.mode="manu";}n=parseInt(a[0].substr(1),16),r.setTemp=(n/10).toFixed(1);}if(a[1]&&(n=parseInt(a[1],16),r.currentTemp=(n/10).toFixed(1)),a[2]){switch(a[2].charAt(0)){case"0":r.error="ok";break;case"E":r.error="error";break;case"I":r.error="init";break;case"B":r.error="battery_low";}if(5==a[2].length){switch(a[2].charAt(2)){case"0":r.window="closed";break;case"1":r.window="open";}var o=parseInt(a[2].substr(3),16);r.valve=o;}}return r;},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildParams(e,t,a);r?e._executeRequest("SendFHT80b",r,null,function(e){n&&n(e);}):n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildParams(e,t,a);return n?(n.XC_FNC="SendFHT80b",n):null;},_buildParams:function _buildParams(e,t,a){var n=t.address.split(".");if(n.length<2)return null;var r=parseInt(n[0],16),o=parseInt(n[1],16);if(r<1||r>99||o<1||o>99)return null;var s={hc1:this._getHexVal(r,2),hc2:this._getHexVal(o,2)};switch(a.value){case"setManu":s.modus=0;break;case"setAuto":s.modus=1;break;case"up":s.t=1;break;case"down":s.t=0;break;case"open":s.tsoll=61;break;case"close":s.tsoll=11;break;case"tsoll":if(null==a.ext||void 0===a.ext)return null;var i=parseFloat(a.ext);i<6&&(i=6),i>30&&(i=30),s.tsoll=2*i;break;default:return null;}return s;},_getHexVal:xnm.aio.gateway.Util.getHexVal,generateActionCode:function generateActionCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a=t.address.split(".");if(a.length<2)return null;var n=parseInt(a[0],16),r=parseInt(a[1],16);if(n<1||n>99||r<1||r>99)return null;var o=255,s=255;switch(e.value){case"setManu":o=0;break;case"setAuto":o=1;break;case"open":s=61;break;case"close":s=11;break;case"tsoll":if(null==e.ext||void 0===e.ext)return null;var i=parseFloat(e.ext);i<6&&(i=6),i>30&&(i=30),s=2*i;break;default:return null;}return this._getHexVal(n,2)+this._getHexVal(r,2)+this._getHexVal(o,2)+this._getHexVal(s,2);},parseActionCode:function parseActionCode(e,t){if(!e||e.length<8||!t||!t.address)return null;var a=e.substr(0,2)+"."+e.substr(2,2);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n=parseInt(e.substr(4,2),16),r=parseInt(e.substr(6,2),16),o={};return 0==n?o.value="setManu":1==n?o.value="setAuto":61==r?o.value="open":11==r?o.value="close":255!=r&&(o.value="tsoll",o.ext=(r/2).toFixed(1)),o.value?o:null;},DM:{TYPE:"FHT80b",MAP:{command:[{type:"enum",name:"manu mode",ref:{value:"setManu"}},{type:"enum",name:"auto mode",ref:{value:"setAuto"}},{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"float",name:"set temperature",ref:{value:"tsoll",ext:"%f",extMeta:"6-30",step:"0.5",scale:"0.5"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["manu","auto"]}},{type:"float",name:"set temperature",ref:{value:"setTemp",ext:"%f",extMeta:"6-30",step:"0.5",scale:"0.5"}},{type:"float",name:"current temperature",ref:{value:"currentTemp",ext:"%f",extMeta:"6-30",step:"0.5",scale:"0.5"}},{type:"enum",name:"error",ref:{value:"error",options:["ok","error","init","battery_low"]}},{type:"enum",name:"window state",ref:{value:"window",options:["closed","open"]}},{type:"int",name:"valve state",ref:{value:"valve"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e),a=!1;return t&&t.FS20MODE||(a=!0),{type:this.TYPE,name:"FHT80b",rfmismatch:a};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getActionMap:function getActionMap(){for(var e=JSON.parse(JSON.stringify(this.MAP)),t={command:[],status:e.status},a=0;a<e.command.length;a++){"up"!=e.command[a].ref.value&&"down"!=e.command[a].ref.value&&t.command.push(e.command[a]);}return t;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.FHT80b.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return null;return{type:"heater",commands:{auto:{},manu:{},up:{},down:{},tempTo:{value:{type:"FLOAT",min:6,max:30,step:.5}}},states:{setpoint:{type:"FLOAT",min:6,max:30,step:.5,unit:"C"},temperature:{type:"FLOAT"},mode:{values:["manu","auto"]}},details:{commands:{auto:{value:"setAuto"},manu:{value:"setManu"},up:{value:"up"},down:{value:"down"},tempTo:{value:"tsoll",ext:"%f",extMeta:"6-30",step:"0.5",scale:"0.5"}},states:{setpoint:{value:"setTemp"},temperature:{value:"currentTemp"},mode:{value:"mode"}}}};}}},xnm.aio.gateway.systems.FS20=function(){var e={pairing:function pairing(e,t,a,n){var r;switch(t.data){case"switch":case"dimmer":case"shutter":r="off";}if(r){var o=t.address;o||(o=this.generateAddress(a)),this._executeCommand(e,{sys:"aio",type:this.DM.TYPE,address:o,data:t.data},{value:r},function(e){n&&n(e,{address:o});});}else n&&n(new Error("device type "+t.data+" do not support pairing"));},generateAddress:function generateAddress(e){var t,a=!0,n=[];if(e)for(var r=e.length;r--;){e[r].address&&n.push(e[r].address);}for(;a;){t=(t=this._getHexVal(Math.floor(80*Math.random()),2)+"."+this._getHexVal(Math.floor(80*Math.random()),2)+"."+this._getHexVal(Math.floor(80*Math.random()),2)).toUpperCase(),a=this._contains(n,t);}return t;},addSensor:function addSensor(e,t,a){t=t.replace(/\./g,""),e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},delSensor:function delSensor(e,t,a){t=t.replace(/\./g,""),e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(t,a,n){a||(a={});var r=this;a.timeout=2e4,t._executeRequest("LearnSC",{type:this.DM.TYPE},a,function(a,o){if(a)n&&n(a);else if(o.CODE){var s=e._resolveAddress(o.CODE);r.regist(t,{address:s},function(e){n&&n(e,{address:s});});}else n&&n(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){return e.substr(0,2)+"."+e.substr(2,2)+"."+e.substr(4,2);},regist:function regist(e,t,a){if(t&&t.address){var n=this;if(t.address.split(".").length<3)return a&&a(new Error("address format error")),null;var r=t.address.replace(/\./g,"");switch(t.data){case"switch":this._executeCommand(e,t,{value:"toggle"},function(t){t?a&&a(t):n.addSensor(e,r,a);});break;case"dimmer":this._executeCommand(e,t,{value:"up"},function(t){t?a&&a(t):n.addSensor(e,r,a);});break;case"shutter":this._executeCommand(e,t,{value:"moveUp"},function(o){o?a&&a(o):n._executeCommand(e,t,{value:"moveDown"},function(t){t&&a&&a(t),n.addSensor(e,r,a);});});break;default:this.addSensor(e,r,a);}}else a&&a(new Error("regist device option foramt invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},executeCommandIqontrol:function executeCommandIqontrol(e,t,a,n){t&&a&&(0==a.indexOf("dimTo")&&(a=a.replace(/dimTo/g,"")),a=a.replace(/%/g,""),this._executeCommand(e,t,{value:"dimTo",ext:a},n));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"fs20"!=t.type.toLowerCase())return null;if(!t.adr)return null;if(!t.state)return null;if(e.address.replace(/\./g,"").toLowerCase()!=t.adr.toLowerCase())return null;var a,n=t.state;if(t.state.indexOf(":")>0&&(n=(a=t.state.split(":"))[0]),n=parseInt(a[0],16),"dimmer"===e.data)return 0===n?{state:"off"}:{state:"on"};switch(n){case 0:case 20:return{state:"off"};case 17:case 19:case 16:return{state:"on"};default:return null;}},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,null,function(e){n&&n(e);});}else n&&n(new Error("command invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);return n?{type:this.DM.TYPE,data:n,XC_FNC:"SendSC"}:null;},_buildData:function _buildData(e,t,a){var n=t.address.split(".");if(n.length<3)return null;var r="00",o="00",s=n[0]+n[1]+n[2];switch(a.value){case"on":case"moveUp":r="10";break;case"off":case"moveDown":r="00";break;case"toggle":r="12";break;case"restore":r="11";break;case"up":case"dimUp":r="13";break;case"down":case"dimDown":r="14";break;case"dimTo":switch(a.ext=parseInt(a.ext),a.ext){case 0:r="00";break;case 10:r="02";break;case 20:r="03";break;case 30:r="05";break;case 40:r="06";break;case 50:r="08";break;case 60:r="09";break;case 70:r="0B";break;case 80:r="0D";break;case 90:r="0E";break;case 100:r="10";break;default:return null;}break;case"offFor":case"onFor":case"restoreFor":switch(a.value){case"offFor":r="38";break;case"onFor":r="39";break;case"restoreFor":r="3A";}switch(a.ext){case"1s":o="03";break;case"5s":o="19";break;case"10s":o="29";break;case"15s":o="2E";break;case"30s":o="3E";break;case"45s":o="4A";break;case"1m":o="4E";break;case"2m":o="5F";break;case"5m":o="78";break;case"10m":o="88";break;case"15m":o="8D";break;case"30m":o="9D";break;case"45m":o="AA";break;case"60m":o="AD";break;case"120m":o="BE";break;case"180m":o="CA";break;case"240m":o="CD";break;default:return null;}break;default:return null;}return s+r+o;},_handleUdpState:function _handleUdpState(e,t){if(!(t&&t.data&&e&&e.address))return null;if(!t.type||t.type.toUpperCase()!=this.DM.TYPE&&"FS"!=t.type.toUpperCase())return null;if(!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;if(t.data.length<8)return null;if((t.data.substring(0,2)+"."+t.data.substring(2,4)+"."+t.data.substring(4,6)).toUpperCase()!=e.address.toUpperCase())return null;var a,n=t.data.substring(6,8);return n&&(n=n.toUpperCase()),"00"==n||"14"==n||"38"==n?a="off":"11"==n||"13"==n||"10"==n||"39"==n||"3A"==n?a="on":"12"==n&&(a="toggle"),a?{state:a}:null;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||!t||!t.address)return null;if(!(e.length<10)){if((e.substr(0,2)+"."+e.substr(2,2)+"."+e.substr(4,2)).toUpperCase()!=t.address.toUpperCase())return null;var a={};switch(e.substr(6,2)){case"10":a.value="on";break;case"00":a.value="off";break;case"12":a.value="toggle";}return a.value?a:null;}},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a,n=t.address.split(".").join("");switch(e.value){case"on":a="10";break;case"off":a="00";break;case"toggle":a="12";}return a?n+a+"00":null;},_parseData:function _parseData(e,t){if(e.length<10)return null;var a=e.substr(0,2)+"."+e.substr(2,2)+"."+e.substr(4,2);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n=e.substr(6,2).toUpperCase(),r=e.substr(8,2).toUpperCase(),o={};switch(n){case"10":o.value="on","shutter"==t.data&&(o.value="moveUp");break;case"00":o.value="off","shutter"==t.data&&(o.value="moveDown");break;case"12":o.value="toggle";break;case"11":o.value="restore";break;case"13":"dimmer"==t.data&&(o.value="dimUp");break;case"14":"dimmer"==t.data&&(o.value="dimDown");break;case"02":o.value="dimTo",o.ext=10;break;case"03":o.value="dimTo",o.ext=20;break;case"05":o.value="dimTo",o.ext=30;break;case"06":o.value="dimTo",o.ext=40;break;case"08":o.value="dimTo",o.ext=50;break;case"09":o.value="dimTo",o.ext=60;break;case"0B":o.value="dimTo",o.ext=70;break;case"0D":o.value="dimTo",o.ext=80;break;case"0E":o.value="dimTo",o.ext=90;break;case"38":case"39":case"3A":switch("38"==n?o.value="offFor":"39"==n?o.value="onFor":"3A"==n&&(o.value="restoreFor"),r){case"03":o.ext="1s";break;case"19":o.ext="5s";break;case"29":o.ext="10s";break;case"2E":o.ext="15s";break;case"3E":o.ext="30s";break;case"4A":o.ext="45s";break;case"4E":o.ext="1m";break;case"5F":o.ext="2m";break;case"78":o.ext="5m";break;case"88":o.ext="10m";break;case"8D":o.ext="15m";break;case"9D":o.ext="30m";break;case"AA":o.ext="45m";break;case"AD":o.ext="60m";break;case"BE":o.ext="120m";break;case"CA":o.ext="180m";break;case"CD":o.ext="240m";}}return o.value?o:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);}};return e._contains=xnm.aio.gateway.Util.contains,e._getHexVal=xnm.aio.gateway.Util.getHexVal,e.DM={TYPE:"FS20",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"off for",ref:{value:"offFor",ext:"%e",extMeta:["1s","5s","10s","15s","30s","45s","1m","2m","5m","10m","15m","30m","45m","60m","120m","180m","240m"]}},{type:"enum",name:"on for",ref:{value:"onFor",ext:"%e",extMeta:["1s","5s","10s","15s","30s","45s","1m","2m","5m","10m","15m","30m","45m","60m","120m","180m","240m"]}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on","toggle"]}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"restore",ref:{value:"restore"}},{type:"enum",name:"off for",ref:{value:"offFor",ext:"%e",extMeta:["1s","5s","10s","15s","30s","45s","1m","2m","5m","10m","15m","30m","45m","60m","120m","180m","240m"]}},{type:"enum",name:"on for",ref:{value:"onFor",ext:"%e",extMeta:["1s","5s","10s","15s","30s","45s","1m","2m","5m","10m","15m","30m","45m","60m","120m","180m","240m"]}},{type:"enum",name:"restore for",ref:{value:"restoreFor",ext:"%e",extMeta:["1s","5s","10s","15s","30s","45s","1m","2m","5m","10m","15m","30m","45m","60m","120m","180m","240m"]}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"10-100",scale:"10"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},motion:{status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},sensor:{status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},button:{event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on","toggle"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS868)return null;var a={type:this.TYPE,name:"FS20",subtypes:[]};a.subtypes.push({id:"Switch",data:"switch"}),a.subtypes.push({id:"Dimmer",data:"dimmer"}),a.subtypes.push({id:"Shutter",data:"shutter"});var n=!1;return t&&t.FS20MODE||(n=!0),a.subtypes.push({id:"Button",data:"button",rfmismatch:n}),a.subtypes.push({id:"Motion Sensor",data:"motion",rfmismatch:n}),a.subtypes.push({id:"General Sensor",data:"sensor",rfmismatch:n}),a;},getCommandStatusMap:function getCommandStatusMap(e){return e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e){return e&&e.data&&this.MAP[e.data]?{ipevt:this.MAP[e.data].ipevt}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.FS20.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":(n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"state"}}};break;case"dimmer":(n={type:"dimmer",commands:{on:{},off:{},toggle:{},up:{},down:{},brightness:{value:{type:"INT",min:0,max:100,step:10}}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},up:{value:"dimUp"},down:{value:"dimDown"},brightness:{value:"dimTo",ext:"%d",extMeta:"10-100",step:"10"}},states:{state:{value:"state"}}};break;case"shutter":(n={type:"blind",commands:{up:{},down:{}},states:{state:{values:["on","off"]}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"}},states:{state:{value:"state"}}};break;case"motion":(n={type:"motion",states:{motion:{values:["on","off"]}}}).details={states:{motion:{value:"state"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.FS20.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}},states:{state:{values:["on","off"]}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},up:{url:_getUrl(e,{value:"dimUp"})},down:{url:_getUrl(e,{value:"dimDown"})},value:{url:null,values:[{min:0,max:0,val:"00"},{min:1,max:10,val:"02"},{min:11,max:20,val:"03"},{min:21,max:30,val:"05"},{min:31,max:40,val:"06"},{min:41,max:50,val:"08"},{min:51,max:60,val:"09"},{min:61,max:70,val:"0B"},{min:71,max:80,val:"0D"},{min:81,max:90,val:"0E"},{min:91,max:100,val:"10"}]}},states:{state:{values:["on","off"]}}};var a=_getUrl(e,{value:"dimTo",ext:100});a=a.substr(0,a.length-4)+"{val}00",t.commands.value.url=a;break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})}},states:{state:{values:["on","off"]}}};}return t;}},e;}(),xnm.aio.gateway.systems.IT=function(){var e={pairing:function pairing(e,t,a,n){var r;switch(t.data){case"switch":case"dimmer":r="on";break;case"bell":r="ring";}if(r){var o=t.address;o||(o=this.generateAddress(a));var s=this._buildData(e,{sys:"aio",type:this.DM.TYPE,address:o,data:t.data},{value:r});if(s){var i={type:this.DM.TYPE,data:s,mode:"learn"};e._executeRequest("SendSC",i,null,function(e){n&&n(e,{address:o});});}else n&&n(new Error("command format invalid"));}else n&&n(new Error("device type "+t.data+" do not support pairing"));},addSensor:function addSensor(e,t,a){e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},delSensor:function delSensor(e,t,a){var n=this,r="SendSC",o=t=t.replace(/\./g,"");"9"===t.charAt(t.length-2)&&(o=t.substr(0,t.length-2)+"80"),e._executeRequest(r,{type:this.DM.TYPE,data:o},{timeout:2e4},function(o){a&&a(o),r="delSensor",e._executeRequest(r,{type:n.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});});},generateAddress:function generateAddress(e){var t,a=!0,n=[];if(e)for(var r=e.length;r--;){e[r].address&&n.push(e[r].address);}for(;a;){t=this._getHexVal(Math.floor(57070*Math.random())+4369,4)+"008.0",a=this._contains(n,t);}return t;},learn:function learn(t,a,n){var r=this;t._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2e4},function(a,o){if(a)n&&n(a);else if(o.CODE){var s=e._resolveAddress(o.CODE);"object"==_typeof(s)?n&&n(null,s):r.regist(t,{address:s},function(e){n&&n(e,{address:s});});}else n&&n(new Error("response format invalid"));});},_resolveAddress:function _resolveAddress(e){var t;if(8==e.length){var a=parseInt(e.substr(6,1),16);3==(3&a)?(a&=-4,t={address:e.substr(0,6)+this._getHexVal(a,1)+"."+e.substr(7,1),data:"bell"}):(a&=-2,t=e.substr(0,6)+this._getHexVal(a,1)+"."+e.substr(7,1));}else t=3==e.length?-1!=e.indexOf(".")?e:e.charAt(0)+"."+e.charAt(1):parseInt(e.substr(0,2),16).toString(16)+"."+parseInt(e.substr(2,2),16).toString(16);return t;},regist:function regist(e,t,a){if(t&&t.address){var n=t.address.replace(/\./g,"");this.addSensor(e,n,a);}else a&&a(new Error("regist device option foramt invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},executeCommandIqontrol:function executeCommandIqontrol(e,t,a,n){this._executeCommand(e,t,{value:a},n);},handleStateIqontrol:function handleStateIqontrol(e,t){var a;switch(e.data){case"switch":a={value:"switchState"};break;case"door":a={value:"doorState"};break;case"window":a={value:"windowState"};break;case"dimmer":a={value:"dimmerState"};break;case"motion":a={value:"motionState"};break;case"sensor":a={value:"sensorState"};}var n,r=this._handleState(e,a,t);for(var o in r){r.hasOwnProperty(o)&&(n=r[o]);}var s=t.state.split(":");return"0E"==s[0]?n="on":"06"==s[0]&&(n="off"),null!=n&&void 0!==n&&(n={value:n}),n;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},handleUdpStateIqontrol:function handleUdpStateIqontrol(e,t){var a=this._handleUdpState(e,t);return a&&"open"==a.value?a.value="off":a&&"closed"==a.value&&(a.value="on"),a;},_handleState:function _handleState(e,t){if(!t.type||"it"!=t.type.toLowerCase())return null;if(!t.adr)return null;if(!t.state)return null;if(e.address.replace(/\./g,"").toLowerCase()!=t.adr.toLowerCase())return null;var a,n,r=t.state;t.state.indexOf(":")>0&&(r=t.state.split(":")[0]);switch(e.data){case"bell":return null;case"door":case"window":if("door"==e.data?a="doorState":"window"==e.data&&(a="windowState"),"0E"==r)n="open";else{if("06"!=r)return null;n="closed";}break;default:if(a="switch"==e.data?"switchState":"dimmer"==e.data?"dimmerState":"motion"==e.data?"motionState":"button"==e.data?"state":"sensorState","0E"==r)n="on";else{if("06"!=r)return null;n="off";}}var o={};return o[a]=n,o;},_handleUdpState:function _handleUdpState(e,t){if(!t.type||"it"!=t.type.toLowerCase())return null;if(!t.data)return null;if(!e.type||"it"!=e.type.toLowerCase())return null;if(!e.address)return null;var a,n;if(6==t.data.length)a=t.data.charAt(1)+t.data.charAt(3),n=t.data.substr(4)+":00";else if(8==t.data.length){var r=parseInt(t.data.substr(6,1),16);n=1&r?"0E:00":"06:00",r&=-2,a=t.data.substr(0,6)+r+t.data.substr(7,1);}if(!a||!n)return null;var o=e.address.replace(".","");return a.toLowerCase()!=o.toLowerCase()?null:"bell"==e.data?{ring:"true"}:this._handleState(e,{type:"IT",adr:a,state:n});},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(-1==t.address.indexOf(".")){if("bell"==t.data)switch(a.value){case"on":return t.address+"90";case"off":return t.address+"80";case"ring":return t.address+"B0";default:return null;}return null;}var n,r=t.address.split(".");if(r.length<2)return null;if(1==r[0].length)switch(a.value){case"on":case"ring":n=r[0]+r[1]+"E";break;case"off":n=r[0]+r[1]+"6";}else if(7==r[0].length){var o,s=null,i=parseInt(r[0].substr(6,1),16);switch(i&=-2,a.value){case"on":i|=1;break;case"off":break;case"ring":i|=3;break;case"dimTo":case"dimRaw":if(void 0===a.ext||null==a.ext)return null;if("number"==typeof a.ext)o=parseInt(a.ext);else{if(!a.ext.match(/^[-+]?[0-9]+$/))return null;o=parseInt(a.ext);}0!=o&&(i|=1,o<10?s="00":o<20?s="10":o<30?s="20":o<40?s="30":o<50?s="40":o<60?s="50":o<70?s="70":o<80?s="90":o<90?s="B0":o<100?s="D0":100==o&&(s="F0"));break;default:return null;}i>9&&(i=this._getHexVal(i,1)),n=null!=s?r[0].substr(0,6)+i+r[1]+s:r[0].substr(0,6)+i+r[1];}return n;}};return e._contains=xnm.aio.gateway.Util.contains,e._getHexVal=xnm.aio.gateway.Util.getHexVal,e.parseTriggerCode=function(e,t){if(!t||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;if(!t.address)return null;var a=null,n=null;if(3==e.length)"E"==e.charAt(2)||"e"==e.charAt(2)?a="on":"6"==e.charAt(2)&&(a="off"),n=e.charAt(0)+"."+e.charAt(1);else{if(8!=e.length)return null;var r=parseInt(e.substr(6,1),16);3==(3&r)?(a="ring",r&=-4,n=e.substr(0,6)+r+"."+e.substr(7,1)):(a=1&r?"on":"off",r&=-2,n=e.substr(0,6)+r+"."+e.substr(7,1));}if("bell"==t.data&&9==n.length&&t.address.length>=6){var o=t.address;if(-1==t.address.indexOf(".")){if(n.substr(0,6).toLowerCase()!=t.address.toLowerCase())return null;}else{var s=parseInt(o.charAt(6),16);if(s&=-4,(o=o.substr(0,6)+this._getHexVal(s,1)+"."+o.substr(8,1)).toLowerCase()!=n.toLowerCase())return null;}}else if(t.address.toLowerCase()!=n.toLowerCase())return null;var i={};switch(t.data){case"switch":case"motion":case"sensor":case"button":case"bell":i.value=a;break;case"door":case"window":i.value="on"==a?"open":"closed";}return i.value?i:null;},e.generateTriggerCode=function(e,t){if(!(e&&e.value&&t&&t.address))return null;var a={value:e.value};return"open"==a.value?a.value="on":"closed"==a.value&&(a.value="off"),this._buildData(null,t,a);},e._parseData=function(e,t){if(!e||3!=e.length&&8!=e.length&&10!=e.length||!t||!t.address)return null;var a,n,r;if(-1==t.address.indexOf("."))o=t.address+"B0";else{var o,s,i=t.address.split(".");if(i.length<2)return null;1==i[0].length?o=i[0]+i[1]:7==i[0].length&&(s=parseInt(i[0].substr(6,1),16),s&=3==(3&s)?-4:-2,o=i[0].substr(0,6)+s+i[1]);}if(3==e.length?(a=e.substr(0,2),n=parseInt(e.substr(2,1),16)):8!=e.length&&10!=e.length||(3==(3&(s=parseInt(e.charAt(6),16)))?(n=3&s,a=e.substr(0,6)+this._getHexVal(-4&s,1)+e.charAt(7)):(n=1&s,a=e.substr(0,6)+this._getHexVal(-2&s,1)+e.charAt(7)),10==e.length&&3!=(3&s)&&(r=e.substr(8,2))),a.toUpperCase()!=o.toUpperCase())return null;var u={};switch(n){case 3:u.value="ring";break;case 14:u.value="on";break;case 6:case 0:u.value="off";break;case 1:if(r)switch(u.value="dimTo",r.toUpperCase()){case"00":u.ext=0;break;case"10":u.ext=10;break;case"20":u.ext=20;break;case"30":u.ext=30;break;case"40":u.ext=40;break;case"50":u.ext=50;break;case"70":u.ext=60;break;case"90":u.ext=70;break;case"B0":u.ext=80;break;case"D0":u.ext=90;break;case"F0":u.ext=100;}else u.value="on";}return u.value?u:null;},e.generateActionCode=function(e,t){return this._buildData(null,t,e);},e.parseActionCode=function(e,t){return this._parseData(e,t);},e.DM={TYPE:"IT",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"status",ref:{value:"switchState",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",scale:"10"}}],status:[{type:"enum",name:"status",ref:{value:"dimmerState",options:["off","on"]}}]},bell:{command:[{type:"enum",name:"ring",ref:{value:"ring"}}],event:[{type:"enum",name:"ring",ref:{value:"ring"}}]},door:{status:[{type:"enum",name:"status",ref:{value:"doorState",options:["closed","open"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}]},window:{status:[{type:"enum",name:"status",ref:{value:"windowState",options:["closed","open"]}}],event:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}]},motion:{status:[{type:"enum",name:"status",ref:{value:"motionState",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},sensor:{status:[{type:"enum",name:"status",ref:{value:"sensorState",options:["off","on"]}}],event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},button:{event:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},shutter:{command:[{type:"enum",name:"down",ref:{value:"off"}},{type:"enum",name:"up",ref:{value:"on"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"Intertechno",subtypes:[]};e.subtypes.push({id:"Switch",data:"switch"}),e.subtypes.push({id:"Dimmer",data:"dimmer"}),e.subtypes.push({id:"Shutter",data:"shutter"}),e.subtypes.push({id:"Button",data:"button"}),e.subtypes.push({id:"Door Bell",data:"bell"}),e.subtypes.push({id:"Door Sensor",data:"door"}),e.subtypes.push({id:"Window Sensor",data:"window"}),e.subtypes.push({id:"Motion Sensor",data:"motion"}),e.subtypes.push({id:"General Sensor",data:"sensor"});var t={type:this.TYPE,name:"COCO",subtypes:[]};t.subtypes.push({id:"Switch",data:"switch"}),t.subtypes.push({id:"Dimmer",data:"dimmer"}),t.subtypes.push({id:"Button",data:"button"}),t.subtypes.push({id:"Door Bell",data:"bell"}),t.subtypes.push({id:"Door Sensor",data:"door"}),t.subtypes.push({id:"Window Sensor",data:"window"}),t.subtypes.push({id:"Motion Sensor",data:"motion"}),t.subtypes.push({id:"General Sensor",data:"sensor"});var a={type:this.TYPE,name:"SmartWares",subtypes:[]};return a.subtypes.push({id:"Switch",data:"switch"}),a.subtypes.push({id:"Dimmer",data:"dimmer"}),a.subtypes.push({id:"Button",data:"button"}),a.subtypes.push({id:"Door Sensor",data:"door"}),a.subtypes.push({id:"Motion Sensor",data:"motion"}),[e,t,a];},getCommandStatusMap:function getCommandStatusMap(e){return e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e){if(!e.data)return null;var t={ipevt:this.MAP[e.data].status};return"button"==e.data&&(t.ipevt=[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]),"bell"==e.data&&(t.ipevt=[{type:"enum",name:"ring",ref:{value:"ring",options:["true"]}}]),t;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.IT.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"}},states:{state:{value:"switchState"}}}};break;case"dimmer":n={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100}}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},brightness:{value:"dimTo",ext:"%d",extMeta:"0-100",scale:"10"}},states:{state:{value:"dimmerState"}}}};break;case"shutter":n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"on"},down:{value:"off"}}}};break;case"door":n={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"doorState"}}}};break;case"window":n={type:"window",states:{state:{values:["open","closed","tilted"]}},details:{states:{state:{value:"windowState"}}}};break;case"motion":n={type:"motion",states:{motion:{values:["on","off"]}},details:{states:{motion:{value:"motionState"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.IT.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}},states:{switchState:{values:["on","off"]}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},value:{url:null,values:[{min:0,max:0,val:""},{min:1,max:10,val:"00"},{min:11,max:20,val:"10"},{min:21,max:30,val:"20"},{min:31,max:40,val:"30"},{min:41,max:50,val:"50"},{min:51,max:60,val:"70"},{min:61,max:70,val:"90"},{min:71,max:80,val:"B0"},{min:81,max:90,val:"D0"},{min:91,max:100,val:"F0"}]}},states:{dimmerState:{values:["on","off"]}}};var a=_getUrl(e,{value:"dimTo",ext:100});a=a.substr(0,a.length-2)+"{val}",t.commands.value.url=a;break;case"shutter":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"on"})},down:{url:_getUrl(e,{value:"off"})}}};}return t;}},e;}(),xnm.aio.gateway.systems.CF3=function(){var e={_colorSeq:["F1D8AD","787AB8","3F3FCB","1A1AFF","0000FF","008FFF","00FFFF","00FF86","00FF00","7BFF00","FFFF00","FFAC00","FF5D00","FF0000","FF0086","FF00FF"],executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("cf3 device address is empty")):n&&n(new Error("cf3 device command is empty")):n&&n(new Error("cf3 device is null"));},regist:function regist(e,t,a){if(t&&t.address){var n={type:this.DM.TYPE,adr:t.address};e._executeRequest("addSensor",n,null,function(e){a&&a(e);});}else a&&a(new Error("regist device option foramt invalid"));},_buildData:function _buildData(t,a,n){var r,o,s,i;switch(n.value){case"on":r="04";break;case"off":r="05";break;case"offSave":r="06";break;case"scene1":r="07";break;case"scene2":r="08";break;case"scene3":r="09";break;case"PrgUp":r="0A";break;case"PrgDown":r="0B";break;case"up":r="0E";break;case"down":r="0F";break;case"red":case"green":case"blue":case"white":switch(n.value){case"red":r="18";break;case"green":r="19";break;case"blue":r="1A";break;case"white":r="1B";}if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)s=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;s=parseInt(n.ext);}(s=Math.round(s/100*255))>255&&(s=255),s<0&&(s=0),o=this._getHexVal(s,2);break;case"rgbS":case"rgb":if(r="02",!n.ext)return null;o=n.ext;break;case"bri":if(r="01",null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)s=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;s=parseInt(n.ext);}(s=Math.round(s/100*255))>255&&(s=255),s<4&&(s=4),o=this._getHexVal(s,2);break;case"colorUp":r="02",null!=(i=t._lastCF3colorSeq)&&void 0!==i||(i=-1),(i+=1)>=16&&(i=0),t._lastCF3colorSeq=i,o=e._colorSeq[i];break;case"colorDown":r="02",null!=(i=t._lastCF3colorSeq)&&void 0!==i||(i=-1),(i-=1)<0&&(i=15),t._lastCF3colorSeq=i,o=e._colorSeq[i];break;case"colorTemp":if(r="02",null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)s=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;s=parseInt(n.ext);}s=Math.round(s/100*255),o=this._getHexVal(s,2)+this._getHexVal(255-s,2)+"0000";}return r?r+a.address+(o||""):null;}};return e._getHexVal=xnm.aio.gateway.Util.getHexVal,e._executeCommand=function(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},e.buildQuery=function(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},e.handleStateCreator=function(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},e._handleState=function(e,t){if(t&&t.state){var a={},n=t.state.split(":");return a.color=n[0],a.bri=Math.round(parseInt(n[1],16)/256*100),a.state="0"===n[3]?"off":"on",a;}},e._parseData=function(e,t){if(!e||e.length<2||!t||!t.address)return null;var a,n=e.substr(0,2);if(e.length<t.address.length+2)return null;if(e.substr(2,t.address.length).toUpperCase()!=t.address.toUpperCase())return null;e.length>t.address.length+2&&(a=e.substr(2+t.address.length));var r={};switch(n.toUpperCase()){case"04":r.value="on";break;case"05":r.value="off";break;case"06":r.value="offSave";break;case"07":r.value="scene1";break;case"08":r.value="scene2";break;case"09":r.value="scene3";break;case"0A":r.value="PrgUp";break;case"0B":r.value="PrgDown";break;case"0E":r.value="up";break;case"0F":r.value="down";break;case"18":case"19":case"1A":case"1B":if("18"==n?r.value="red":"19"==n?r.value="green":"1A"==n?r.value="blue":"1B"==n&&(r.value="white"),!a)return null;a=100*parseInt(a,16)/255,r.ext=a;break;case"02":r.value="rgb",r.ext=a;break;case"01":r.value="bri",a=100*parseInt(a,16)/255,r.ext=a;}return r.value?r:null;},e.generateActionCode=function(e,t){return this._buildData(null,t,e);},e.parseActionCode=function(e,t){return this._parseData(e,t);},e.DM={TYPE:"CF3",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"off & save",ref:{value:"offSave"}},{type:"enum",name:"user effect 1",ref:{value:"scene1"}},{type:"enum",name:"user effect 2",ref:{value:"scene2"}},{type:"enum",name:"user effect 3",ref:{value:"scene3"}},{type:"enum",name:"effect up",ref:{value:"PrgUp"}},{type:"enum",name:"effect down",ref:{value:"PrgDown"}},{type:"enum",name:"brightness up",ref:{value:"up"}},{type:"enum",name:"brightness down",ref:{value:"down"}},{type:"enum",name:"color up",ref:{value:"colorUp"}},{type:"enum",name:"color down",ref:{value:"colorDown"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100"}},{type:"int",name:"color temperature",ref:{value:"colorTemp",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["off","on"]}},{type:"int",name:"brightness",ref:{value:"bri",extMeta:"0-100"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"Barthelme CHROMOFLEX 3"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getActionMap:function getActionMap(){for(var e=JSON.parse(JSON.stringify(this.MAP)),t={command:[]},a=0;a<e.command.length;a++){"colorUp"!=e.command[a].ref.value&&"colorDown"!=e.command[a].ref.value&&t.command.push(e.command[a]);}return t;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"dimmer",commands:{on:{},off:{},up:{},down:{},brightness:{value:{type:"INT",min:0,max:100,step:1}},colorTemperature:{value:{type:"INT"}},color:{value:{type:"RGB"}}},states:{state:{values:["on","off"]},brightness:{min:0,max:100,unit:"%"}},details:{commands:{on:{value:"on"},off:{value:"off"},up:{value:"up"},down:{value:"down"},brightness:{value:"bri",ext:"%d"},colorTemperature:{value:"colorTemp",ext:"%d"},color:{value:"rgb",ext:"%s"}},states:{state:{value:"state"},brightness:{value:"bri"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.CF3.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},color:{url:_getUrl(e,{value:"rgb",ext:"FFFFFF"})},value:{url:null,hex:2,mult:2.55,step:1,min:0,max:100}},states:{state:{values:["on","off"]},brightness:{min:0,max:100}}},a=_getUrl(e,{value:"bri",ext:100});a=a.substr(0,a.length-2)+"{val}",t.commands.value.url=a;var n=t.commands.color.url;return t.commands.color.url=n.substr(0,n.length-6)+"{val}",t;},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o,s=null,i=null,u=null,l=null;return(o=s||[]).push("cf_light"),s=o,i=function(e,t){return t["%on%"]={value:"on"},t["%off%"]={value:"off"},t["%bri%"]={value:"bri",ext:"%d",extMeta:"0-100",step:"1"},t["%offSave%"]={value:"offSave"},t["%PrgUp%"]={value:"PrgUp"},t["%PrgDown%"]={value:"PrgDown"},t["%PrgUp%"]={value:"PrgUp"},t["%colorUp%"]={value:"colorUp"},t["%colorDown%"]={value:"colorDown"},t["%rgbw%"]={value:"rgb",ext:"%s"},t;}(0,i||{}),u=function(e,t){return t["%stateBrightness%"]={value:"bri"},t["%state%"]={value:"state"},t;}(0,u||{}),l=function(e,t){return t;}(0,l||{}),e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}},e;}(),xnm.aio.gateway.systems.CF4={_colorSeq:["F1D8ADFF","787AB8A9","3F3FCB6B","1A1AFF00","0000FF00","008FFF00","00FFFF00","00FF8600","00FF0000","7BFF0000","FFFF0000","FFAC0000","FF5D0000","FF000000","FF008600","FF00FF00"],executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("cf3 device address is empty")):n&&n(new Error("cf3 device command is empty")):n&&n(new Error("cf3 device is null"));},regist:function regist(e,t,a){if(t&&t.address){var n={type:this.DM.TYPE,adr:"0004"+t.address};e._executeRequest("addSensor",n,{timeout:2e3},function(e){a&&a(e);});}else a&&a(new Error("regist device option foramt invalid"));},_buildData:function _buildData(e,t,a){var n,r,o,s;switch(a.value){case"on":n="04";break;case"off":n="05";break;case"offSave":n="06";break;case"scene1":n="07";break;case"scene2":n="08";break;case"scene3":n="09";break;case"PrgUp":n="0A";break;case"PrgDown":n="0B";break;case"up":n="0E";break;case"down":n="0F";break;case"norColCh":n="10";break;case"medColCh":n="11";break;case"sloColCh":n="12";break;case"blob":n="13";break;case"lsd":n="14";break;case"fire":n="15";break;case"flashes":n="17";break;case"bursts":n="16";break;case"red":case"green":case"blue":case"white":switch(a.value){case"red":n="18";break;case"green":n="19";break;case"blue":n="1A";break;case"white":n="1B";}if(null==a.ext||void 0===a.ext)return null;if("number"==typeof a.ext)o=parseInt(a.ext);else{if(!a.ext.match(/^[-+]?[0-9]+$/))return null;o=parseInt(a.ext);}(o=Math.round(o/100*255))>255&&(o=255),o<0&&(o=0),r=this._getHexVal(o,2);break;case"rgbwS":case"rgbw":if(n="02",!a.ext)return null;r=a.ext;break;case"bri":if(n="01",null==a.ext||void 0===a.ext)return null;if("number"==typeof a.ext)o=parseInt(a.ext);else{if(!a.ext.match(/^[-+]?[0-9]+$/))return null;o=parseInt(a.ext);}(o=Math.round(o/100*255))>255&&(o=255),o<4&&(o=4),r=this._getHexVal(o,2);break;case"colorTemp":if(n="02",null==a.ext||void 0===a.ext)return null;if("number"==typeof a.ext)o=parseInt(a.ext);else{if(!a.ext.match(/^[-+]?[0-9]+$/))return null;o=parseInt(a.ext);}o=Math.round(o/100*255),r=this._getHexVal(o,2)+this._getHexVal(255-o,2)+"0000";break;case"colorUp":n="02",null!=(s=e._lastCF4colorSeq)&&void 0!==s||(s=-1),(s+=1)>=16&&(s=0),e._lastCF4colorSeq=s,r=this._colorSeq[s];break;case"colorDown":n="02",null!=(s=e._lastCF4colorSeq)&&void 0!==s||(s=-1),(s-=1)<0&&(s=15),e._lastCF4colorSeq=s,r=this._colorSeq[s];}return n?n+t.address+(r||""):null;},_getHexVal:xnm.aio.gateway.Util.getHexVal,_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(t&&t.state){var a={},n=t.state.split(":");return a.color=n[0],a.bri=Math.round(parseInt(n[1],16)/256*100),a.state="0"===n[3]?"off":"on",a;}},_parseData:function _parseData(e,t){if(!e||e.length<2||!t||!t.address)return null;var a,n=e.substr(0,2);if(e.length<t.address.length+2)return null;if(e.substr(2,t.address.length).toUpperCase()!=t.address.toUpperCase())return null;e.length>t.address.length+2&&(a=e.substr(2+t.address.length));var r={};switch(n.toUpperCase()){case"04":r.value="on";break;case"05":r.value="off";break;case"06":r.value="offSave";break;case"07":r.value="scene1";break;case"08":r.value="scene2";break;case"09":r.value="scene3";break;case"0A":r.value="PrgUp";break;case"0B":r.value="PrgDown";break;case"0E":r.value="up";break;case"0F":r.value="down";break;case"10":r.value="norColCh";break;case"11":r.value="medColCh";break;case"12":r.value="sloColCh";break;case"13":r.value="blob";break;case"14":r.value="lsd";break;case"15":r.value="fire";break;case"17":r.value="flashes";break;case"16":r.value="bursts";break;case"18":case"19":case"1A":case"1B":if("18"==n?r.value="red":"19"==n?r.value="green":"1A"==n?r.value="blue":"1B"==n&&(r.value="white"),!a)return null;a=100*parseInt(a,16)/255,r.ext=a;break;case"02":r.value="rgbw",r.ext=a;break;case"01":r.value="bri",a=100*parseInt(a,16)/255,r.ext=a;}return r.value?r:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"CF4",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"off & save",ref:{value:"offSave"}},{type:"enum",name:"user effect 1",ref:{value:"scene1"}},{type:"enum",name:"user effect 2",ref:{value:"scene2"}},{type:"enum",name:"user effect 3",ref:{value:"scene3"}},{type:"enum",name:"effect up",ref:{value:"PrgUp"}},{type:"enum",name:"effect down",ref:{value:"PrgDown"}},{type:"enum",name:"brightness up",ref:{value:"up"}},{type:"enum",name:"brightness down",ref:{value:"down"}},{type:"enum",name:"color up",ref:{value:"colorUp"}},{type:"enum",name:"color down",ref:{value:"colorDown"}},{type:"enum",name:"normal Col Ch",ref:{value:"norColCh"}},{type:"enum",name:"medium Col Ch",ref:{value:"medColCh"}},{type:"enum",name:"slow Col Ch",ref:{value:"sloColCh"}},{type:"enum",name:"blob",ref:{value:"blob"}},{type:"enum",name:"LSD",ref:{value:"lsd"}},{type:"enum",name:"fire",ref:{value:"fire"}},{type:"enum",name:"flashes",ref:{value:"flashes"}},{type:"enum",name:"bursts",ref:{value:"bursts"}},{type:"rgbw",name:"rgb+white color",ref:{value:"rgbw",ext:"%s"}},{type:"int",name:"brightness",ref:{value:"bri",ext:"%d",extMeta:"0-100"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}},{type:"int",name:"color temperature",ref:{value:"colorTemp",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["off","on"]}},{type:"int",name:"brightness",ref:{value:"bri",extMeta:"0-100"}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"Barthelme CHROMOFLEX PRO"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getActionMap:function getActionMap(){for(var e=JSON.parse(JSON.stringify(this.MAP)),t={command:[]},a=0;a<e.command.length;a++){"colorUp"!=e.command[a].ref.value&&"colorDown"!=e.command[a].ref.value&&"colorTemp"!=e.command[a].ref.value&&t.command.push(e.command[a]);}return t;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"dimmer",commands:{on:{},off:{},up:{},down:{},white:{},brightness:{value:{type:"INT",min:0,max:100,step:1}},colorTemperature:{value:{type:"INT"}},color:{value:{type:"RGBW"}}},states:{state:{values:["on","off"]},brightness:{min:0,max:100,unit:"%"}},details:{commands:{on:{value:"on"},off:{value:"off"},up:{value:"up"},down:{value:"down"},brightness:{value:"bri",ext:"%d"},colorTemperature:{value:"colorTemp",ext:"%d"},color:{value:"rgbw",ext:"%s"}},states:{state:{value:"state"},brightness:{value:"bri"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.CF4.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},color:{url:_getUrl(e,{value:"rgbw",ext:"FFFFFFFF"})},value:{url:null,hex:2,mult:2.55,step:1,min:0,max:100}},states:{state:{values:["on","off"]},brightness:{min:0,max:100}}},a=_getUrl(e,{value:"bri",ext:100});a=a.substr(0,a.length-2)+"{val}",t.commands.value.url=a;var n=t.commands.color.url;return t.commands.color.url=n.substr(0,n.length-8)+"{val}00",t;},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o,s=null,i=null,u=null,l=null;return(o=s||[]).push("cf_light"),s=o,i=function(e,t){return t["%on%"]={value:"on"},t["%off%"]={value:"off"},t["%bri%"]={value:"bri",ext:"%d",extMeta:"0-100",step:"1"},t["%offSave%"]={value:"offSave"},t["%PrgUp%"]={value:"PrgUp"},t["%PrgDown%"]={value:"PrgDown"},t["%PrgUp%"]={value:"PrgUp"},t["%colorUp%"]={value:"colorUp"},t["%colorDown%"]={value:"colorDown"},t["%rgbw%"]={value:"rgbw",ext:"%s"},t;}(0,i||{}),u=function(e,t){return t["%stateBrightness%"]={value:"bri"},t["%state%"]={value:"state"},t;}(0,u||{}),l=function(e,t){return t;}(0,l||{}),e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}},xnm.aio.gateway.systems.QA={learn:function learn(e,t,a){t||(t={}),t.timeout=2e4,this._ensureAesKey(e,function(n){n?a&&a(n):e._executeRequest("LearnSC",{type:"QA"},t,function(e,t){e?a&&a(e):t.adr&&t.version?a&&a(null,{address:t.adr}):a&&a(new Error("response format invalid"));});});},regist:function regist(e,t,a){if(t&&t.address&&t.data){var n=t.address+"01";switch(t.data){case"esco-door-type1":case"esco-door-type2":case"esco-door-type3":n+="01";break;case"esco-window-type1":case"esco-window-type2":case"esco-window-type3":n+="02";break;case"esco-shutter-type1":case"esco-shutter-type2":n+="03";break;case"esco-universal-type1":case"esco-universal-type2":case"esco-universal-type3":n+="04";}e._executeRequest("SendSC",{type:"QA",data:n},{timeout:2e4},function(e){a&&a(e);});}else a&&a(new Error("regist device option foramt invalid"));},unregist:function unregist(e,t,a){t&&t.address&&t.data?e._executeRequest("delSensor",{type:"QA",adr:t.address},{timeout:2e4},function(e){a&&a(e);}):a&&a(new Error("unregist device option foramt invalid"));},setupTimeSettings:function setupTimeSettings(e,t,a,n){if(t&&t.address&&a){var r=t.address+"02",o=a.upTime?a.upTime:300;(o=Math.round(10*parseFloat(o)))>3e3&&(o=3e3),o<=0&&(o=3e3),o=xnm.aio.gateway.Util.getHexVal(o,4);var s=a.downTime?a.downTime:300;(s=Math.round(10*parseFloat(s)))>3e3&&(s=3e3),s<=0&&(s=3e3),s=xnm.aio.gateway.Util.getHexVal(s,4);var i=a.switchTime?a.switchTime:1;(i=parseInt(i))>255&&(i=255),i<=0&&(i=1),r+=o+s+(i=xnm.aio.gateway.Util.getHexVal(i,2)),e._executeRequest("SendSC",{type:"QA",data:r},{timeout:2e4},function(e){n&&n(e);});}else n&&n(new Error("setup up/down time device option foramt invalid"));},getTimeSettings:function getTimeSettings(e,t,a){t&&t.address?e._executeRequest("GetStates",{config:1},{timeout:2e4},function(e,n){if(e)a&&a(e);else{for(var r=300,o=300,s=1,i=0;i<n.length;i++){if(n[i]&&"QA"==n[i].type&&n[i].adr&&0==n[i].adr.toLowerCase().indexOf(t.address.toLowerCase())&&n[i].state){var u=n[i].state.split(":");if(u.length>=3){var l=u[1];l.length>=10&&(r=parseInt(l.substr(0,4),16)/10,o=parseInt(l.substr(4,4),16)/10,s=parseInt(l.substr(8,2),16));}}}a&&a(null,{upTime:r,downTime:o,switchTime:s});}}):a&&a(new Error("get time settings device option foramt invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},parseTriggerCode:function parseTriggerCode(e,t){if(!t||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;if(!t.address)return null;var a=e.substr(0,6);if(t.address.toLowerCase()!=a.toLowerCase())return null;var n={},r=e.substr(8);return"300000"==r?n.value="evtClose":"101000"==r?n.value="evtOpenA":"202000"==r&&(n.value="evtOpenB"),n.value?n:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!(e&&e.value&&t&&t.address))return null;var a;switch(e.value){case"evtOpenA":a="01101000";break;case"evtOpenB":a="01202000";break;case"evtClose":a="01300000";break;default:return null;}return t.address+a;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){!e&&a&&"moveTo"==a.value?setTimeout(function(){n&&n();},3e3):n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){var n;switch(a.value){case"open":n="0C";break;case"close":n="0D";break;case"stop":n="0B";break;case"permanentOpenOff3":n="0703";break;case"permanentOpenOn3":n="0603";break;case"permanentOpenOff4":n="0704";break;case"permanentOpenOn4":n="0604";break;case"stepUp":n="0903E8";break;case"stepDown":n="0A03E8";break;case"R4Unlock5s":n="10041388";break;case"R4Unlock1s":n="100403E8";break;case"R3Unlock5s":n="10031388";break;case"R3Unlock1s":n="100303E8";break;case"0":n="0E00";break;case"10":n="0E0A";break;case"20":n="0E14";break;case"30":n="0E1E";break;case"40":n="0E28";break;case"50":n="0E32";break;case"60":n="0E3C";break;case"70":n="0E46";break;case"80":n="0E50";break;case"90":n="0E5A";break;case"100":n="0E64";break;case"moveTo":if(void 0===a.ext||null==a.ext)return null;if(n=parseInt(a.ext),isNaN(n))return null;n>100&&(n=100),n<0&&(n=0),n="0E"+xnm.aio.gateway.Util.getHexVal(n,2);}return n&&(n=t.address+n),n;},_parseData:function _parseData(e,t){if(!e||e.length<8||!t||!t.address)return null;if(t.substr(0,6).toLowerCase()!=t.address.toLowerCase())return null;var a,n=t.substr(6,2),r={};switch(e.length>8&&(a=t.substr(8)),n=parseInt(n,16)){case 6:if("03"==a)r.value="permanentOpenOn3";else{if("04"!=a)return null;r.value="permanentOpenOn4";}break;case 7:if("03"==a)r.value="permanentOpenOff3";else{if("04"!=a)return null;r.value="permanentOpenOff4";}break;case 9:r.value="stepUp";break;case 10:r.value="stepDown";break;case 11:r.value="stop";break;case 12:r.value="open";break;case 13:r.value="close";break;case 14:if(!a)return null;r.value="moveTo",r.ext=parseInt(a,16);break;case 16:if(!a||a.length<6)return null;var o=a.substr(0,2),s=parseInt(a.substr(2));if("03"==o)o="R3";else{if("04"!=o)return null;o="R4";}r.value=o+"Unlock"+s+"s";}return r.value?r:null;},_handleState:function _handleState(e,t){if(!e.address||!e.data||"QA"!=e.type)return null;if(!t.type||"qa"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a,n={},r=t.state,o=!1;switch(t.state.indexOf(":")>0&&(r=(a=t.state.split(":"))[0],o=a[1]&&"FF"==a[1].toLowerCase(),n.timeout=o),e.data){case"esco-door-type1":case"esco-door-type2":case"esco-door-type3":case"esco-window-type1":case"esco-window-type2":r=r.substring(4,6),n.state="closed","00"!=r&&(n.state="open"),"esco-window-type1"==e.data&&(n.position=parseInt(a[0].substring(6,8),16));break;case"esco-window-type3":n.state="closed",n.position=parseInt(a[0].substring(6,8),16),n.state="open";break;case"esco-shutter-type1":case"esco-shutter-type2":n.state="off",n.position=parseInt(a[0].substring(6,8),16);break;default:return null;}return n;},_handleUdpState:function _handleUdpState(e,t){if(!t||!t.data||t.data.length<14)return null;if(!e||!e.address||!e.type||e.type.toUpperCase()!=this.DM.TYPE)return null;var a=t.data.substr(0,6);if(a.toUpperCase()!=e.address.toUpperCase())return null;var n=t.data.substr(6),r=this._handleState(e,{type:"QA",adr:a,state:n}),o=n.substr(4,2);o=parseInt(o,16);var s=n.substr(2,2);return 0!=(16&(s=parseInt(s,16)))?0!=(16&o)?r.event="OpenA":0==(48&o)&&(r.event="Close"):0!=(32&s)&&(0!=(32&o)?r.event="OpenB":0==(48&o)&&(r.event="Close")),r;},_ensureAesKey:function _ensureAesKey(e,t){var a=this;this._getAesKey(e,function(n,r){n||r?t&&t(n):(r=a._genAesKey(),a._setAesKey(e,r,t));});},_genAesKey:function _genAesKey(){for(var e="",t=0;t<16;t++){e+=xnm.aio.gateway.Util.getHexVal(Math.floor(255*Math.random()),2);}return e;},_setAesKey:function _setAesKey(e,t,a){e._executeRequest("AddSensor",{type:"QA",adr:"FF",data:t},{timeout:2e4},function(e){a&&a(e);});},_getAesKey:function _getAesKey(e,t){e._getSI(function(e,a){a&&"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"==a.QK&&(a.QK=null),t&&t(e,a&&a.QK?a.QK:null);});},DM:{TYPE:"QA",MAP:{"esco-door-type1":{command:[{type:"enum",name:"open",ref:{value:"R4Unlock1s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-door-type2":{command:[{type:"enum",name:"permanent open on",ref:{value:"permanentOpenOn3"}},{type:"enum",name:"permanent open off",ref:{value:"permanentOpenOff3"}},{type:"enum",name:"open",ref:{value:"R4Unlock1s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-door-type3":{command:[{type:"enum",name:"open",ref:{value:"R4Unlock5s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["open","closed"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-window-type1":{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-window-type2":{command:[{type:"enum",name:"open",ref:{value:"R3Unlock1s"}},{type:"enum",name:"close",ref:{value:"R4Unlock1s"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}}],event:[{type:"enum",name:"open A",ref:{value:"evtOpenA"}},{type:"enum",name:"open B",ref:{value:"evtOpenB"}},{type:"enum",name:"close",ref:{value:"evtClose"}}],ipevt:[{type:"enum",name:"event",ref:{value:"event",options:["OpenA","OpenB","Close"]}}]},"esco-window-type3":{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["closed","open"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},"esco-shutter-type1":{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","middle","on"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},"esco-shutter-type2":{command:[{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","middle","on"]}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},"esco-universal-type1":{command:[{type:"enum",name:"on Relais 3",ref:{value:"permanentOpenOn3"}},{type:"enum",name:"off Relais 3",ref:{value:"permanentOpenOff3"}},{type:"enum",name:"on Relais 4",ref:{value:"permanentOpenOn4"}},{type:"enum",name:"off Relais 4",ref:{value:"permanentOpenOff4"}}]},"esco-universal-type2":{command:[{type:"enum",name:"impulse Relais 3",ref:{value:"R3Unlock1s"}},{type:"enum",name:"impulse Relais 4",ref:{value:"R4Unlock1s"}}]},"esco-universal-type3":{command:[{type:"enum",name:"on",ref:{value:"R3Unlock1s"}},{type:"enum",name:"off",ref:{value:"R4Unlock1s"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t={type:this.TYPE,name:"esco qlever",subtypes:[]};return t.subtypes.push({id:"Door Type 1",data:"esco-door-type1"}),t.subtypes.push({id:"Door Type 2",data:"esco-door-type2"}),t.subtypes.push({id:"Door Type 3",data:"esco-door-type3"}),t.subtypes.push({id:"Window Type 1",data:"esco-window-type1"}),t.subtypes.push({id:"Window Type 2",data:"esco-window-type2"}),t.subtypes.push({id:"Window Type 3",data:"esco-window-type3"}),t.subtypes.push({id:"Shutter Type 1",data:"esco-shutter-type1"}),t.subtypes.push({id:"Shutter Type 2",data:"esco-shutter-type1"}),t.subtypes.push({id:"Universal Type 1",data:"esco-universal-type1"}),t.subtypes.push({id:"Universal Type 2",data:"esco-universal-type2"}),t.subtypes.push({id:"Universal Type 3",data:"esco-universal-type3"}),t;},getCommandStatusMap:function getCommandStatusMap(e){return e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e){return e.data&&this.MAP[e.data]?{ipevt:this.MAP[e.data].ipevt}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.QA.unregist(e,t,function(){});}}},xnm.aio.gateway.systems.Code={executeCommandCreator:function executeCommandCreator(e,t,a,n){if(t){if(t.ircodes&&t.ircodes.codes){if(a&&a.value){var r=this._rebuildDevice(t),o=this._findIRCode(a,t);null!=o&&void 0!==o?this._executeCommand(e,r,o,n):n&&n(new Error("code device has no command "+a.value));}else n&&n(new Error("code device command is empty"));}else n&&n(new Error("code device has no codes"));}else n&&n(new Error("code device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildParam(a,t);e._executeRequest("Send2",r,null,function(e){n&&n(e);});},buildQuery:function buildQuery(e,t,a){if(!t)return null;if(!t.ircodes||!t.ircodes.codes)return null;if(!a||!a.value)return null;var n=this._rebuildDevice(t),r=this._findIRCode(a,t);if(null==r||void 0===r)return null;var o=this._buildParam(r,n);return o.XC_FNC="Send2",o;},_findIRCode:function _findIRCode(e,t){for(var a,n=t.ircodes.codes,r=0;r<n.length;r++){if(n[r].key==e.value){a=n[r].code;break;}}return a;},_rebuildDevice:function _rebuildDevice(e){var t={sys:e.sys,type:e.type},a=e.address,n=e.data;if(a&&-1!=a.indexOf(":")){var r=a.split(":");r.length>=2&&(n=r[0].toLowerCase(),a=r[1]);}return t.address=a,t.data=n,t;},_buildParam:function _buildParam(e,t){var a={code:e},n=null,r=null;switch(t.data){case"ir":r=t.address,n="00";break;case"rf":r="00",n=t.address;}return r&&(a.ir=r),n&&(a.rf=n),a;},learn:function learn(e,t,a){t||(t={}),t.freq&&(t.freq=t.freq.replace(".","")),e._executeRequest("Learn",t,{timeout:2e4},function(e,t){e?a&&a(e):t.CODE?a&&a(null,{code:t.CODE}):a&&a(new Error("response format invalid"));});},learnIR:function learnIR(e,t,a){t||(t={}),e._executeRequest("LearnIR",t,{timeout:2e4},function(e,t){e?a&&a(e):t.CODE?a&&a(null,{code:t.CODE}):a&&a(new Error("response format invalid"));});},getShortCode:function getShortCode(e){var t=null;return e.length>18&&(t=e.substr(4,2),t+=e.substr(18+8*parseInt(e.substr(16,2),16))),t;},generateActionCode:function generateActionCode(e,t){if(!(e&&e.value&&t&&t.ircodes&&t.ircodes.codes))return null;var a=this._rebuildDevice(t),n=this._findIRCode(e,t);return this._buildParam(n,a);},parseActionCode:function parseActionCode(e,t){if(!e||!e.code||!t)return null;if(t.ircodes&&t.ircodes.codes){var a,n=this._rebuildDevice(t),r=this._buildParam(e.code,n);if(e.ir&&(!r.ir||r.ir.toUpperCase()!=e.ir.toUpperCase()))return null;if(e.rf&&(!r.rf||r.rf.toUpperCase()!=e.rf.toUpperCase()))return null;for(var o=t.ircodes.codes,s=0;s<o.length;s++){if(o[s].code&&o[s].code.toUpperCase()==e.code.toUpperCase()){a=o[s].key;break;}}return a?{value:a}:null;}},DM:{TYPE:"CODE",getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"IR/RF Code",addresses:[]};e.addresses.push({id:"Internal blaster",adr:"IR:01"}),e.addresses.push({id:"Output 1",adr:"IR:02"}),e.addresses.push({id:"Output 2",adr:"IR:04"}),e.addresses.push({id:"Output 3",adr:"IR:08"});for(var t=2;t<6;t++){e.addresses.push({id:"Extender "+(t-1),adr:"RF:0"+t});for(var a=1;a<4;a++){e.addresses.push({id:"Extender "+(t-1)+" (Output "+a+")",adr:"RF:"+a+t});}}return e.addresses.push({id:"433 Extender",adr:"RF:01"}),e;},getCommandStatusMap:function getCommandStatusMap(e){var t={command:[]};if(e&&e.ircodes&&e.ircodes.codes){for(var a=0;a<e.ircodes.codes.length;a++){var n=e.ircodes.codes[a];t.command.push({type:"enum",name:n.key,ref:{value:n.key}});}return t;}return null;},toGeneralDevice:function toGeneralDevice(e,t,a){return e&&"v5"==a?this.toGeneralDeviceV5(e):null;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.Code.buildQuery(null,e,t);return a?"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&code="+encodeURIComponent(a.code):null;};if(!e||!e.ircodes||!e.ircodes.codes)return null;var t={type:"CODE",address:e.address,commands:{}};if(e.subtype)if("shading"===e.subtype)t.type="blind";else t.type=e.subtype;for(var a=0;a<e.ircodes.codes.length;a++){var n=e.ircodes.codes[a];t.commands[n.key]={url:_getUrl(e,{value:n.key})};}return t;}}},xnm.aio.gateway.systems.FX3={learn:function learn(e,t,a){var n=this;e._executeRequest("LearnSC",{type:this.DM.TYPE},null,function(e,t){if(e)a&&a(e);else if(t.CODE){var r=n._resolveAddress(t.CODE);a&&a(null,r);}else a&&a(new Error("response format invalid"));});},teach:function teach(e,t,a){if(t.address&&t.layer&&t.code){var n=("01"+t.address+t.layer+t.code).toUpperCase();e._executeRequest("SendSC",{type:this.DM.TYPE,data:n},null,function(e){a&&a(e);});}else a&&a(new Error("options invalid"));},_resolveAddress:function _resolveAddress(e){return e.length<10?null:{address:e.substr(2,4),layer:e.substr(6,2),code:e.substr(8,2)};},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!a)return null;var n=a.value.indexOf("@");if(-1==n)return null;var r=a.value.substr(0,n),o=a.value.substr(n+1);if(!r||!o)return null;if("%d"==o){if(void 0===a.ext||null==a.ext)return null;o=xnm.aio.gateway.Util.getHexVal(parseInt(a.ext),2);}return("01"+r+o).toUpperCase();},_parseData:function _parseData(e,t,a){if(e.length<10)return null;var n=e.substr(2,4).toUpperCase(),r=e.substr(6,2).toUpperCase(),o=e.substr(8).toUpperCase();return"00"==r&&a&&"65"!=o&&"66"!=o&&(o="%d"),"%d"!=o?{value:n+r+"@"+o}:{value:n+r+"@"+o,ext:parseInt(e.substr(8).toUpperCase(),16)};},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t,a){var n=!1;return a&&a.value&&-1!=a.value.indexOf("%d")&&(n=!0),this._parseData(e,t,n);},DM:{TYPE:"FX3",getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"Schalk",subtypes:[]};return e.subtypes.push({id:"Switch",data:"switch"}),e.subtypes.push({id:"Blind",data:"blind"}),e.subtypes.push({id:"Dimmer",data:"dimmer"}),e.subtypes.push({id:"Push Button",data:"button"}),e.subtypes.push({id:"Gerneral",data:"general"}),e;},getCommandStatusMap:function getCommandStatusMap(e){var t={command:[]};if(e&&e.functions&&e.functions.codes)for(var a=0;a<e.functions.codes.length;a++){var n=e.functions.codes[a],r=n.address,o=n.layer,s=n.code;r&&o&&s&&("dimmer"==s?(t.command.push({type:"enum",name:"dimUp",ref:{value:r+o+"@65"}}),t.command.push({type:"enum",name:"dimDown",ref:{value:r+o+"@66"}}),t.command.push({type:"int",name:"dimTo",ref:{value:r+o+"@%d",ext:"%d"}})):t.command.push({type:"enum",name:n.key,ref:{value:r+o+"@"+s}}));}return t;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);if(!e.functions||!e.functions.codes||!e.functions.codes.length)return null;var n={type:null,commands:{},details:{commands:{}}};switch(e.data){case"switch":n.type="switch";break;case"dimmer":n.type="dimmer";break;case"blind":n.type="blind";break;case"general":n.type="FX3";break;default:return null;}for(var r=0;r<e.functions.codes.length;r++){var o=e.functions.codes[r],s=o.address,i=o.layer,u=o.code;s&&i&&u&&("dimmer"==u?(n.commands.up={},n.details.commands.up={value:s+i+"@65"},n.commands.down={},n.details.commands.down={value:s+i+"@66"},n.commands.brightness={value:{type:"INT",min:0,max:100}},n.details.commands.brightness={value:s+i+"@%d",ext:"%d"}):(n.commands[o.key]={},n.details.commands[o.key]={value:s+i+"@"+u}));}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.FX3.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!(e&&e.data&&e.functions&&e.functions.codes&&e.functions.codes.length))return null;var t=e.data,a={type:null,address:e.address,commands:{}};switch(t){case"switch":a.type="switch";break;case"dimmer":a.type="dimmer";break;case"blind":a.type="blind";break;case"general":a.type="FX3";break;default:return null;}for(var n=0;n<e.functions.codes.length;n++){var r=e.functions.codes[n],o=r.address,s=r.layer,i=r.code;if(o&&s&&i)if("dimmer"==i){a.commands.up={url:_getUrl(e,{value:o+s+"@65"})},a.commands.down={url:_getUrl(e,{value:o+s+"@66"})},a.commands.value={url:null,min:0,max:100,step:1,hex:2};var u=_getUrl(e,{value:o+s+"@%d",ext:100});u=u.substr(0,u.length-2)+"{val}",a.commands.value.url=u;}else a.commands[r.key]={url:_getUrl(e,{value:o+s+"@"+i})};}return a;}}},xnm.aio.gateway.systems.BK={delSensor:function delSensor(e,t,a,n){var r=this,o="delSensor";n?e._executeRequest(o,{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);}):(o="SendSc",e._executeRequest(o,{type:this.DM.TYPE,data:"01"+t+"07"},{timeout:2e4},function(n){n?a&&a(n):(o="delSensor",t=t.substr(2),e._executeRequest(o,{type:r.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);}));}));},pairing:function pairing(e,t,a,n){if(t){var r=t.address,o=this;r?this.learn(e,{address:r},n):this.generateAddress(e,a,function(t,a){t?n&&n(t):o.learn(e,{address:a},n);});}else n&&n(new Error("device json is null"));},unpairing:function unpairing(e,t,a,n){if(t){var r=t.address;if(r){var o=null;1==a.length&&r==a[0].address&&(o=r.substr(2));var s=this;this._executeCommand(e,t,{value:"signOut"},function(t){t?n&&n(t):o?s.delSensor(e,o,n,!0):n&&n();});}else n&&n(new Error("device address is null"));}else n&&n(new Error("device json is null"));},generateAddress:function generateAddress(e,t,a){var n=null,r={};if(t)for(var o=t.length;o--;){if(t[o].address&&t[o].address.length>=6){var s=t[o].address.substr(0,2).toUpperCase(),i=t[o].address.substr(2,6).toUpperCase();r[i]||(r[i]=["01","02","03","04","05"]);var u=r[i].indexOf(s);-1!=u&&r[i].splice(u,1);}}for(var l in r){if(r.hasOwnProperty(l)){var m=r[l];if(m&&m.length>0){n=m[0]+l;break;}}}n?a&&a(null,n):xnm.aio.gateway.Admin.getBeckerSerial(e,function(e,t){if(e)a&&a(e);else{var n=xnm.aio.gateway.Util.getHexVal(parseInt(t),6);a&&a(null,"01"+n.toUpperCase());}});},learn:function learn(e,t,a){if(!t||!t.address||t.address.length<8)a&&a(new Error("address invalid"));else{e._executeRequest("LearnSC",{type:this.DM.TYPE,adr:t.address},null,function(e){e?a&&a(e):a&&a(null,{address:t.address});});}},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!a&&!a.value)return null;if(!t&&!t.address)return null;var n=t.address,r=null;switch(a.value){case"moveDown":r="00";break;case"moveUp":r="01";break;case"stop":r="02";break;case"pos1":r="03";break;case"pos2":r="04";break;case"moveDown3s":r="05";break;case"moveUp3s":r="06";break;case"signOut":r="07";break;case"briUp":r="08";break;case"briDown":r="09";break;default:return null;}return("01"+n+r).toUpperCase();},_parseData:function _parseData(e,t){if(e.length<12)return null;e.substr(2,8).toUpperCase();var a={};switch(e.substr(10,2).toUpperCase()){case"00":a.value="moveDown";break;case"01":a.value="moveUp";break;case"02":a.value="stop";break;case"03":a.value="pos1";break;case"04":a.value="pos2";break;case"05":a.value="moveDown3s";break;case"06":a.value="moveUp3s";break;case"07":a.value="signOut";break;case"08":a.value="briUp";break;case"09":a.value="briDown";}return a.value?a:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"BK",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"moveUp"}},{type:"enum",name:"off",ref:{value:"moveDown"}}]},blind:{command:[{type:"enum",name:"up",ref:{value:"moveUp3s"}},{type:"enum",name:"down",ref:{value:"moveDown3s"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"position 1",ref:{value:"pos1"}},{type:"enum",name:"position 2",ref:{value:"pos2"}},{type:"enum",name:"step up",ref:{value:"moveUp"}},{type:"enum",name:"step down",ref:{value:"moveDown"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"moveUp3s"}},{type:"enum",name:"off",ref:{value:"stop"}},{type:"enum",name:"max brightness",ref:{value:"pos1"}},{type:"enum",name:"middle brightness",ref:{value:"pos2"}},{type:"enum",name:"up",ref:{value:"briUp"}},{type:"enum",name:"down",ref:{value:"briDown"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"Becker Centronic",subtypes:[]};return e.subtypes.push({id:"Blind",data:"blind"}),e.subtypes.push({id:"Dimmer",data:"dimmer"}),[e,{type:this.TYPE,name:"Roto",vendor:"roto",subtypes:[{id:"Blind",data:"blind",vendor:"roto"},{id:"Awning",data:"blind",vendor:"roto"},{id:"Roof Window",data:"blind",vendor:"roto"},{id:"Socket",data:"switch",vendor:"roto"},{id:"Receiver",data:"switch",vendor:"roto"}]},{type:this.TYPE,name:"MHZ Sonnenschutz",vendor:"mhz",subtypes:[{id:"Becker Centronic  Blind",data:"blind",vendor:"mhz"}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.BK.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"moveUp"},off:{value:"moveDown"}}}};break;case"dimmer":n={type:"dimmer",commands:{on:{},off:{},up:{},down:{}},details:{commands:{on:{value:"moveUp3s"},off:{value:"stop"},up:{value:"briUp"},down:{value:"briDown"}}}};break;case"blind":n={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp3s"},down:{value:"moveDown3s"},stop:{value:"stop"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.BK.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"moveUp"})},off:{url:_getUrl(e,{value:"moveDown3s"})}}};break;case"dimmer":t={type:"dimmer",address:e.address,commands:{on:{url:_getUrl(e,{value:"moveUp3s"})},off:{url:_getUrl(e,{value:"stop"})},up:{url:_getUrl(e,{value:"briUp"})},down:{url:_getUrl(e,{value:"briDown"})}}};break;case"blind":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp3s"})},down:{url:_getUrl(e,{value:"moveDown3s"})},off:{url:_getUrl(e,{value:"stop"})}}};}return t;}}},xnm.aio.gateway.systems.WR={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){var n=this;e._getSI(function(r,o){r?a&&a(r):o&&o.WIR&&o.WIR.ADR&&"FFFFFF"!=o.WIR.ADR?n._learn(e,t,a):xnm.aio.gateway.Admin.V5.getInfo(e,function(r,o){if(r)a&&a(r);else if(o&&o.mac){var s=o.mac;s=(s=s.replace(/-/g,"")).substr(6),e._executeRequest("setConfig",{sys:"WR",adr:s},null,function(r,o){r?a&&a(r):n._learn(e,t,a);});}else a&&a(new Error("no valid mac address"));});});},_learn:function _learn(e,t,a){var n=this,r={type:this.DM.TYPE};t.data&&(r.deviceType=t.data),"eAKTOR-S4"==t.subtype?r.deviceType="switch4":"eAKTOR-M2"==t.subtype&&(r.deviceType="shutter2"),e._executeRequest("LearnSC",r,{timeout:2e4},function(r,o){if(r)a&&a(r);else{var s=o.adr,i=o.deviceType,u="blind";switch(i){case"01":case"shutter2":u="blind";break;case"04":u="motor";break;case"08":case"switch4":u="switch";break;case"09":u="remote";}"08"==i||"eAKTOR-S2"==t.subtype||"eAKTOR-S4"==t.subtype||"eAKTOR-M2"==t.subtype?n._handleMultiChannelDevice(e,t,o,function(e,t){a&&a(e,t);}):a&&a(null,[{address:s,data:u,subtype:t.subtype}]);}});},_handleMultiChannelDevice:function _handleMultiChannelDevice(e,t,a,n){var r=a.adr.substr(0,6),o=(a.adr.substr(6,2),[]);switch(t.subtype){case"eAKTOR-S2":o.push({address:r+"01",data:"switch",subtype:t.subtype}),o.push({address:r+"02",data:"switch",subtype:t.subtype});break;case"eAKTOR-S4":o.push({address:r+"01",data:"switch",subtype:t.subtype}),o.push({address:r+"02",data:"switch",subtype:t.subtype}),o.push({address:r+"03",data:"switch",subtype:t.subtype}),o.push({address:r+"04",data:"switch",subtype:t.subtype});break;case"eAKTOR-M2":o.push({address:r+"01",data:"blind",subtype:t.subtype}),o.push({address:r+"02",data:"blind",subtype:t.subtype});break;default:o.push({address:a.adr,data:"switch",subtype:t.subtype});}n&&n(null,o);},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t||!t.type||"wr"!=t.type.toLowerCase()||!t.adr||!t.state||t.state.length<6)return null;if(!(e&&e.type&&"wr"==e.type.toLowerCase()&&e.address&&e.data))return null;if(e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a="blind"==e.data?"01":null;if(t.state.substr(0,2)!=a)return null;var n=parseInt(t.state.substr(2,2),16),r=parseInt(t.state.substr(4,2),16),o={state:n};return o.failure=!0&r?"true":"false",o.overload=!0&r?"true":"false",o.overheat=!0&r?"true":"false",o;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;if(!t||!t.address||!t.data)return null;var n=t.address,r=null;switch(a.value){case"moveUp":case"on":r="01";break;case"moveDown":case"off":r="02";break;case"stop":r="03";break;case"moveTo":if(r="07",void 0===a.ext||null==a.ext)return null;var o=parseInt(a.ext);o<0&&(o=0),o>100&&(o=100),r+=xnm.aio.gateway.Util.getHexVal(o,2);break;default:return null;}return("01"+n+"01"+r).toUpperCase();},_parseData:function _parseData(e,t){if(!(t&&t.type&&"wr"==t.type.toLowerCase()&&t.address&&t.data))return null;if(!e||e.length<14)return null;var a=e.substr(2,8);if(t.address.toLowerCase()!=a.toLowerCase())return null;var n={};switch(e.substr(12,2).toUpperCase()){case"01":"blind"==t.data||"motor"==t.data?n.value="moveUp":n.value="on";break;case"02":"blind"==t.data||"motor"==t.data?n.value="moveDown":n.value="off";break;case"03":n.value="stop";break;case"07":if(e.length<16)return null;var r=e.substr(14,2);n.ext=parseInt(r,16),n.value="moveTo";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"WR",MAP:{eWICKLER:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"over heat",ref:{value:"overheat",options:["true","false"]}}],ipevt:[{type:"int",name:"state",ref:{value:"state"}}]},eUHR:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},ea100:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},"eAKTOR-S":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},"eAKTOR-M":{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}}]},shutter2:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e),a=!t||!t.WIRMODE,n={type:this.TYPE,name:"WIR elektronik",subtypes:[]};return n.subtypes.push({id:"eWICKLER",data:"blind",subtype:"eWICKLER",rfmismatch:a}),n.subtypes.push({id:"eUHR",data:"blind",subtype:"eUHR",rfmismatch:a}),n.subtypes.push({id:"eAKTOR Schaltaktor",data:"switch",subtype:"eAKTOR-S",rfmismatch:a}),n.subtypes.push({id:"eAKTOR Rohrmotor",data:"motor",subtype:"eAKTOR-M",rfmismatch:a}),n.subtypes.push({id:"eAKTOR Rohrmotor 2 Kanle",data:"blind",subtype:"eAKTOR-M2",rfmismatch:a}),n.subtypes.push({id:"eAKTOR Schaltaktor 2 Kanle",data:"switch",subtype:"eAKTOR-S2",rfmismatch:a}),n.subtypes.push({id:"eAKTOR Schaltaktor 4 Kanle",data:"switch",subtype:"eAKTOR-S4",rfmismatch:a}),n;},getCommandStatusMap:function getCommandStatusMap(e){if(!e)return null;switch(e.data){case"blind":case"shutter":return"eUHR"==e.subtype?this.MAP.eUHR:"ea100"==e.subtype?this.MAP.ea100:"shutter2"==e.subtype||"eAKTOR-M2"==e.subtype?this.MAP.shutter2:this.MAP.eWICKLER;case"motor":return this.MAP["eAKTOR-M"];case"switch":return this.MAP["eAKTOR-S"];default:return null;}},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.WR.delSensor(e,t.address,function(){});},_resolveType:function _resolveType(e){if(!e)return null;switch(e.data){case"blind":case"shutter":return"eUHR"==e.subtype?"eUHR":"ea100"==e.subtype?"ea100":"shutter2"==e.subtype?this.MAP.shutter2:"eWICKLER";case"motor":return"eAKTOR-M";case"switch":return"eAKTOR-S";default:return null;}},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=this._resolveType(e);if(!n)return null;var r=null;switch(n){case"eAKTOR-S":r={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"eAKTOR-M":r={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"}}}};break;case"eUHR":case"ea100":case"shutter2":r={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};break;case"eWICKLER":r={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100}}},states:{position:{min:0,max:100}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d",extMeta:"0-100"}},states:{position:{value:"state"}}}};}return r;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.WR.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}},states:{state:{values:["on","off"]}}};break;case"motor":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})}}};break;case"blind":case"shutter":if("eUHR"==e.subtype||"ea100"==e.subtype||"shutter2"==e.subtype)t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},off:{url:_getUrl(e,{value:"stop"})}}};else{t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},off:{url:_getUrl(e,{value:"stop"})},value:{url:null,min:0,max:100,step:1,hex:2}},states:{state:{min:0,max:100}}};var a=_getUrl(e,{value:"moveTo",ext:100});a=a.substr(0,a.length-2)+"{val}",t.commands.value.url=a;}}return t;}}},xnm.aio.gateway.systems.DY2={MOTOR_STATUS:["standby","running","sleeping","deeply_sleeping","error","re_set","pair_avaliable","adjustment_of_limit_setting","1st_up_limit_setting","2nd_down_limit_setting"],RUNNING_STATUS:["stop","up","down","jog_up","jog_down","rotating_reminder","stop_@1st_up_limit","stop_@2nd_down_limit","stop_@3rd_intermediate_position"],HALL_STATUS:["normal","hall1_error","hall2_error","up_stop_error","down_stop_error","support_power_error_high","support_power_error_low"],learn:function learn(e,t,a){var n={type:this.DM.TYPE};t||(t={}),t&&t.deviceType&&(n.deviceType=t.deviceType);t.timeout=2e4,e._executeRequest("LearnSC",n,t,function(e,t){e?a&&a(e):t.CODE?a&&a(null,{address:t.CODE}):a&&a(new Error("response format invalid"));});},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r,o,s="SendSC";"refresh"==a.value?(s="RefreshSC",r=t.address,o={type:this.DM.TYPE,adr:t.address}):(r=this._buildData(e,t,a),o={type:this.DM.TYPE,data:r}),r?e._executeRequest(s,o,null,function(e){n&&n(e);}):n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n,r,o="SendSC";return"refresh"==a.value?(o="RefreshSC",n=t.address,r={type:this.DM.TYPE,adr:t.address}):(n=this._buildData(e,t,a),r={type:this.DM.TYPE,data:n}),n?(r.XC_FNC=o,r):null;},_buildData:function _buildData(e,t,a){if(!a&&!a.value)return null;if(!t&&!t.address)return null;var n,r=t.address,o=null;switch(a.value){case"moveUp":o="01";break;case"moveDown":o="02";break;case"stop":o="03";break;case"interPos":o="06";break;case"up":o="09";break;case"down":o="0A";break;case"tiltTo":if(o="20",void 0===a.ext||null==a.ext)return null;for(n=parseInt(a.ext).toString(16);n.length<2;){n="0"+n;}o+=n.toUpperCase();break;case"moveTo":if(o="40",void 0===a.ext||null==a.ext)return null;for(n=parseInt(a.ext).toString(16);n.length<2;){n="0"+n;}o+=n.toUpperCase();break;case"pos&wink":var s,i;if(o="60",!a.ext)return null;for(var u=0;u<a.ext.length;u++){var l=a.ext[u];if(l)switch(l.value){case"moveTo":i=l.ext;break;case"tiltTo":s=l.ext;}}if(void 0===s||null==s||void 0===i||null==i)return null;for(s=parseInt(s).toString(16);s.length<2;){s="0"+s;}for(i=parseInt(i).toString(16);i.length<2;){i="0"+i;}o+=s+i;break;default:return null;}return("01"+r+o).toUpperCase();},_parseData:function _parseData(e,t){if(e.length<12)return null;var a=e.substr(2,8);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n,r={};switch(e.substr(10,2).toUpperCase()){case"01":r.value="moveUp";break;case"02":r.value="moveDown";break;case"03":r.value="stop";break;case"06":r.value="interPos";break;case"09":r.value="up";break;case"0A":r.value="down";break;case"20":if(r.value="tiltTo",e.length<14)return null;n=e.substr(12,2),r.extra=parseInt(n,16);break;case"40":if(r.value="moveTo",e.length<14)return null;n=e.substr(12,2),r.extra=parseInt(n,16);break;case"60":if(r.value="pos&wink",e.length<16)return null;n=e.substr(12,2);var o=parseInt(n,16);n=e.substr(14,2);var s=parseInt(n,16);r.extra="%multi",r.extMeta=[{type:"int",name:"move to",ref:{value:"moveTo",ext:s,extMeta:"0-100"}},{type:"int",name:"tilt to",ref:{value:"tiltTo",ext:o,extMeta:"0-180"}}];}return r.value?r:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"dy2"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;if(t.state.length<8)return null;var a=t.state.substr(0,4),n=t.state.substr(4,2),r=t.state.substr(6,2),o={};o.pos=parseInt(n,16),o.tilt=parseInt(r,16);var s=parseInt(a.substr(0,2),16),i=parseInt(a.substr(2),16),u=s>>4&255;o.motorStatus=this.MOTOR_STATUS[u];var l=s>>3&1;o.upLimit=l?"set":"not_set";var m=s>>2&1;o.downLimit=m?"set":"not_set";var d=i>>4&255;o.runningStatus=this.RUNNING_STATUS[d];var p=255&i;return o.hallStatus=this.HALL_STATUS[p],o;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},_getCurrentState:function _getCurrentState(e,t,a){if(t&&t.address){var n={adr:t.address,type:"DY2"};e._executeRequest("refreshSC",n,null,function(e,t){e?a&&a(e):a&&a(null,t);});}else a&&a(new Error("device format invalid"));},getCurrentStateCreator:function getCurrentStateCreator(e,t,a){if(t){if(0!=t.length){var n,r={};for(n=0;n<t.length;n++){t[n]&&t[n].device&&t[n].device.address&&(r[t[n].device.address]=t[n].device);}var o=[];for(var s in r){r.hasOwnProperty(s)&&r[s]&&o.push(r[s]);}var i=this,u=0,cb=function cb(n,r){var s={};if(!n&&r&&(r.type="DY2",r.adr=o[u].address,s[o[u].address]=r),++u<o.length)i._getCurrentState(e,o[u],cb);else{for(var l=[],m=0;m<t.length;m++){if(t[m]&&t[m].device&&t[m].device.address){var d=s[t[m].device.address];if(d){var p=i.handleStateCreator(t[m].device,t[m].status,d);p&&("object"==_typeof(p)?(p.id=t[m].id,l.push(p)):l.push({id:t[m].id,status:p}));}}}a&&a(null,l);}};this._getCurrentState(e,o[0],cb);}else a&&a(null,[]);}else a&&a(new Error("device list in null"));},DM:{TYPE:"DY2",MAP:{blind:{command:[{type:"enum",name:"refresh state",ref:{value:"refresh"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"intermediate position",ref:{value:"interPos"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}},{type:"enum",name:"motor status",ref:{value:"motorStatus",options:["standby","running","sleeping","deeply_sleeping","error","re_set","pair_avaliable","adjustment_of_limit_setting","1st_up_limit_setting","2nd_down_limit_setting"]}},{type:"enum",name:"up limit",ref:{value:"upLimit",options:["set","not_set"]}},{type:"enum",name:"down limit",ref:{value:"downLimit",options:["set","not_set"]}},{type:"enum",name:"running status",ref:{value:"runningStatus",options:["stop","up","down","jog_up","jog_down","rotating_reminder","stop_@1st_up_limit","stop_@2nd_down_limit","stop_@3rd_intermediate_position"]}},{type:"enum",name:"hall status",ref:{value:"hallStatus",options:["normal","hall1_error","hall2_error","up_stop_error","down_stop_error","support_power_error_high","support_power_error_low"]}}]},shutter:{command:[{type:"enum",name:"refresh state",ref:{value:"refresh"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"position",ref:{value:"pos",extMeta:"0-100"}},{type:"enum",name:"motor status",ref:{value:"motorStatus",options:["standby","running","sleeping","deeply_sleeping","error","re_set","pair_avaliable","adjustment_of_limit_setting","1st_up_limit_setting","2nd_down_limit_setting"]}},{type:"enum",name:"up limit",ref:{value:"upLimit",options:["set","not_set"]}},{type:"enum",name:"down limit",ref:{value:"downLimit",options:["set","not_set"]}},{type:"enum",name:"running status",ref:{value:"runningStatus",options:["stop","up","down","jog_up","jog_down","rotating_reminder","stop_@1st_up_limit","stop_@2nd_down_limit","stop_@3rd_intermediate_position"]}},{type:"enum",name:"hall status",ref:{value:"hallStatus",options:["normal","hall1_error","hall2_error","up_stop_error","down_stop_error","support_power_error_high","support_power_error_low"]}}]},shutter2:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return[{type:this.TYPE,name:"Kaiser Nienhaus",subtypes:[{id:"Blind",data:"shutter"},{id:"Mercato",data:"shutter"},{id:"UP-Actuator",data:"shutter2"}]}];},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.DY2.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"shutter2":n={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};break;case"shutter":case"blind":n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100}}},states:{position:{min:0,max:100}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d",extMeta:"0-100"}},states:{position:{value:"position"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.DY2.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"shutter2":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};break;case"shutter":case"blind":t={type:"blind",commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}},states:{pos:{min:0,max:100,unit:"%"}}};}return t;}}},xnm.aio.gateway.systems.ZWAVE={executeCommandCreator:function executeCommandCreator(e,t,a,n){t&&t.address&&t.data?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("device command is empty")):n&&n(new Error("device json invalid"));},_executeCommand:function _executeCommand(e,t,a,n){var r=t.address,o=t.instance;o||(o=1);var s=this._buildData(e,t,a);if(s){var i={type:this.DM.TYPE,address:r+"."+o,devicetype:t.data,data:s};e._executeRequest("SendSC",i,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},_buildData:function _buildData(e,t,a){if(!a&&!a.value)return null;if(!t&&!t.data)return null;switch(a.value){case"on":case"off":case"toggle":return a.value;case"dimTo":case"toggleTo":case"setTo":return void 0===a.ext||null==a.ext?null:a.value+a.ext;default:return null;}},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"zwave"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.address)return null;var a=e.address,n=e.instance;return n||(n=1),a+"."+n!=t.adr?null:t.state;},DM:{TYPE:"ZWAVE",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},dimmer:{command:[{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"state",ref:{value:"state",ext:"%d",extMeta:"0-100"}}]},"HM6-HP":{command:[{type:"int",name:"temperature to",ref:{value:"setTo",ext:"%d",extMeta:"5.0-37.0",scale:"0.5"}}],status:[{type:"int",name:"current temperature",ref:{value:"temperature",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set temperature",ref:{value:"setpoint",ext:"%d",extMeta:"5.0-37.0"}},{type:"enum",name:"state",ref:{value:"state",options:["Cooling","Heating","Idle"]}},{type:"enum",name:"fan mode",ref:{value:"fanmode",options:["On Low","Auto Low"]}},{type:"enum",name:"fan state",ref:{value:"fanstate",options:["Running","Idle"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return null;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?e.instance?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter instance is invalid")):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?e.instance?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter instance is invalid")):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));}}},xnm.aio.gateway.systems.ZWAVE2={THERMO_MODES:["OFF","HEAT","COOL","AUTO","AUXILIARY_HEAT","RESUME","FAN_ONLY","FURNACE","DRY_AIR","MOIST","AUTO_CHANGEOVER","ENERGY_SAVE_HEAT","ENERGY_SAVE_COOL","AWAY",null,"FULL_POWER"],THERMO_OP_MODES:["IDLE","HEATING","COOLING","FAN_ONLY","PENDING_HEAT","PENDING_COOL","VENT_ECONOMIZER","AUX_HEATING","2ND_STAGE_HEATING","2ND_STAGE_COOLING","2ND_STAGE_AUX_HEAT","3RD_STAGE_AUX_HEAT"],THERMO_FAN_MODES:["AUTO_LOW","LOW","AUTO_HIGH","HIGH","AUTO_MEDIUM","MEDIUM","CIRCULATION","HUMIDITY","LEFT_RIGHT","UP_DOWN","QUIET","3RD_STAGE_AUX_HEAT"],ALARM_EVNETS:{1:{1:"Smoke",2:"Smoke",3:"Smoke Alarm Test",4:"Replacement",5:"Replacement End-of-life",6:"Alarm Silenced",7:"Maintenance",8:"Maintenance Dust"},2:{1:"CO",2:"CO",3:"CO Test",4:"Replacement",5:"Replacement End-of-life",6:"Alarm Silenced",7:"Maintenance"},3:{1:"CO2",2:"CO2",3:"CO Test",4:"Replacement",5:"Replacement End-of-life",6:"Alarm Silenced",7:"Maintenance"},4:{1:"Overheat",2:"Overheat",3:"Rapid Temperature Rise",4:"Rapid Temperature Rise",5:"Under Heat",6:"Under Heat",7:"Heat Alarm Test",8:"Replacement End-of-life",9:"Alarm Silenced",10:"Maintenance Dust",11:"Maintenance"},5:{1:"Water Leak",2:"Water Leak",3:"Water Level Dropped",4:"Water Level Dropped",5:"Replace Water Filter",6:"Water Flow Alarm",7:"Water Pressure Alarm"},6:{1:"Manual Lock",2:"Manual Unlock",3:"RF Lock",4:"RF Unlock",5:"Keypad Lock",6:"Keypad Unlock",7:"Manual Not Fully Locked",8:"RF Not Fully Locked",9:"Auto Lock Locked",10:"Auto Lock Not Fully Locked",11:"Lock Jammed",22:"Contact Opened",23:"Contact Closed"},7:{1:"Intrusion",2:"Intrusion",3:"Tampering",4:"Tampering",5:"Glass Breakage",6:"Glass Breakage",7:"Motion Detection",8:"Motion Detection",9:"Motion Detection"},8:{1:"Replace battery soon",2:"Replace battery now",3:"Charge battery soon",4:"Charge battery now"}},listDevices:function listDevices(e,t){e._executeRequest("ZWaveListDevices",null,{timeout:1e4},function(e,a){e?t&&t(e):t&&t(null,a);});},forcePollDevices:function forcePollDevices(e,t,a){if(t&&0!=t.length){var n={deviceIDs:t.join(",")};e._executeRequest("ZWaveForcePollDevices",n,null,function(e){a&&a(e);});}else a&&a();},executeCommandCreator:function executeCommandCreator(e,t,a,n){t&&t.address&&void 0!==t.instance&&null!=t.instance?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("device command is empty")):n&&n(new Error("device json invalid"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r&&r.address&&r.data){var o={type:this.DM.TYPE,address:r.address,data:r.data};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n||!n.address||!n.data)return null;var r={type:this.DM.TYPE,address:n.address,data:n.data,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!a&&!a.value)return null;if(!t||!t.address)return null;t.address;var n=t.instance;n||(n="0");var r=a.value.indexOf("@");if(-1==r)return null;var o=a.value.substr(0,r),s=a.value.substr(r+1);if(!s)return null;var i={address:s};switch(o){case"valueTo":case"setTo":if(void 0===a.ext||null==a.ext)return null;i.data=o+a.ext;break;case"setThermoMode":if(void 0===a.ext||null==a.ext)return null;var u=this.THERMO_MODES.indexOf(a.ext.toUpperCase());i.data=o+u;break;case"setThermoFanMode":if(void 0===a.ext||null==a.ext)return null;var l=null;if("off"==a.ext)l="Off";else{if(t&&t.dpts&&t.dpts[68]&&t.dpts[68].modes){var m=t.dpts[68].modes;for(var d in m){if(m[d]&&m[d].toLowerCase()==a.ext){l=d;break;}}}void 0===l&&null==l&&(l=this.THERMO_FAN_MODES.indexOf(a.ext.toUpperCase()));}i.data=o+l;break;default:i.data=o;}if("51"===s.split(".")[2]){if(o=o.replace("_dur",""),["whiteWarm","whiteCold","red","green","blue","rgb"].indexOf(o)>=0)if(Array.isArray(a.ext)){var p=a.ext[0].ext;"rgb"===o&&(p=String(p).replace("#","")),i.data=o+p+"_";var f=parseInt(a.ext[1].ext,10);f>0&&"minutes"===a.ext[2].ext&&(f+=127),i.data+=String(f);}else i.data=o+a.ext;}return i;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);if(!n)return null;if(/^window@[0-9]+\.[0-9]+\.113\.6\.eventName$/.test(t.value)){var r=t.value.replace("window@",""),o=n[r],s=r.replace(".eventName","").split("."),i=n[s[0]+"."+s[1]+".48.11"];return"true"===i||!0===i?"tilted":"Manual Lock"===o?"closed":"Contact Opened"===o||"Manual Unlock"===o?"open":null;}return n[t.value];},_handleState:function _handleState(e,t){if(!t.type||"zwave2"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.address)return null;if(e.address!=t.adr)return null;var a,n={};for(var r in t.state){var o=r.split("."),s=null;if(o.length>=3&&(s=o[2]),"67"==s){var i=t.state[r].split(":");i.length>=2&&(n["pending@"+r]=i[0]!=i[1],n["setpoint@"+r]=i[1]);}else if("64"==s)a=t.state[r],n[r]=this.THERMO_MODES[a]?this.THERMO_MODES[a].toLowerCase():null;else if("66"==s)a=t.state[r],n[r]=this.THERMO_OP_MODES[a]?this.THERMO_OP_MODES[a].toLowerCase():null;else if("68"==s){var u=null;if("off"==(a=t.state[r]))u="off";else{if(e&&e.dpts&&e.dpts[68]&&e.dpts[68].modes){var l=e.dpts[68].modes;u=l[a]?l[a].toLowerCase():null;}void 0!==u&&null!=u||(u=this.THERMO_FAN_MODES[a]?this.THERMO_FAN_MODES[a].toLowerCase():null);}n[r]=u;}else if("91"==s){var m=t.state[r];"press"==m?n[r]="shortPress":"release"!=m&&"hold"!=m||(n[r]="longPress");}else n[r]=t.state[r];}return n;},DM:{TYPE:"ZWAVE2",MAP:{},getGatewayDeviceType:function getGatewayDeviceType(){return[{type:this.TYPE,name:"Z-Wave"}];},getCommandStatusMap:function getCommandStatusMap(e){var _containsCommandName=function _containsCommandName(e,t){for(var a=t.length;a--;){if(t[a].name==e)return!0;}return!1;};if(!e||!e.address||void 0===e.instance||null==e.instance||!e.dpts)return null;var t,a,n,r,o,s,i=e.address+"."+e.instance,u={command:[],status:[],ipevt:[]},l={};for(var m in e.dpts){var d=i+"."+m,p=e.dpts[m];if(s=null,type=null,ext=null,p&&p.type)switch(p.type){case"SwitchBinary":u.command.push({type:"enum",name:"on",ref:{value:"on@"+d,value_t:"on"}}),u.command.push({type:"enum",name:"off",ref:{value:"off@"+d,value_t:"off"}}),u.command.push({type:"enum",name:"toggle",ref:{value:"toggle@"+d,value_t:"toggle"}}),(s=p.name)||(s="Switch"),s+=" state ("+i+"."+m+")",u.status.push({type:"enum",name:s,ref:{value:d,options:["on","off"]}}),u.ipevt.push({type:"enum",name:s,ref:{value:d,options:["on","off"]}});break;case"SwitchColor":if("51"===m)u.command.push({type:"rgb",name:"color rgb",ref:{value:"rgb@"+d,value_t:"rgb",ext:"%s"}}),u.status.push({type:"string",name:"color rgb",ref:{value:d,value_t:"rgb",ext:"%s"}});else for(var f=["whiteWarm","whiteCold","red","green","blue"],c=0;c<f.length;c++){if(m==="51."+c){var v=f[c];u.command.push({type:"int",name:v,ref:{value:v+"@"+d,value_t:v,ext:"%d",extMeta:"0-100"}}),u.status.push({type:"int",name:v,ref:{value:d,value_t:v,ext:"%d",extMeta:"0-100"}});}}break;case"SwitchMultilevel":u.command.push({type:"enum",name:"step up",ref:{value:"stepUp@"+d}}),u.command.push({type:"enum",name:"step down",ref:{value:"stepDown@"+d}});var y="value to",h=null;if(0==e.specificType||1==e.specificType||4==e.specificType){var w="",g="";_containsCommandName("on",u.command)&&(w=" (dim)",g="Dim"),u.command.push({type:"enum",name:"on"+w,ref:{value:"on@"+d,value_t:"on"+g}}),u.command.push({type:"enum",name:"off"+w,ref:{value:"off@"+d,value_t:"off"+g}}),u.command.push({type:"enum",name:"toggle"+w,ref:{value:"toggle@"+d,value_t:"toggle"+g}}),y="dim to",h="dimTo";}else 3!=e.specificType&&5!=e.specificType&&6!=e.specificType&&7!=e.specificType||(u.command.push({type:"enum",name:"up",ref:{value:"up@"+d,value_t:"up"}}),u.command.push({type:"enum",name:"down",ref:{value:"down@"+d,value_t:"down"}}),u.command.push({type:"enum",name:"stop",ref:{value:"stop@"+d,value_t:"stop"}}),y="move to",h="moveTo");type=p.valueType,type||(type="int"),"int"==type?ext="%d":ext="%f",u.command.push({type:type,name:y,ref:{value:"valueTo@"+d,value_t:h,ext:ext}}),(s=p.name)||(s="Level"),s+=" state ("+i+"."+m+")",u.status.push({type:type,name:s,ref:{value:d,ext:ext}}),u.ipevt.push({type:type,name:s,ref:{value:d,ext:ext}});break;case"SensorBinary":(s=p.name)||(s="Sensor Binary"),s+=" state ("+i+"."+m+")",u.status.push({type:"enum",name:s,ref:{value:d,options:["true","false"]}}),u.ipevt.push({type:"enum",name:s,ref:{value:d,options:["true","false"]}});break;case"SensorMultilevel":(s=p.name)||(s="Sensor"),s+=" state ("+i+"."+m+")",type=p.valueType,type||(type="float"),"float"==type?ext="%f":ext="%d",u.status.push({type:type,name:s,ref:{value:d,ext:ext,unit:p.unit}}),u.ipevt.push({type:type,name:s,ref:{value:d,ext:ext,unit:p.unit}});break;case"Meter":(s=p.name)?s+=" Meter":s="Meter",p.unit&&(s+=" "+p.unit),s+=" state ("+i+"."+m+")",type=p.valueType,type||(type="float"),"float"==type?ext="%f":ext="%d",u.status.push({type:type,name:s,ref:{value:d,ext:ext,unit:p.unit}}),u.ipevt.push({type:type,name:s,ref:{value:d,ext:ext,unit:p.unit}});break;case"Alarm":(s=p.name)?s+=" Alarm":s="Alarm",u.command.push({type:"enum",name:"reset "+s+"("+i+"."+m+")",ref:{value:"resetAlarm@"+d}}),u.status.push({type:"enum",name:s+" state ("+i+"."+m+")",ref:{value:d,options:["on","off"]}}),u.status.push({type:"int",name:s+" event id ("+i+"."+m+")",ref:{value:d+".event",ext:"%d"}}),l[i+"."+m]||(l[i+"."+m]={type:"enum",name:s+" event ("+i+"."+m+")",ref:{value:d+".eventName",options:[]}});break;case"Alarm.Event":if((s=p.name)||(s="Alarm Event"),s+=" state ("+i+"."+m+")",u.status.push({type:"enum",name:s,ref:{value:d,options:["true","false"]}}),u.ipevt.push({type:"enum",name:s,ref:{value:d,options:["true","false"]}}),(o=m.split(".")).length>=3){var _=i+"."+o[0]+"."+o[1];l[_]||(l[_]={type:"enum",name:s+" event ("+i+"."+m+")",ref:{value:d+".eventName",options:[]}}),l[_].ref.options.push(o[2]);}break;case"Battery":(s=p.name)||(s="Battery"),s+=" state ("+i+"."+m+")",u.status.push({type:"int",name:s,ref:{value:d,ext:"%d"}}),u.ipevt.push({type:"int",name:s,ref:{value:d,ext:"%d"}});break;case"ThermostatSetPoint":(s=p.name)||(s="Thermostat"),u.command.push({type:"enum",name:s+" up ("+i+"."+m+")",ref:{value:"up@"+d}}),u.command.push({type:"enum",name:s+" down ("+i+"."+m+")",ref:{value:"down@"+d}}),type=p.valueType,type&&"empty"!=type||(type="float"),"float"==type?ext="%f":ext="%d";var x="5.0-37.0";p.min&&p.max&&(x=p.min+"-"+p.max),u.command.push({type:type,name:s+" set to ("+i+"."+m+")",ref:{value:"setTo@"+d,ext:ext,extMeta:x,unit:p.unit,scale:"0.5"}}),u.status.push({type:"enum",name:s+" pending ("+i+"."+m+")",ref:{value:"pending@"+d,options:["true","false"]}}),s+=" setpoint ("+i+"."+m+")",u.status.push({type:type,name:s,ref:{value:"setpoint@"+d,ext:ext,extMeta:x,unit:p.unit}}),u.ipevt.push({type:type,name:s,ref:{value:"setpoint@"+d,ext:ext,extMeta:x,unit:p.unit}});break;case"ThermostatMode":if(u.command.push({type:"enum",name:"mode off",ref:{value:"thermoModeOff@"+d}}),u.command.push({type:"enum",name:"mode heat",ref:{value:"thermoModeHeat@"+d}}),u.command.push({type:"enum",name:"mode cool",ref:{value:"thermoModeCool@"+d}}),u.command.push({type:"enum",name:"mode auto",ref:{value:"thermoModeAuto@"+d}}),t={type:"enum",name:"set mode",ref:{value:"setThermoMode@"+d,ext:"%e",extMeta:[]}},a={type:"enum",name:"thermostat mode",ref:{value:d,options:[]}},n=[],r=[],p.modes)for(var b in p.modes){b=parseInt(b),(S=xnm.aio.gateway.systems.ZWAVE2.THERMO_MODES[b])&&(n.push(S.toLowerCase()),r.push(S.toLowerCase()));}else for(c=0;c<xnm.aio.gateway.systems.ZWAVE2.THERMO_MODES.length;c++){(S=xnm.aio.gateway.systems.ZWAVE2.THERMO_MODES[c])&&(n.push(S.toLowerCase()),r.push(S.toLowerCase()));}t.ref.extMeta=n,a.ref.options=r,u.command.push(t),u.status.push(a),u.ipevt.push(a);break;case"ThermostatOperatingState":var D={type:"enum",name:"thermostat operating mode",ref:{value:d,options:[]}};for(c=0;c<xnm.aio.gateway.systems.ZWAVE2.THERMO_OP_MODES.length;c++){var S;(S=xnm.aio.gateway.systems.ZWAVE2.THERMO_OP_MODES[c])&&D.ref.options.push(S.toLowerCase());}u.status.push(D),u.ipevt.push(D);break;case"ThermostatFanMode":if(t={type:"enum",name:"set fan mode",ref:{value:"setThermoFanMode@"+d,ext:"%e",extMeta:[]}},a={type:"enum",name:"thermostat fan mode",ref:{value:d,options:[]}},r=[],(n=[]).push("off"),r.push("off"),p.modes)for(b in p.modes){(S=p.modes[b])||(b=parseInt(b),S=xnm.aio.gateway.systems.ZWAVE2.THERMO_FAN_MODES[b]),S&&(n.push(S.toLowerCase()),r.push(S.toLowerCase()));}else for(c=0;c<xnm.aio.gateway.systems.ZWAVE2.THERMO_FAN_MODES.length;c++){(S=xnm.aio.gateway.systems.ZWAVE2.THERMO_FAN_MODES[c])&&(n.push(S.toLowerCase()),r.push(S.toLowerCase()));}t.ref.extMeta=n,a.ref.options=r,u.command.push(t),u.status.push(a),u.ipevt.push(a);break;case"ThermostatFanState":u.status.push({type:"enum",name:"thermostat fan state",ref:{value:d,options:["on","off"]}}),u.ipevt.push({type:"enum",name:"thermostat fan state",ref:{value:d,options:["on","off"]}});break;case"CentralScene":(s=p.name)||(s="Central Scene"),u.ipevt.push({type:"enum",name:s+" event ("+i+"."+m+")",ref:{value:d,options:["shortPress","longPress"]}});break;case"AlarmSensor":(s=p.name)?s+=" Alarm":s="Alarm Sensor",s+=" state ("+i+"."+m+")",u.status.push({type:"enum",name:s,ref:{value:d,options:["on","off"]}}),u.ipevt.push({type:"enum",name:s,ref:{value:d,options:["on","off"]}});break;case"DoorLock":u.command.push({type:"enum",name:"unlock",ref:{value:"unlock@"+d}}),u.command.push({type:"enum",name:"unlock with timeout",ref:{value:"unlock_with_timeout@"+d}}),u.command.push({type:"enum",name:"inside handle unlock",ref:{value:"inside_handle_unlock@"+d}}),u.command.push({type:"enum",name:"inside handle unlock with timeout",ref:{value:"inside_handle_unlock_with_timeout@"+d}}),u.command.push({type:"enum",name:"outside handle unlock",ref:{value:"outside_handle_unlock@"+d}}),u.command.push({type:"enum",name:"outside handle unlock with timeout",ref:{value:"outside_handle_unlock_with_timeout@"+d}}),u.command.push({type:"enum",name:"lock",ref:{value:"lock@"+d}}),u.status.push({type:"enum",name:"state ("+d+")",ref:{value:d+".mode",options:["unlock","unlock_with_timeout","inside_handle_unlock","inside_handle_unlock_with_timeout","outside_handle_unlock","outside_handle_unlock_with_timeout","lock"]}}),u.status.push({type:"enum",name:"operation mode ("+d+")",ref:{value:d+".op_mode",options:["constant","autolock"]}}),u.ipevt.push({type:"enum",name:"state ("+d+")",ref:{value:d+".mode",options:["unlock","unlock_with_timeout","inside_handle_unlock","inside_handle_unlock_with_timeout","outside_handle_unlock","outside_handle_unlock_with_timeout","lock"]}});}}for(var C in l){if(l[C]){var M=l[C],T=M.ref;if(T){var E=T.options;if(E&&!(E.length<=0)){var k=[];if(!((o=C.split(".")).length<4)){var A=xnm.aio.gateway.systems.ZWAVE2.ALARM_EVNETS[o[3]];if(A){for(c=0;c<E.length;c++){(s=A[E[c]])&&k.push(s);}if(k.length>0){M.ref.options=k;var O=JSON.parse(JSON.stringify(M));u.status.push(O);var R=JSON.parse(JSON.stringify(M));if(u.ipevt.push(R),"enum"===O.type&&Array.isArray(O.ref.options)){for(var I=["Manual Lock","Manual Unlock","Contact Opened","Contact Closed"],F=0,P=0;P<I.length;P++){var N=I[P];O.ref.options.indexOf(N)>=0&&F++;}F>=I.length&&u.status.push({type:"enum",name:"window",ref:{value:"window@"+O.ref.value,value_t:"window",options:["open","closed","tilted"]}});}}}}}}}}return u;},getIPevtMap:function getIPevtMap(e){var t=this.getCommandStatusMap(e);if(!t)return null;var a={ipevt:[]};return t.ipevt&&(a.ipevt=t.ipevt),a;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.instance?e.dpts?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter dpts is invalid")):a(new n(r.INVALID,"parameter instance is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.instance?e.dpts?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter dpts is invalid")):a(new n(r.INVALID,"parameter instance is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a,n){if(!e||!e.data)return null;if("v5"==a)return null;if(!e||!e.address||void 0===e.instance||null==e.instance||!e.dpts)return null;var r=e.address+"."+e.instance,o=null;for(var s in e.dpts){var i=r+"."+s,u=e.dpts[s];if(u&&u.type)switch(u.type){case"SwitchBinary":o={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on@"+i},off:{value:"off@"+i},toggle:{value:"toggle@"+i}},states:{state:{value:i}}}};break;case"SwitchMultilevel":0==e.specificType||1==e.specificType||4==e.specificType?o={type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}},details:{commands:{on:{value:"on@"+i},off:{value:"off@"+i},toggle:{value:"toggle@"+i},brightness:{value:"valueTo@"+i,ext:"%d"}},states:{brightness:{value:i}}}}:3!=e.specificType&&5!=e.specificType&&6!=e.specificType&&7!=e.specificType||(o={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100,unit:"%"}},details:{commands:{up:{value:"up@"+i},down:{value:"down@"+i},stop:{value:"stop@"+i},position:{value:"valueTo@"+i,ext:"%d"}},states:{position:{value:i}}}});}}return o;}}},xnm.aio.gateway.systems.KNX={searchKnxIpGateway:function searchKnxIpGateway(e,t){e._executeRequestV5_Post("SearchKnxIpGateways",null,{timeout:5e3},function(e,a){t&&t(e,a);});},getKnxIpGateways:function getKnxIpGateways(e,t){e._executeRequestV5_Post("GetKnxIpGateways",null,{timeout:2e3},function(e,a){t&&t(e,a);});},addKnxIpGateway:function addKnxIpGateway(e,t,a){e._executeRequestV5_Post("AddKnxIpGateway",{data:t},{timeout:2e3},function(e,t){a&&a(e,t);});},updateKnxIpGateway:function updateKnxIpGateway(e,t,a){e._executeRequestV5_Post("UptateKnxIpGateway",{data:t},{timeout:2e3},function(e,t){a&&a(e,t);});},deleteKnxIpGateway:function deleteKnxIpGateway(e,t,a){e._executeRequestV5_Post("DeleteKnxIpGateway",{data:t},{timeout:2e3},function(e,t){a&&a(e,t);});},getKnxDevices:function getKnxDevices(e,t){e._executeRequestV5_Post("GetKnxDevices",null,{timeout:2e3},function(e,a){t&&t(e,a);});},addKnxDevice:function addKnxDevice(e,t,a){e._executeRequestV5_Post("AddKnxDevice",{data:t},{timeout:2e3},function(e,t){a&&a(e,t);});},updateKnxDevice:function updateKnxDevice(e,t,a){e._executeRequestV5_Post("UptateKnxDevice",{data:t},{timeout:2e3},function(e,t){a&&a(e,t);});},deleteKnxDevice:function deleteKnxDevice(e,t,a){e._executeRequestV5_Post("DeleteKnxDevice",{data:t},{timeout:2e3},function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t&&t.did?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("device command is empty")):n&&n(new Error("device json invalid"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildParam(e,t,a);if(r){e._executeRequest("SendSC",r,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildParam(e,t,a);if(!n)return null;return n.XC_FNC="SendSC",n;},_buildParam:function _buildParam(e,t,a){var n=this._buildData(e,t,a);return n?{type:this.DM.TYPE,address:t.did,data:n}:null;},_buildData:function _buildData(e,t,a){if(!a&&!a.value)return null;var n=a.value;return void 0!==a.ext&&null!=a.ext&&(n+=a.ext),n;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"knx"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.did)return null;if(e.did!=t.adr)return null;var a={};for(var n in t.state){var r=t.state[n];for(var o in r){a[n+"@"+o]=r[o];}}return a;},DM:{TYPE:"KNX",MAP:{},getGatewayDeviceType:function getGatewayDeviceType(){var e={type:this.TYPE,name:"KNX",subtypes:[]};return e.subtypes.push({id:"Switch",data:"outlet"}),e.subtypes.push({id:"Dimmer",data:"lighting"}),e.subtypes.push({id:"Blind",data:"blind"}),e.subtypes.push({id:"Shutter",data:"shutter"}),e.subtypes.push({id:"Thermostat",data:"heater"}),e.subtypes.push({id:"General",data:"general"}),e;},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.data||!e.channels)return null;var t={command:[],status:[],ipevt:[]};for(var a in t.command.push({type:"enum",name:"refresh states",ref:{value:"refreshStates"}}),e.channels){var n=e.channels[a],r=n.name;r||(r="channel "+a);var o=!1;switch(a){case"switch":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"enum",name:"on",ref:{value:a+"@on"}}),t.command.push({type:"enum",name:"off",ref:{value:a+"@off"}}),(n.status&&n.status.type&&n.status.ga||n.event&&n.event.type&&n.event.ga)&&t.command.push({type:"enum",name:"toggle",ref:{value:a+"@toggle"}})),n&&n.status&&n.status.type&&n.status.ga&&(o=!0,t.status.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:["on","off"]}})),n&&n.event&&n.event.type&&n.event.ga&&(o||t.status.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:["on","off"]}}),t.ipevt.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:["on","off"]}}));break;case"step":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"enum",name:"step up",ref:{value:a+"@stepUp"}}),t.command.push({type:"enum",name:"step down",ref:{value:a+"@stepDown"}}));break;case"value":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"int",name:"dim to",ref:{value:a+"@dimTo",ext:"%d",extMeta:"0-100"}}),t.command.push({type:"enum",name:"dim up",ref:{value:a+"@dimUp"}}),t.command.push({type:"enum",name:"dim down",ref:{value:a+"@dimDown"}}),(n.status&&n.status.type&&n.status.ga||n.event&&n.event.type&&n.event.ga)&&(t.command.push({type:"int",name:"level increase",ref:{value:a+"@inc",ext:"%d",extMeta:"1-10"}}),t.command.push({type:"int",name:"level decrease",ref:{value:a+"@dec",ext:"%d",extMeta:"1-10"}}))),n&&n.status&&n.status.type&&n.status.ga&&(o=!0,t.status.push({type:"int",name:"level state",ref:{value:a+"@state",extMeta:"0-100"}})),n&&n.event&&n.event.type&&n.event.ga&&(o||t.status.push({type:"int",name:"level state",ref:{value:a+"@state",extMeta:"0-100"}}),t.ipevt.push({type:"int",name:"level state",ref:{value:a+"@state",extMeta:"0-100"}}));break;case"blind_step":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"enum",name:"step up",ref:{value:a+"@blindStepUp"}}),t.command.push({type:"enum",name:"step down",ref:{value:a+"@blindStepDown"}}));break;case"blind_move":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"enum",name:"move up",ref:{value:a+"@blindMoveUp"}}),t.command.push({type:"enum",name:"move down",ref:{value:a+"@blindMoveDown"}}));break;case"blind_stop":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&t.command.push({type:"enum",name:"stop",ref:{value:a+"@blindStop"}});break;case"blind_position":case"shutter_position":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"int",name:"move to",ref:{value:a+"@moveTo",ext:"%d",extMeta:"0-100"}}),t.command.push({type:"enum",name:"position up",ref:{value:a+"@moveUp"}}),t.command.push({type:"enum",name:"position down",ref:{value:a+"@moveDown"}}),(n.status&&n.status.type&&n.status.ga||n.event&&n.event.type&&n.event.ga)&&(t.command.push({type:"int",name:"position increase",ref:{value:a+"@inc",ext:"%d",extMeta:"1-10"}}),t.command.push({type:"int",name:"position decrease",ref:{value:a+"@dec",ext:"%d",extMeta:"1-10"}}))),n&&n.status&&n.status.type&&n.status.ga&&(o=!0,t.status.push({type:"int",name:"position state",ref:{value:a+"@state",extMeta:"0-100"}})),n&&n.event&&n.event.type&&n.event.ga&&(o||t.status.push({type:"int",name:"position state",ref:{value:a+"@state",extMeta:"0-100"}}),t.ipevt.push({type:"int",name:"position state",ref:{value:a+"@state",extMeta:"0-100"}}));break;case"lamella_position":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&("DPST-5-3"==n.actuator.type?t.command.push({type:"int",name:"lamella to",ref:{value:a+"@lamellaTo",ext:"%d",extMeta:"0-360"}}):t.command.push({type:"int",name:"lamella to",ref:{value:a+"@lamellaTo",ext:"%d",extMeta:"0-100"}}),t.command.push({type:"enum",name:"lamella up",ref:{value:a+"@lamellaUp"}}),t.command.push({type:"enum",name:"lamella down",ref:{value:a+"@lamellaDown"}}),(n.status&&n.status.type&&n.status.ga||n.event&&n.event.type&&n.event.ga)&&(t.command.push({type:"int",name:"lamella increase",ref:{value:a+"@incL",ext:"%d",extMeta:"1-10"}}),t.command.push({type:"int",name:"lamella decrease",ref:{value:a+"@decL",ext:"%d",extMeta:"1-10"}}))),n&&n.status&&n.status.type&&n.status.ga&&(o=!0,"DPST-5-3"==n.status.type?t.status.push({type:"int",name:"lamella state",ref:{value:a+"@state",extMeta:"0-360"}}):t.status.push({type:"int",name:"lamella state",ref:{value:a+"@state",extMeta:"0-100"}})),n&&n.event&&n.event.type&&n.event.ga&&("DPST-5-3"==n.event.type?(o||t.status.push({type:"int",name:"lamella state",ref:{value:a+"@state",extMeta:"0-360"}}),t.ipevt.push({type:"int",name:"lamella state",ref:{value:a+"@state",extMeta:"0-360"}})):(o||t.status.push({type:"int",name:"lamella state",ref:{value:a+"@state",extMeta:"0-100"}}),t.ipevt.push({type:"int",name:"lamella state",ref:{value:a+"@state",extMeta:"0-100"}})));break;case"shutter_step":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"enum",name:"step up",ref:{value:a+"@shutterStepUp"}}),t.command.push({type:"enum",name:"step down",ref:{value:a+"@shutterStepDown"}}));break;case"shutter_move":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"enum",name:"move up",ref:{value:a+"@shutterMoveUp"}}),t.command.push({type:"enum",name:"move down",ref:{value:a+"@shutterMoveDown"}}));break;case"shutter_stop":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&t.command.push({type:"enum",name:"stop",ref:{value:a+"@shutterStop"}});break;case"setpoint_basic":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"float",name:"basic setpoint to",ref:{value:a+"@tempTo",ext:"%f",extMeta:"3.0-40.0",scale:"0.5"}}),(n.status&&n.status.type&&n.status.ga||n.event&&n.event.type&&n.event.ga)&&(t.command.push({type:"float",name:"basic setpoint up",ref:{value:a+"@tempUp",ext:"%f",extMeta:"0.5-10.0",scale:"0.5"}}),t.command.push({type:"float",name:"basic setpoint down",ref:{value:a+"@tempDown",ext:"%f",extMeta:"0.5-10.0",scale:"0.5"}}))),n&&n.status&&n.status.type&&n.status.ga&&(o=!0,t.status.push({type:"float",name:"basic setpoint state",ref:{value:a+"@state"}})),n&&n.event&&n.event.type&&n.event.ga&&(o||t.status.push({type:"float",name:"basic setpoint state",ref:{value:a+"@state"}}),t.ipevt.push({type:"float",name:"basic setpoint state",ref:{value:a+"@state"}}));break;case"setpoint_shift":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&(t.command.push({type:"int",name:"setpoint shift to",ref:{value:a+"@tempShiftTo",ext:"%d",extMeta:"-128-127"}}),(n.status&&n.status.type&&n.status.ga||n.event&&n.event.type&&n.event.ga)&&(t.command.push({type:"int",name:"setpoint shift up",ref:{value:a+"@tempShiftUp",ext:"%d"}}),t.command.push({type:"int",name:"setpoint shift down",ref:{value:a+"@tempShiftDown",ext:"%d"}}))),n&&n.status&&n.status.type&&n.status.ga&&(o=!0,t.status.push({type:"int",name:"setpoint shift state",ref:{value:a+"@state",ext:"%d",extMeta:"-128-127"}})),n&&n.event&&n.event.type&&n.event.ga&&(o||t.status.push({type:"int",name:"setpoint shift state",ref:{value:a+"@state",ext:"%d",extMeta:"-128-127"}}),t.ipevt.push({type:"int",name:"setpoint shift state",ref:{value:a+"@state",ext:"%d",extMeta:"-128-127"}}));break;case"setpoint_temp":n&&n.status&&n.status.type&&n.status.ga&&(o=!0,t.status.push({type:"float",name:"setpoint temperature",ref:{value:a+"@state"}})),n&&n.event&&n.event.type&&n.event.ga&&(o||t.status.push({type:"float",name:"setpoint temperature",ref:{value:a+"@state"}}),t.ipevt.push({type:"float",name:"setpoint temperature",ref:{value:a+"@state"}}));break;case"current_temp":n&&n.status&&n.status.type&&n.status.ga&&(o=!0,t.status.push({type:"float",name:"current temperature",ref:{value:a+"@state"}})),n&&n.event&&n.event.type&&n.event.ga&&(o||t.status.push({type:"float",name:"current temperature",ref:{value:a+"@state"}}),t.ipevt.push({type:"float",name:"current temperature",ref:{value:a+"@state"}}));break;case"mode":n&&n.actuator&&n.actuator.type&&n.actuator.ga&&("DPST-20-102"==n.actuator.type?(t.command.push({type:"enum",name:"auto",ref:{value:a+"@auto"}}),t.command.push({type:"enum",name:"comfort",ref:{value:a+"@comfort"}}),t.command.push({type:"enum",name:"standby",ref:{value:a+"@standby"}}),t.command.push({type:"enum",name:"economy",ref:{value:a+"@economy"}}),t.command.push({type:"enum",name:"protection",ref:{value:a+"@protection"}})):t.command.push({type:"int",name:"set mode",ref:{value:a+"@setValue",ext:"%d",extMeta:"0-255"}})),n&&n.status&&n.status.type&&n.status.ga&&(o=!0,"DPST-20-102"==n.actuator.type&&t.status.push({type:"enum",name:"mode state",ref:{value:a+"@state",options:["auto","comfort","standby","economy","protection"]}}),t.status.push({type:"int",name:"mode value",ref:{value:a+"@value",ext:"%d",extMeta:"0-255"}})),n&&n.event&&n.event.type&&n.event.ga&&("DPST-20-102"==n.actuator.type?(o||(t.status.push({type:"enum",name:"mode state",ref:{value:a+"@state",options:["auto","comfort","standby","economy","protection"]}}),t.status.push({type:"int",name:"mode value",ref:{value:a+"@value",ext:"%d",extMeta:"0-255"}})),t.ipevt.push({type:"enum",name:"mode state",ref:{value:a+"@state",options:["auto","comfort","standby","economy","protection"]}}),t.ipevt.push({type:"int",name:"mode value",ref:{value:a+"@value",ext:"%d",extMeta:"0-255"}})):(o||t.status.push({type:"int",name:"mode value",ref:{value:a+"@value",ext:"%d",extMeta:"0-255"}}),t.ipevt.push({type:"int",name:"mode value",ref:{value:a+"@value",ext:"%d",extMeta:"0-255"}})));break;default:if(n&&n.actuator&&n.actuator.type&&n.actuator.ga)switch(this._parseDatapointPrefix(n.actuator.type)){case"DPT-1":case"DPST-1":switch(n.actuator.type){case"DPST-1-2":t.command.push({type:"enum",name:r+" true",ref:{value:a+"@true"}}),t.command.push({type:"enum",name:r+" false",ref:{value:a+"@false"}});break;case"DPST-1-3":t.command.push({type:"enum",name:r+" enable",ref:{value:a+"@enable"}}),t.command.push({type:"enum",name:r+" disable",ref:{value:a+"@disable"}});break;case"DPST-1-4":t.command.push({type:"enum",name:r+" ramp",ref:{value:a+"@ramp"}}),t.command.push({type:"enum",name:r+" no_ramp",ref:{value:a+"@no_ramp"}});break;case"DPST-1-5":t.command.push({type:"enum",name:r+" alarm",ref:{value:a+"@alarm"}}),t.command.push({type:"enum",name:r+" no_alarm",ref:{value:a+"@no_alarm"}});break;case"DPST-1-6":t.command.push({type:"enum",name:r+" high",ref:{value:a+"@high"}}),t.command.push({type:"enum",name:r+" low",ref:{value:a+"@low"}});break;case"DPST-1-7":t.command.push({type:"enum",name:r+" increase",ref:{value:a+"@increase"}}),t.command.push({type:"enum",name:r+" decrease",ref:{value:a+"@decrease"}});break;case"DPST-1-8":t.command.push({type:"enum",name:r+" up",ref:{value:a+"@up"}}),t.command.push({type:"enum",name:r+" down",ref:{value:a+"@down"}});break;case"DPST-1-9":t.command.push({type:"enum",name:r+" open",ref:{value:a+"@open"}}),t.command.push({type:"enum",name:r+" close",ref:{value:a+"@close"}});break;case"DPST-1-10":t.command.push({type:"enum",name:r+" start",ref:{value:a+"@start"}}),t.command.push({type:"enum",name:r+" stop",ref:{value:a+"@stop"}});break;case"DPST-1-11":t.command.push({type:"enum",name:r+" active",ref:{value:a+"@active"}}),t.command.push({type:"enum",name:r+" inactive",ref:{value:a+"@inactive"}});break;case"DPST-1-12":t.command.push({type:"enum",name:r+" inverted",ref:{value:a+"@inverted"}}),t.command.push({type:"enum",name:r+" not_inverted",ref:{value:a+"@not_inverted"}});break;default:t.command.push({type:"enum",name:r+" on",ref:{value:a+"@on"}}),t.command.push({type:"enum",name:r+" off",ref:{value:a+"@off"}}),(n.status&&n.status.type&&n.status.ga&&n.status.type==n.actuator.type||n.event&&n.event.type&&n.event.ga&&n.event.type==n.actuator.type)&&t.command.push({type:"enum",name:r+" toggle",ref:{value:a+"@toggle"}});}t.command.push({type:"int",name:r+" set value",ref:{value:a+"@setValue",ext:"%d",extMeta:"0-1"}});break;case"DPT-2":case"DPST-2":var s=[];switch(n.actuator.type){case"DPST-2-2":s=["true","false"];break;case"DPST-2-3":s=["enable","disable"];break;case"DPST-2-4":s=["ramp","no_ramp"];break;case"DPST-2-5":s=["alarm","no_alarm"];break;case"DPST-2-6":s=["high","low"];break;case"DPST-2-7":s=["increase","decrease"];break;case"DPST-2-8":s=["up","down"];break;case"DPST-2-9":s=["open","close"];break;case"DPST-2-10":s=["start","stop"];break;case"DPST-2-11":s=["active","inactive"];break;case"DPST-2-12":s=["inverted","not_inverted"];break;default:s=["on","off"];}t.command.push({type:"int",name:r+" set value",ref:{value:a+"@setValue",ext:"%d",extMeta:"0-3"}}),t.command.push({type:"enum",name:r+" prio "+s[0],ref:{value:a+"@prio."+s[0]}}),t.command.push({type:"enum",name:r+" no.prio "+s[0],ref:{value:a+"@no_prio."+s[0]}}),t.command.push({type:"enum",name:r+" prio "+s[1],ref:{value:a+"@prio."+s[1]}}),t.command.push({type:"enum",name:r+" no.prio "+s[1],ref:{value:a+"@no_prio."+s[1]}});break;case"DPT-3":case"DPST-3":t.command.push({type:"enum",name:r+" step up",ref:{value:a+"@stepUp",ext:"%e",extMeta:[1,3,6,12,25,50,100]}}),t.command.push({type:"enum",name:r+" step down",ref:{value:a+"@stepDown",ext:"%e",extMeta:[1,3,6,12,25,50,100]}}),t.command.push({type:"int",name:r+" set value",ref:{value:a+"@setValue",ext:"%d",extMeta:"0-15"}});break;case"DPT-5":case"DPST-5":switch(n.actuator.type){case"DPST-5-1":u="0-100";break;case"DPST-5-3":u="0-360";break;case"DPST-5-6":u="0-254";break;default:u="0-255";}t.command.push({type:"int",name:r+" set value",ref:{value:a+"@setValue",ext:"%d",extMeta:u}}),t.command.push({type:"enum",name:r+" up",ref:{value:a+"@up"}}),t.command.push({type:"enum",name:r+" down",ref:{value:a+"@down"}}),(n.status&&n.status.type&&n.status.ga&&n.status.type==n.actuator.type||n.event&&n.event.type&&n.event.ga&&n.event.type==n.actuator.type)&&(t.command.push({type:"int",name:r+" increase",ref:{value:a+"@inc",ext:"%d",extMeta:u}}),t.command.push({type:"int",name:r+" decrease",ref:{value:a+"@dec",ext:"%d",extMeta:u}}));break;case"DPT-6":case"DPST-6":t.command.push({type:"int",name:r+" set value",ref:{value:a+"@setValue",ext:"%d",extMeta:"-128-127"}}),t.command.push({type:"enum",name:r+" up",ref:{value:a+"@up"}}),t.command.push({type:"enum",name:r+" down",ref:{value:a+"@down"}}),(n.status&&n.status.type&&n.status.ga&&n.status.type==n.actuator.type||n.event&&n.event.type&&n.event.ga&&n.event.type==n.actuator.type)&&(t.command.push({type:"int",name:r+" increase",ref:{value:a+"@inc",ext:"%d",extMeta:"0-127"}}),t.command.push({type:"int",name:r+" decrease",ref:{value:a+"@dec",ext:"%d",extMeta:"0-127"}}));break;case"DPT-9":case"DPST-9":switch(n.actuator.type){case"DPST-9-4":u="0-670433.28";break;case"DPST-9-1":u="-273-670760";break;default:u="-671088.64-670760.96";}t.command.push({type:"float",name:r+" set value",ref:{value:a+"@setValue",ext:"%f",extMeta:u,scale:"0.01"}}),(n.status&&n.status.type&&n.status.ga&&n.status.type==n.actuator.type||n.event&&n.event.type&&n.event.ga&&n.event.type==n.actuator.type)&&(t.command.push({type:"float",name:r+" increase",ref:{value:a+"@inc",ext:"%f",scale:"0.01"}}),t.command.push({type:"float",name:r+" decrease",ref:{value:a+"@dec",ext:"%f",scale:"0.01"}}));break;case"DPT-14":case"DPST-14":t.command.push({type:"float",name:r+" set value",ref:{value:a+"@setValue",ext:"%f",scale:"0.01"}}),(n.status&&n.status.type&&n.status.ga&&n.status.type==n.actuator.type||n.event&&n.event.type&&n.event.ga&&n.event.type==n.actuator.type)&&(t.command.push({type:"float",name:r+" increase",ref:{value:a+"@inc",ext:"%f",scale:"0.01"}}),t.command.push({type:"float",name:r+" decrease",ref:{value:a+"@dec",ext:"%f",scale:"0.01"}}));break;case"DPT-20":case"DPST-20":if("DPST-20-102"===n.actuator.type)t.command.push({type:"enum",name:r+" auto",ref:{value:a+"@auto"}}),t.command.push({type:"enum",name:r+" comfort",ref:{value:a+"@comfort"}}),t.command.push({type:"enum",name:r+" standby",ref:{value:a+"@standby"}}),t.command.push({type:"enum",name:r+" economy",ref:{value:a+"@economy"}}),t.command.push({type:"enum",name:r+" protection",ref:{value:a+"@protection"}}),t.command.push({type:"int",name:r+" set value",ref:{value:a+"@setValue",ext:"%f",extMeta:"0-4"}}),(n.status&&n.status.type&&n.status.ga&&n.status.type==n.actuator.type||n.event&&n.event.type&&n.event.ga&&n.event.type==n.actuator.type)&&(t.command.push({type:"int",name:r+" increase",ref:{value:a+"@inc",ext:"%d",extMeta:"0-4"}}),t.command.push({type:"int",name:r+" decrease",ref:{value:a+"@dec",ext:"%d",extMeta:"0-4"}}));else t.command.push({type:"int",name:r+" set value",ref:{value:a+"@setValue",ext:"%f",extMeta:"0-255"}}),(n.status&&n.status.type&&n.status.ga&&n.status.type==n.actuator.type||n.event&&n.event.type&&n.event.ga&&n.event.type==n.actuator.type)&&(t.command.push({type:"int",name:r+" increase",ref:{value:a+"@inc",ext:"%d",extMeta:"0-255"}}),t.command.push({type:"int",name:r+" decrease",ref:{value:a+"@dec",ext:"%d",extMeta:"0-255"}}));}if(n&&n.status&&n.status.type&&n.status.ga||n&&n.event&&n.event.type&&n.event.ga){l=n.status&&n.status.type?n.status.type:n.event.type;var i=null,u=null;switch(this._parseDatapointPrefix(l)){case"DPT-1":case"DPST-1":switch(l){case"DPST-1-2":i=["true","false"];break;case"DPST-1-3":i=["enable","disable"];break;case"DPST-1-4":i=["ramp","no_ramp"];break;case"DPST-1-5":i=["alarm","no_alarm"];break;case"DPST-1-6":i=["high","low"];break;case"DPST-1-7":i=["increase","decrease"];break;case"DPST-1-8":i=["up","down"];break;case"DPST-1-9":i=["open","close"];break;case"DPST-1-10":i=["start","stop"];break;case"DPST-1-11":i=["active","inactive"];break;case"DPST-1-12":i=["inverted","not_inverted"];break;case"DPST-1-13":i=["cyclically","start/stop"];break;case"DPST-1-14":i=["calculated","fixed"];break;case"DPST-1-15":i=["reset command","no action"];break;case"DPST-1-16":i=["acknowledge command","no action"];break;case"DPST-1-18":i=["occupied","not occupied"];break;case"DPST-1-19":i=["open","closed"];break;case"DPST-1-21":i=["logical function AND","logical function OR"];break;case"DPST-1-22":i=["scene B","scene A"];break;case"DPST-1-23":i=["move Up/Down +StepStop mode (blind)","move Up/Down mode (shutter)"];break;default:i=["on","off"];}t.status.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:i}}),t.status.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-1"}});break;case"DPT-2":case"DPST-2":switch(l){case"DPST-2-2":i=["true","false"];break;case"DPST-2-3":i=["enable","disable"];break;case"DPST-2-4":i=["ramp","no_ramp"];break;case"DPST-2-5":i=["alarm","no_alarm"];break;case"DPST-2-6":i=["high","low"];break;case"DPST-2-7":i=["increase","decrease"];break;case"DPST-2-8":i=["up","down"];break;case"DPST-2-9":i=["open","close"];break;case"DPST-2-10":i=["start","stop"];break;case"DPST-2-11":i=["active","inactive"];break;case"DPST-2-12":i=["inverted","not_inverted"];break;default:i=["on","off"];}s=["piro."+i[0],"no_piro."+i[0],"piro."+i[1],"no_piro."+i[1]];t.status.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:s}}),t.status.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-3"}});break;case"DPT-5":case"DPST-5":switch(l){case"DPST-5-1":i="0-100";break;case"DPST-5-3":i="0-360";break;case"DPST-5-6":i="0-254";break;default:i="0-255";}t.status.push({type:"int",name:r+" state",ref:{value:a+"@state",extMeta:i}});break;case"DPT-6":case"DPST-6":t.status.push({type:"int",name:r+" state",ref:{value:a+"@state",extMeta:"-128-127"}});break;case"DPT-9":case"DPST-9":switch(l){case"DPST-9-1":u="-273-670760";break;case"DPST-9-4":u="0-670433.28";break;default:u="-670760-670760";}t.status.push({type:"float",name:r+" state",ref:{value:a+"@state",extMeta:u}});break;case"DPT-14":case"DPST-14":t.status.push({type:"float",name:r+" state",ref:{value:a+"@state"}});break;case"DPT-20":case"DPST-20":if("DPST-20-102"===l)t.status.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:["auto","comfort","standby","economy","protection","unknow"]}}),t.status.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-255"}});else t.status.push({type:"int",name:r+" state",ref:{value:a+"@state",extMeta:"0-255"}}),t.status.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-255"}});}}if(n&&n.event&&n.event.type&&n.event.ga){var l=n.event.type;switch(this._parseDatapointPrefix(l)){case"DPT-1":case"DPST-1":switch(l){case"DPST-1-2":i=["true","false"];break;case"DPST-1-3":i=["enable","disable"];break;case"DPST-1-4":i=["ramp","no_ramp"];break;case"DPST-1-5":i=["alarm","no_alarm"];break;case"DPST-1-6":i=["high","low"];break;case"DPST-1-7":i=["increase","decrease"];break;case"DPST-1-8":i=["up","down"];break;case"DPST-1-9":i=["open","close"];break;case"DPST-1-10":i=["start","stop"];break;case"DPST-1-11":i=["active","inactive"];break;case"DPST-1-12":i=["inverted","not_inverted"];break;case"DPST-1-13":i=["cyclically","start/stop"];break;case"DPST-1-14":i=["calculated","fixed"];break;case"DPST-1-15":i=["reset command","no action"];break;case"DPST-1-16":i=["acknowledge command","no action"];break;case"DPST-1-18":i=["occupied","not occupied"];break;case"DPST-1-19":i=["open","closed"];break;case"DPST-1-21":i=["logical function AND","logical function OR"];break;case"DPST-1-22":i=["scene B","scene A"];break;case"DPST-1-23":i=["move Up/Down +StepStop mode (blind)","move Up/Down mode (shutter)"];break;default:i=["on","off"];}t.ipevt.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:i}}),t.ipevt.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-1"}});break;case"DPT-2":case"DPST-2":switch(l){case"DPST-2-2":i=["true","false"];break;case"DPST-2-3":i=["enable","disable"];break;case"DPST-2-4":i=["ramp","no_ramp"];break;case"DPST-2-5":i=["alarm","no_alarm"];break;case"DPST-2-6":i=["high","low"];break;case"DPST-2-7":i=["increase","decrease"];break;case"DPST-2-8":i=["up","down"];break;case"DPST-2-9":i=["open","close"];break;case"DPST-2-10":i=["start","stop"];break;case"DPST-2-11":i=["active","inactive"];break;case"DPST-2-12":i=["inverted","not_inverted"];break;default:i=["on","off"];}s=["piro."+i[0],"no_piro."+i[0],"piro."+i[1],"no_piro."+i[1]];t.ipevt.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:s}}),t.ipevt.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-3"}});break;case"DPT-5":case"DPST-5":switch(l){case"DPST-5-1":i="0-100";break;case"DPST-5-3":i="0-360";break;case"DPST-5-6":i="0-254";break;default:i="0-255";}t.ipevt.push({type:"int",name:r+" state",ref:{value:a+"@state",extMeta:i}});break;case"DPT-6":case"DPST-6":t.ipevt.push({type:"int",name:r+" state",ref:{value:a+"@state",extMeta:"-128-127"}});break;case"DPT-9":case"DPST-9":switch(n.event.type){case"DPST-9-1":u="-273-670760";break;case"DPST-9-4":u="0-670433.28";break;default:u="-671088.64-670760.96";}t.ipevt.push({type:"float",name:r+" state",ref:{value:a+"@state",extMeta:u}});break;case"DPT-14":case"DPST-14":t.ipevt.push({type:"float",name:r+" state",ref:{value:a+"@state"}});break;case"DPT-20":case"DPST-20":if("DPST-20-102"===l)t.ipevt.push({type:"enum",name:r+" state",ref:{value:a+"@state",options:["auto","comfort","standby","economy","protection","unknow"]}}),t.ipevt.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-255"}});else t.ipevt.push({type:"int",name:r+" state",ref:{value:a+"@state",extMeta:"0-255"}}),t.ipevt.push({type:"int",name:r+" value",ref:{value:a+"@raw",extMeta:"0-255"}});}}}}return t;},getIPevtMap:function getIPevtMap(e){var t=this.getCommandStatusMap(e);if(!t)return null;var a={ipevt:[]};return t.ipevt&&(a.ipevt=t.ipevt),a;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(e.data){if(e.channels){var o=JSON.parse(JSON.stringify(e));a&&a(null,o);}else a&&a(new n(r.INVALID,"parameter channels is invalid"));}else a&&a(new n(r.INVALID,"parameter data is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(e.data){if(e.channels){var o=JSON.parse(JSON.stringify(e));a&&a(null,o);}else a&&a(new n(r.INVALID,"parameter channels is invalid"));}else a&&a(new n(r.INVALID,"parameter data is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},_parseDatapointPrefix:function _parseDatapointPrefix(e){if("DPT"==e.substr(0,3))return e;var t=e.lastIndexOf("-");return e.substr(0,t);},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return null;var n={type:null,commands:{},states:{},details:{commands:{},states:{}}};switch(e.data){case"outlet":n.type="switch";break;case"lighting":n.type="dimmer";break;case"shutter":case"blind":n.type="blind";}if(!n.type)return null;for(var r in e.channels){var o=e.channels[r],s=o.name;s||(s="channel "+r);var i=!1;switch(r){case"switch":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.on={},n.commands.off={},n.details.commands.on={value:r+"@on"},n.details.commands.off={value:r+"@off"},(o.status&&o.status.type&&o.status.ga||o.event&&o.event.type&&o.event.ga)&&(n.commands.toggle={},n.details.commands.toggle={value:r+"@toggle"})),o&&o.status&&o.status.type&&o.status.ga&&(i=!0,n.states.state={values:["on","off"]},n.details.states.state={value:r+"@state"}),o&&o.event&&o.event.type&&o.event.ga&&(i||(n.states.state={values:["on","off"]},n.details.states.state={value:r+"@state"}));break;case"step":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.up={},n.commands.down={},n.details.commands.up={value:r+"@stepUp"},n.details.commands.down={value:r+"@stepDown"});break;case"value":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.brightness={value:{type:"INT",min:0,max:100,step:1}},n.details.commands.brightness={value:r+"@dimTo",ext:"%d",extMeta:"0-100"}),o&&o.status&&o.status.type&&o.status.ga&&(i=!0,n.states.brightness={min:0,max:100,unit:"%"},n.details.states.brightness={value:r+"@state",extMeta:"0-100"}),o&&o.event&&o.event.type&&o.event.ga&&(i||(n.states.brightness={min:0,max:100,unit:"%"},n.details.states.brightness={value:r+"@state",extMeta:"0-100"}));break;case"blind_move":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.up={},n.commands.down={},n.details.commands.up={value:r+"@blindMoveUp"},n.details.commands.down={value:r+"@blindMoveDown"});break;case"blind_stop":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.stop={},n.details.commands.stop={value:r+"@blindStop"});break;case"blind_position":case"shutter_position":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.position={value:{type:"INT",min:0,max:100,step:1}},n.details.commands.position={value:r+"@moveTo",ext:"%d",extMeta:"0-100"}),o&&o.status&&o.status.type&&o.status.ga&&(i=!0,n.states.position={min:0,max:100},n.details.states.position={value:r+"@state"}),o&&o.event&&o.event.type&&o.event.ga&&(i||(n.states.position={min:0,max:100},n.details.states.position={value:r+"@state"}));break;case"lamella_position":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.rotation={value:{type:"INT",min:0,max:100,step:1}},n.details.commands.rotation={value:r+"@lamellaTo",ext:"%d",extMeta:"0-100"}),o&&o.status&&o.status.type&&o.status.ga&&(i=!0,n.states.rotation={min:0,max:100},n.details.states.rotation={value:r+"@state"}),o&&o.event&&o.event.type&&o.event.ga&&(i||(n.states.rotation={min:0,max:100},n.details.states.rotation={value:r+"@state"}));break;case"shutter_move":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.up={},n.commands.down={},n.details.commands.up={value:r+"@shutterMoveUp"},n.details.commands.down={value:r+"@shutterMoveDown"});break;case"shutter_stop":o&&o.actuator&&o.actuator.type&&o.actuator.ga&&(n.commands.stop={},n.details.commands.stop={value:r+"@shutterStop"});}}return n;}}},xnm.aio.gateway.systems.ZIGBEE={listDevices:function listDevices(e,t){var a=this;e._executeRequest("ListZigbeeDevices",null,{timeout:5e3},function(e,n){if(e)t&&t(e);else{var r=a._resolveDevice(n);t&&t(null,r);}});},delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,address:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){var n={type:this.DM.TYPE},r=this;e._executeRequest("LearnSC",n,{timeout:65e3},function(e,t){if(e)a&&a(e);else{var n=r._resolveDevice(t);a&&a(null,n);}});},_resolveDevice:function _resolveDevice(e){if(!e||0==e.length)return[];for(var t={},a=e.length;a--;){var n=e[a];if(n&&n.ieeeAdr){var r=t[n.ieeeAdr];r||(r={type:"ZIGBEE",address:n.ieeeAdr,endpoints:[]},t[n.ieeeAdr]=r),r.endpoints.push({endpointID:n.endpointID,profileID:n.profileID,deviceID:n.deviceID});}}var o=[];for(var s in t){o.push(t[s]);}return o;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,null,function(e){n&&n(e);});}else n&&n(new Error("device format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(void 0===n||null==n)return null;if(!(t&&t.address&&t.endpoints&&t.endpoints[0]&&t.endpoints[0].endpointID))return null;for(var r=null,o=0;o<t.endpoints.length;o++){var s=t.endpoints[o];if("C05E"==s.profileID||"0104"==s.profileID){r=s;break;}}if(!r)return null;var i={type:"ZIGBEE",address:t.address+":"+r.endpointID,data:n,XC_FNC:"SendSC"};return i;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;switch(a.value){case"on":case"off":case"toggle":case"white":return a.value;case"dimTo":case"setRGB":case"setColorTemp":return void 0===a.ext||null==a.ext?null:a.value+a.ext;default:return null;}},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state)return null;if(!e.type||"ZIGBEE"!=e.type||e.type.toLowerCase()!=t.type.toLowerCase())return null;if(!e.address)return null;var a=t.adr.split(":");return e.address.toLowerCase()!=a[0].toLowerCase()?null:t.state;},DM:{TYPE:"ZIGBEE",MAP:{C05E:{"0010":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}}]},"0100":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"2000-7000",scale:100,unit:"K"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}]},"0200":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"rgb",name:"rgb",ref:{value:"rgb",ext:"%s"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"0210":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"2000-7000",scale:100,unit:"K"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}},{type:"rgb",name:"rgb",ref:{value:"rgb",ext:"%s"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}]},"0220":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"2000-7000",scale:100,unit:"K"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}]}},"0104":{"0100":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}}]},"0101":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"0102":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"rgb",name:"rgb",ref:{value:"rgb",ext:"%s"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"010A":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}}]},"010B":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}}]},"010C":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"2000-7000",scale:100,unit:"K"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}]},"010D":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set color temperature",ref:{value:"setColorTemp",ext:"%d",extMeta:"2000-7000",scale:100,unit:"K"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb",ref:{value:"setRGB",ext:"%s"}}],status:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}},{type:"rgb",name:"rgb",ref:{value:"rgb",ext:"%s"}}],ipevt:[{type:"enum",name:"state",ref:{value:"onoff",options:["on","off"]}},{type:"int",name:"level",ref:{value:"level"}},{type:"int",name:"color temperature",ref:{value:"colortemp",ext:"%d",unit:"K"}}]}}},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"Zigbee (USB Stick)"};},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.endpoints)return null;for(var t={command:[],status:[],ipevt:[]},a=0;a<e.endpoints.length;a++){var n=e.endpoints[a];if(n&&n.profileID&&n.deviceID){var r=this.MAP[n.profileID];if(r&&(r=r[n.deviceID])){var o=JSON.parse(JSON.stringify(r));t.command=t.command.concat(o.command),t.status=t.status.concat(o.status),t.ipevt=t.ipevt.concat(o.ipevt);}}}return t;},getIPevtMap:function getIPevtMap(e){var t=this.getCommandStatusMap(e);if(!t)return null;var a={ipevt:[]};return t.ipevt&&(a.ipevt=t.ipevt),a;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.endpoints?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter endpoints is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.endpoints?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.ZIGBEE.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e){if(!e||!e.endpoints)return null;for(var t=null,a=0;a<e.endpoints.length;a++){var n=e.endpoints[a];if(n&&n.profileID&&n.deviceID){if((t={type:"dimmer",commands:{on:{},off:{},toggle:{},white:{},brightness:{value:{type:"INT",min:0,max:100,step:1}},colorTemperature:{value:{type:"INT",min:20,max:1e6,step:1}},color:{value:{type:"RGB"}}},states:{state:{values:["on","off"]},brightness:{min:0,max:100,unit:"%"},colorTemperature:{type:"INT",min:2e3,max:7e3,unit:"K"}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},white:{value:"white"},brightness:{value:"dimTo",ext:"%d"},colorTemperature:{value:"setColorTemp",ext:"%d",extMeta:"2500-6500"},color:{value:"setRGB"}},states:{state:{value:"onoff"},brightness:{value:"level"},colorTemperature:{value:"colortemp"}}},"C05E"==n.profileID&&"0100"==n.deviceID||"C05E"==n.profileID&&"0220"==n.deviceID||"0104"==n.profileID&&"010C"==n.deviceID)return delete t.commands.white,delete t.details.commands.white,delete t.commands.color,delete t.details.commands.color,t;if("C05E"==n.profileID&&"0200"==n.deviceID||"0104"==n.profileID&&"0102"==n.deviceID)return delete t.commands.colorTemperature,delete t.details.commands.colorTemperature,delete t.states.colorTemperature,delete t.details.states.colorTemperature,t;if("0104"==n.profileID&&"0100"==n.deviceID||"0104"==n.profileID&&"010A"==n.deviceID)return t.type="switch",delete t.commands.brightness,delete t.commands.colorTemperature,delete t.commands.color,delete t.states.brightness,delete t.details.commands.brightness,delete t.details.commands.colorTemperature,delete t.details.commands.color,delete t.details.states.brightness,delete t.commands.white,delete t.details.commands.white,delete t.states.colorTemperature,delete t.details.states.colorTemperature,t;if("0104"==n.profileID&&"0101"==n.deviceID||"0104"==n.profileID&&"010B"==n.deviceID)return delete t.commands.colorTemperature,delete t.commands.color,delete t.details.commands.colorTemperature,delete t.details.commands.color,delete t.commands.white,delete t.details.commands.white,delete t.states.colorTemperature,delete t.details.states.colorTemperature,t;if("C05E"==n.profileID&&"0210"==n.deviceID||"0104"==n.profileID&&"010D"==n.deviceID)return t;}}return null;}}},xnm.aio.gateway.systems.BG={learn:function learn(e,t,a){if(t&&t.type){e._executeRequest("LearnSC",{type:"BG",deviceType:t.type},null,function(e,n){e?a&&a(e):(n.address=n.adr,delete n.adr,n.deviceType=t.type,a&&a(null,n));});}else a&&a(new Error("no device type"));},addWeatherStation:function addWeatherStation(e,t,a){if(t&&t.serial){var n=this.brelag_mx_printAdr(this.brelag_mx_weather_getAdr(t.serial));if(n){n+="01";e._executeRequest("AddSensor",{type:"BG",adr:n,deviceType:"05"},null,function(e,t){e?a&&a(e):(t.address=n,t.deviceType="05",a&&a(null,t));});}else a&&a(new Error("serial number invalid"));}else a&&a(new Error("no serial number"));},brelag_mx_printAdr:function brelag_mx_printAdr(e){return("000000"+e.toString(16)).substr(-6);},brelag_mx_weather_getAdr:function brelag_mx_weather_getAdr(e){var t=parseInt(this.brelag_mx_getAdr(e),16);return t|=96;},brelag_mx_getAdr:function brelag_mx_getAdr(e){if(6!=e.length)return null;for(var t=0,a=0;a<6;a++){t|=parseInt(e.charAt(a))-1,t<<=3;}return((255&t)<<16|65280&t|(16711680&t)>>16).toString(16);},getDeviceInfo:function getDeviceInfo(e,t,a){t&&t.device&&t.device.address?e._executeRequest("getStates",null,null,function(e,n){if(e)a&&a(e);else{for(var r=null,o=0;o<n.length;o++){var s=n[o];if(s&&"BG"==s.type&&s.adr==t.device.address){r=s;break;}}if(r){var i={master:!1,bottom_top:0,top_bottom:0,group:"00"};if(r.group&&(i.group=r.group),r.config){var u=r.config.split(":");u[0]&&(i.master="01"==u[0]),u[1]&&(i.bottom_top=parseInt(u[1],16)),u[2]&&(i.top_bottom=parseInt(u[2],16)),u[3]&&"02"==r.deviceType&&(i.num_tilted_position=parseInt(u[3],16));}a&&a(null,i);}else a&&a(new Error("no such device"));}}):a&&a(new Error("no address"));},getGroups:function getGroups(e,t,a){e._executeRequest("getStates",null,null,function(e,t){if(e)a&&a(e);else{for(var n=[],r=0;r<t.length;r++){var o=t[r];if(o&&"BG"==o.type&&o.config)"01"==o.config.split(":")[0]&&n.push(o);}a&&a(null,n);}});},saveDeviceConfig:function saveDeviceConfig(e,t,a){if(t&&t.device){if(t.device.address){if(t.config){var n="",r=0;t.config.master&&(r=1);var o=0;t.config.bottom_top&&(o=t.config.bottom_top);var s=0;if(t.config.top_bottom&&(s=t.config.top_bottom),n+=xnm.aio.gateway.Util.getHexVal(r,2)+":",n+=xnm.aio.gateway.Util.getHexVal(o,4)+":",n+=xnm.aio.gateway.Util.getHexVal(s,4),"02"==t.device.deviceType){var i=0;t.config.num_tilted_position&&(i=t.config.num_tilted_position),n+=":"+xnm.aio.gateway.Util.getHexVal(i,2);}e._executeRequest("SaveSensor",{type:"BG",adr:t.device.address,config:n},null,function(e){a&&a(e);});}else a&&a(new Error("no config"));}else a&&a(new Error("no address"));}else a&&a(new Error("no device"));},saveDeviceGroup:function saveDeviceGroup(e,t,a){if(t&&t.device){if(t.device.address){var n="";t.group&&(n=t.group),e._executeRequest("SaveSensor",{type:"BG",adr:t.device.address,group:n},null,function(e){a&&a(e);});}else a&&a(new Error("no address"));}else a&&a(new Error("no device"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("bg device address is empty")):n&&n(new Error("bg device command is empty")):n&&n(new Error("bg device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildParam(e,t,a);void 0!==r&&null!=r?e._executeRequest("SendSC",r,null,function(e){n&&n(e);}):n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildParam(e,t,a);return void 0===n||null==n?null:(n.XC_FNC="SendSC",n);},_buildParam:function _buildParam(e,t,a){var n=this._buildData(e,t,a);return void 0===n||null==n?null:{type:"BG",data:n};},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;if(!t||!t.address)return null;var n=a,r="00",o="00";if("%multi"==a.ext&&a.extMeta){for(var s=null,i=0;i<a.extMeta.length;i++){var u=a.extMeta[i];if(u&&u.ref)if("locklevel"==u.ref.value&&u.ref.ext)switch(u.ref.ext){case"no_command":case"set_level_1":r="81";break;case"set_level_2":r="82";break;case"set_level_3":r="83";break;case"clear_level_1":r="41";break;case"clear_level_2":r="42";break;case"clear_level_3":r="43";}else if("priority"==u.ref.value&&u.ref.ext)switch(u.ref.ext){case 0:o="00";break;case 1:o="01";break;case 2:o="02";break;case 3:o="03";}else s=u;}s&&(n=s);}if(n.locklevel)switch(n.locklevel){case"no_command":case"set_level_1":r="81";break;case"set_level_2":r="82";break;case"set_level_3":r="83";break;case"clear_level_1":r="41";break;case"clear_level_2":r="42";break;case"clear_level_3":r="43";}if(n.priority)switch(parseInt(n.priority)){case 0:o="00";break;case 1:o="01";break;case 2:o="02";break;case 3:o="03";}var l="02"+t.address+r+o;if("no_command"==a.value)return l+="FF";var m=t.deviceType;if(!m&&t.data&&("light"==t.data||"switch"==t.data?m="03":"dimmer"==t.data?m="04":"shutter"==t.data?m="01":"blind"==t.data&&(m="02")),"01"==m||"02"==m)switch(n.value){case"pulseUp":l+="01";break;case"pulseDown":l+="02";break;case"continuousUp":case"moveUp":l+="03";break;case"continuousDown":case"moveDown":l+="04";break;case"stop":l+="05";break;case"savePos":l+="0F";break;case"restorePos":case"position":l+="10";break;case"moveTo":if(void 0===n.ext||null==n.ext)return null;l+="20"+xnm.aio.gateway.Util.getHexVal(parseInt(n.ext),2);break;default:if(isNaN(parseInt(n.value)))return null;l+="20"+xnm.aio.gateway.Util.getHexVal(parseInt(n.value),2);}else if("03"==m)switch(n.value){case"on":l+="01";break;case"off":l+="02";break;case"toggle":l+="06";break;default:return null;}else if("04"==m)switch(n.value){case"activate":case"combo":l+="01";break;case"on":l+="1164";break;case"off":l+="02";break;case"fullLvl":case"full":l+="03";break;case"saveLvl":case"savePos":l+="0F";break;case"restoreLvl":case"memory":l+="10";break;case"dimTo":if(void 0===n.ext||null==n.ext)return null;l+="11"+xnm.aio.gateway.Util.getHexVal(parseInt(n.ext),2);break;default:if(isNaN(parseInt(n.value)))return null;l+="11"+xnm.aio.gateway.Util.getHexVal(parseInt(n.value),2);}return l;},_parseData:function _parseData(e,t){if(!e||e.length<16||!t||!t.address||!t.deviceType)return null;if(t.substr(2,8).toLowerCase()!=t.address.toLowerCase())return null;var a,n=t.substr(14,2),r={};if(e.length>16&&(a=t.substr(16)),"01"==t.deviceType||"02"==t.deviceType)switch(n){case"01":r.value="pulseUp";break;case"02":r.value="pulseDown";break;case"03":r.value="continuousUp";break;case"04":r.value="continuousDown";break;case"05":r.value="stop";break;case"0F":r.value="savePos";break;case"10":r.value="restorePos";break;case"20":if(r.value="moveTo",void 0===a||null==a)return null;r.ext=parseInt(a,16);break;default:return null;}else if("03"==t.deviceType)switch(n){case"01":r.value="on";break;case"02":r.value="off";break;case"06":r.value="toggle";break;default:return null;}else if("04"==t.deviceType)switch(n){case"01":r.value="activate";break;case"02":r.value="off";break;case"03":r.value="fullLvl";break;case"0F":r.value="saveLvl";break;case"10":r.value="restoreLvl";break;case"11":if(void 0===a||null==a)return null;"64"==a?r.value="on":(r.value="dimTo",r.ext=parseInt(a,16));break;default:return null;}return r.value?r:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state)return null;if(!e.type||"BG"!=e.type||e.type.toLowerCase()!=t.type.toLowerCase())return null;if(!e.address)return null;if(e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=t.deviceType;if(a||(a=e.deviceType),!a)return null;var n,r=t.state.split(":"),o=null;switch(a){case"01":if(r.length<2)return null;o={position:parseInt(r[1],16)};break;case"02":if(r.length<3)return null;o={position:parseInt(r[1],16),lamella:parseInt(r[2],16)};break;case"03":if(r.length<2)return null;o={state:100==(n=parseInt(r[1],16))?"on":"off"};break;case"04":if(r.length<2)return null;o={level:parseInt(r[1],16)};break;case"05":if(r.length<4)return null;n=parseInt(r[3],16);(o={bri:parseInt(r[1],16),windS:parseInt(r[2],16)}).briRange=["0-5","5-8","8-10","10-30","30-100","100-5000","5000-10000","10000-12000","12000-15000","15000-20000","20000-25000","25000-30000","30000-40000","40000-60000","60000-80000",">80000"][o.bri/8];o.windSRange=["0-10","10-15","15-20","20-25","25-30","30-35","35-40","40-50","50-60","60-70","70-80","80-90","90-100","100-110","110-120",">120"][o.windS/8],o.rainvalue=n,o.rain=n>=112&&n<=120;}return o;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"BG",MAP:{blind:{command:[{type:"enum",name:"move up",ref:{value:"continuousUp"}},{type:"enum",name:"move down",ref:{value:"continuousDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"save position",ref:{value:"savePos"}},{type:"enum",name:"restore position",ref:{value:"restorePos"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},jalousie:{command:[{type:"enum",name:"step up",ref:{value:"pulseUp"}},{type:"enum",name:"step down",ref:{value:"pulseDown"}},{type:"enum",name:"move up",ref:{value:"continuousUp"}},{type:"enum",name:"move down",ref:{value:"continuousDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"save position",ref:{value:"savePos"}},{type:"enum",name:"restore position",ref:{value:"restorePos"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"lamella",ref:{value:"lamella"}},{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}}]},dimmer:{command:[{type:"enum",name:"activate",ref:{value:"activate"}},{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"full level",ref:{value:"fullLvl"}},{type:"enum",name:"save level",ref:{value:"saveLvl"}},{type:"enum",name:"restore level",ref:{value:"restoreLvl"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",scale:"5"}}],status:[{type:"int",name:"level",ref:{value:"level"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},weatherstation:{status:[{type:"int",name:"brightness",ref:{value:"bri",extMeta:"0-120",scale:"8"}},{type:"string",name:"brightness range",ref:{value:"briRange"}},{type:"int",name:"wind speed",ref:{value:"windS",extMeta:"0-112",scale:"8"}},{type:"string",name:"wind speed range",ref:{value:"windSRange"}},{type:"enum",name:"rain",ref:{value:"rain",options:["true","false"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t={type:this.TYPE,name:"Brelag",subtypes:[]};return t.subtypes.push({id:"Shutter",data:"01"}),t.subtypes.push({id:"Jalousie",data:"02"}),t.subtypes.push({id:"Switch",data:"03"}),t.subtypes.push({id:"Dimmer",data:"04"}),t.subtypes.push({id:"Weatherstation",data:"05"}),t;},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.deviceType)return null;var t=null;return"01"==e.deviceType&&(t="blind"),"02"==e.deviceType?t="jalousie":"03"==e.deviceType?t="switch":"04"==e.deviceType?t="dimmer":"05"==e.deviceType&&(t="weatherstation"),null==t?null:this.MAP[t];},getIPevtMap:function getIPevtMap(e){var t=this.getCommandStatusMap(e);if(!t)return null;var a={ipevt:[]};return t.ipevt&&(a.ipevt=t.ipevt),a;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.deviceType?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter device type is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.deviceType?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter device type is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e){if(!e||!e.deviceType)return null;var t=null;if("01"==e.deviceType&&(t="blind"),"02"==e.deviceType?t="jalousie":"03"==e.deviceType?t="switch":"04"==e.deviceType?t="dimmer":"05"==e.deviceType&&(t="weatherstation"),null==t)return null;var a=null;switch(t){case"blind":(a={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"continuousUp"},down:{value:"continuousDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"position"}}};break;case"jalousie":(a={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}},rotation:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100},rotation:{min:0,max:100}}}).details={commands:{up:{value:"continuousUp"},down:{value:"continuousDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"position"},rotation:{value:"lamella"}}};break;case"dimmer":(a={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"on"},off:{value:"off"},brightness:{value:"dimTo",ext:"%d"}},states:{brightness:{value:"level"}}};break;case"switch":(a={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"state"}}};break;case"weatherstation":a={type:"weatherstation",states:{brightness:{type:"INT"},windSpeed:{type:"INT"},rain:{values:["true","false"]}},details:{states:{brightness:{value:"bri"},windSpeed:{value:"winS"},rain:{value:"rain"}}}};}return a;}}},xnm.aio.gateway.systems.B4={learn:function learn(e,t,a){e._executeRequest("LearnSC",{type:this.DM.TYPE},{timeout:2e4},function(e,t){e?a&&a(e):a&&a(null,{address:t.CODE,type:t.TYPE});});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;if(!t||!t.address)return null;var n=t.address,r=null;switch(a.value){case"on":r="01";break;case"off":r="00";break;case"day":n="02"+n.substr(2),r="01";break;case"night":n="02"+n.substr(2),r="00";break;default:return null;}return(n+r).toUpperCase();},_parseData:function _parseData(e,t){if(!t||!t.type||"b4"!=t.type.toLowerCase()||!t.address)return null;if(!e||e.length<10)return null;var a=e.substr(0,8);if(t.address.toLowerCase()!=a.toLowerCase())return null;var n={};switch(e.substr(8,2).toUpperCase()){case"01":"heater"==t.data?n.value="day":n.value="on";break;case"00":"heater"==t.data?n.value="night":n.value="off";}return n.value?n:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},DM:{TYPE:"B4",MAP:{heater:{command:[{type:"enum",name:"night",ref:{value:"night"}},{type:"enum",name:"day",ref:{value:"day"}}]},generic:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t={type:this.TYPE,name:"ELV",subtypes:[]};return t.subtypes.push({id:"Funk-Gurtwickler",data:"shutter"}),t;},getCommandStatusMap:function getCommandStatusMap(e){return e?"heater"===e.data?this.MAP.heater:this.MAP.generic:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;if("shutter"===e.data)n={type:"blind",commands:{up:{},down:{}},details:{commands:{up:{value:"on"},down:{value:"off"}}}};return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.B4.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"generic":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})}}};break;case"heater":t={type:"heater",commands:{day:{url:_getUrl(e,{value:"day"})},night:{url:_getUrl(e,{value:"night"})}}};}return t;}}},xnm.aio.gateway.systems.CM={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t,code:"00"},null,function(e){a&&a(e);});},addSensor:function addSensor(e,t,a,n){e._executeRequest("addSensor",{type:this.DM.TYPE,adr:t,deviceType:a},{timeout:2e4},function(e){n&&n(e);});},learn:function learn(e,t,a){if(t&&t.type){var n=2e4;t.timeout&&(n=t.timeout),e._executeRequest("GetStates",null,null,function(r,o){if(r)a&&a(r);else{var s=[];if(o)for(var i=0;i<o.length;i++){var u=o[i];u&&"CM"==u.type&&u.adr&&-1==s.indexOf(u.adr)&&s.push(u.adr);}e._executeRequest("LearnSC",{type:"CM",deviceType:t.type},null,function(r){r?a&&a(r):setTimeout(function(){e._executeRequest("GetStates",{config:1},null,function(e,n){if(e)a&&a(e);else{var r=[];if(n)for(var o=0;o<n.length;o++){var i=n[o];if(i&&"CM"==i.type&&i.adr&&i.deviceType==t.type&&-1==s.indexOf(i.adr)){var u={sys:"aio",type:"CM",address:i.adr,sid:i.sid,deviceType:i.deviceType,eType:i.eType};i.name&&(u.name=i.name),"00"==i.deviceType?parseInt(i.eType)<15?u.data="blind":u.data="switch":"01"==i.deviceType&&(u.data="sensor",u.sensors=[],i.state.wind_state&&"0"!=i.state.wind_state&&u.sensors.push("wind_state"),i.state.rain_state&&"0"!=i.state.rain_state&&u.sensors.push("rain_state"),i.state.temp_state&&"0"!=i.state.temp_state&&u.sensors.push("temp_state"),i.state.light_state&&"0"!=i.state.light_state&&u.sensors.push("light_state")),r.push(u);}}a&&a(null,r);}});},n);});}});}else a&&a(new Error("no device type"));},getConfig:function getConfig(e,t,a){if(t){e._executeRequest("GetConfig",{type:this.DM.TYPE,adr:t},null,function(e,t){a&&a(e,t);});}else a&&a(new Error("invalid address"));},setConfig:function setConfig(e,t,a,n){if(t){e._executeRequest("SetConfig",{type:this.DM.TYPE,adr:t,data:a},{timeout:5e3,method:"POST"},function(e,t){n&&n(e,t);});}else n&&n(new Error("invalid address"));},getSys:function getSys(e,t){e._executeRequest("GetSys",{sys:this.DM.TYPE},null,function(e,a){t&&t(e,a);});},setSys:function setSys(e,t,a){e._executeRequest("SetSys",{sys:this.DM.TYPE,data:t},{method:"POST"},function(e,t){a&&a(e,t);});},resetDevice:function resetDevice(e,t,a){e._executeRequest("FactReset",{id:t},null,function(e){a&&a(e);});},resetSystem:function resetSystem(e,t){e._executeRequest("FactReset",{sys:this.DM.TYPE},null,function(e){t&&t(e);});},link:function link(e,t,a){if(t){e._executeRequest("LearnLink",{id:t},null,function(e,t){a&&a(e,t);});}else a&&a(new Error("sid invalid"));},getLink:function getLink(e,t,a){if(t){e._executeRequest("GetLinks",{id:t},null,function(e,t){a&&a(e,t);});}else a&&a(new Error("sid invalid"));},manualLink:function manualLink(e,t,a,n){if(t){if(a){e._executeRequest("AddLink",{id:t,adr:a},null,function(e){n&&n(e);});}else n&&n(new Error("address invalid"));}else n&&n(new Error("sid invalid"));},removeLink:function removeLink(e,t,a){if(t){e._executeRequest("DelLink",{id:t},null,function(e){a&&a(e);});}else a&&a(new Error("sid invalid"));},getLinkConfig:function getLinkConfig(e,t,a){if(t){e._executeRequest("GetLinkConfig",{id:t},null,function(e,t){a&&a(e,t);});}else a&&a(new Error("sid invalid"));},setLinkConfig:function setLinkConfig(e,t,a,n){if(t){if(a){e._executeRequest("SetLinkConfig",{id:t,data:a},{method:"POST"},function(e,t){n&&n(e,t);});}else n&&n(new Error("config invalid"));}else n&&n(new Error("sid invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t||!t.sid)return null;var n="SendGenericCmd";a&&"select"==a.value&&(n="SendCmd");var r=this._buildData(e,t,a);return r?{XC_FNC:n,id:t.sid,data:r}:null;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;var n=null,r=null;if("moveTo"===a.value){if(void 0===a.ext||null==a.ext)return null;if(r=parseInt(a.ext),isNaN(r))return null;r<0&&(r=0),r>100&&(r=100),n={cmd:a.value,value:r};}else n={cmd:a.value};return n;},_parseData:function _parseData(e,t){if(!e)return null;if(!t||!t.address||!t.type||t.type.toUpperCase()!=this.DM.TYPE)return null;var a={value:e};return-1!=e.indexOf("moveTo")&&(a.value=e.match(/([a-zA-Z]+)/)[0],a.ext=e.match(/([0-9\.]+)/)[0]),a;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!(t&&t.type&&"cm"==t.type.toLowerCase()&&t.adr&&t.state))return null;if(!e||!e.type||"cm"!=e.type.toLowerCase()||!e.address)return null;if(e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=t.state;if("01"==t.deviceType){if(!t.state)return null;if(a={},t.state.wind_state&&"0"!=t.state.wind_state&&(a.wind_state=t.state.wind_state,a.wind=t.state.wind),t.state.rain_state&&"0"!=t.state.rain_state&&(a.rain_state="2"==t.state.rain_state),t.state.temp_state&&"0"!=t.state.temp_state&&(a.temp_state=t.state.temp_state,a.temp=t.state.temp),t.state.light_state&&"0"!=t.state.light_state&&(a.light_state=t.state.light_state,a.illumination=t.state.illumination,a.s1=t.state.s1,a.s2=t.state.s2,a.s3=t.state.s3),t.state.flags){var n=1&(o=parseInt(t.state.flags,16));a.timeout=1==n;var r=2&o;a.lowbat=1==r;}}else if(void 0!==a.state&&null!=a.state&&(a.state="0"==a.state||"off"==a.state?"off":"on"),void 0!==a.timeout&&null!=a.timeout&&(a.timeout="1"==a.timeout),t.state.flags){var o=parseInt(t.state.flags,16);if(!isNaN(o)){n=1&o;a.timeout=1==n,a.mode=o>>6&1?"auto":"manu";for(var s=[],i=["timeout","overload","obstacle","emergency_alarm",null,"lost_sensor",null,"device_is_not_in_cc","wind_alarm","rain_alarm","frost_alarm"],u=0;u<11;u++){o>>u&1&&i[u]&&s.push(i[u]);}a.messages=s.join("\n");}}return a;},DM:{TYPE:"CM",MAP:{blind:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"position 1",ref:{value:"moveToP1"}},{type:"enum",name:"position 2",ref:{value:"moveToP2"}},{type:"enum",name:"auto",ref:{value:"auto"}},{type:"enum",name:"manu",ref:{value:"manu"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"save position 1",ref:{value:"saveP1"}},{type:"enum",name:"save position 2",ref:{value:"saveP2"}}],status:[{type:"int",name:"position",ref:{value:"position",extMeta:"0-100"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"string",name:"messages",ref:{value:"messages"}}]},"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"auto",ref:{value:"auto"}},{type:"enum",name:"manu",ref:{value:"manu"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"string",name:"messages",ref:{value:"messages"}}]},sensor:{ipevt:[{type:"enum",name:"temperature state",ref:{value:"temp_state",options:["1","2"]}},{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"enum",name:"wind state",ref:{value:"wind_state",options:["1","2"]}},{type:"float",name:"wind speed",ref:{value:"wind",ext:"%f"}},{type:"enum",name:"rain state",ref:{value:"rain_state",options:["true","false"]}},{type:"enum",name:"light state",ref:{value:"light_state",options:["1","2","3","4"]}},{type:"float",name:"illumination",ref:{value:"illumination",ext:"%f"}},{type:"float",name:"sun intensity 1",ref:{value:"s1",ext:"%f"}},{type:"float",name:"sun intensity 2",ref:{value:"s2",ext:"%f"}},{type:"float",name:"sun intensity 3",ref:{value:"s3",ext:"%f"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}],event:[{type:"enum",name:"temperature state",ref:{value:"temp_state"}},{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"enum",name:"wind state",ref:{value:"wind_state"}},{type:"float",name:"wind speed",ref:{value:"wind"}},{type:"enum",name:"rain state",ref:{value:"rain_state"}},{type:"enum",name:"light state",ref:{value:"light_state"}},{type:"float",name:"illumination",ref:{value:"illumination"}},{type:"float",name:"sun intensity 1",ref:{value:"s1"}},{type:"float",name:"sun intensity 2",ref:{value:"s2"}},{type:"float",name:"sun intensity 3",ref:{value:"s3"}},{type:"enum",name:"timeout",ref:{value:"timeout"}},{type:"enum",name:"battery low",ref:{value:"lowbat"}}],status:[{type:"enum",name:"temperature state",ref:{value:"temp_state",options:["1","2"]}},{type:"float",name:"temperature",ref:{value:"temp",ext:"%f"}},{type:"enum",name:"wind state",ref:{value:"wind_state",options:["1","2"]}},{type:"float",name:"wind speed",ref:{value:"wind",ext:"%f"}},{type:"enum",name:"rain state",ref:{value:"rain_state",options:["true","false"]}},{type:"enum",name:"light state",ref:{value:"light_state",options:["1","2","3","4"]}},{type:"float",name:"illumination",ref:{value:"illumination",ext:"%f"}},{type:"float",name:"sun intensity 1",ref:{value:"s1",ext:"%f"}},{type:"float",name:"sun intensity 2",ref:{value:"s2",ext:"%f"}},{type:"float",name:"sun intensity 3",ref:{value:"s3",ext:"%f"}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"SELVE commeo"};},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.data)return null;if("switch"==e.data||"blind"==e.data)return this.MAP[e.data];var t=!1,a=!1,n=!1,r=!1;e.sensors&&0!=e.sensors.length?(-1!=e.sensors.indexOf("wind_state")&&(t=!0),-1!=e.sensors.indexOf("rain_state")&&(a=!0),-1!=e.sensors.indexOf("temp_state")&&(n=!0),-1!=e.sensors.indexOf("light_state")&&(r=!0)):(t=!0,a=!0,n=!0,r=!0);var o={status:[]};return t&&o.status.push({type:"float",name:"wind speed",ref:{value:"wind",ext:"%f",extMeta:"0-50",step:"0.5"}}),a&&o.status.push({type:"enum",name:"rain state",ref:{value:"rain_state",options:["true","false"]}}),n&&o.status.push({type:"float",name:"temperature",ref:{value:"temp",ext:"%f",extMeta:"-40-85",step:"0.5"}}),r&&(o.status.push({type:"float",name:"illumination",ref:{value:"illumination",ext:"%f",extMeta:"0-1000",step:"10"}}),o.status.push({type:"float",name:"sun intensity 1",ref:{value:"s1",ext:"%f",extMeta:"0-125",step:"0.5"}}),o.status.push({type:"float",name:"sun intensity 2",ref:{value:"s2",ext:"%f",extMeta:"0-125",step:"0.5"}}),o.status.push({type:"float",name:"sun intensity 3",ref:{value:"s3",ext:"%f",extMeta:"0-125",step:"0.5"}})),o.event=o.status,o;},getIPevtMap:function getIPevtMap(e){return this.MAP[e.data];},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"data is invalid")):a(new n(r.INVALID,"sid is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"data is invalid")):a(new n(r.INVALID,"sid is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"sensor":(n={type:"temperature",states:{temperature:{type:"FLOAT"}}}).details={states:{temperature:{value:"temp"}}};break;case"blind":(n={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"position"}}};break;case"switch":(n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"state"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){if(!e||!e.data)return null;var t=null;switch(e.data){case"sensor":t={type:"temperature",states:{temperature:{type:"FLOAT"}}};break;case"blind":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}},value:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveTo",value:"{val}"}},min:0,max:100,step:1}},states:{position:{min:0,max:100}}};break;case"switch":t={type:"switch",commands:{on:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"on"}}},off:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"off"}}},toggle:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"toggle"}}}},states:{state:{values:["on","off"]}}};}return t;}}},xnm.aio.gateway.systems.IV={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},null,function(e){a&&a(e);});},learn:function learn(e,t,a){var n={type:"IV"};t&&(n.adr=t);e._executeRequest("LearnSC",n,{timeout:2e4},function(e,t){if(e)a&&a(e);else{t={sys:"aio",type:"IV",address:t.adr,sid:t.sid,config:t.config};a&&a(null,[t]);}});},setConfig:function setConfig(e,t,a){e._executeRequest("setConfig",{type:this.DM.TYPE,repeater:t},null,function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t||!t.sid)return null;var n="SendGenericCmd";a&&"select"==a.value&&(n="SendCmd");var r=this._buildData(e,t,a);return r?{XC_FNC:n,id:t.sid,data:r}:null;},_buildData:function _buildData(e,t,a){if(!a||!a.value)return null;var n=null,r=null;if("moveTo"===a.value){if(void 0===a.ext||null==a.ext)return null;if(r=parseInt(a.ext),isNaN(r))return null;r<0&&(r=0),r>100&&(r=100),n={cmd:a.value,value:r};}else n={cmd:a.value};return n;},_parseData:function _parseData(e,t){return e&&t&&t.address&&t.type&&t.type.toUpperCase()==this.DM.TYPE?{value:e}:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&t.adr&&t.state&&"IV"==t.type&&"IV"==e.type&&e.address&&e.address.toLowerCase()==t.adr.toLowerCase()?{state:t.state}:null;},DM:{TYPE:"IV",MAP:{blind:{command:[{type:"enum",name:"up",ref:{value:"moveUp"}},{type:"enum",name:"down",ref:{value:"moveDown"}},{type:"enum",name:"position 1",ref:{value:"moveToP1"}},{type:"enum",name:"position 2",ref:{value:"moveToP2"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},"switch":{command:[{type:"enum",name:"up",ref:{value:"on"}},{type:"enum",name:"down",ref:{value:"off"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"SELVE iveo"};},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"data is invalid")):a(new n(r.INVALID,"sid is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"data is invalid")):a(new n(r.INVALID,"sid is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"blind":(n={type:"blind",commands:{up:{},down:{},stop:{}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}};break;case"switch":(n={type:"switch",commands:{on:{},off:{}}}).details={commands:{on:{value:"on"},off:{value:"off"}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){if(!e||!e.data)return null;var t=null;switch(e.data){case"blind":t={type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}}}};break;case"switch":t={type:"switch",commands:{on:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"on"}}},off:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"off"}}}}};}return t;}}},xnm.aio.gateway.systems.HU={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},null,function(e){a&&a(e);});},learn:function learn(e,t,a){e._executeRequest("LearnSC",{type:"HU"},{timeout:2e4},function(e,n){if(e)a&&a(e);else if(n&&n.devices){var r=n.devices[0];n=null;r&&(n={sys:"aio",type:"HU",address:r.address,sid:r.id,data:t&&t.subtype?t&&t.subtype:"shutter"}),a&&a(null,n);}else a&&a(new Error("invalid response"));});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t||!t.sid)return null;var n=this._buildData(e,t,a);return n?{XC_FNC:"SendGenericCmd",id:t.sid,data:n}:null;},_buildData:function _buildData(e,t,a){return a&&a.value?{cmd:a.value}:null;},_parseData:function _parseData(e,t){return e&&t&&t.address&&t.type&&t.type.toUpperCase()==this.DM.TYPE?{value:e}:null;},DM:{TYPE:"HU",MAP:{shutter:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},blind:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){for(var t=[{type:this.TYPE,name:"enjoy motors"},{type:this.TYPE,name:"Hermann Uhr"}],a=[{id:"Blind",data:"blind"},{id:"Shutter",data:"shutter"}],n=0;n<t.length;n++){t[n].subtypes=a;}return t;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"address is invalid")):a(new n(r.INVALID,"sid is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){return{type:"blind",commands:{up:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveUp"}}},down:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"moveDown"}}},stop:{type:"POST",url:"/cmd",data:{XC_FNC:"SendGenericCmd",id:e.sid,data:{cmd:"stop"}}}}};}}},xnm.aio.gateway.systems.MIP={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},{timeout:2e4},function(e){a&&a(e);});},learn:function learn(e,t,a){var n={type:this.DM.TYPE},r={timeout:4e4};t&&t.key&&t.sgtin&&(n.key=t.key,n.sgtin=t.sgtin,r.timeout=6e4),t&&t.qrkey&&(n.qrkey=t.qrkey,r.timeout=6e4),e._executeRequest("LearnSC",n,r,function(e,t){if(e)a&&a(e);else if(t&&t.devices){var n=t.devices[0],r=null;n&&(r={sys:"aio",type:"MIP",address:n.adr,sid:n.sid,data:n.deviceType}),a&&a(null,r);}else a&&a(new Error("invalid response"));});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t||!t.sid)return null;var n=this._buildData(e,t,a);return n?{XC_FNC:"SendGenericCmd",id:t.sid,data:n}:null;},_buildData:function _buildData(e,t,a){return a&&a.value?{cmd:a.value}:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&t.adr&&t.state&&"MIP"==t.type&&"MIP"==e.type&&e.address&&e.address.toLowerCase()==t.adr.toLowerCase()?t.state:null;},DM:{TYPE:"MIP",MAP:{window:{status:[{type:"enum",name:"handle",ref:{value:"handle",options:["open","closed","tilted"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0.0-3.3"}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],command:[{type:"enum",name:"alarm on",ref:{value:"alertOn"}},{type:"enum",name:"alarm off",ref:{value:"alertOff"}}],ipevt:[{type:"enum",name:"handle",ref:{value:"handle",options:["open","closed","tilted"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0.0-3.3"}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}],event:[{type:"enum",name:"handle",ref:{value:"handle",options:["open","closed","tilted"]}},{type:"enum",name:"window",ref:{value:"window",options:["open","closed","tilted"]}},{type:"enum",name:"alarm",ref:{value:"alarm",options:["true","false"]}},{type:"float",name:"voltage",ref:{value:"voltage",extMeta:"0.0-3.3"}},{type:"enum",name:"battery low",ref:{value:"lowbat",options:["true","false"]}},{type:"enum",name:"timeout",ref:{value:"timeout",options:["true","false"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e),a=!t||!t.HMMODE;return e&&"string"==typeof e.version&&"C"==e.version.charAt(0)?[{type:"MIP",name:"Mediola IP",vendor:"mediola",rfmismatch:a},{type:"MIP",name:"GEALAN Fenstersensor",vendor:"gealan",rfmismatch:a}]:null;},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.data?this.MAP[e.data]:null;},getIPevtMap:function getIPevtMap(e,t){return this.getCommandStatusMap(e,t);},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.HM_X.delSensor(e,t.address,function(){});}}},xnm.aio.gateway.systems.F3={delSensor:function delSensor(e,t,a){e._executeRequest("delSensor",{type:this.DM.TYPE,adr:t},null,function(e){a&&a(e);});},learn:function learn(e,t,a){if(e){if(t&&t.type){var n={type:"F3",deviceType:t.type};if("switch"===t.type)void 0!==t.channel&&null!=t.channel&&(n.channel=t.channel);e._executeRequest("LearnSC",n,{timeout:2e4},function(e,t){if(e)a&&a(e);else if(t.adr){var r={sys:"aio",type:"F3",address:t.adr,data:n.deviceType,typeID:t.deviceTypeID,sid:t.sid};a&&a(null,r);}else a&&a(new Error("response format invalid"));});}else a&&a(new Error("invalid options"));}else a&&a(new Error("gateway is null"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this._buildData(e,t,a);if(r){var o={type:this.DM.TYPE,data:r};e._executeRequest("SendSC",o,null,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){var n=this._buildData(e,t,a);if(!n)return null;var r={type:this.DM.TYPE,data:n,XC_FNC:"SendSC"};return r;},_buildData:function _buildData(e,t,a){if(t&&t.address){var n;switch(a.value){case"off":n="00";break;case"on":n="01";break;case"toggle":n="02";break;case"moveUp":n="03";break;case"moveDown":n="04";break;case"stop":n="05";break;case"stepUp":n="06";break;case"stepDown":n="07";}if(n)return"01"+t.address+n;}},_parseData:function _parseData(e,t){if(e.length<14)return null;var a=e.substr(2,10);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n={};switch(e.substr(12,2).toUpperCase()){case"00":n.value="off";break;case"01":n.value="on";break;case"02":n.value="toggle";break;case"03":n.value="moveUp";break;case"04":n.value="moveDown";break;case"05":n.value="stop";break;case"06":n.value="stepUp";break;case"07":n.value="stepDown";}return n.value?n:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&"f3"==t.type.toLowerCase()&&t.adr&&t.state?e.address.toLowerCase()!=t.adr.toLowerCase()?null:t.state:null;},generateActionCode:function generateActionCode(e,t){return this._buildData(null,t,e);},parseActionCode:function parseActionCode(e,t){return this._parseData(e,t);},_resolveAddress:function _resolveAddress(e){return 10==e.length?e:14==e.length?e.substring(2,12):void 0;},parseTriggerCode:function parseTriggerCode(e,t){if(!e||e.length<12||!t||!t.address)return null;var a=e.substr(2,10);if(t.address.toUpperCase()!=a.toUpperCase())return null;var n=e.substr(12,2),r={};switch(t.data){case"contact":switch(n){case"87":r.value="open";break;case"88":r.value="closed";}break;case"button2":case"button":switch(n){case"80":r.value="btn2shortPress";break;case"81":r.value="btn1shortPress";break;case"83":r.value="btn2longPress";break;case"84":r.value="btn1longPress";}}return r.value?r:null;},generateTriggerCode:function generateTriggerCode(e,t){if(!e||!e.value||!t||!t.address||t.address<8)return null;var a;switch(t.data){case"contact":"open"==e.value?a="87":"closed"==e.value&&(a="88");break;case"button2":case"button":"btn1shortPress"==e.value?a="81":"btn1longPress"==e.value?a="84":"btn2shortPress"==e.value?a="80":"btn2longPress"==e.value&&(a="83");}return a?"01"+t.address+a:null;},DM:{TYPE:"F3",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}}],ipevt:[{type:"enum",name:"state",ref:{value:"switchState",options:["on","off"]}}]},blind:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"enum",name:"step up",ref:{value:"stepUp"}},{type:"enum",name:"step down",ref:{value:"stepDown"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},contact:{status:[{type:"enum",name:"state",ref:{value:"contact",options:["open","closed"]}}],event:[{type:"enum",name:"state",ref:{value:"contact",options:["open","closed"]}}],event_e2:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"closed",ref:{value:"closed"}}],ipevt:[{type:"enum",name:"state",ref:{value:"contact",options:["open","closed"]}}]},button2:{event:[{type:"enum",name:"button 1",ref:{value:"button1",options:["shortPress","longPress"]}},{type:"enum",name:"button 2",ref:{value:"button2",options:["shortPress","longPress"]}}],event_e2:[{type:"enum",name:"button 1 short press",ref:{value:"btn1shortPress"}},{type:"enum",name:"button 1 long press",ref:{value:"btn1longPress"}},{type:"enum",name:"button 2 short press",ref:{value:"btn2shortPress"}},{type:"enum",name:"button 2 long press",ref:{value:"btn2longPress"}}],ipevt:[{type:"enum",name:"button 1",ref:{value:"button1",options:["shortPress","longPress"]}},{type:"enum",name:"button 2",ref:{value:"button2",options:["shortPress","longPress"]}}]},button:{event:[{type:"enum",name:"button",ref:{value:"button1",options:["shortPress"]}}],event_e2:[{type:"enum",name:"button short press",ref:{value:"btn1shortPress"}},{type:"enum",name:"button long press",ref:{value:"btn1longPress"}}],ipevt:[{type:"enum",name:"button",ref:{value:"button1",options:["shortPress"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){var t=xnm.aio.gateway.Gateway._getRFMode(e);if(t&&!t.SUPPORTS868)return null;var a={type:this.TYPE,name:"Kopp Free-control 3.0",subtypes:[]},n=!1;return t&&t.F3MODE||(n=!0),a.subtypes.push({id:"Switch",data:"switch",rfmismatch:n}),a.subtypes.push({id:"Blind",data:"blind",rfmismatch:n}),a.subtypes.push({id:"Contact",data:"contact",rfmismatch:n}),a.subtypes.push({id:"InWall Remote",data:"button2",rfmismatch:n}),a.subtypes.push({id:"Hand Remote",data:"button",rfmismatch:n}),a;},getCommandStatusMap:function getCommandStatusMap(e,t){if(!e||!e.data)return null;var a=this.MAP[e.data];return t&&"string"==typeof t.version&&"e2"==t.version.toLowerCase()&&(a=JSON.parse(JSON.stringify(a))).event_e2&&(a.event=a.event_e2,delete a.event_e2),a;},getIPevtMap:function getIPevtMap(e){if(!e.data)return null;var t=this.MAP[e.data];return t?{ipevt:t.ipevt}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t))),xnm.aio.gateway.systems.F3.delSensor(e,t.address,function(){});},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.data)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.data){case"switch":n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"}}}};break;case"blind":n={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"}}}};break;case"contact":n={type:"door",states:{state:{values:["open","closed"]}},details:{states:{state:{value:"contact"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getUrl=function _getUrl(e,t){var a=xnm.aio.gateway.systems.F3.buildQuery(null,e,t);return"/cmd?XC_FNC="+encodeURIComponent(a.XC_FNC)+"&type="+encodeURIComponent(a.type)+"&data="+encodeURIComponent(a.data);};if(!e||!e.data)return null;var t=null;switch(e.data){case"switch":t={type:"switch",address:e.address,commands:{on:{url:_getUrl(e,{value:"on"})},off:{url:_getUrl(e,{value:"off"})},toggle:{url:_getUrl(e,{value:"toggle"})}}};break;case"blind":t={type:"blind",address:e.address,commands:{up:{url:_getUrl(e,{value:"moveUp"})},down:{url:_getUrl(e,{value:"moveDown"})},stop:{url:_getUrl(e,{value:"stop"})}}};}return t;}}},xnm.aio.gateway.systems.MBUS={module:null,updateStates:function updateStates(e,t,a){e._executeRequest("RefreshMbusDeviceStates",{address:t},{method:"POST"},function(e){a&&a(e);});},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("it device address is empty")):n&&n(new Error("it device command is empty")):n&&n(new Error("it device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,{method:"GET"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){if(!(t&&t.address&&t.subtype&&t.data))return null;var n=this._buildData(e,t,a);if(!n)return null;var r=n;return r.XC_FNC="SendSC",r;},_buildData:function _buildData(e,t,a){return a&&a.value?{type:"MBUS",address:t.address,subtype:t.subtype,data:t.data,command:a.value}:null;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||!t.adr||!t.state||"MBUS"!=t.type)return null;if("MBUS"!=e.type||!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;if(!this.module){var a=require("xnm.aio.mbus.js").MediolaBus;this.module=new a();}var n=this.module.evalState({type:e.subtype,address:e.address,data:e.data},t.state);return null==n?null:{state:n};},DM:{TYPE:"MBUS",MAP:{srswitch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},feedback:{status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]},n26shutter:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"angle",ref:{value:"angle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["up","down","angle","undefined"]}}]},n26shutterfunction:{command:[{type:"enum",name:"up",ref:{value:"up"}},{type:"enum",name:"down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"angle",ref:{value:"angle"}}]}},getGatewayDeviceType:function getGatewayDeviceType(e){return e&&"string"==typeof e.version&&"ca"==e.version.toLowerCase()?{type:this.TYPE,name:"Mediola Bus",subtypes:[{id:"srswitch",data:"srswitch"},{id:"feedback",data:"feedback"},{id:"n26shutter",data:"n26shutter"},{id:"n26shutterfunction",data:"n26shutterfunction"},{id:"n26shuttergroup",data:"n26shuttergroup"}]}:null;},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.subtype)return null;var t=e.subtype.toLowerCase();return"n26shuttergroup"==t&&(t="n26shutter"),this.MAP[t];},getIPevtMap:function getIPevtMap(e,t){var a=this.getCommandStatusMap(e,t);return a&&a.status?{ipevt:a.status}:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.subtype?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter subtype is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?e.subtype?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter data is invalid")):a(new n(r.INVALID,"parameter subtype is invalid")):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.type){case"srswitch":n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"state"}}}};break;case"n26shutter":case"n26shuttergroup":case"n26shutterfunction":n={type:"blind",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"up"},down:{value:"down"},stop:{value:"stop"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.MediolaBus._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=null;switch(e.type){case"srswitch":t={type:"switch",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"on"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})},toggle:{type:"POST",url:"/api/command",data:_getData(e,{value:"toggle"})}},states:{state:{values:["on","off"]}}};break;case"n26shutter":case"n26shuttergroup":case"n26shutterfunction":t={type:"blind",commands:{up:{type:"POST",url:"/api/command",data:_getData(e,{value:"up"})},down:{type:"POST",url:"/api/command",data:_getData(e,{value:"down"})},stop:{type:"POST",url:"/api/command",data:_getData(e,{value:"stop"})}}};}return t;}}},xnm.aio.gateway.systems._SysVar={setVar:function setVar(e,t,a,n,r){var o={id:a,type:t,value:n};e._executeRequest("setVar",o,{timeout:2e4},function(e){r&&r(e);});},delVar:function delVar(e,t,a){var n={id:t};e._executeRequest("delVar",n,{timeout:2e4},function(e){a&&a(e);});},getSysVars:function getSysVars(e,t){e._executeRequest("getStates",null,{timeout:2e4},function(e,a){if(e)t&&t(e);else{var n=[];if(a)for(var r=0;r<a.length;r++){var o=a[r];if(o.adr||o.id)switch(o.type){case xnm.aio.gateway.systems.Boolean.DM.TYPE:case xnm.aio.gateway.systems.Int.DM.TYPE:case xnm.aio.gateway.systems.Float.DM.TYPE:case xnm.aio.gateway.systems.String.DM.TYPE:case xnm.aio.gateway.systems.Event.DM.TYPE:n.push({type:o.type,address:o.adr});break;case xnm.aio.gateway.systems.Task.DM.TYPE:n.push({type:o.type,address:o.id});}}t&&t(null,n);}});},buildQuery:function buildQuery(e,t,a,n){return{XC_FNC:"setVar",id:a,type:t,value:n};}},xnm.aio.gateway.systems.Boolean={regist:function regist(e,t,a){t&&t.address?xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,"on",a):a&&a(new Error("regist device option foramt invalid"));},delVar:function delVar(e,t,a){t?xnm.aio.gateway.systems._SysVar.delVar(e,t,a):a&&a(new Error("address invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("device address is empty")):n&&n(new Error("device command is empty")):n&&n(new Error("device is null"));},_executeCommand:function _executeCommand(e,t,a,n){xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,a.value,n);},buildQuery:function buildQuery(e,t,a){return xnm.aio.gateway.systems._SysVar.buildQuery(e,this.DM.TYPE,t.address,a.value);},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!(t.type&&"onoff"==t.type.toLowerCase()&&t.adr&&t.state&&e&&"onoff"==e.type.toLowerCase()))return null;if(!e.address)return null;if("string"==typeof e.address&&e.address.toLowerCase()!=t.adr.toLowerCase())return null;if(e.address!=t.adr)return null;var a=t.state;return a&&(a=a.toLowerCase()),{state:a};},generateActionCode:function generateActionCode(e,t){if(!t||!t.address||2!=t.address.length)return null;if(!e)return null;var a;switch(e.value){case"on":a="01";break;case"off":a="00";break;case"toggle":a="0F";break;default:return null;}return t.address+a;},parseActionCode:function parseActionCode(e,t){if(!e||4!=e.length)return null;if(!t||!t.address||2!=t.address.length)return null;var a=e.substr(0,2),n=e.substr(2,2);if(a.toLowerCase()!=t.address.toLowerCase())return null;var r={};switch(n.toUpperCase()){case"01":r.value="on";break;case"00":r.value="off";break;case"0F":r.value="toggle";break;default:return null;}return r;},DM:{TYPE:"ONOFF",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"Boolean System Variable"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getIPevtMap:function getIPevtMap(e,t){if(t&&["EA","A1","CA"].indexOf(t.version)>=0){var a=this.getCommandStatusMap(e);if(!a)return null;var n={ipevt:[]};return a.ipevt&&(n.ipevt=a.ipevt),n;}return[];},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){xnm.aio.gateway.systems.Boolean.delVar(e,t.address,function(){n&&n(null,JSON.parse(JSON.stringify(t)));});}}},xnm.aio.gateway.systems.Int={regist:function regist(e,t,a){t&&t.address?xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,"00000000",a):a&&a(new Error("regist device option foramt invalid"));},delVar:function delVar(e,t,a){t?xnm.aio.gateway.systems._SysVar.delVar(e,t,a):a&&a(new Error("address invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("device address is empty")):n&&n(new Error("device command is empty")):n&&n(new Error("device is null"));},_executeCommand:function _executeCommand(e,t,a,n){if("setValue"==a.value){var r=0;null!=a.ext&&void 0!==a.ext&&(r=parseInt(a.ext)),r>2147483647&&(r=2147483647),r<-2147483648&&(r=-2147483648),r=xnm.aio.gateway.Util.getHexVal(r,8),xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,r,n);}else n&&n(new Error("unknow command"));},buildQuery:function buildQuery(e,t,a){if("setValue"!=a.value)return null;var n=0;return null!=a.ext&&void 0!==a.ext&&(n=parseInt(a.ext)),n>2147483647&&(n=2147483647),n<-2147483648&&(n=-2147483648),n=xnm.aio.gateway.Util.getHexVal(n,8),xnm.aio.gateway.systems._SysVar.buildQuery(e,this.DM.TYPE,t.address,n);},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!(t.type&&"int"==t.type.toLowerCase()&&t.adr&&t.state&&e&&"int"==e.type.toLowerCase()))return null;if(!e.address)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=parseInt(t.state,16);return{state:a=2147483648&a?a-4294967296:a};},DM:{TYPE:"INT",MAP:{command:[{type:"int",name:"set value",ref:{value:"setValue",ext:"%d",extMeta:"-2147483648-2147483647"}}],status:[{type:"int",name:"status",ref:{value:"state",extMeta:"-2147483648-2147483647"}}],ipevt:[{type:"int",name:"status",ref:{value:"state",extMeta:"-2147483648-2147483647"}}]},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Integer System Variable"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getIPevtMap:function getIPevtMap(e,t){if(t&&["EA","A1","CA"].indexOf(t.version)>=0){var a=this.getCommandStatusMap(e);if(!a)return null;var n={ipevt:[]};return a.ipevt&&(n.ipevt=a.ipevt),n;}return[];},getActionMap:function getActionMap(){return{command:[]};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){xnm.aio.gateway.systems.Int.delVar(e,t.address,function(){n&&n(null,JSON.parse(JSON.stringify(t)));});}}},xnm.aio.gateway.systems.Float={regist:function regist(e,t,a){t&&t.address?xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,"00000000",a):a&&a(new Error("regist device option foramt invalid"));},delVar:function delVar(e,t,a){t?xnm.aio.gateway.systems._SysVar.delVar(e,t,a):a&&a(new Error("address invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("device address is empty")):n&&n(new Error("device command is empty")):n&&n(new Error("device is null"));},_executeCommand:function _executeCommand(e,t,a,n){if("setValue"==a.value){var r=0;null!=a.ext&&void 0!==a.ext&&(r=parseFloat(a.ext)),(r=Math.round(100*r))>2147483647&&(r=2147483647),r<-2147483648&&(r=-2147483648),r=xnm.aio.gateway.Util.getHexVal(r,8),xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,encodeURI(r),n);}else n&&n(new Error("unknow command"));},buildQuery:function buildQuery(e,t,a){if("setValue"!=a.value)return null;var n=0;return null!=a.ext&&void 0!==a.ext&&(n=parseFloat(a.ext)),(n=Math.round(100*n))>2147483647&&(n=2147483647),n<-2147483648&&(n=-2147483648),n=xnm.aio.gateway.Util.getHexVal(n,8),xnm.aio.gateway.systems._SysVar.buildQuery(e,this.DM.TYPE,t.address,encodeURI(n));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!(t.type&&"float"==t.type.toLowerCase()&&t.adr&&t.state&&e&&"float"==e.type.toLowerCase()))return null;if(!e.address)return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=parseInt(t.state,16);return{state:a=((a=2147483648&a?a-4294967296:a)/100).toFixed(2)};},DM:{TYPE:"FLOAT",MAP:{command:[{type:"float",name:"set value",ref:{value:"setValue",ext:"%f",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}],status:[{type:"float",name:"status",ref:{value:"state",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}],ipevt:[{type:"float",name:"status",ref:{value:"state",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}]},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Float System Variable"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getIPevtMap:function getIPevtMap(e,t){if(t&&["EA","A1","CA"].indexOf(t.version)>=0){var a=this.getCommandStatusMap(e);if(!a)return null;var n={ipevt:[]};return a.ipevt&&(n.ipevt=a.ipevt),n;}return[];},getActionMap:function getActionMap(){return{command:[]};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){xnm.aio.gateway.systems.Float.delVar(e,t.address,function(){n&&n(null,JSON.parse(JSON.stringify(t)));});}}},xnm.aio.gateway.systems.String={regist:function regist(e,t,a){t&&t.address?xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,"",a):a&&a(new Error("regist device option foramt invalid"));},delVar:function delVar(e,t,a){t?xnm.aio.gateway.systems._SysVar.delVar(e,t,a):a&&a(new Error("address invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("device address is empty")):n&&n(new Error("device command is empty")):n&&n(new Error("device is null"));},_executeCommand:function _executeCommand(e,t,a,n){if("setValue"==a.value){var r="";null!=a.ext&&void 0!==a.ext&&(r=a.ext),e._isV6P()||!e._isV5P()&&r.length>15&&(r=r.substr(0,15)),xnm.aio.gateway.systems._SysVar.setVar(e,this.DM.TYPE,t.address,encodeURI(r),n);}else n&&n(new Error("unknow command"));},buildQuery:function buildQuery(e,t,a){if("setValue"!=a.value)return null;var n="";return null!=a.ext&&void 0!==a.ext&&(n=a.ext),e._isV6P()||e._isV5P&&!e._isV5P()&&n.length>15&&(n=n.substr(0,15)),xnm.aio.gateway.systems._SysVar.buildQuery(e,this.DM.TYPE,t.address,encodeURI(n));},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&"string"==t.type.toLowerCase()&&t.adr&&"string"==typeof t.state&&e&&"string"==e.type.toLowerCase()&&e.type&&"string"==e.type.toLowerCase()&&e.address&&e.address&&e.address.toLowerCase()==t.adr.toLowerCase()?{state:t.state}:null;},DM:{TYPE:"STRING",MAP:{command:[{type:"string",name:"set value",ref:{value:"setValue",ext:"%s"}}],status:[{type:"string",name:"status",ref:{value:"state"}}],ipevt:[{type:"string",name:"status",ref:{value:"state"}}]},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"String System Variable"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},getIPevtMap:function getIPevtMap(e,t){if(t&&["EA","A1","CA"].indexOf(t.version)>=0){var a=this.getCommandStatusMap(e);if(!a)return null;var n={ipevt:[]};return a.ipevt&&(n.ipevt=a.ipevt),n;}return[];},getActionMap:function getActionMap(){return{command:[]};},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){xnm.aio.gateway.systems.String.delVar(e,t.address,function(){n&&n(null,JSON.parse(JSON.stringify(t)));});}}},xnm.aio.gateway.systems.Event={executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("device address is empty")):n&&n(new Error("device command is empty")):n&&n(new Error("device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r,o;"on"==a.value?(r="saveGroup",o={id:t.address,active:1}):"off"==a.value?(r="saveGroup",o={id:t.address,active:0}):"toggle"==a.value&&(r="toggleEvent",o={group:t.address}),e._executeRequest(r,o,{timeout:2e3},function(e){n&&n(e);});},buildQuery:function buildQuery(e,t,a){var n=null;return"on"==a.value?n={XC_FNC:"saveGroup",id:t.address,active:1}:"off"==a.value?n={XC_FNC:"saveGroup",id:t.address,active:0}:"toggle"==a.value&&(n={XC_FNC:"toggleEvent",group:t.address}),n;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){if(!t.type||"event"!=t.type.toLowerCase()||!t.adr||!t.state)return null;if(!e.type||"event"!=e.type.toLowerCase())return null;if(!e.address||e.address.toLowerCase()!=t.adr.toLowerCase())return null;var a=parseInt(t.state);return{state:a=a?"on":"off"};},generateActionCode:function generateActionCode(e,t){if(!t||!t.address||2!=t.address.length)return null;if(!e)return null;var a;switch(e.value){case"on":a="01";break;case"off":a="00";break;case"toggle":a="0F";break;default:return null;}return t.address+a;},parseActionCode:function parseActionCode(e,t){if(!e||4!=e.length)return null;if(!t||!t.address||2!=t.address.length)return null;var a=e.substr(0,2),n=e.substr(2,2);if(a.toLowerCase()!=t.address.toLowerCase())return null;var r={};switch(n.toUpperCase()){case"01":r.value="on";break;case"00":r.value="off";break;case"0F":r.value="toggle";break;default:return null;}return r;},DM:{TYPE:"EVENT",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Task System Variable"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n(null,t);}}},xnm.aio.gateway.systems.Task={executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?t&&t.address?this._executeCommand(e,t,a,n):n&&n(new Error("device address is empty")):n&&n(new Error("device command is empty")):n&&n(new Error("device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r,o;"on"==a.value?(r="SetTaskActive",o={id:t.address,active:!0}):"off"==a.value?(r="SetTaskActive",o={id:t.address,active:!1}):"toggle"==a.value?(r="ToggleTaskActive",o={id:t.address}):"run"==a.value&&(r="DoTask",o={id:t.address}),e._executeRequest(r,o,{timeout:2e3},function(e){n&&n(e);});},buildQuery:function buildQuery(e,t,a){var n=null;return"on"==a.value?n={XC_FNC:"SetTaskActive",id:t.address,active:!0}:"off"==a.value?n={XC_FNC:"SetTaskActive",id:t.address,active:!1}:"toggle"==a.value?n={XC_FNC:"ToggleTaskActive",id:t.address}:"run"==a.value&&("DoTask",params={id:t.address}),n;},handleStateCreator:function handleStateCreator(e,t,a){if(!t||!t.value)return null;var n=this._handleState(e,a);return n?n[t.value]:null;},_handleState:function _handleState(e,t){return t.type&&"task"==t.type.toLowerCase()&&t.id&&e.address&&e.address==t.id?{state:t.active?"on":"off"}:null;},DM:{TYPE:"TASK",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"run",ref:{value:"run"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Task System Variable"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.address?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter address is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n(null,t);}}},xnm.aio.gateway.systems.SGROUP={getGroups:function getGroups(e,t,a){e._executeRequest("GetStates",null,null,function(e,n){if(e)a&&a(e);else if(n&&0!=n.length){for(var r={},o={},s=0;s<n.length;s++){var i=n[s];if(i&&"SGROUP"==i.type&&i.sid){if(!t||i.sys==t){var u={sys:"aio",type:"SGROUP",sid:i.sid,deviceType:i.deviceType,data:"01"==i.deviceType?"switch":"blind",system:i.sys,name:i.name};r[i.sid]=u;}}else i&&i.group&&i.sid&&(t&&i.type!=t||(o[i.group]||(o[i.group]=[]),o[i.group].push(i.sid)));}for(var l in o){o[l]&&r[l]&&(r[l].devices=o[l]);}var m=[];for(var l in r){m.push(r[l]);}a&&a(null,m);}else a&&a(null,[]);});},createGroup:function createGroup(e,t,a,n,r){if(t){if(t){if(n){e._executeRequest("addSensor",{type:"SGROUP",deviceType:t,sys:a,data:n},null,function(e,o){if(e)r&&r(e);else if(o&&o.sid){var s={sys:"aio",type:"SGROUP",data:"01"==t?"switch":"blind",sid:o.sid,deviceType:t,system:a,name:n};r&&r(null,s);}else r&&r(new Error("invalid response"));});}else r&&r(new Error("group name invalid"));}else r&&r(new Error("system type invalid"));}else r&&r(new Error("device type invalid"));},deleteGroup:function deleteGroup(e,t,a){if(t){e._executeRequest("delSensor",{type:"SGROUP",id:t},null,function(e){a&&a(e);});}else a&&a(new Error("sid invalid"));},addDeviceToGroup:function addDeviceToGroup(e,t,a,n){if(t){if(a){e._executeRequest("AddLink",{id:t,group:a},null,function(e){n&&n(e);});}else n&&n(new Error("group sid invalid"));}else n&&n(new Error("device sid invalid"));},removeDeviceFromGroup:function removeDeviceFromGroup(e,t,a,n){if(t){if(a){e._executeRequest("DelLink",{id:t,group:a},null,function(e){n&&n(e);});}else n&&n(new Error("group sid invalid"));}else n&&n(new Error("device sid invalid"));},executeCommandCreator:function executeCommandCreator(e,t,a,n){t?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("it device command is empty")):n&&n(new Error("in device is null"));},_executeCommand:function _executeCommand(e,t,a,n){var r=this.buildQuery(e,t,a);if(r){var o=r.XC_FNC;delete r.XC_FNC,e._executeRequest(o,r,{method:"POST"},function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));},buildQuery:function buildQuery(e,t,a){if(!t)return null;if(t.system){var n=xnm.aio.gateway.systems[t.system];return n&&n.buildQuery?n.buildQuery(e,t,a):null;}return null;},DM:{TYPE:"SGROUP",getGatewayDeviceType:function getGatewayDeviceType(e){return{type:this.TYPE,name:"Group"};},getCommandStatusMap:function getCommandStatusMap(e){if(!e||!e.system)return null;var t=xnm.aio.gateway.systems[e.system];if(!t||!t.DM||!t.DM.getCommandStatusMap)return null;var a=t.DM.getCommandStatusMap(e);return a&&delete(a=JSON.parse(JSON.stringify(a))).status,a;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"data is invalid")):a(new n(r.INVALID,"sid is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.sid?e.data?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"data is invalid")):a(new n(r.INVALID,"sid is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e||!e.system)return null;var n=xnm.aio.gateway.systems[e.system];if(!n||!n.DM||!n.DM.toGeneralDevice)return null;var r=n.DM.toGeneralDevice(e,t,a);return r&&(delete r.states,r.details&&delete r.details.states),r;}}},xnm.aio.gateway.systems._IP_Device={mixin:function mixin(e){if(e){for(var t in this){if(this.hasOwnProperty(t)){if("DM"==t&&e.DM)for(var a in this.DM){this.DM.hasOwnProperty(a)&&(e.DM[a]||(e.DM[a]=this.DM[a]));}void 0!==e[t]&&null!=e[t]||this[t]&&(e[t]=this[t]);}}e.DM&&(e.DM.createDevice=this.DM.createDevice,e.DM.updateDevice=this.DM.updateDevice,e.DM.deleteDevice=this.DM.deleteDevice);}},executeCommandCreator:function executeCommandCreator(e,t,a,n){t&&t.id?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("device command is empty")):n&&n(new Error("device is invalid"));},_executeCommand:function _executeCommand(e,t,a,n){if(e.apiExecuteCommand){var r=this._buildQuery(e,t,a);if(r){var o=this,s=r.data;e.executeCommandForCommonDevice(s,function(t){if(!t){var a=o._statesAfterCommandTo;a||(a=0),setTimeout(function(){e.getStatesForCommonDevice(s.id,function(){},!0);},a);}n&&n(t);});}else n&&n(new Error("command format invalid"));}else n&&n(new Error("gateway do not have apiExecuteCommand"));},buildQuery:function buildQuery(e,t,a){return this._buildQuery(e,t,a);},_buildQuery:function _buildQuery(e,t,a){var n=this._buildData(e,t,a);return n?{fnc:"/api/command",data:n}:null;},getStatesCreator:function getStatesCreator(e,t,a){t&&t.id?this._getStates(e,t,a):a&&a(new Error("device is invalid"));},_getStates:function _getStates(e,t,a){if(e.apiGetStates){var n=this;e.apiGetStates(t.id,function(e,r){if(e)a&&a(e);else{var o=n._handleState(t,r);a&&a(null,o);}});}else a&&a(new Error("gateway do not have apiGetStates"));},getStatesBuffered:function getStatesBuffered(e,t){e.apiGetStates?e.apiGetStatesBuffered(function(e,a){e?t&&t(e):t&&t(null,a);}):t&&t(new Error("gateway do not have apiGetStates"));},_handleState:function _handleState(e,t){return t;},_requireGateway:function _requireGateway(){return!1;},_isGatewayJsonValid:function _isGatewayJsonValid(e){return!0;},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!0;},getGateways:function getGateways(e,t){if(e.getGateways){var a=this;e.getGateways(function(e,n){if(e)t&&t(e);else{var r=null;if(n)for(var o in r={},n){var s=n[o];s&&s.mod==a._getMod()&&(r[o]=s);}t&&t(null,r);}});}else t&&t(new Error("gateway has no getGateways function"));},getGateway:function getGateway(e,t,a){t?e.getGateway?e.getGateway(t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway has no getGateway function")):a&&a(new Error("gateway id invalid"));},addGateway:function addGateway(e,t,a){this._requireGateway()?(this._isGatewayJsonValid(t)||a&&a(new Error("gateway json invalid")),e.addGateway?e.addGateway(t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway has no addGateway function"))):a&&a(new Error("do not support gateway"));},updateGateway:function updateGateway(e,t,a){this._requireGateway()?(t.id||a&&a(new Error("gateway has no id")),this._isGatewayJsonValid(t)||a&&a(new Error("gateway json invalid")),e.setGateway?e.setGateway(t.id,t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway has no setGateway function"))):a&&a(new Error("do not support gateway"));},deleteGateway:function deleteGateway(e,t,a){this._requireGateway()?(t&&t.id||a&&a(new Error("gateway has no id")),e.deleteGateway?e.deleteGateway(t.id,function(e){a&&a(e);}):a&&a(new Error("gateway has no deleteGateway function"))):a&&a(new Error("do not support gateway"));},getDevices:function getDevices(e,t){if(e.getDevices){var a=this;e.getDevices(function(e,n){if(e)t&&t(e);else{var r=null;if(n)for(var o in r={},n){var s=n[o];s&&s.mod==a._getMod()&&(r[o]=s);}t&&t(null,r);}});}else t&&t(new Error("gateway has no getDevices function"));},getDevice:function getDevice(e,t,a){e.getDevice?t?e.getDevice(t,function(e,t){a&&a(e,t);}):a&&a(new Error("device id invalid")):a&&a(new Error("gateway has no getDevice function"));},addDevice:function addDevice(e,t,a){if(t){if(this._isDeviceJsonValid(t)||a&&a(new Error("device json invalid")),!this._requireGateway()||t.gid){if(e.addDevice){if(this._requireGateway()){if(!e.getGateway)return void(a&&a(new Error("gateway has no getGateway function")));var n=this;e.getGateway(t.gid,function(r,o){r?a&&a(r):o?n._isGatewayJsonValid(o)?e.addDevice(t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway #"+t.gid+" invalid")):a&&a(new Error("gateway #"+t.gid+" no exist"));});}else e.addDevice(t,function(e,t,n){a&&a(e,t,n);});}else a&&a(new Error("gateway has no addDevice function"));}else a&&a(new Error("device gid invalid"));}else a&&a(new Error("device json invalid"));},updateDevice:function updateDevice(e,t,a){if(t&&t.id){if(this._isDeviceJsonValid(t)||a&&a(new Error("device json invalid")),!this._requireGateway()||t.gid){if(e.setDevice){if(this._requireGateway()){if(!e.getGateway)return void(a&&a(new Error("gateway has no getGateway function")));var n=this;e.getGateway(t.gid,function(r,o){r?a&&a(r):o?n._isGatewayJsonValid(o)?e.setDevice(t.id,t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway #"+t.gid+" invalid")):a&&a(new Error("gateway #"+t.gid+" no exist"));});}else e.setDevice(t.id,t,function(e,t,n){a&&a(e,t,n);});}else a&&a(new Error("gateway has no setDevice function"));}else a&&a(new Error("device gid invalid"));}else a&&a(new Error("device json invalid"));},deleteDevice:function deleteDevice(e,t,a){t&&t.id||a&&a(new Error("device has no id")),e.deleteDevice?e.deleteDevice(t.id,function(e){a&&a(e);}):a&&a(new Error("gateway has no deleteDevice function"));},DM:{createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.common_type?e.mod?e.type?e.id?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter id is invalid")):a(new n(r.INVALID,"parameter type is invalid")):a(new n(r.INVALID,"parameter mod is invalid")):a(new n(r.INVALID,"parameter common_type is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.common_type?e.mod?e.type?e.id?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter id is invalid")):a(new n(r.INVALID,"parameter type is invalid")):a(new n(r.INVALID,"parameter mod is invalid")):a(new n(r.INVALID,"parameter common_type is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));}}},xnm.aio.gateway.systems.Sonos=function(){var e={_getMod:function _getMod(){return"sonos";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a)return null;var n={id:t.id};switch(a.value){case"volume":n.command="volume",n.value=a.ext;break;case"alarm":if(!a.ext)return null;n.command="alarm",n.value={};for(var r=0;r<a.ext.length;r++){var o=a.ext[r];if(o)switch(o.value){case"file":n.value.file=o.ext;break;case"volume":n.value.volume=o.ext;break;case"time":n.value.time=o.ext;}}break;case"play":case"pause":case"stop":case"previous":case"next":case"mute":case"unmute":n.command=a.value;break;default:return null;}return n;},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!!(e&&e.address&&e.type&&e.name)&&"sonos"==e.mod;},DM:{TYPE:"sonos",MAP:{speaker:{command:[{type:"enum",name:"play",ref:{value:"play"}},{type:"enum",name:"pause",ref:{value:"pause"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"previous",ref:{value:"previous"}},{type:"enum",name:"next",ref:{value:"next"}},{type:"enum",name:"mute",ref:{value:"mute"}},{type:"enum",name:"unmute",ref:{value:"unmute"}},{type:"int",name:"volume",ref:{value:"volume",ext:"%d",extMeta:"0-100"}},{type:"multi",name:"alarm",ref:{value:"alarm",ext:"%multi",extMeta:[{type:"string",name:"file",ref:{value:"file",ext:"%s"}},{type:"int",name:"volume",ref:{value:"volume",ext:"%d",extMeta:"0-100"}},{type:"int",name:"time",ref:{value:"time",ext:"%d",extMeta:"0-100",unit:"s"}}]}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["playing","paused"]}},{type:"int",name:"volume",ref:{value:"volume",ext:"%d",extMeta:"0-100",step:"1"}},{type:"enum",name:"muted",ref:{value:"muted",options:["true","false"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Sonos Speaker"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP.speaker;},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o,s=null,i=null,u=null,l=null;return(o=s||[]).push("sonos"),s=o,i=function(e,t){return t["%volume%"]={value:"volume",ext:"%d",extMeta:"0-100"},t["%next%"]={value:"next"},t["%play%"]={value:"play"},t["%stop%"]={value:"stop"},t["%previous%"]={value:"previous"},t;}(0,i||{}),u=function(e,t){return t["%volumeState%"]={value:"volume"},t;}(0,u||{}),l=function(e,t){return t;}(0,l||{}),e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.Alpha=function(){var e={_getMod:function _getMod(){return"alpha";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a)return null;var n={id:t.id};switch(a.value){case"temperature":case"mode":case"weekday":case"weekend":n.command=a.value,n.value=a.ext;break;case"disableVacation":n.command=a.value;break;case"vacation":if(!a.ext)return null;n.command="vacation",n.value={};for(var r=0;r<a.ext.length;r++){var o=a.ext[r];if(o)switch(o.value){case"start":n.value.start=o.ext;break;case"end":n.value.end=o.ext;}}break;default:return null;}return n;},_requireGateway:function _requireGateway(){return!0;},_isGatewayJsonValid:function _isGatewayJsonValid(e){return!(!e||!e.address||"alpha"!=e.type);},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!!(e&&e.address&&e.type&&e.name)&&"alpha"==e.mod;},DM:{TYPE:"alpha",MAP:{heater:{command:[{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"5-30",step:.2}},{type:"enum",name:"mode",ref:{value:"mode",ext:"%e",extMeta:["auto","day","night"]}},{type:"int",name:"weekday",ref:{value:"weekday",ext:"%d",extMeta:"0-3"}},{type:"int",name:"weekend",ref:{value:"weekend",ext:"%d",extMeta:"0-3"}},{type:"enum",name:"disable vacation",ref:{value:"disableVacation"}},{type:"multi",name:"vacation",ref:{value:"vacation",ext:"%multi",extMeta:[{type:"date",name:"start",ref:{value:"start",ext:"%date"}},{type:"date",name:"end",ref:{value:"end",ext:"%date"}}]}}],status:[{type:"float",name:"temperature",ref:{value:"state",ext:"%f"}},{type:"float",name:"current temperature",ref:{value:"temperature",ext:"%f"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","day","night"]}},{type:"int",name:"battery",ref:{value:"battery",ext:"%d"}},{type:"int",name:"signal",ref:{value:"signal",ext:"%d"}},{type:"int",name:"weekday",ref:{value:"weekday",ext:"%d"}},{type:"int",name:"weekend",ref:{value:"weekend",ext:"%d"}},{type:"int",name:"party",ref:{value:"party",ext:"%d"}},{type:"int",name:"vacation",ref:{value:"vacation",ext:"%d"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return[{type:this.TYPE,name:"Mhlenhoff Alpha"},{type:this.TYPE,name:"Blanke Home Activ"}];},getCommandStatusMap:function getCommandStatusMap(){return this.MAP.heater;},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);return{type:"heater",commands:{auto:{},day:{},night:{},tempTo:{value:{type:"FLOAT",min:5,max:30,step:.2}}},states:{setpoint:{type:"FLOAT",min:5,max:30,step:.2,unit:"C"},temperature:{type:"FLOAT"},mode:{values:["auto","day","night"]}},details:{commands:{auto:{value:"mode",ext:"auto"},day:{value:"mode",ext:"day"},night:{value:"mode",ext:"night"},tempTo:{value:"temperature"}},states:{setpoint:{value:"state"},temperature:{value:"temperature"},mode:{value:"mode"}}}};},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.Alpha._buildData({_hwv:"C1"},e,t);};if(!e)return null;var t=null;return(t={type:"heater",address:e.address,commands:{auto:{type:"POST",url:"/api/command",data:_getData(e,{value:"mode",ext:"auto"})},day:{type:"POST",url:"/api/command",data:_getData(e,{value:"mode",ext:"day"})},night:{type:"POST",url:"/api/command",data:_getData(e,{value:"mode",ext:"night"})},value:{type:"POST",url:"/api/command",data:_getData(e,{value:"temperature",ext:"5"}),"float":1,min:5,max:30,step:.2}},states:{setpoint:{type:"FLOAT",min:5,max:30,step:.2,unit:"C"},temperature:{type:"FLOAT"},mode:{values:["auto","day","night"]}}}).commands.value.data.value="{val}",t;},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o,s=null,i=null,u=null,l=null;return(o=s||[]).push("moehlenhoff"),s=o,i=function(e,t){return t["%weekday%"]={value:"weekday"},t["%weekend%"]={value:"weekend"},t["%temperature%"]={value:"temperature",ext:"%f",extMeta:"5-30",step:"0.2"},t["%mode%"]={value:"mode"},t;}(0,i||{}),u=function(e,t){return t["%weekdayState%"]={value:"weekday"},t["%weekendState%"]={value:"weekend"},t["%modeState%"]={value:"mode"},t["%temperatureState%"]={value:"state"},t;}(0,u||{}),l=function(e,t){return t;}(0,l||{}),e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.Fritz=function(){var e={_statesAfterCommandTo:200,_getMod:function _getMod(){return"fritz";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a)return null;var n={id:t.id};switch(a.value){case"temperature":n.command=a.value,n.value=a.ext;break;case"on":case"off":case"toggle":n.command=a.value;break;default:return null;}return n;},_requireGateway:function _requireGateway(){return!0;},_isGatewayJsonValid:function _isGatewayJsonValid(e){return!(!e||!e.address||"fritz"!=e.type);},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!!(e&&e.address&&e.type&&e.name)&&"fritz"==e.mod;},DM:{TYPE:"fritz",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"float",name:"power",ref:{value:"power",ext:"%f"}}]},heater:{command:[{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"8-28",step:.5}}],status:[{type:"string",name:"state",ref:{value:"state",ext:"%s"}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f"}},{type:"int",name:"battery",ref:{value:"battery",ext:"%d"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Fritz"};},getCommandStatusMap:function getCommandStatusMap(e){if(!e)return null;switch(e.type){case"switch":return this.MAP["switch"];case"heater":return this.MAP.heater;default:return null;}},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.type){case"switch":n={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},power:{type:"FLOAT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"state"},power:{type:"power"}}}};break;case"heater":n={type:"heater",commands:{tempTo:{value:{type:"FLOAT",min:8,max:28,step:.5}}},states:{setpoint:{type:"FLOAT",min:8,max:28,step:.5,unit:"C"},temperature:{type:"FLOAT"}},details:{commands:{tempTo:{value:"temperature"}},states:{setpoint:{value:"state"},temperature:{value:"temperature"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.Fritz._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=null;switch(e.type){case"switch":t={type:"switch",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"on"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})},toggle:{type:"POST",url:"/api/command",data:_getData(e,{value:"toggle"})}},states:{state:{values:["on","off"]}}};break;case"heater":t={type:"heater",commands:{value:{type:"POST",url:"/api/command",data:{id:e.id,command:"temperature",value:"{val}"},"float":1,min:8,max:28,step:.5}},states:{temperature:{min:8,max:28,unit:"%"}}};}return t;},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o,s=null,i=null,u=null,l=null;return(o=s||[]).push("fritz"),s=o,i=function(e,t){return t["%thermoTempTo%"]={value:"temperature",ext:"%f",extMeta:"8-28",step:.5},t;}(0,i||{}),u=function(e,t){return t["%thermoSetTemp%"]={value:"state"},t["%thermoCurrentTemp%"]={value:"temperature"},t;}(0,u||{}),l=function(e,t){return t;}(0,l||{}),e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.Hautau=function(){var e={_statesAfterCommandTo:200,_getMod:function _getMod(){return"hautau";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a||!a.value)return null;var n={id:t.id};return n.command=a.value,(a.ext||0===a.ext)&&(n.value=a.ext),n;},_requireGateway:function _requireGateway(){return!0;},_isGatewayJsonValid:function _isGatewayJsonValid(e){return!(!e||!e.address||"hautau"!=e.type);},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!(!e||!e.address&&0!==e.address||!e.type||!e.name)&&"hautau"==e.mod;},DM:{TYPE:"hautau",MAP:{temperature:{command:[],status:[{type:"float",name:"temperature",ref:{value:"state",ext:"%f",extMeta:"0-40"}},{type:"int",name:"humidity",ref:{value:"humidity",ext:"%d"}},{type:"int",name:"co2",ref:{value:"co2",ext:"%d",extMeta:"350-2000"}}]},drive:{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["partly_open","open","closed"]}}]},hscd:{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}}]},hscdi:{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"lock",ref:{value:"lock"}},{type:"enum",name:"unlock",ref:{value:"unlock"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed"]}},{type:"enum",name:"locked",ref:{value:"locked",options:["true","false"]}}]},fan:{command:[{type:"int",name:"set fan level",ref:{value:"level",ext:"%d",extMeta:"0-3",unit:""}},{type:"enum",name:"fan level up",ref:{value:"up"}},{type:"enum",name:"fan level down",ref:{value:"down"}},{type:"enum",name:"enable keys",ref:{value:"enableKeys"}},{type:"enum",name:"disable keys",ref:{value:"disableKeys"}}],status:[{type:"int",name:"level",ref:{value:"state",ext:"%d",extMeta:"0-3",unit:""}},{type:"int",name:"filter",ref:{value:"filter",ext:"%d"}},{type:"enum",name:"change",ref:{value:"change",options:["true","false"]}},{type:"enum",name:"keys",ref:{value:"keys",options:["true","false"]}}]},ventra2:{command:[{type:"int",name:"set fan level",ref:{value:"level",ext:"%d",extMeta:"0-5",unit:""}},{type:"enum",name:"fan level up",ref:{value:"up"}},{type:"enum",name:"fan level down",ref:{value:"down"}},{type:"enum",name:"enable keys",ref:{value:"enableKeys"}},{type:"enum",name:"disable keys",ref:{value:"disableKeys"}}],status:[{type:"int",name:"level",ref:{value:"state",ext:"%d",extMeta:"0-5",unit:""}},{type:"int",name:"filter",ref:{value:"filter",ext:"%d"}},{type:"enum",name:"change",ref:{value:"change",options:["true","false"]}},{type:"enum",name:"keys",ref:{value:"keys",options:["true","false"]}},{type:"float",name:"temperature",ref:{value:"temperature",ext:"%f",extMeta:"0-40"}},{type:"int",name:"humidity",ref:{value:"humidity",ext:"%d"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Hautau"};},getCommandStatusMap:function getCommandStatusMap(e){return e?105===e.model?this.MAP.ventra2:this.MAP[e.type]:null;},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;var n=e.type;if(105==e.model&&(n="ventra2"),"v5"==a)return this.toGeneralDeviceV5(e);var r=null;switch(n){case"temperature":r={type:"temp",commands:{},states:{state:{type:"FLOAT"},humidity:{type:"INT"},co2:{type:"INT"}},details:{commands:{},states:{state:{value:"state"},humidity:{value:"humidity"},co2:{value:"co2"}}}};break;case"drive":r={type:"window",commands:{open:{},close:{},stop:{}},states:{state:{values:["open","closed"]}},details:{commands:{open:{value:"open"},close:{value:"close"},stop:{value:"stop"}},states:{state:{value:"state"}}}};break;case"hscd":r={type:"door",commands:{open:{},close:{},stop:{},lock:{},unlock:{}},states:{state:{values:["open","closed"]},locked:{values:[!1,!0]}},details:{commands:{open:{value:"open"},close:{value:"close"},stop:{value:"stop"},lock:{value:"lock"},unlock:{value:"unlock"}},states:{state:{value:"state"},locked:{value:"state"}}}};break;case"fan":r={type:"fan",commands:{level:{},up:{},down:{},enableKeys:{},disableKeys:{}},states:{state:{type:"INT",min:0,max:3},filter:{type:"INT"},change:[!1,!0],keys:[!1,!0]},details:{commands:{level:{value:{type:"INT",min:0,max:3}},up:{value:"up"},down:{value:"down"},enableKeys:{value:"enableKeys"},disableKeys:{value:"disableKeys"}},states:{state:{value:"state"},filter:{value:"filter"},change:{value:"change"},keys:{value:"locked"}}}};break;case"ventra2":r={type:"fan",commands:{level:{},up:{},down:{},enableKeys:{},disableKeys:{}},states:{state:{type:"INT",min:0,max:5},filter:{type:"INT"},change:[!1,!0],keys:[!1,!0],temperature:{type:"FLOAT"},humidity:{type:"INT"}},details:{commands:{level:{value:{type:"INT",min:0,max:5}},up:{value:"up"},down:{value:"down"},enableKeys:{value:"enableKeys"},disableKeys:{value:"disableKeys"}},states:{state:{value:"state"},filter:{value:"filter"},change:{value:"change"},keys:{value:"locked"},temperature:{value:"temperature"},humidity:{value:"humidity"}}}};}return r;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.Hautau._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=e.type;105==e.model&&(t="ventra2");var a=null;switch(t){case"temperature":a={type:"temperature",commands:{},states:{state:{type:"FLOAT",min:0,max:40},humidity:{type:"INT"},co2:{type:"INT",min:350,max:2e3}}};break;case"drive":a={type:"window",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"open"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"close"})}},states:{state:{values:["open","closed"]}}};break;case"hscd":a={type:"door",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"open"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"close"})}},states:{state:{values:["open","closed"]}}};break;case"hscdi":a={type:"door",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"open"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"close"})},lock:{type:"POST",url:"/api/command",data:_getData(e,{value:"lock"})},unlock:{type:"POST",url:"/api/command",data:_getData(e,{value:"unlock"})}},states:{state:{values:["open","closed"]},locked:{values:[!1,!0]}}};break;case"fan":a={type:"fan",commands:{value:{type:"POST",url:"/api/command",data:{id:e.id,command:"level",value:"{val}"},"float":1,min:0,max:3},up:{type:"POST",url:"/api/command",data:_getData(e,{value:"up"})},down:{type:"POST",url:"/api/command",data:_getData(e,{value:"down"})},enableKeys:{type:"POST",url:"/api/command",data:_getData(e,{value:"enableKeys"})},disableKeys:{type:"POST",url:"/api/command",data:_getData(e,{value:"disableKeys"})}},states:{state:{type:"INT"},filter:{type:"INT"},change:[!1,!0],keys:[!1,!0]}};break;case"ventra2":a={type:"fan",commands:{value:{type:"POST",url:"/api/command",data:{id:e.id,command:"level",value:"{val}"},"float":1,min:0,max:5},up:{type:"POST",url:"/api/command",data:_getData(e,{value:"up"})},down:{type:"POST",url:"/api/command",data:_getData(e,{value:"down"})},enableKeys:{type:"POST",url:"/api/command",data:_getData(e,{value:"enableKeys"})},disableKeys:{type:"POST",url:"/api/command",data:_getData(e,{value:"disableKeys"})}},states:{state:{type:"INT"},filter:{type:"INT"},change:[!1,!0],keys:[!1,!0],temperature:{type:"FLOAT",min:0,max:40},humidity:{type:"INT"}}};}return a;},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){var o=["hscd","hscdi"];if(!t)return null;var s=function(e,t){return o.includes(e.subtype)&&t.push("contact"),t.push("hautau"),t;}(t,[]),i=function(e,t){return t["%thermoTempTo%"]={value:"temperature",ext:"%f",extMeta:"8-28",step:.5},t;}(0,{}),u=function(e,t){return o.includes(e.subtype)?t["%contactState%"]={value:"state"}:(t["%thermoSetTemp%"]={value:"state"},t["%thermoCurrentTemp%"]={value:"temperature"}),t;}(t,{}),l=function(e,t){return t;}(0,{});return e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.Gealan=function(){var e={_statesAfterCommandTo:200,_getMod:function _getMod(){return"gealan";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a||!a.value)return null;var n={id:t.id};return n.command=a.value,(a.ext||0===a.ext)&&(n.value=a.ext),n;},_requireGateway:function _requireGateway(){return!1;},_isGatewayJsonValid:function _isGatewayJsonValid(e){return!(!e||!e.address||"gealan"!=e.type);},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!(!e||!e.address&&0!==e.address||!e.type||!e.name)&&"gealan"==e.mod;},DM:{TYPE:"gealan",MAP:{fan:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"level up",ref:{value:"up"}},{type:"enum",name:"level down",ref:{value:"down"}},{type:"enum",name:"set mode",ref:{value:"mode",ext:"%e",extMeta:["auto","manu"]}},{type:"int",name:"set level",ref:{value:"level",ext:"%d",extMeta:"0-5"}}],status:[{type:"int",name:"state",ref:{value:"state",ext:"%d"}},{type:"enum",name:"mode",ref:{value:"mode",options:["manu","auto","night_in","night_out","flap_closed","frost_protection"]}},{type:"enum",name:"sleep",ref:{value:"sleep",options:["true","false"]}},{type:"float",name:"temperature inside",ref:{value:"temperature",ext:"%d"}},{type:"float",name:"temperature outside",ref:{value:"temperature2",ext:"%d"}},{type:"int",name:"humidity inside",ref:{value:"humidity",ext:"%d"}},{type:"int",name:"humidity outside",ref:{value:"humidity2",ext:"%d"}},{type:"int",name:"filter",ref:{value:"filter",ext:"%d"}},{type:"string",name:"error message",ref:{value:"error",ext:"%s"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Gealan"};},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.type?this.MAP[e.type]:null;},toGeneralDevice:function toGeneralDevice(e,t,a){return e&&"v5"==a?this.toGeneralDeviceV5(e):null;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.Hautau._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=null;if("fan"===e.type)t={type:"fan",commands:{value:{type:"POST",url:"/api/command",data:{id:e.id,command:"level",value:"{val}"},"float":1,min:0,max:5},up:{type:"POST",url:"/api/command",data:_getData(e,{value:"up"})},down:{type:"POST",url:"/api/command",data:_getData(e,{value:"down"})}},states:{state:{type:"INT"},filter:{type:"INT"},temperature:{type:"FLOAT"},temperature2:{type:"FLOAT"},humidity:{type:"INT"},humidity2:{type:"INT"}}};return t;},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o,s=null,i=null,u=null,l=null;return(o=s||[]).push("gealan"),s=o,i=function(e,t){return t;}(0,i||{}),u=function(e,t){return t;}(0,u||{}),l=function(e,t){return t;}(0,l||{}),e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.Siegenia=function(){var e={_getMod:function _getMod(){return"siegenia";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(a){var n={id:t.id};switch(a.value){case"open":case"on":case"enableEco":case"enableTimer":case"position":case"mode":case"level":n.command=a.value,(0==a.ext||a.ext)&&(n.value=a.ext);break;case"disableEco":case"disableTimer":case"close":case"stop":case"lock":case"off":n.command=a.value;break;default:return null;}return n;}},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!!(e&&e.address&&e.type&&e.name)&&"siegenia"==e.mod;},DM:{TYPE:"siegenia",MAP:{window:{command:[{type:"int",name:"open",ref:{value:"open",ext:"%d",extMeta:"1-720",unit:"min"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"lock",ref:{value:"lock"}},{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"1-2",unit:""}},{type:"int",name:"enable timer",ref:{value:"enableTimer",ext:"%d",extMeta:"1-720",unit:"min"}},{type:"enum",name:"disable timer",ref:{value:"disbaleTimer"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["open","closed","tilted","partly_open"]}},{type:"enum",name:"locked",ref:{value:"locked",options:["true","false"]}},{type:"int",name:"time",ref:{value:"time",ext:"%d",unit:"min"}},{type:"enum",name:"mode",ref:{value:"mode",options:["day","night"]}}]},door:"window",geniusB:{command:[{type:"int",name:"open",ref:{value:"open",ext:"%d",extMeta:"1-720",unit:"sec"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"int",name:"enable timer",ref:{value:"enableTimer",ext:"%d",extMeta:"1-720",unit:"sec"}},{type:"enum",name:"disable timer",ref:{value:"disbaleTimer"}},{type:"enum",name:"mode",ref:{value:"mode",options:["day","night"]}}]},geniusA:{command:[{type:"int",name:"open",ref:{value:"open",ext:"%d",extMeta:"1-720",unit:"sec"}},{type:"enum",name:"close",ref:{value:"close"}}]},fan:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"level",ref:{value:"level",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"enable eco",ref:{value:"enableEco",ext:"%d",extMeta:"1-720",unit:"min"}},{type:"enum",name:"disable eco",ref:{value:"disableEco"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"power",ref:{value:"power",options:["on","off"]}},{type:"float",name:"temperature",ref:{value:"temperature",unit:"C"}},{type:"float",name:"temperature2",ref:{value:"temperature2",unit:"C"}},{type:"int",name:"humidity",ref:{value:"humidity",unit:"%"}},{type:"int",name:"humidity2",ref:{value:"humidity2",unit:"%"}},{type:"enum",name:"mode",ref:{value:"mode",options:["auto","manu"]}},{type:"enum",name:"eco",ref:{value:"eco",options:["true","false"]}},{type:"int",name:"airquality",ref:{value:"airquality"}},{type:"int",name:"time",ref:{value:"time",unit:"min"}}]},aeropac:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"level",ref:{value:"level",ext:"%d",extMeta:"0-7"}}],status:[{type:"int",name:"state",ref:{value:"state"}},{type:"enum",name:"power",ref:{value:"power",options:["on","off"]}}]}},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.type){case"window":case"door":n={type:e.type,commands:{open:{value:{type:"INT",min:1,max:720,step:5}},close:{},stop:{},lock:{},position:{values:["1","2"],extended:{value:{values:["1","2"]},duration:{value:{type:"INT",min:1,max:720,step:5}}}},enableTimer:{value:{type:"INT",min:1,max:720,step:5}},disableTimer:{},mode:{values:["day","night"]}},states:{state:{values:["open","closed","tilted","partly_open"]},locked:[!0,!1],time:{value:"INT"}},details:{}};break;case"fan":n={type:"fan",commands:{on:{value:{type:"INT",min:1,max:720,step:5}},off:{},enableEco:{value:{type:"INT",min:1,max:720,step:5}},disableEco:{},mode:{values:["auto","manu"]},level:{value:{type:"INT",min:0,max:100,step:1},extended:{value:{type:"INT",min:0,max:100,step:1},duration:{value:{type:"INT",min:1,max:720,step:5}}}}},states:{state:{type:"INT"},power:{values:["on","off"]},temperature:{type:"FLOAT"},temperature2:{type:"FLOAT"},humidity:{type:"INT"},humidity2:{type:"INT"},mode:{values:["auto","manu"]},eco:[!0,!1],airquality:{type:"INT"},time:{type:"INT"}},details:{}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.Siegenia._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=null;switch(e.type){case"door":case"window":t={type:"data",commands:{open:{type:"POST",url:"/api/command",data:{id:e.id,command:"open",value:"{val}"},"int":1,min:1,max:720,step:5},close:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})},lock:{type:"POST",url:"/api/command",data:_getData(e,{value:"lock"})},stop:{type:"POST",url:"/api/command",data:_getData(e,{value:"stop"})},position:{}},states:{state:["open","closed","tilted","partly_open"],locked:[!0,!1],time:{type:"INT"}}};break;case"fan":t={type:"fan",commands:{off:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})},on:{type:"POST",url:"/api/command",data:_getData(e,{value:"on"})},enableEco:{type:"POST",url:"/api/command",data:_getData(e,{value:"enableEco"})},disableEco:{type:"POST",url:"/api/command",data:_getData(e,{value:"disableEco"})},mode:{},level:{}},states:{state:{type:"INT"},power:["on","off"],temperature:{type:"FLOAT"},temperature2:{type:"FLOAT"},humidity:{type:"INT"},humidity2:{type:"INT"},mode:["auto","manu"],eco:[!0,!1],airquality:{type:"INT"},time:{type:"INT"}}};}return t;},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"siegenia"};},getCommandStatusMap:function getCommandStatusMap(e){if(!e)return null;switch(e.type){case"door":case"window":switch(e.subtype){case"geniusB":return this.MAP.geniusB;case"geniusA":return this.MAP.geniusA;}return this.MAP.window;case"fan":return"aeropac"===e.subtype?this.MAP.aeropac:this.MAP.fan;default:return this.MAP[e.type];}},supportSmartWidget:function supportSmartWidget(e,t){return!0;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){if(!t)return null;var o,s=null,i=null,u=null,l=null;return(o=s||[]).push("siegenia"),s=o,i=function(e,t){return t;}(0,i||{}),u=function(e,t){return t;}(0,u||{}),l=function(e,t){return t;}(0,l||{}),e._injectToSmartWidgetTemplate(n,s,r,i,u,l);}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.Nanoleaf=function(){var e={_getMod:function _getMod(){return"nanoleaf";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a)return null;var n={id:t.id};switch(a.value){case"brightness":case"color":case"scene":n.command=a.value,n.value=a.ext;break;case"on":case"off":n.command=a.value;break;default:return null;}return n;},_handleState:function _handleState(e,t){return t&&"off"==t.state&&(t.brightness=0),t;},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!!(e&&e.address&&e.type&&e.user)&&"nanoleaf"==e.mod;},DM:{TYPE:"nanoleaf",MAP:{light:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100"}},{type:"rgb",name:"color",ref:{value:"color",ext:"%rgb"}},{type:"string",name:"scene",ref:{value:"scene",ext:"%s"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100",step:"1"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Nanoleaf"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP.light;},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;if("light"===e.type)n={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100,step:1}},color:{value:{type:"RGB"}},white:{}},states:{state:{values:["on","off"]},brightness:{min:0,max:100,unit:"%"}},details:{commands:{on:{value:"on"},off:{value:"off"},brightness:{value:"brightness"},color:{value:"color"},white:{value:"color",ext:"FFFFFF"}},states:{state:{value:"state"},brightness:{value:"brightness"}}}};return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.Nanoleaf._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=null;if("light"===e.type)(t={type:"dimmer",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"on"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})},value:{type:"POST",url:"/api/command",data:_getData(e,{value:"brightness",ext:"5"}),min:0,max:100,step:1}},states:{state:{values:["on","off"]},brightness:{type:"INT"}}}).commands.value.data.value="{val}";return t;}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.Eltako=function(){var e={_getMod:function _getMod(){return"eltako";},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a)return null;var n={id:t.id};switch(a.value){case"on":case"off":n.command=a.value;break;default:return null;}return n;},_handleState:function _handleState(e,t){return t;},_isDeviceJsonValid:function _isDeviceJsonValid(e){return!!(e&&e.address&&e.type)&&"eltako"==e.mod;},search:function search(e,t){var a=require("x.mdns.js");a.clearRecordBuffer(),a.discoverServiceWithTimeout("_hap._tcp.local",e,function(e,a){if(e)t&&t(e);else{for(var n=[],r=0;r<a.length;r++){var o=a[r];if(o&&o.info&&o.info.md&&"FSR64"==o.info.md){var s={sys:"aio",common_type:"dev",mod:"eltako",address:o.ip[0],mac:o.info.id,type:"switch",name:o.domain.substr(0,o.domain.indexOf("."))};n.push(s);}}t&&t(null,n);}});},DM:{TYPE:"eltako",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Eltako"};},getCommandStatusMap:function getCommandStatusMap(){return this.MAP["switch"];},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.type){case"switch":case"light":n={type:"switch",commands:{on:{},off:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"}},states:{state:{value:"state"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.Eltako._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=null;switch(e.type){case"switch":case"light":t={type:"switch",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"on"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})}},states:{state:{values:["on","off"]}}};}return t;}}};return xnm.aio.gateway.systems._IP_Device.mixin(e),e;}(),xnm.aio.gateway.systems.DeviceGroup={convertToGroupDevice:function convertToGroupDevice(e,t){return t?t.common_type?"dev"==t.common_type?{id:t.id}:null:t.sid?{device:{id:t.sid}}:{device:{sys:t.type,address:t.address}}:null;},executeCommandCreator:function executeCommandCreator(e,t,a,n){t&&t.id?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("device command is empty")):n&&n(new Error("device is invalid"));},_executeCommand:function _executeCommand(e,t,a,n){if(e.apiExecuteCommand){var r=this._buildQuery(e,t,a);if(r){var o=r.data;e.executeCommandForCommonDevice(o,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));}else n&&n(new Error("gateway do not have apiExecuteCommand"));},buildQuery:function buildQuery(e,t,a){return this._buildQuery(e,t,a);},_buildQuery:function _buildQuery(e,t,a){var n=this._buildData(e,t,a);return n?{fnc:"/api/command",data:n}:null;},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a||!a.value)return null;var n={group:t.id};switch(a.value){case"brightness":case"temperature":case"position":n.command=a.value,n.value=a.ext;break;default:n.command=a.value;}return n;},getGroups:function getGroups(e,t){e.getGroups?e.getGroups(function(e,a){t&&t(e,a);}):t&&t(new Error("gateway has no getGroups function"));},getGroup:function getGroup(e,t,a){e.getGroup?t?e.getGroup(t,function(e,t){a&&a(e,t);}):a&&a(new Error("group id invalid")):a&&a(new Error("gateway has no getGroup function"));},addGroup:function addGroup(e,t,a){this._isGroupJsonValid(t)||a&&a(new Error("group json invalid")),e.addGroup?e.addGroup(t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway has no addGroup function"));},updateGroup:function updateGroup(e,t,a){t.id||a&&a(new Error("group has no id")),this._isGroupJsonValid(t)||a&&a(new Error("gateway json invalid")),e.setGroup?e.setGroup(t.id,t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway has no setGroup function"));},deleteGroup:function deleteGroup(e,t,a){t&&t.id||a&&a(new Error("group has no id")),e.deleteGroup?e.deleteGroup(t.id,function(e){a&&a(e);}):a&&a(new Error("gateway has no deleteGroup function"));},_isGroupJsonValid:function _isGroupJsonValid(e){return!(!e||!e.type);},DM:{TYPE:"group",MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100",step:"1"}}]},shutter:{command:[{type:"enum",name:"move up",ref:{value:"up"}},{type:"enum",name:"move down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}}]},blind:{command:[{type:"enum",name:"move up",ref:{value:"up"}},{type:"enum",name:"move down",ref:{value:"down"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"int",name:"position",ref:{value:"position",ext:"%d",extMeta:"0-100",step:"1"}}]},heater:{command:[{type:"float",name:"set temperature",ref:{value:"temperature",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",unit:"C"}}]}},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Device Group"};},getCommandStatusMap:function getCommandStatusMap(e){return e&&e.type?this.MAP[e.type]:null;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.common_type?e.id?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter id is invalid")):a(new n(r.INVALID,"parameter common_type is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.common_type?e.id?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter id is invalid")):a(new n(r.INVALID,"parameter common_type is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));},toGeneralDevice:function toGeneralDevice(e,t,a){if(!e)return null;if("v5"==a)return this.toGeneralDeviceV5(e);var n=null;switch(e.type){case"switch":n={type:"switch",commands:{on:{},off:{}},details:{commands:{on:{value:"on"},off:{value:"off"}}}};break;case"dimmer":n={type:"dimmer",commands:{on:{},off:{},brightness:{}},details:{commands:{on:{value:"on"},off:{value:"off"},brightness:{value:"brightness"}}}};break;case"shutter":n={type:"shutter",commands:{up:{},down:{},stop:{}},details:{commands:{up:{value:"up"},down:{value:"down"},stop:{value:"stop"}}}};break;case"heater":n={type:"heater",commands:{temperature:{}},details:{commands:{temperature:{value:"temperature"}}}};}return n;},toGeneralDeviceV5:function toGeneralDeviceV5(e){var _getData=function _getData(e,t){return xnm.aio.gateway.systems.DeviceGroup._buildData({_hwv:"C1"},e,t);};if(!e||!e.type)return null;var t=null;switch(e.type){case"switch":t={type:"switch",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"on"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})}}};break;case"dimmer":t={type:"dimmer",commands:{on:{type:"POST",url:"/api/command",data:_getData(e,{value:"on"})},off:{type:"POST",url:"/api/command",data:_getData(e,{value:"off"})},value:{type:"POST",url:"/api/command",data:_getData(e,{value:"brightness",ext:"{val}"}),min:0,max:100,step:1}}};break;case"shutter":t={type:"shutter",commands:{up:{type:"POST",url:"/api/command",data:_getData(e,{value:"up"})},down:{type:"POST",url:"/api/command",data:_getData(e,{value:"down"})},stop:{type:"POST",url:"/api/command",data:_getData(e,{value:"stop"})},value:{type:"POST",url:"/api/command",data:_getData(e,{value:"position",ext:"{val}"}),min:0,max:100,step:1}}};break;case"heater":t={type:"heater",commands:{value:{type:"POST",url:"/api/command",data:_getData(e,{value:"temperature",ext:"{val}"}),min:4.5,max:30.5,step:.5}}};}return t;}}},xnm.aio.gateway.systems.Action={convertToActionItem:function convertToActionItem(e,t,a){if(!t)return null;var n=xnm.aio.gateway.DM.getSystem(t,e.toJSON());if(!n||!n._buildQuery)return null;var r=n._buildQuery(e,t,a);return t.common_type?"dev"==t.common_type&&r&&r.data?r.data:null:t.sid?r&&r.data?(r.data.device={id:t.sid},r.data):null:{device:{sys:t.type,address:t.address},command:a.value,value:a.ext};},executeCommandCreator:function executeCommandCreator(e,t,a,n){t&&t.id?a&&a.value?this._executeCommand(e,t,a,n):n&&n(new Error("device command is empty")):n&&n(new Error("device is invalid"));},_executeCommand:function _executeCommand(e,t,a,n){if(e.apiExecuteCommand){var r=this._buildQuery(e,t,a);if(r){var o=r.data;e.doAction(o.id,function(e){n&&n(e);});}else n&&n(new Error("command format invalid"));}else n&&n(new Error("gateway do not have apiExecuteCommand"));},buildQuery:function buildQuery(e,t,a){return this._buildQuery(e,t,a);},_buildQuery:function _buildQuery(e,t,a){var n=this._buildData(e,t,a);return n?{fnc:"/api/action",data:n}:null;},_buildData:function _buildData(e,t,a){if(!t.id)return null;if(!a||!a.value)return null;var n={id:t.id};if("run"===a.value);else n=null;return n;},getActions:function getActions(e,t){e.getActions?e.getActions(function(e,a){t&&t(e,a);}):t&&t(new Error("gateway has no getActions function"));},getAction:function getAction(e,t,a){e.getAction?t?e.getAction(t,function(e,t){a&&a(e,t);}):a&&a(new Error("action id invalid")):a&&a(new Error("gateway has no getAction function"));},addAction:function addAction(e,t,a){this._isActionJsonValid(t)||a&&a(new Error("action json invalid")),e.addAction?e.addAction(t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway has no addAction function"));},updateAction:function updateAction(e,t,a){t.id||a&&a(new Error("action has no id")),this._isActionJsonValid(t)||a&&a(new Error("action json invalid")),e.setAction?e.setAction(t.id,t,function(e,t,n){a&&a(e,t,n);}):a&&a(new Error("gateway has no setAction function"));},deleteAction:function deleteAction(e,t,a){t&&t.id||a&&a(new Error("action has no id")),e.deleteAction?e.deleteAction(t.id,function(e){a&&a(e);}):a&&a(new Error("gateway has no deleteAction function"));},_isActionJsonValid:function _isActionJsonValid(e){return!!e;},DM:{TYPE:"action",MAP:{command:[{type:"enum",name:"run",ref:{value:"run"}}]},getGatewayDeviceType:function getGatewayDeviceType(){return{type:this.TYPE,name:"Action"};},getCommandStatusMap:function getCommandStatusMap(e){return this.MAP;},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.common_type?e.id?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter id is invalid")):a(new n(r.INVALID,"parameter common_type is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;e.common_type?e.id?a(null,JSON.parse(JSON.stringify(e))):a(new n(r.INVALID,"parameter id is invalid")):a(new n(r.INVALID,"parameter common_type is invalid"));},deleteDevice:function deleteDevice(e,t,a,n){n&&n(null,JSON.parse(JSON.stringify(t)));}}},xnm.aio.gateway.RemoteModeSetting={_buf:{},getRemoteModeSetting:function getRemoteModeSetting(e){var t=this._buf[e];return t&&t.setting?t.setting:"off";},setRemoteModeSetting:function setRemoteModeSetting(e,t){var a=this._buf[e];a||(this._buf[e]={},a=this._buf[e]),a.setting=t,"on"==t?a.state="remote":"off"==t&&(a.state="local");},getRemoteModeState:function getRemoteModeState(e){var t=this._buf[e];return t&&t.state?t.state:"local";},setRemoteModeState:function setRemoteModeState(e,t){var a=this._buf[e];a||(this._buf[e]={},a=this._buf[e]),a.state=t;}},xnm.aio.gateway.EventListener={_logger:null,_listeners:[],_socket:null,_socket1901:null,_socket1902:null,_socket1905:null,_running:!1,_running1901:!1,_startCallbacks:{},start:function start(e,t){if(!this._logger){var a=require("x.logger.js");this._logger=a?a.getLogger("xnm.aio.gateway.EventListener"):{log:function log(){}};}if(this._running&&this._socket)return this._listeners=[e],t&&t();if(this._startCallbacks[1902]||(this._startCallbacks[1902]=[]),t&&-1==this._startCallbacks[1902].indexOf(t)&&this._startCallbacks[1902].push(t),this._startCallbacks[1905]||(this._startCallbacks[1905]=[]),t&&-1==this._startCallbacks[1905].indexOf(t)&&this._startCallbacks[1905].push(t),this.addListener(e),!this._running){var n=this;this._running=!0,this._logger.log("debug","start listen to port 1902"),this._startPort(1902,function(e,t){e?(n._running=!1,n._logger.log("debug","failed to listen to port 1902:"+e.message)):n._logger.log("debug","listen to port 1902 success"),n._socket=t,n._socket1902=t;var a=n._startCallbacks[1902];delete n._startCallbacks[1902];for(var r=0;r<a.length;r++){a[r](e);}}),this._logger.log("debug","start listen to port 1905"),this._startPort(1905,function(e,t){e?(n._running=!1,n._logger.log("debug","failed to listen to port 1905:"+e.message)):n._logger.log("debug","listen to port 1905 success"),n._socket=t,n._socket1905=t;var a=n._startCallbacks[1905];delete n._startCallbacks[1905];for(var r=0;r<a.length;r++){a[r](e);}});}},stop:function stop(e){this._running=!1,this._socket1902&&(this._socket1902.close(),this._socket1902=null),this._socket1905&&(this._socket1905.close(),this._socket1905=null),this._socket=null,e&&e();},startPort1901:function startPort1901(e){if(!this._logger){var t=require("x.logger.js");this._logger=t?t.getLogger("xnm.aio.gateway.EventListener"):{log:function log(){}};}if(this._running1901&&this._socket1901)e&&e();else if(this._startCallbacks[1901]||(this._startCallbacks[1901]=[]),e&&-1==this._startCallbacks[1901].indexOf(e)&&this._startCallbacks[1901].push(e),!this._running1901){this._running1901=!0;var a=this;this._logger.log("debug","start listen to port 1901"),this._startPort(1901,function(e,t){e?(a._running1901=!1,a._logger.log("debug","failed to listen to port 1901:"+e.message)):(a._socket1901=t,a._logger.log("debug","listen to port 1901 success"));var n=a._startCallbacks[1901];delete a._startCallbacks[1901];for(var r=0;r<n.length;r++){n[r](e);}});}},stopPort1901:function stopPort1901(e){this._running1901=!1,this._socket1901&&(this._socket1901.close(),this._socket1901=null),e&&e();},_startPort:function _startPort(e,t){this._startUdpListener(e,function(e,a){t&&t(e,a);});},addListener:function addListener(e){if(e){for(var t=!1,a=0;a<this._listeners.length;a++){if(this._listeners[a]===e){t=!0;break;}}t||this._listeners.push(e);}},removeListener:function removeListener(e){if(e){for(var t=-1,a=0;a<this._listeners.length;a++){if(this._listeners[a]===e){t=a;break;}}-1!=t&&this._listeners.splice(t,1);}},_startUdpListener:function _startUdpListener(e,t){var a=this,n=t,r=require("dgram").createSocket({type:"udp4",reuseAddr:!0});r.on("listening",function(){r.setBroadcast&&r.setBroadcast(!0),a._logger.log("trace","aio gateway udp listener started at port:"+e),n&&(n(null,r),n=null);}),r.on("error",function(t){if(n)a._logger.log("trace","bind aio gateway udp listener at port:"+e+" error:"+t.stack),n(t),n=null;else{a._logger.log("trace","aio gateway udp listener at port:"+e+" error:"+t.stack),a.stop();for(var r=0;r<a._listeners.length;r++){a._listeners[r]&&a._listeners[r].onError&&a._listeners[r].onError(t);}}}),r.on("message",function(t,n){var r=t.toString();if(a._logger.log("trace","receive aio gateway udp message at port:"+e+" from:"+n.address+" data:"+r),r.length>10&&"{XC_EVT}"==r.substr(0,8))try{(o=JSON.parse(r.substr(8)))&&a._receivedUDPEvent(o,n,"EVT");}catch(e){}else if(r.length>4&&"EVT:"==r.substr(0,4))try{(o=JSON.parse(r.substr(4)))&&a._receivedUDPEvent(o,n,"EVT");}catch(e){}else if(r.length>4&&"STA:"==r.substr(0,4))try{(o=JSON.parse(r.substr(4)))&&a._receivedUDPEvent(o,n,"STA");}catch(e){}else if(r.length>5&&"GLOG:"==r.substr(0,5))try{var o;(o=JSON.parse(r.substr(5)))&&a._receivedUDPEvent(o,n,"GLOG");}catch(e){}else-1!==r.indexOf("V5PLUS_MESSAGE")&&a._receivedUDPEvent(r,n,"V5PLUS_MESSAGE");}),r.bind(e);},_receivedUDPEvent:function _receivedUDPEvent(e,t,a){for(var n=0;n<this._listeners.length;n++){this._listeners[n]&&this._listeners[n](e,t,a);}}},xnm.aio.gateway.DM={SYS:"aio",_logger:require("x.logger.js").getLogger("xnm.aio.gateway.DM"),GATEWAY_MAP:{led:{command:[{type:"enum",name:"LED on",ref:{value:"ledOn"}},{type:"enum",name:"LED off",ref:{value:"ledOff"}},{type:"enum",name:"LED white",ref:{value:"ledWhite"}},{type:"enum",name:"LED red",ref:{value:"ledRed"}},{type:"enum",name:"LED green",ref:{value:"ledGreen"}},{type:"enum",name:"LED blue",ref:{value:"ledBlue"}},{type:"enum",name:"LED yellow",ref:{value:"ledYellow"}},{type:"enum",name:"LED cyan",ref:{value:"ledCyan"}},{type:"enum",name:"LED purple",ref:{value:"ledPurple"}}]},remote_access:{command:[{type:"enum",name:"remote access on",ref:{value:"raOn"}},{type:"enum",name:"remote access off",ref:{value:"raOff"}},{type:"enum",name:"remote access auto",ref:{value:"raAuto"}}],status:[{type:"enum",name:"remote access setting",ref:{value:"raSetting",options:["off","on","auto"]}},{type:"enum",name:"remote access state",ref:{value:"raState",options:["local","remote"]}}]},cloud_forward:{command:[{type:"enum",name:"cloud forward on",ref:{value:"cfOn"}},{type:"enum",name:"cloud forward off",ref:{value:"cfOff"}},{type:"enum",name:"cloud forward toggle",ref:{value:"cfToggle"}}],status:[{type:"enum",name:"cloud forward setting",ref:{value:"cfSetting",options:["off","on"]}}]},alarm:{command:[{type:"enum",name:"absence mode on",ref:{value:"alarmAbsenceModeOn"}},{type:"enum",name:"absence mode off",ref:{value:"alarmAbsenceModeOff"}},{type:"enum",name:"presence mode on",ref:{value:"alarmPresenceModeOn"}},{type:"enum",name:"presence mode off",ref:{value:"alarmPresenceModeOff"}}],status:[{type:"enum",name:"absence mode",ref:{value:"absenceMode",options:["off","on"]}},{type:"enum",name:"presence mode",ref:{value:"presenceMode",options:["off","on"]}}]}},getGatewayType:function getGatewayType(){return[{sys:this.SYS,name:"AIO Gateway",gateway_vendor:"mediola"},{sys:this.SYS,name:"Siegenia Gateway",gateway_vendor:"siegenia"},{sys:this.SYS,name:"Internorm Gateway",gateway_vendor:"internorm"},{sys:this.SYS,name:"NUEVAINC Gateway",gateway_vendor:"nueva"},{sys:this.SYS,name:"Brelag Gateway",gateway_vendor:"brelag"},{sys:this.SYS,name:"WIR Gateway",gateway_vendor:"wir"},{sys:this.SYS,name:"Kopp Gateway",gateway_vendor:"kopp"},{sys:this.SYS,name:"SELVE Gateway",gateway_vendor:"selve"},{sys:this.SYS,name:"Eltako MiniSafe2",gateway_vendor:"eltako_minisafe2"}];},getGatewayDeviceType:function getGatewayDeviceType(e,t){var a=t.lm,n=t.license,r=[];for(var o in xnm.aio.gateway.systems){var s=xnm.aio.gateway.systems[o];if(s&&s.DM&&s.DM.getGatewayDeviceType&&xnm.aio.gateway.Gateway._supportSystem(e,s.DM.TYPE)){var i=s.DM.getGatewayDeviceType(e);if(i)if(Array.isArray(i)){for(var u=0;u<i.length;u++){i[u].sys=this.SYS;}r=r.concat(i);}else i.sys=this.SYS,r.push(i);}}var l=[];for(u=0;u<r.length;u++){a&&n?a.permitFeature("read",r[u],n,null,null,e)&&l.push(r[u]):l.push(r[u]);}return l;},getGatewayDeviceType2:function getGatewayDeviceType2(e,t,a){e=this._updateGatewayJson(e);var n=require("xnm.aio.gateway.js").resolveGateway(e);if(n){var r=this;n._getSI(function(n,o){!n&&o&&o.RFM&&(e.rfmode=o.RFM);var s=r.getGatewayDeviceType(e,t);a&&a(null,s);});}else{var o=this.getGatewayDeviceType(e,t);a&&a(null,o);}},applyUIFilter:function applyUIFilter(e,t,a,n,r){return this._applyFilter(e,t,r);},applyUIFilterGateway:function applyUIFilterGateway(e,t){var _contains=function _contains(e,t){if("*"==e)return!0;for(var a=!1,n=0;n<e.length;n++){if(e[n]==t){a=!0;break;}}return a;},_filter=function _filter(e,t){var a=[],n=t.elems,r=function(e){if(!e)return null;var t={command:[],status:[]};if(xnm.aio.gateway.Gateway._supportRemoteMode(e)&&(t.command=t.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.remote_access.command),t.status=t.status.concat(xnm.aio.gateway.DM.GATEWAY_MAP.remote_access.status)),"nueva"==e.gateway_vendor)t.command=t.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.led.command);else{switch(e.version){case"FA":case"FB":case"FC":case"E1":case"E2":case"C1":case"C2":case"C3":case"C4":t.command=t.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.led.command);break;case"EA":case"CA":t.command=t.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.led.command),t.command=t.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.cloud_forward.command),t.status=t.status.concat(xnm.aio.gateway.DM.GATEWAY_MAP.cloud_forward.status);}["C1","C2","C3","C4","CA"].indexOf(e.version)>=0&&xnm.aio.gateway.DM.GATEWAY_MAP.alarm&&(xnm.aio.gateway.DM.GATEWAY_MAP.alarm.command&&(t.command=t.command.concat(xnm.aio.gateway.DM.GATEWAY_MAP.alarm.command)),xnm.aio.gateway.DM.GATEWAY_MAP.alarm.status&&(t.status=t.status.concat(xnm.aio.gateway.DM.GATEWAY_MAP.alarm.status)));}return t;}(e);if(r)switch(t.catagory){case"command":r.command&&r.command.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});break;case"status":r.status&&r.status.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}return a;},a=JSON.parse(JSON.stringify(e)),n=null;switch(t.catagory){case"command":n=_filter(e,t),a.command=n;break;case"status":n=_filter(e,t),a.status=n;break;default:return null;}return n&&0!=n.length?a:null;},applyIPEventFilter:function applyIPEventFilter(e,t,a,n,r){return this._applyFilter(e,t,r);},_applyFilter:function _applyFilter(e,t,a){var _contains=function _contains(e,t){if("*"==e)return!0;for(var a=!1,n=0;n<e.length;n++){if(e[n]==t){a=!0;break;}}return a;};if(!e.sys)return null;var n=JSON.parse(JSON.stringify(e)),r=function(e,t,a){var n,r=[],o=null,s=xnm.aio.gateway.DM.getSystem(e,a);return"ipevt"==t.type?s&&s.DM&&s.DM.getIPevtMap&&(n=s.DM.getIPevtMap(e,a)):"action"==t.catagory&&s&&s.DM&&s.DM.getActionMap&&(n=s.DM.getActionMap(e)),n||s&&s.DM&&s.DM.getCommandStatusMap&&(n=s.DM.getCommandStatusMap(e,a)),n&&(o=function(e,t,a){var n=[];if("ipevt"==a.type)e.ipevt&&e.ipevt.forEach(function(e){var t=JSON.parse(JSON.stringify(e));n.push(t);});else switch(a.catagory){case"command":case"action":e.command&&e.command.forEach(function(e){if(_contains(a.elems,e.type)){var t=JSON.parse(JSON.stringify(e));n.push(t);}});break;case"status":e.status&&e.status.forEach(function(e){if(_contains(a.elems,e.type)){var t=JSON.parse(JSON.stringify(e));n.push(t);}});break;case"event":e.event&&e.event.forEach(function(e){var t=JSON.parse(JSON.stringify(e));n.push(t);});}return n;}(n,0,t),r=r.concat(o)),r;}(e,t,a);if("ipevt"==t.type)n.ipevt=r;else switch(t.catagory){case"command":case"action":n.command=r;break;case"status":n.status=r;break;case"event":n.event=r;}return r&&0!=r.length?n:null;},createGateway:function createGateway(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(e){if(e.ip){e.port||(e.port=80);var o=require("xnm.aio.gateway.js").resolveGateway(e);o?xnm.aio.gateway.Admin.getGatewaySID(o,function(t,n){!t&&n&&(e.sid=n),"eltako_minisafe2"===e.gateway_vendor&&(e.vid&&"000C"!==e.vid||e.version&&"C2"!==e.version)&&delete e.gateway_vendor,a(null,e);}):a(new n(r.INVALID,"json is invalid"));}else a(new n(r.INVALID,"ip is invalid"));}else a(new n(r.INVALID,"info is invalid"));},updateGateway:function updateGateway(e,t,a,n){var r=xnm.aio.gateway.DM.DMError,o=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(t){if(t.ip){t.port||(t.port=80);var s=require("xnm.aio.gateway.js").resolveGateway(t);s?xnm.aio.gateway.Admin.getGatewaySID(s,function(e,a){!e&&a&&(t.sid=a),"eltako_minisafe2"===t.gateway_vendor&&(t.vid&&"000C"!==t.vid||t.version&&"C2"!==t.version)&&delete t.gateway_vendor,n(null,t);}):n(new r(o.INVALID,"json is invalid"));}else n(new r(o.INVALID,"ip is invalid"));}else n(new r(o.INVALID,"update is invalid"));},deleteGateway:function deleteGateway(e,t,a){a();},createDevice:function createDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(e){if(e.gateway){if(e.type){if(t.data&&t.data.gateways&&0!==t.data.gateways.length){var o,s,i=t.data.gateways;for(o=0;o<i.length;o++){if(i[o].index===e.gateway){s=i[o];break;}}if(s){var u=this.getSystem(e,s.info);if(u&&u.DM&&u.DM.createDevice)u.DM.createDevice(e,t,a,require("xnm.aio.gateway.js").resolveGateway(s.info));else a(null,JSON.parse(JSON.stringify(e)));}else a(new n(r.NOT_FOUND,"gateway with index "+e.gateway+" not exists"));}else a(new n(r.NOT_FOUND,"gateway with index "+e.gateway+" not exists"));}else a(new n(r.INVALID,"type is invalid"));}else a(new n(r.INVALID,"gateway is invalid"));}else a(new n(r.INVALID,"info is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.gateway.DM.DMError,r=xnm.aio.gateway.DM.DMError.ERROR_CODE;if(e){if(e.type){var o=this.getSystem(e);if(o&&o.DM&&o.DM.updateDevice){var s=JSON.parse(JSON.stringify(e));if(!(t&&t.dm&&t.tenant&&t.tenant.index&&e&&e.gateway))return void(a&&a(null,s));var i={filter:"prop",index:e.gateway,"info.sys":"aio"};t.dm.execute("read",t.tenant.index,"gateway",i,function(n,r){if(!n&&r&&0!=r.length&&r[0]&&r[0].info){var i=require("xnm.aio.gateway.js").resolveGateway(r[0].info);o.DM.updateDevice(e,t,a,i);}else a&&a(null,s);});}else a(null,e);}else a(new n(r.INVALID,"type is invalid"));}else a(new n(r.INVALID,"info is invalid"));},deleteDevice:function deleteDevice(e,t,a){var n=this.getSystem(e);if(n&&n.DM&&n.DM.deleteDevice){var r=JSON.parse(JSON.stringify(e));if(!(t&&t.dm&&t.tenant&&t.tenant.index&&e&&e.gateway))return void(a&&a(null,r));var o={filter:"prop",index:e.gateway,"info.sys":"aio"};t.dm.execute("read",t.tenant.index,"gateway",o,function(o,s){if(!o&&s&&0!=s.length&&s[0]&&s[0].info){var i=require("xnm.aio.gateway.js").resolveGateway(s[0].info);n.DM.deleteDevice(i,e,t,a);}else a&&a(null,r);});}else a();},getSystem:function getSystem(e,t){var a=e.type;if("SI"!=a&&"SIAUG"!=a&&"SIAUR"!=a&&"SIAUD"!=a||(a="SIAU"),"KP"==a&&(a="KOPP"),"FS"==a&&(a="FS20"),"WS"==a&&(a="WS300"),"EL"!=a&&"EF"!=a||(a="ELRO"),"INSTA"==a&&(a="IA"),"HMFHT"==a&&(a="HM"),"HM"==a)return t&&"EA"==t.version||"v5+"==e._ver||e.data&&"ip_"==e.data.substr(0,3)?xnm.aio.gateway.systems.HM_X:xnm.aio.gateway.systems.HM;if(e.common_type)switch(e.common_type){case"grp":return xnm.aio.gateway.systems.DeviceGroup;case"gtw":case"dev":if(!e.mod)return null;for(var n in xnm.aio.gateway.systems){if((r=xnm.aio.gateway.systems[n])&&r.DM&&r.DM.TYPE&&r.DM.TYPE.toLowerCase()==e.mod.toLowerCase())return r;}return null;}if(!a)return null;for(var n in xnm.aio.gateway.systems){var r;if((r=xnm.aio.gateway.systems[n])&&r.DM&&r.DM.TYPE&&r.DM.TYPE.toLowerCase()==a.toLowerCase())return r;}return"HM-IP"===a?xnm.aio.gateway.systems.HM_X:null;},_updateGatewayJson:function _updateGatewayJson(e){var t;if(xnm.aio.gateway.Admin.detectedGateways&&(e.mac&&(t=xnm.aio.gateway.Admin.detectedGateways[e.mac]),!t))for(var a in xnm.aio.gateway.Admin.detectedGateways){if(xnm.aio.gateway.Admin.detectedGateways.hasOwnProperty(a)&&xnm.aio.gateway.Admin.detectedGateways[a].IP==e.ip){t=xnm.aio.gateway.Admin.detectedGateways[a];break;}}return t&&(e.mac=t.MAC,e.version=(t.HWV?t.HWV:"")+(t.SWV?t.SWV:""),t.VER&&(e.firmware=t.VER),t.RFM&&(e.rfmode=t.RFM),t.VID&&(e.vid=String(t.VID).toUpperCase())),e;},applySmartWidgetFilterForGateway:function applySmartWidgetFilterForGateway(e,t,a){if(!e||"aio"!==e.sys)return null;return this._injectToSmartWidgetTemplateForGateway(t,["gateway"],a,{"%ledOn%":{value:"ledOn",name:"LED on"},"%ledOff%":{value:"ledOff",name:"LED off"},"%ledWhite%":{value:"ledWhite",name:"LED white"},"%ledRed%":{value:"ledRed",name:"LED red"},"%ledGreen%":{value:"ledGreen",name:"LED green"},"%ledBlue%":{value:"ledBlue",name:"LED blue"},"%ledYellow%":{value:"ledYellow",name:"LED yellow"},"%ledCyan%":{value:"ledCyan",name:"LED cyan"},"%ledPurple%":{value:"ledPurple",name:"LED purple"},"%remoteOn%":{value:"raOn",name:"remote access on"},"%remoteOff%":{value:"raOff",name:"remote access off"},"%remoteAuto%":{value:"raAuto",name:"remote access auto"},"%cloudForwardOn%":{value:"cfOn",name:"cloud forward on"},"%cloudForwardOff%":{value:"cfOff",name:"cloud forward off"}},{"%remoteSetting%":{value:"raSetting",name:"remote access setting",options:["off","on","auto"]},"%remoteState%":{value:"raState",name:"remote access state",options:["local","remote"]},"%cloudForwardSetting%":{value:"cfSetting",name:"cloud forward setting",options:["off","on"]}});},_injectToSmartWidgetTemplateForGateway:function _injectToSmartWidgetTemplateForGateway(e,t,a,n,r){var o=[];e||(n={}),n||(n={}),r||(r={});for(var s=0;s<e.length;s++){var i=e[s];if(i.meta&&-1!=t.indexOf(i.meta.type)&&i.elements){var u=JSON.parse(JSON.stringify(i)),l=!1;for(var m in u.elements){var d=u.elements[m];if(d&&Array.isArray(d))for(var p=0;p<d.length;p++){var f=d[p];if(f){if(f.action&&"command"==f.action.type&&f.action.ref&&f.action.ref.value){var c=f.action.ref.ext;n[f.action.ref.value]?(f.action.ref=n[f.action.ref.value],c&&(f.action.ref.ext=c),f.action.gateway=a.name,f.action.device=a,l=!0):f.action=null;}f.status&&f.status.ref&&f.status.ref.value&&(r[f.status.ref.value]?(f.status.ref=r[f.status.ref.value],f.status.gateway=a.name,l=!0):f.status=null);}}}l&&o.push(u);}}return o;},toGeneralDevice:function toGeneralDevice(e,t,a){var n=this.getSystem(e);if(!n)return null;if(!n.DM||!n.DM.toGeneralDevice)return null;var r=n.DM.toGeneralDevice(e,t,a);return"v5"==a&&r&&(r.sys=e.type,r.address=e.address,r.data||(r.data={}),r.data.type=e.type,r.data.address=e.address,r.data.data=e.data,"dev"==e.common_type&&(r.data.did=e.id)),r;},supportSmartWidget:function supportSmartWidget(e,t){var a=this.getSystem(e);return a&&a.DM&&a.DM.supportSmartWidget?a.DM.supportSmartWidget(e,t):null;},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,n,r){var o=this.getSystem(t);return o&&o.DM&&o.DM.applySmartWidgetFilter?o.DM.applySmartWidgetFilter(e,t,a,n,r):null;}},xnm.aio.gateway.DM.DMError=function(e,t){this.code=e,this.message=t,this.stack=new Error().stack;},xnm.aio.gateway.DM.DMError.prototype=new Error(),xnm.aio.gateway.DM.DMError.prototype.name="AioGatewayDeviceManagerError",xnm.aio.gateway.DM.DMError.prototype.code=0,xnm.aio.gateway.DM.DMError.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,ID_EXISTS:2,INVALID:3,UNKNOW:4,NOT_FOUND:5,IP_EXISTS:6},xnm.aio.gateway.Handler.prototype.GatewayV5Plus=xnm.aio.gateway.GatewayV5Plus,xnm.aio.gateway.Handler.prototype.GatewayV6=xnm.aio.gateway.GatewayV6,xnm.aio.gateway.Handler.prototype.EventListener=xnm.aio.gateway.EventListener,xnm.aio.gateway.Handler.prototype.devicemanager=xnm.aio.gateway.DM,xnm.aio.gateway.Handler.prototype.registModule=function(e){e.register(xnm.aio.gateway.DM.SYS,"gateway");},xnm.aio.gateway.Handler.prototype.resolveGateway=function(e,t){if(!e.ip)return null;t||(e=xnm.aio.gateway.DM._updateGatewayJson(e));var a=null;return e.version&&("EA"==e.version.toUpperCase()?a=new xnm.aio.gateway.GatewayV5Plus(e.ip,e.port):"C"==e.version.toUpperCase().charAt(0)&&(a=new xnm.aio.gateway.GatewayV6(e.ip,e.port,e.version))),a||(a=new xnm.aio.gateway.Gateway(e.ip,e.port)),e.username&&(a.user=e.username),e.password&&(a.password=e.password),e.at&&(a._pwdHash=e.at),a._mac=e.mac,a._sid=e.sid,a._hwv=e.version?e.version.substr(0,2):"",a._swv=e.version&&e.version.length>=4?e.version.substr(2,2):"",a._ver=e.version,a._rfm=e.rfmode,a.gateway_vendor=e.gateway_vendor,a.revision=e.revision,a.ccs=e.server,a;},xnm.aio.gateway.Handler.prototype.getDeviceCommands=function(e,t){var a,n=(a=e&&e.ip?xnm.aio.gateway.DM.applyUIFilterGateway(e,{catagory:"command",elems:"*"}):xnm.aio.gateway.DM.applyUIFilter(e,{catagory:"command",elems:"*"}))?a.command:[];t&&t(null,n);},xnm.aio.gateway.Handler.prototype.getDeviceStatus=function(e,t){var a,n=(a=e&&e.ip?xnm.aio.gateway.DM.applyUIFilterGateway(e,{catagory:"status",elems:"*"}):xnm.aio.gateway.DM.applyUIFilter(e,{catagory:"status",elems:"*"}))?a.status:[];t&&t(null,n);},xnm.aio.gateway.Handler.prototype.generateTriggerCode=function(e,t){if(!e||!e.type||!t)return null;var a=xnm.aio.gateway.DM.getSystem({type:e.type});return a&&a.generateTriggerCode?e.type.toUpperCase()!=a.DM.TYPE.toUpperCase()?null:a.generateTriggerCode(t,e):null;},xnm.aio.gateway.Handler.prototype.generateActionCode=function(e,t){if(!e||!e.type||!t)return null;var a=xnm.aio.gateway.DM.getSystem({type:e.type});return a&&a.generateActionCode?e.type.toUpperCase()!=a.DM.TYPE.toUpperCase()?null:a.generateActionCode(t,e):null;},xnm.aio.gateway.Handler.prototype.parseActionCode=function(e,t,a){if(!e||!t.type||!t.code)return null;if(!e.type)return null;var n=t.type;"GROUP"==n&&(n="Event");var r=xnm.aio.gateway.DM.getSystem({type:n});return r&&r.parseActionCode?e.type.toUpperCase()!=r.DM.TYPE.toUpperCase()?null:"CODE"==t.type?r.parseActionCode(t,e):r.parseActionCode(t.code,e,a):null;},xnm.aio.gateway.Handler.prototype.parseTriggerCode=function(e,t,a){if(!t||!a)return null;var n=xnm.aio.gateway.DM.getSystem({type:t});return n&&n.parseTriggerCode?e.type.toUpperCase()!=n.DM.TYPE.toUpperCase()?null:n.parseTriggerCode(a,e):null;},xnm.aio.gateway.Handler.prototype.regist=function(e,t,a){var n=this.resolveGateway(e);n?n.regist(t,a):a&&a(new Error("gateway json format invalid"));},xnm.aio.gateway.Handler.prototype.doCommand=function(e,t,a,n){var r=this.resolveGateway(e);r?r.executeCommandCreator(t,a,n):n&&n(new Error("gateway json format invalid"));},xnm.aio.gateway.Handler.prototype.doStatus=function(e,t,a,n,r){var o=this.resolveGateway(t);if(o){var s=[{id:e,device:a,status:n}];o.getStatesCreator(null,s,function(e,t){e?r&&r(e):r&&r(null,t[0]);});}else r&&r(new Error("gateway json format invalid"));},xnm.aio.gateway.Handler.prototype.discoverWithTimeout=function(e,t,a){this._discoverCallbacks||(this._discoverCallbacks=[]);for(var n=!1,r=0;r<this._discoverCallbacks.length;r++){if(this._discoverCallbacks[r]===a){n=!0;break;}}if(!n&&a&&this._discoverCallbacks.push(a),!this.Admin.isDiscovering){var o=[];this.Admin.isDiscovering=!0,this.Admin.detectedGateways={},this.Admin.detectGateways(function(e){var a=new xnm.aio.gateway.Gateway(e.IP,e.PT);a._swv=e.SWV,a._hwv=e.HWV,a._name=e.NAME,a._mac=e.MAC,a._ver=e.VER,a._rfm=e.RFM,a._vid=e.VID,a._mode=e.MODE,t&&"mediola"!=t?"EA"==a._hwv&&"internorm"==t?o.push(a):a.getVendor(function(e,n){e||t!=n||o.push(a);}):o.push(a);});var s=this;setTimeout(function(){s.Admin.isDiscovering=!1;var e=s._discoverCallbacks;s._discoverCallbacks=[];for(var t=0;t<e.length;t++){var a=e[t];a&&a(null,o);}},e);}},xnm.aio.gateway.Handler.prototype.startGatewayEventListener=function(e,t){xnm.aio.gateway.EventListener.start(e,t);},xnm.aio.gateway.Handler.prototype.startGateway1901Listener=function(e){xnm.aio.gateway.EventListener.startPort1901(e);},xnm.aio.gateway.Handler.prototype.addGatewayEventListener=function(e){xnm.aio.gateway.EventListener.addListener(e);},xnm.aio.gateway.Handler.prototype.removeGatewayEventListener=function(e){xnm.aio.gateway.EventListener.removeListener(e);},xnm.aio.gateway.Handler.prototype.resolveGatewayUdpEvent=function(e,t){var a=t.type;if("SI"==a&&(a="SIAU"),"WS"==a&&(a="WS300"),"FS"==a&&(a="FS20"),"KP"==a&&(a="KOPP"),"EL"==a&&(a="ELRO"),e.type&&a&&e.type.toLowerCase()==a.toLowerCase()){var n=this.devicemanager.getSystem(e);return n&&n._handleUdpState?n._handleUdpState(e,t):null;}return null;},xnm.aio.gateway.Handler.prototype.supportIRcodeTrigger=function(e,t){var a=this.resolveGateway(e);a?t&&t(null,a._supportIrCodeTrigger()):t&&t(new Error("gateway json format invalid"));},xnm.aio.gateway.Handler.prototype.searchInternorm=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.IN.search(a,null,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.loginInternorm=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.IN.login(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.logoutInternorm=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.IN.logout(n,t,function(e){a&&a(e);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getINFreeAddresses=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.IN.getFreeAddresses(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.setRtLearnMode=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.RT.setLearnMode(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.teachRT=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.RT.teach(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnF3=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.F3.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnKopp=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KOPP.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnKoppDimmerStep2=function(e,t,a){if(t){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KOPP.learnDimmerStep2(n,t.address,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));}else a&&a(new Error("options is null"));},xnm.aio.gateway.Handler.prototype.delERsensor=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ER.delERsensor(n,t.address,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getERAddresses=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.ER.getERDevicesAddress(a,t):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getERDevicesFromGateway=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.ER.getERdevicesFromGateway(a,t):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.startLearnER=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ER.startLearnER(n,t.address,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnERUp=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ER.learnERUp(n,t.address,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnERStop=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ER.learnERStop(n,t.address,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnERDown=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ER.learnERDown(n,t.address,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.stopLearnER=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.ER.stopLearnER(a,t):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.teachEO=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.EO.teach(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.teachinENOCEAN=function(e,t,a){if(e){var n=this.resolveGateway(e);n?t&&t.qr?xnm.aio.gateway.systems.ENOCEAN.bindWithQr(n,t,function(e,t){a&&a(e,t);}):xnm.aio.gateway.systems.ENOCEAN.teachin(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnENOCEAN=function(e,t,a){if(e){var n=this.resolveGateway(e);n?t&&t.qr?xnm.aio.gateway.systems.ENOCEAN.bindWithQr(n,t,function(e,t){a&&a(e,t);}):xnm.aio.gateway.systems.ENOCEAN.learn(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.remoteCommissioningENOCEAN=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ENOCEAN.remoteCommissioning(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.genVirtualENOCEAN=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ENOCEAN.genVirtualDevice(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.addENOCEAN=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ENOCEAN.addSensor(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.updateENOCEAN=function(e,t,a,n){if(e){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.ENOCEAN.updateSensor(r,t,a,function(e,t){n&&n(e,t);}):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnR2=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.R2.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.addSensorR2=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.R2.addSensor(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnSIAU=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.SIAU.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnRoiscok=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.RC.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getQATimeSettings=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.QA.getTimeSettings(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.setQATimeSettings=function(e,t,a,n){if(e){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.QA.setupTimeSettings(r,t,a,n):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnKN=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KN.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.teachFX3=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.FX3.teach(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnFX3=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.FX3.learn(a,null,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.paringBK=function(e,t,a,n){if(e){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.BK.pairing(r,t,a,n):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.paringBK2=function(e,t,a){if(e){if(t&&t.address){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.BK.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device format is invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.unparingBK=function(e,t,a,n){if(e){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.BK.unpairing(r,t,a,n):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getSysVars=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems._SysVar.getSysVars(a,t):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.configHMBlind=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.HM.configBlind(n,t,function(e){a&&a(e);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnHmIPDevice=function(e,t,a){if(e){var n=this.resolveGateway(e);n?t.qrkey||t&&t.key&&t.sgtin?xnm.aio.gateway.systems.HM_X.learn(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("key or sgtin invalid")):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getHMConfig=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.HM_X.getHMConfig(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.setHMConfig=function(e,t,a,n){if(e){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.HM_X.setHMConfig(r,t,a,function(e){n&&n(e);}):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getHomematicDevices=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.HM_X.listDevices(a,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.searchKnxIpGateways=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.KNX.searchKnxIpGateway(a,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getKnxIpGateways=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.KNX.getKnxIpGateways(a,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.addKnxIpGateways=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KNX.addKnxIpGateway(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("knx ip gateway json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.updateKnxIpGateways=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KNX.updateKnxIpGateway(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("knx ip gateway json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.deleteKnxIpGateways=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KNX.deleteKnxIpGateway(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("knx ip gateway json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getKnxDevices=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.KNX.getKnxDevices(a,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.addKnxDevice=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KNX.addKnxDevice(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("knx device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.updateKnxDevice=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KNX.updateKnxDevice(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("knx device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.deleteKnxDevice=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.KNX.deleteKnxDevice(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("knx device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getZigbeeDevices=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.ZIGBEE.listDevices(a,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.forcePollDevices=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.ZWAVE2.forcePollDevices(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getZwaveDevices=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.ZWAVE2.listDevices(a,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnBrelag=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.BG.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.addBrelagWeatherStation=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.BG.addWeatherStation(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getDeviceInfo=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.BG.getDeviceInfo(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getGroups=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.BG.getGroups(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.saveDeviceConfig=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.BG.saveDeviceConfig(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.saveDeviceGroup=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.BG.saveDeviceGroup(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnWR=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.WR.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnHU=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.HU.learn(n,t,a):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.importDeviceFromSelveGateway=function(e,t){var _mapCmState=function _mapCmState(e){switch(e.deviceType){case"00":return function(e){return{sys:"aio",sid:e.sid,type:e.type,data:e.eType&&e.eType>15?"switch":"blind",eType:e.eType,address:e.adr,deviceType:e.deviceType};}(e);case"01":return function(e){for(var t=["wind_state","light_state","temp_state","rain_state"],a=[],n=0;n<t.length;n++){e.state&&0!=e.state[t[n]]&&a.push(t[n]);}return{sys:"aio",sid:e.sid,type:e.type,data:"sensor",address:e.adr,sensors:a,deviceType:e.deviceType};}(e);default:return null;}},_mapHmState=function _mapHmState(e){e.deviceType;switch(e.deviceType){case"ip_contact":"window";break;case"ip_switch":"switch";}return{sys:"hm",sid:e.sid,data:e.deviceType,type:"HM",address:e.adr,_ver:"v5+"};},_mapIvState=function _mapIvState(e){return{sid:e.sid,sys:"aio",type:e.type,data:"blind",address:e.adr,_target:"shutter"};},_mapSgroupState=function _mapSgroupState(e){return{sid:e.sid,sys:"aio",type:"SGROUP",address:e.adr,data:"02"==e.deviceType?"blind":"switch",deviceType:e.deviceType,system:e.sys,name:e.name};},_getStateMapper=function _getStateMapper(e){switch(e.type){case"HM":return _mapHmState;case"CM":return _mapCmState;case"IV":return _mapIvState;case"SGROUP":return _mapSgroupState;default:return null;}};if(e){var a=this.resolveGateway(e);a?a._executeRequest("getStates",{config:1},null,function(e,a){if(e)t&&t(e);else if(a&&Array.isArray(a)&&a.length){for(var n=a.filter(function(e){return"HM"==e.type||"CM"==e.type||"IV"==e.type||"SGROUP"==e.type;}),r=[],o=0;o<n.length;o++){var s=_getStateMapper(n[o])(n[o]);s&&r.push(s);}t&&t(null,r);}else t&&t(null,[]);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.addDevice=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.addSensor(n,t.address,t.deviceType,function(e){a&&a(e);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.deleteDevice=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.delSensor(n,t.address,function(e){a&&a(e);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnCM=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.learn(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getConfigCM=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.getConfig(n,t.address,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.setGeneralConfigCM=function(e,t,a,n){if(e){if(t){if(a){if(Object.keys(a).length>1)n&&n(new Error("mutilple config parameter"));else{var r=Object.keys(a)[0],o=this.resolveGateway(e);o?xnm.aio.gateway.systems.CM.setConfig(o,t.address,a,function(e,t){e?n&&n(e):t&&"1"==t[r]?n&&n(null,!0):n&&n(null,!1);}):n&&n(new Error("gateway format invalid"));}}else n&&n(new Error("config json is null"));}else n&&n(new Error("device json is null"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.setRuntimeConfigCM=function(e,t,a,n){if(e){if(t){if(a){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.CM.setConfig(r,t.address,{runtime:a},function(e,t){n&&n(e,t);}):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("config json is null"));}else n&&n(new Error("device json is null"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getSysCM=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.CM.getSys(a,function(e,a){t&&t(e,a);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.setSysCM=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.setSys(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("settings json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.resetDevice=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.resetDevice(n,t.sid,function(e){a&&a(e);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("settings json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.resetSystem=function(e,t){if(e){var a=this.resolveGateway(e);a?xnm.aio.gateway.systems.CM.resetSystem(a,function(e){t&&t(e);}):t&&t(new Error("gateway format invalid"));}else t&&t(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.link=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.link(n,t.sid,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.manualLink=function(e,t,a,n){if(e){if(t){if(a){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.CM.manualLink(r,t.sid,a.address,function(e,t){n&&n(e,t);}):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("sensor json is null"));}else n&&n(new Error("device json is null"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getLink=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.getLink(n,t.sid,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.removeLink=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.removeLink(n,t.sid,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getLinkConfig=function(e,t,a){if(e){if(t){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.CM.getLinkConfig(n,t.sid,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("device json is null"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.setLinkConfig=function(e,t,a,n){if(e){if(t){if(a){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.CM.setLinkConfig(r,t.sid,a,function(e,t){n&&n(e,t);}):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("config json is null"));}else n&&n(new Error("device json is null"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.getGroups=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.SGROUP.getGroups(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.createGroup=function(e,t,a,n,r){if(e){var o=this.resolveGateway(e);o?xnm.aio.gateway.systems.SGROUP.createGroup(o,t,a,n,function(e,t){r&&r(e,t);}):r&&r(new Error("gateway format invalid"));}else r&&r(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.deleteGroup=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.SGROUP.deleteGroup(n,t,function(e){a&&a(e);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.addDeviceToGroup=function(e,t,a,n){if(e){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.SGROUP.addDeviceToGroup(r,t,a,function(e){n&&n(e);}):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.removeDeviceFromGroup=function(e,t,a,n){if(e){var r=this.resolveGateway(e);r?xnm.aio.gateway.systems.SGROUP.removeDeviceFromGroup(r,t,a,function(e){n&&n(e);}):n&&n(new Error("gateway format invalid"));}else n&&n(new Error("gateway json is null"));},xnm.aio.gateway.Handler.prototype.learnMIPDevice=function(e,t,a){if(e){var n=this.resolveGateway(e);n?xnm.aio.gateway.systems.MIP.learn(n,t,function(e,t){a&&a(e,t);}):a&&a(new Error("gateway format invalid"));}else a&&a(new Error("gateway json is null"));},"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new xnm.aio.gateway.Handler());