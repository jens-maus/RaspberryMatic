var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.push=xnm.aio.push||{};
xnm.aio.push.Handler=function(){var g="http://webservice.aio-control.com/pushservice",f=function(){};f.prototype.setURL=function(a){g=a};f.prototype.PUSH_TYPE={GCM:0,APNS:1,APNS_SANDBOX:2,ADM:3,IN_APNS:4,IN_APNS_SANDBOX:5};f.prototype.getDeviceToken=function(a){XC.callHost("pushservice","getDeviceToken",null,function(c){c.error?a&&a(Error(c.error)):a(null,c.token)})};f.prototype.registDevice=function(a,c,d,b){if(a)if(c){switch(d){case this.PUSH_TYPE.GCM:var e="GCM";break;case this.PUSH_TYPE.APNS:e=
"APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:e="APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:e="ADM";break;case this.PUSH_TYPE.IN_APNS:e="IN_APNS";break;case this.PUSH_TYPE.IN_APNS_SANDBOX:e="IN_APNS_SANDBOX";break;default:b&&b(Error("no such push type"))}d=g+"/registDevice?";a={sid:a.toUpperCase(),token:c,type:e};d+=$.param(a);$.ajax({url:d,timeout:4E3,cache:!1,dataType:"json",success:function(a){a&&a.arn?b&&b(null,a.arn):b&&b(Error("regist device response invalid"))},error:function(a,c,e){b&&b(Error(c))}})}else b&&
b(Error("token invalid"));else b&&b(Error("sid invalid"))};f.prototype.deleteDevice=function(a,c,d,b){if(a)if(c){switch(d){case this.PUSH_TYPE.GCM:var e="GCM";break;case this.PUSH_TYPE.APNS:e="APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:e="APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:e="ADM";break;default:b&&b(Error("no such push type"))}d=g+"/deleteDevice?";a={sid:a.toUpperCase(),token:c,type:e};d+=$.param(a);$.ajax({url:d,timeout:4E3,cache:!1,dataType:"json",success:function(){b&&b(null)},error:function(a,
c,e){b&&b(Error(c))}})}else b&&b(Error("token invalid"));else b&&b(Error("sid invalid"))};f.prototype.getRegistedDevice=function(a,c){if(a){var d=g+"/getDevice?";a={sid:a.toUpperCase()};d+=$.param(a);$.ajax({url:d,timeout:4E3,cache:!1,dataType:"json",success:function(b){b?c&&c(null,b):c&&c(Error("regist device response invalid"))},error:function(b,a,d){c&&c(Error(a))}})}else c&&c(Error("sid invalid"))};return f}();"undefined"!=typeof module&&null!=module&&(module.exports=new xnm.aio.push.Handler);
